!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioCKEditor=e()}(function(){return function n(o,i,u){function c(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(a)return a(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return c(o[t][1][e]||e)},r,r.exports,n,o,i,u)}return i[t].exports}for(var a="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,r){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var i;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=o?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("react")),o=(n=e("prop-types"))&&n.__esModule?n:{default:n};function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r);return e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==u(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,i.Component);var e,t,r,n=l(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return e=o,r=[{key:"styles",get:function(){return{textarea:{width:"100%"}}}}],(t=[{key:"componentDidMount",value:function(){var e=this.props,t=(e.pydio,e.url,e.content),r=e.config,n=e.onChange;this.textarea.id;this.textarea.value=t,CKEDITOR.replace(this.textarea,r).on("change",function(e){e=e.editor;return n(e.getData())})}},{key:"componentWillUnmount",value:function(){var e=this.textarea.id;CKEDITOR.instances[e]&&(this.textarea.value=CKEDITOR.instances[e].getData(),CKEDITOR.instances[e].destroy())}},{key:"render",value:function(){var t=this,e=this.props.url,r=o.styles.textarea,e=LangUtils.computeStringSlug(e);return i.default.createElement("textarea",{ref:function(e){return t.textarea=e},key:e,style:r})}}])&&a(e.prototype,t),r&&a(e,r),o}();p.propTypes={url:o.default.string.isRequired},r.default=p,t.exports=r.default},{"prop-types":"prop-types",react:"react"}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.onSave=void 0;var n,o=(n=e("pydio"))&&n.__esModule?n:{default:n};var i=o.default.requireLib("hoc").EditorActions;r.onSave=function(e){var t=e.tab,r=e.dispatch;return function(){return o.default.getInstance().ApiClient.postPlainTextContent(t.node,t.content,function(e){e||r(i.tabModify({id:t.id,error:"There was an error while saving"}))})}}},{pydio:"pydio"}],3:[function(e,t,r){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(e("pydio")),a=c(e("react")),i=c(e("prop-types")),u=e("react-redux"),f=(e("redux"),c(e("./CKEditor")));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(r);return e=n?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function b(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?y(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var h=n.default.requireLib("hoc").EditorActions,n=(0,u.connect)(null,h)(n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,a["default"].Component);var e,t,r,n=p(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),n.apply(this,arguments)}return e=c,r=[{key:"propTypes",get:function(){return{showControls:i.default.bool.isRequired}}},{key:"defaultProps",get:function(){return{showControls:!1}}},{key:"base",get:function(){return{resize_enabled:!1,toolbar:"Ajxp",contentsCss:"../../res/ckeditor.css",filebrowserBrowseUrl:"index.php?external_selector_type=ckeditor",filebrowserImageBrowseUrl:"index.php?external_selector_type=ckeditor",filebrowserFlashBrowseUrl:"index.php?external_selector_type=ckeditor",language:pydio.currentLanguage,fullPage:!0}}},{key:"config",get:function(){return{basePath:"".concat(DOMUtils.getUrlFromBase(),"plug/editor.ckeditor/res/dist/ckeditor/"),desktop:b(b({},c.base),{},{toolbar_Ajxp:[["Source","Preview","Templates"],["Undo","Redo","-","Cut","Copy","Paste","PasteText","PasteFromWord","-","Print","SpellChecker","Scayt"],["Find","Replace","-","SelectAll","RemoveFormat"],["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"],"/",["Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent","Blockquote"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link","Unlink","Anchor"],["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"],"/",["Styles","Format","Font","FontSize"],["TextColor","BGColor"],["Maximize","ShowBlocks","-","About"]]}),mobile:b(b({},c.base),{},{toolbar_Ajxp:[["Bold","Italic","Underline","-","NumberedList","BulletedList"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]]})}}}],(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.pydio,r=e.node,n=e.tab,o=e.dispatch,i=n.id,n=this.props.editorModify;n&&this.props.isActive&&n({fixedToolbar:!0}),t.ApiClient.getPlainContent(r,function(e){o(h.tabModify({id:i,editable:!0,content:e,node:r}))})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.editorModify;t&&e.isActive&&t({fixedToolbar:!0})}},{key:"render",value:function(){var e=this.props,t=e.pydio,r=e.node,n=e.tab,o=e.dispatch,i=c.config,e=i.desktop,i=i.mobile,u=n.id,n=n.content;return n?a.default.createElement(f.default,{url:r.getPath(),content:n,config:t.UI.MOBILE_EXTENSIONS?i:e,onChange:function(e){return o(h.tabModify({id:u,content:e}))}}):null}}])&&l(e.prototype,t),r&&l(e,r),c}())||n;CKEDITOR.basePath=n.config.basePath,CKEDITOR.contentsCss=n.config.basePath+"../../res/css/ckeditor.css";n=(0,u.connect)(function(e,r){e=e.tabs.filter(function(e){var t=e.editorData,e=e.node;return(!t||t.id===r.editorData.id)&&e.getPath()===r.node.getPath()})[0]||{};return b({id:e.id,tab:e},r)})(n);r.default=n,t.exports=r.default},{"./CKEditor":1,"prop-types":"prop-types",pydio:"pydio",react:"react","react-redux":"react-redux",redux:"redux"}],4:[function(e,t,r){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Editor",{enumerable:!0,get:function(){return o.default}}),r.Actions=void 0;var n,o=(n=e("./editor"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var i;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=o?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("./actions"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}r.Actions=i},{"./actions":2,"./editor":3}]},{},[4])(4)});