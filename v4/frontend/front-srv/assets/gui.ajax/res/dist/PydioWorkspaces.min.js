!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioWorkspaces=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(u)return u(i,!0);throw(p=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",p}p=n[i]={exports:{}},e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var OpenNodesModel=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(OpenNodesModel,Observable);var Constructor,protoProps,staticProps,_super=_createSuper(OpenNodesModel);function OpenNodesModel(){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OpenNodesModel),(_this=_super.call(this))._openNodes=[],_this._updatedTitles=new Map,pydio.UI.registerEditorOpener(_assertThisInitialized(_this)),pydio.observe("repository_list_refreshed",function(){_this._openNodes=[],_this.notify("update",_this._openNodes)}),_this}return Constructor=OpenNodesModel,staticProps=[{key:"getInstance",value:function(){return OpenNodesModel.__INSTANCE=!OpenNodesModel.__INSTANCE?new OpenNodesModel:OpenNodesModel.__INSTANCE}}],(protoProps=[{key:"openEditorForNode",value:function(selectedNode,editorData){this.pushNode(selectedNode,editorData)}},{key:"updateNodeTitle",value:function(object,newTitle){this._updatedTitles.set(object,newTitle),this.notify("titlesUpdated")}},{key:"getObjectLabel",value:function(object){return this._updatedTitles.has(object)?this._updatedTitles.get(object):object.node.getLabel()}},{key:"pushNode",value:function(node,editorData){var found=!1,editorClass=editorData?editorData.editorClass:null,object={node:node,editorData:editorData};this.notify("willPushNode",object),this._openNodes.map(function(o){(o.node===node&&o.editorData&&o.editorData.editorClass==editorClass||!o.editorData&&!editorClass)&&(found=!0,object=o)}),found||this._openNodes.push(object),this.notify("nodePushed",object),this.notify("update",this._openNodes)}},{key:"removeNode",value:function(object){this.notify("willRemoveNode",object);var index=this._openNodes.indexOf(object);this._updatedTitles.has(object)&&this._updatedTitles.delete(object),this._openNodes=LangUtils.arrayWithout(this._openNodes,index),this.notify("nodeRemovedAtIndex",index),this.notify("update",this._openNodes)}},{key:"getNodes",value:function(){return this._openNodes}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),OpenNodesModel}();exports.default=OpenNodesModel,module.exports=exports.default},{}],2:[function(FileInfoCard,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(FileInfoCard("react")),_pydio=_interopRequireDefault(FileInfoCard("pydio")),_InfoPanelCard=_interopRequireDefault(FileInfoCard("./InfoPanelCard")),_path=_interopRequireDefault(FileInfoCard("pydio/util/path"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var PydioContextConsumer=_pydio.default.requireLib("boot").PydioContextConsumer,FileInfoCard=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(FileInfoCard,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(FileInfoCard);function FileInfoCard(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FileInfoCard),(_this=_super.call(this,props))._observer=function(){_this.forceUpdate()},props.node&&props.node.observe("node_replaced",_this._observer),_this}return Constructor=FileInfoCard,(protoProps=[{key:"componentWillReceiveProps",value:function(newProps){this.props.node&&this.props.node.stopObserving("node_replaced",this._observer),newProps.node&&newProps.node.observe("node_replaced",this._observer)}},{key:"componentWillUnmount",value:function(){this.props.node&&this.props.node.stopObserving("node_replaced",this._observer)}},{key:"render",value:function(){var data=this.props,w=data.node,getMessage=data.getMessage,h=w.getMetadata(),size=h.get("bytesize"),hSize=_path.default.roundFileSize(parseInt(size)),data=_pydio.default.getMessages().byte_unit_symbol||"B",w=new Date;w.setTime(1e3*parseInt(h.get("ajxp_modiftime")));w=_path.default.formatModifDate(w),data=[{key:"size",label:getMessage("2"),value:hSize,hoverValue:size+" "+data},{key:"date",label:getMessage("4"),value:w}],w=h.get("image_width"),h=h.get("image_height");return w&&h&&(data=[].concat(_toConsumableArray(data),[{key:"image",label:getMessage("135"),value:w+"px X "+h+"px"}])),_react.default.createElement(_InfoPanelCard.default,_extends({},this.props,{identifier:"file-info",title:getMessage("341"),standardData:data,contentStyle:{paddingBottom:10},icon:"information-outline",iconColor:"#2196f3"}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),FileInfoCard}();exports.default=FileInfoCard,exports.default=FileInfoCard=PydioContextConsumer(FileInfoCard),module.exports=exports.default},{"./InfoPanelCard":5,pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],3:[function(GenericInfoCard,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(GenericInfoCard("react")),_InfoPanelCard=_interopRequireDefault(GenericInfoCard("./InfoPanelCard")),_FilePreview=_interopRequireDefault(GenericInfoCard("../views/FilePreview"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}GenericInfoCard=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(GenericInfoCard,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(GenericInfoCard);function GenericInfoCard(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GenericInfoCard),(_this=_super.call(this,props)).state=_this.build(props),_this}return Constructor=GenericInfoCard,(protoProps=[{key:"componentWillReceiveProps",value:function(nextProps){this.setState(this.build(nextProps))}},{key:"build",value:function(nodes){var isMultiple,isLeaf,isDir,recycleContext,node=nodes.node,nodes=nodes.nodes;if(nodes)isMultiple=!0,recycleContext=nodes[0].hasAjxpMimeInBranch("ajxp_recycle");else{if(!node)return{ready:!1};isDir=!(isLeaf=node.isLeaf()),recycleContext=node.hasAjxpMimeInBranch("ajxp_recycle")}return{isMultiple:isMultiple,isLeaf:isLeaf,isDir:isDir,recycleContext:recycleContext,ready:!0}}},{key:"render",value:function(){var recycleContext=this.state,toolbars=recycleContext.ready,nodes=recycleContext.isMultiple,recycleContext=recycleContext.recycleContext;if(!toolbars)return null;toolbars=[];if(recycleContext?toolbars.push("info_panel_recycle"):toolbars.push("info_panel"),nodes){nodes=this.props.nodes;return 10<nodes.length&&(processing=nodes.length-10,nodes=nodes.slice(0,10),processing=_react.default.createElement("div",null,"... and ",processing," more.")),_react.default.createElement(_InfoPanelCard.default,_extends({},this.props,{primaryToolbars:toolbars}),_react.default.createElement("div",{style:{padding:"0"}},nodes.map(function(node){return _react.default.createElement("div",{style:{display:"flex",alignItems:"center",borderBottom:"1px solid #eeeeee"}},_react.default.createElement(_FilePreview.default,{key:node.getPath(),style:{height:50,width:50,fontSize:25,flexShrink:0},node:node,loadThumbnail:!0,richPreview:!1}),_react.default.createElement("div",{style:{flex:1,fontSize:14,marginLeft:6,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},node.getLabel()))}),processing))}var processing=!!this.props.node.getMetadata().get("Processing");return toolbars.push("info_panel_share"),_react.default.createElement(_InfoPanelCard.default,_extends({},this.props,{primaryToolbars:toolbars}),_react.default.createElement(_FilePreview.default,{key:this.props.node.getPath(),style:{backgroundColor:"white",height:200,padding:0},node:this.props.node,loadThumbnail:this.state.isLeaf&&!processing,richPreview:this.state.isLeaf,processing:processing}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),GenericInfoCard}();exports.default=GenericInfoCard,module.exports=exports.default},{"../views/FilePreview":42,"./InfoPanelCard":5,react:"react"}],4:[function(withVerticalScroll,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(withVerticalScroll("prop-types")),_react=_interopRequireDefault(withVerticalScroll("react")),_pydio=_interopRequireDefault(withVerticalScroll("pydio")),_xml=_interopRequireDefault(withVerticalScroll("pydio/util/xml")),_materialUi=withVerticalScroll("material-ui");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function Template(children){var id=children.id,style=children.style,children=children.children;return _react.default.createElement(_materialUi.Paper,{zDepth:0,rounded:!1,id:id,style:_objectSpread({backgroundColor:"transparent"},style)},children)}var InfoPanel=_pydio.default.requireLib("hoc"),withVerticalScroll=(InfoPanel.Animations,InfoPanel.withVerticalScroll),EmptyStateView=_pydio.default.requireLib("components").EmptyStateView,InfoPanel=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(InfoPanel,_react["default"].Component);var _super=_createSuper(InfoPanel);function InfoPanel(initTemplates){_classCallCheck(this,InfoPanel);var _this=_super.call(this,initTemplates),initTemplates=ConfigsParser.parseConfigs();return _this._updateExpected=!0,_this.state={templates:initTemplates,displayData:_this.selectionToTemplates(initTemplates)},_this}return _createClass(InfoPanel,[{key:"shouldComponentUpdate",value:function(){return this._updateExpected}},{key:"componentDidMount",value:function(){function scrollerRefresh(){try{_this2.context.scrollArea.refresh()}catch(e){}}var _this2=this;this._updateHandler=function(){_this2._updateExpected=!0,_this2.setState({displayData:_this2.selectionToTemplates()},function(){_this2._updateExpected=!1,_this2.context.scrollArea&&setTimeout(scrollerRefresh,750)})},this._componentConfigHandler=function(){_this2._updateExpected=!0,_this2.setState({templates:ConfigsParser.parseConfigs()},function(){_this2._updateExpected=!1,_this2.context.scrollArea&&setTimeout(scrollerRefresh,750)})},this.props.pydio.observe("actions_refreshed",this._updateHandler),this.props.pydio.observe("selection_reloaded",this._updateHandler),this.props.pydio.observe("registry_loaded",this._componentConfigHandler),this.state.displayData&&this.state.displayData.TEMPLATES&&this.props.onContentChange&&this.props.onContentChange(this.state.displayData.TEMPLATES.length)}},{key:"componentWillUnmount",value:function(){this.props.pydio.stopObserving("actions_refreshed",this._updateHandler),this.props.pydio.observe("selection_reloaded",this._updateHandler),this.props.pydio.stopObserving("registry_loaded",this._componentConfigHandler)}},{key:"selectionToTemplates",value:function(){var initTemplates=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,refTemplates=initTemplates||this.state.templates,data=this.props.dataModel,selection=data.getSelectedNodes();selection&&selection.length||data.getContextNode()!==data.getRootNode()||(selection=[data.getContextNode()]);var primaryMime,uniqueNode,templates=[],data={};return!selection||selection.length<1?primaryMime="no_selection":1<selection.length?(primaryMime="generic_multiple",data.nodes=selection):((uniqueNode=selection[0]).isLeaf()?primaryMime="generic_file":(primaryMime="generic_dir",this.props.dataModel.getRootNode()===uniqueNode&&(primaryMime="ajxp_root_node")),data.node=uniqueNode),refTemplates.has(primaryMime)&&(templates=templates.concat(refTemplates.get(primaryMime))),uniqueNode&&refTemplates.forEach(function(list,mimeName){mimeName!==primaryMime&&(0===mimeName.indexOf("meta:")&&uniqueNode.getMetadata().has(mimeName.substr(5))||uniqueNode.getAjxpMime()===mimeName)&&(templates=templates.concat(list))}),this.props.onContentChange&&!initTemplates&&this.props.onContentChange(templates.length),templates.sort(function(a,b){return a.WEIGHT===b.WEIGHT?0:a.WEIGHT>b.WEIGHT?1:-1}),{TEMPLATES:templates,DATA:data}}},{key:"render",value:function(){var _this3=this,mainEmptyStateProps=this.props.mainEmptyStateProps,displayData=this.state.displayData,templates=displayData.TEMPLATES.map(function(namespace,i){var component=namespace.COMPONENT,name=_slicedToArray(component.split(".",2),2),namespace=name[0],name=name[1];return _react.default.createElement(PydioReactUI.AsyncComponent,_extends({},displayData.DATA,_this3.props,{key:"ip_"+component,namespace:namespace,componentName:name}))});return!templates.length&&mainEmptyStateProps&&templates.push(_react.default.createElement(EmptyStateView,mainEmptyStateProps)),_react.default.createElement(Template,{style:this.props.style},templates)}}]),InfoPanel}();(exports.default=InfoPanel).propTypes={dataModel:_propTypes.default.instanceOf(PydioDataModel).isRequired,pydio:_propTypes.default.instanceOf(_pydio.default).isRequired,style:_propTypes.default.object},InfoPanel.contextTypes={scrollArea:_propTypes.default.object},exports.default=InfoPanel=withVerticalScroll(InfoPanel,{id:"info_panel"});var ConfigsParser=function(){function ConfigsParser(){_classCallCheck(this,ConfigsParser)}return _createClass(ConfigsParser,null,[{key:"parseConfigs",value:function(){var panelsNodes=_xml.default.XPathSelectNodes(pydio.getXmlRegistry(),'client_configs/component_config[@component="InfoPanel"]/infoPanel'),panels=new Map;return panelsNodes.forEach(function(node){var mimes,component;node.getAttribute("reactComponent")&&(mimes=node.getAttribute("mime").split(","),component=node.getAttribute("reactComponent"),mimes.map(function(mime){panels.has(mime)||panels.set(mime,[]),panels.get(mime).push({COMPONENT:component,THEME:node.getAttribute("theme"),ATTRIBUTES:node.getAttribute("attributes"),WEIGHT:node.getAttribute("weight")?parseInt(node.getAttribute("weight")):0})}))}),panels}}]),ConfigsParser}();module.exports=exports.default},{"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/util/xml":"pydio/util/xml",react:"react"}],5:[function(InfoPanelCard,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(InfoPanelCard("prop-types")),_react=_interopRequireDefault(InfoPanelCard("react")),_color=_interopRequireDefault(InfoPanelCard("color")),_materialUi=InfoPanelCard("material-ui"),_styles=InfoPanelCard("material-ui/styles");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var storageKey="pydio.layout.infoPanel.cardStatuses",CardsStates={};if(localStorage.getItem(storageKey))try{CardsStates=JSON.parse(localStorage.getItem(storageKey))}catch(e){}InfoPanelCard=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(InfoPanelCard,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(InfoPanelCard);function InfoPanelCard(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InfoPanelCard),_this=_super.call(this,props),props.popoverPanel?_this.state={open:!0}:props.identifier&&void 0!==CardsStates[props.identifier]?_this.state={open:CardsStates[props.identifier]}:props.identifier?_this.state={open:props.defaultOpen||!1}:_this.state={open:!0},_this}return Constructor=InfoPanelCard,(protoProps=[{key:"toggle",value:function(){var newState=!this.state.open;this.setState({open:newState}),this.props.identifier&&(CardsStates[this.props.identifier]=newState,localStorage.setItem(storageKey,JSON.stringify(CardsStates)))}},{key:"render",value:function(){var _this2=this,title=this.state,open=title.open,hoverRow=title.hoverRow,styles=this.props,primaryToolbars=styles.primaryToolbars,colorHue=styles.muiTheme,pydio=styles.pydio,standardData=styles.standardData,title=styles.popoverPanel,styles=(styles=colorHue.palette,colorHue=(0,_color.default)(styles.primary1Color).hsl().array()[0],{card:{panel:{backgroundColor:"white",borderRadius:6,boxShadow:"rgba(0, 0, 0, .15) 0px 0px 12px",margin:10,overflow:"hidden"},header:{backgroundColor:"transparent",position:"relative",color:new _color.default({h:colorHue,s:30,l:43}).toString(),fontSize:14,fontWeight:500,padding:"12px 16px",cursor:"pointer"},content:{backgroundColor:"transparent",paddingBottom:0},headerIcon:{position:"absolute",top:-1,right:0,color:"#ccc"},actions:{padding:2,textAlign:"right",borderTop:"1px solid #e0e0e0"}},toolbar:{container:{justifyContent:"flex-end",position:"relative",borderTop:"1px solid rgba(0,0,0,.15)"},button:{color:styles.accent2Color,paddingRight:8,paddingLeft:8},fabButton:{backgroundColor:"#009688"},flatButton:{minWidth:0}}});title=title?this.props.title?_react.default.createElement(_materialUi.Paper,{zDepth:0,style:_objectSpread(_objectSpread({},styles.card.header),{},{cursor:"default"})},this.props.title):null:(actions=_react.default.createElement("div",{style:styles.card.headerIcon},_react.default.createElement(_materialUi.IconButton,{onClick:function(){_this2.toggle()},iconStyle:{color:styles.card.headerIcon.color},iconClassName:"mdi mdi-chevron-"+(open?"up":"down")})),this.props.title?_react.default.createElement(_materialUi.Paper,{zDepth:0,style:styles.card.header,onClick:function(){_this2.toggle()}},actions,this.props.title):null);var rows,toolBar,actions=this.props.actions?_react.default.createElement("div",{style:styles.card.actions},this.props.actions):null;return standardData&&(rows=standardData.map(function(hoverValue){var key=hoverValue.key,label=hoverValue.label,value=hoverValue.value,hoverValue=hoverValue.hoverValue;return _react.default.createElement("div",{className:"infoPanelRow",key:key},_react.default.createElement("div",{className:"infoPanelLabel"},label),_react.default.createElement("div",{className:"infoPanelValue",onMouseOver:function(){return _this2.setState({hoverRow:key})},onMouseOut:function(){return _this2.setState({hoverRow:null})}},hoverValue&&hoverRow===key?hoverValue:value))})),primaryToolbars&&(toolBar=_react.default.createElement(PydioComponents.Toolbar,{toolbarStyle:styles.toolbar.container,flatButtonStyle:styles.toolbar.flatButton,fabButtonStyle:styles.toolbar.fabButton,buttonStyle:styles.toolbar.button,className:"primaryToolbar",renderingType:"button",toolbars:primaryToolbars,controller:pydio.getController(),fabAction:"share",buttonMenuNoLabel:!0,buttonMenuPopoverDirection:"right"})),_react.default.createElement(_materialUi.Paper,{zDepth:1,className:"panelCard",style:_objectSpread(_objectSpread({},styles.card.panel),this.props.style)},title,open&&_react.default.createElement("div",{className:"panelContent",style:_objectSpread(_objectSpread({},styles.card.content),this.props.contentStyle)},this.props.children,rows,toolBar),open&&actions)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),InfoPanelCard}();(exports.default=InfoPanelCard).PropTypes={identifier:_propTypes.default.string,title:_propTypes.default.string,actions:_propTypes.default.array},exports.default=InfoPanelCard=(0,_styles.muiThemeable)()(InfoPanelCard),module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",react:"react"}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_default=_interopRequireDefault(require("create-react-class")),_InfoPanelCard=_interopRequireDefault(require("./InfoPanelCard"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}_default=(0,_default.default)({displayName:"RootNode",getInitialState:function(){return{repoKey:null}},componentDidMount:function(){this.loadData(this.props)},componentWillReceiveProps:function(nextProps){nextProps.pydio.user&&nextProps.pydio.user.activeRepository!==this.state.repoKey&&this.loadData(nextProps)},loadData:function(repoKey){var cacheService,oThis,data;repoKey.pydio.user&&((cacheService=MetaCacheService.getInstance()).registerMetaStream("workspace.info","MANUAL_TRIGGER"),oThis=this,repoKey=pydio.user.getActiveRepository(),this.setState({repoKey:repoKey}),cacheService.hasKey("workspace.info",repoKey)?(data=cacheService.getByKey("workspace.info",repoKey),oThis.setState(_objectSpread({},data["core.users"]))):FuncUtils.bufferCallback("ajxp_load_repo_info_timer",700,function(){oThis.isMounted()}))},render:function(){var panelData,messages=this.props.pydio.MessageHash,internal=messages[528],external=messages[530];messages[527];return this.state&&this.state.users&&(panelData=[{key:"internal",label:internal,value:this.state.users},{key:"external",label:external,value:this.state.groups}]),_react.default.createElement(_InfoPanelCard.default,{identifier:"file-info",title:messages[249],style:this.props.style,standardData:panelData,icon:"account-multiple-outline",iconColor:"00838f"},void 0)}});exports.default=_default,module.exports=exports.default},{"./InfoPanelCard":5,"create-react-class":"create-react-class",react:"react"}],7:[function(App,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var withContainerSize=_interopRequireDefault(App("pydio")),_reactRedux=App("react-redux"),_editor=App("./components/editor"),_menu=App("./components/menu"),_excluded=(_interopRequireDefault(App("./make-editor-open")),["displayToolbar"]);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols)for(var sourceSymbolKeys=Object.getOwnPropertySymbols(source),i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key]);return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var App=withContainerSize.default.requireLib("hoc"),withContainerSize=App.withContainerSize,App=App.EditorActions,App=withContainerSize(App=(0,_reactRedux.connect)(function(displayToolbar,ownProps){var isMinimised=displayToolbar.editor,tabs=displayToolbar.tabs,displayToolbar=isMinimised.isMinimised,isMinimised=void 0!==displayToolbar&&displayToolbar,displayToolbar=ownProps.displayToolbar,displayToolbar=void 0===displayToolbar||displayToolbar;return _objectSpread(_objectSpread({},_objectWithoutProperties(ownProps,_excluded)),{},{tabs:tabs,isOpen:0<tabs.filter(function(_ref){return _ref.editorData}).length,isMinimised:isMinimised,displayToolbar:displayToolbar})},App)(App=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(App,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(App);function App(editorSetActiveTab){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,App);var _this=_super.call(this,editorSetActiveTab),editorModify=editorSetActiveTab.editorModify,editorSetActiveTab=editorSetActiveTab.editorSetActiveTab;return editorModify({isOpen:!1}),editorSetActiveTab(null),_this.state={fullBrowserScreen:pydio.UI.MOBILE_EXTENSIONS||!0},_this.onFullBrowserScreen=function(){return _this.setState({fullBrowserScreen:!_this.state.fullBrowserScreen})},_this}return Constructor=App,(protoProps=[{key:"render",value:function(){var fullBrowserScreen=this.props,isOpen=fullBrowserScreen.isOpen,isMinimised=fullBrowserScreen.isMinimised,displayToolbar=fullBrowserScreen.displayToolbar,buttonCenterPositionLeft=fullBrowserScreen.documentWidth,buttonCenterPositionTop=fullBrowserScreen.documentHeight,fullBrowserScreen=this.state.fullBrowserScreen;if(!isOpen)return null;buttonCenterPositionTop-=50,buttonCenterPositionLeft-=50;return React.createElement("div",{style:{position:"fixed",top:0,left:0,zIndex:1400}},!isMinimised&&React.createElement("div",{style:{position:"fixed",top:0,bottom:0,right:0,left:0,background:"#000000",opacity:"0.8",transition:"opacity .5s ease-in"}}),React.createElement(_editor.Editor,{displayToolbar:displayToolbar,style:{position:"fixed",top:fullBrowserScreen?0:"1%",left:fullBrowserScreen?0:"1%",right:fullBrowserScreen?0:"15%",bottom:fullBrowserScreen?0:"1%"},minimiseStyle:{transformOrigin:buttonCenterPositionLeft+"px "+buttonCenterPositionTop+"px"}}),isMinimised&&React.createElement(_menu.Menu,{style:{position:"fixed",top:buttonCenterPositionTop,left:buttonCenterPositionLeft,cursor:"pointer",transform:"translate(-50%, -50%)",zIndex:5}}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),App}())||App)||App;exports.default=App,module.exports=exports.default},{"./components/editor":12,"./components/menu":18,"./make-editor-open":22,pydio:"pydio","react-redux":"react-redux"}],8:[function(withMouseTracker,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var withSelectionControls=_interopRequireDefault(withMouseTracker("pydio")),_reactRedux=withMouseTracker("react-redux"),_materialUi=withMouseTracker("material-ui"),_EditorTab=_interopRequireDefault(withMouseTracker("./EditorTab")),_EditorToolbar=_interopRequireDefault(withMouseTracker("./EditorToolbar")),_EditorButton=_interopRequireDefault(withMouseTracker("./EditorButton"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var EditorActions=withSelectionControls.default.requireLib("hoc"),getActiveTab=EditorActions.getActiveTab,Editor=EditorActions.makeMotion,makeTransitionHOC=EditorActions.makeTransitionHOC,withMouseTracker=EditorActions.withMouseTracker,withSelectionControls=EditorActions.withSelectionControls,EditorActions=EditorActions.EditorActions,styles={selectionButtonLeft:{zIndex:3,position:"absolute",top:"calc(50% - 18px)",left:"40px"},selectionButtonRight:{zIndex:3,position:"absolute",top:"calc(50% - 18px)",right:"40px"},iconSelectionButton:{borderRadius:"50%",width:"36px",height:"36px",lineHeight:"36px",backgroundColor:"rgb(0, 0, 0, 0.87)",color:"rgb(255, 255,255, 0.87)"},toolbar:{default:{top:0,left:0,right:0,flexShrink:0}}};Editor=makeTransitionHOC({translateY:800},{translateY:0})(Editor=withMouseTracker()(Editor=withSelectionControls(Editor=(0,_reactRedux.connect)(function(state,ownProps){var fixedToolbar=state.editor,focusOnSelection=void 0===fixedToolbar?{}:fixedToolbar,isMinimised=state.tabs,tabs=void 0===isMinimised?[]:isMinimised,fixedToolbar=focusOnSelection.isMinimised,isMinimised=void 0!==fixedToolbar&&fixedToolbar,fixedToolbar=focusOnSelection.fixedToolbar,fixedToolbar=void 0!==fixedToolbar&&fixedToolbar,focusOnSelection=focusOnSelection.focusOnSelection,focusOnSelection=void 0!==focusOnSelection&&focusOnSelection;return _objectSpread(_objectSpread({},ownProps),{},{fixedToolbar:fixedToolbar,hideToolbar:!ownProps.displayToolbar||!fixedToolbar&&focusOnSelection&&!ownProps.isNearTop,hideSelectionControls:!ownProps.browseable||focusOnSelection&&!ownProps.isNearTop&&!ownProps.isNearLeft&&!ownProps.isNearRight,activeTab:getActiveTab(state),tabs:tabs,isMinimised:isMinimised})},EditorActions)(Editor=Editor({scale:1},{scale:0},{check:function(props){return props.isMinimised},style:function(props){return props.minimiseStyle}})(Editor=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Editor,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(Editor);function Editor(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Editor),_super.apply(this,arguments)}return Constructor=Editor,(protoProps=[{key:"handleBlurOnSelection",value:function(e){(0,this.props.editorModify)({focusOnSelection:!1})}},{key:"handleFocusOnSelection",value:function(e){return(0,this.props.editorModify)({focusOnSelection:!0}),e.preventDefault(),e.stopPropagation(),!1}},{key:"renderChild",value:function(){var activeTab=this.props.activeTab;return React.createElement(_EditorTab.default,{id:activeTab.id})}},{key:"render",value:function(){var _this=this,parentStyle=this.props,toolbarStyle=parentStyle.style,paperStyle=parentStyle.activeTab,fixedToolbar=parentStyle.fixedToolbar,hideToolbar=parentStyle.hideToolbar,tabDeleteAll=parentStyle.tabDeleteAll,hideSelectionControls=parentStyle.hideSelectionControls,prevSelectionDisabled=parentStyle.prevSelectionDisabled,nextSelectionDisabled=parentStyle.nextSelectionDisabled,onSelectPrev=parentStyle.onSelectPrev,onSelectNext=parentStyle.onSelectNext,parentStyle={display:"flex",flex:1,overflow:"hidden",width:"100%",height:"100%",position:"relative"};paperStyle||(parentStyle=_objectSpread(_objectSpread({},parentStyle),{},{alignItems:"center",justifyContent:"center"}));var keyPress,paperStyle=_objectSpread({display:"flex",flexDirection:"column",overflow:"hidden",width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:0},toolbarStyle),toolbarStyle=styles.toolbar.default;return(onSelectNext||onSelectPrev)&&(keyPress=function(e){if("ArrowLeft"===e.key&&onSelectPrev&&!prevSelectionDisabled)try{onSelectPrev()}catch(e){}else if("ArrowRight"===e.key&&onSelectNext&&!nextSelectionDisabled)try{onSelectNext()}catch(e){}else"Escape"===e.key&&tabDeleteAll&&tabDeleteAll()}),React.createElement(_materialUi.Paper,{zDepth:5,style:paperStyle,onClick:function(e){return _this.handleBlurOnSelection(e)},tabIndex:"-1",onKeyDown:keyPress},!hideToolbar&&React.createElement(_EditorToolbar.default,{style:toolbarStyle,display:fixedToolbar?"fixed":"removable"}),React.createElement("div",{className:"body",style:parentStyle,onClick:function(e){return _this.handleFocusOnSelection(e)}},this.props.transitionEnded&&this.renderChild()),!hideSelectionControls&&onSelectPrev&&React.createElement(_EditorButton.default,{iconClassName:"mdi mdi-chevron-left",style:styles.selectionButtonLeft,iconStyle:styles.iconSelectionButton,disabled:prevSelectionDisabled,onClick:function(){return onSelectPrev()}}),!hideSelectionControls&&onSelectNext&&React.createElement(_EditorButton.default,{iconClassName:"mdi mdi-chevron-right",style:styles.selectionButtonRight,iconStyle:styles.iconSelectionButton,disabled:nextSelectionDisabled,onClick:function(){return onSelectNext()}}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Editor}())||Editor)||Editor)||Editor)||Editor)||Editor;exports.default=Editor,module.exports=exports.default},{"./EditorButton":9,"./EditorTab":10,"./EditorToolbar":11,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],9:[function(EditorButton,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var IconButton=EditorButton("material-ui").IconButton,_Pydio$requireLib=Pydio.requireLib("hoc"),EditorButton=_Pydio$requireLib.makeTransitionHOC,EditorButton=(0,_Pydio$requireLib.withHideDisabled)()(EditorButton=EditorButton({opacity:0},{opacity:1})(EditorButton=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(EditorButton,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(EditorButton);function EditorButton(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditorButton),_super.apply(this,arguments)}return Constructor=EditorButton,(protoProps=[{key:"render",value:function(){return React.createElement(IconButton,this.props)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),EditorButton}())||EditorButton)||EditorButton;exports.default=EditorButton,module.exports=exports.default},{"material-ui":"material-ui"}],10:[function(withSizeControls,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var withAutoPlayControls=_interopRequireDefault(withSizeControls("pydio")),_materialUi=withSizeControls("material-ui"),_class=withSizeControls("react-redux"),_reactDraggable=_interopRequireDefault(withSizeControls("react-draggable")),_makeMaximise=(withSizeControls("redux"),_interopRequireDefault(withSizeControls("./make-maximise"))),_excluded=(_interopRequireDefault(withSizeControls("lodash")),["readonly","size","scale","playing","resolution","onAutoPlayToggle","onSizeChange","onResolutionToggle"]);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols)for(var sourceSymbolKeys=Object.getOwnPropertySymbols(source),i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var withResolutionControls=withAutoPlayControls.default.requireLib("hoc"),Tab=withResolutionControls.EditorActions,getActiveTab=(withResolutionControls.ResolutionActions,withResolutionControls.ContentActions,withResolutionControls.SizeActions,withResolutionControls.SelectionActions,withResolutionControls.LocalisationActions,withResolutionControls.getActiveTab),getEditorResolution=withResolutionControls.getEditorResolution,withContentControls=(withResolutionControls.withMenu,withResolutionControls.withContentControls),withSizeControls=withResolutionControls.withSizeControls,withAutoPlayControls=withResolutionControls.withAutoPlayControls,withResolutionControls=withResolutionControls.withResolutionControls,styles={textField:{width:150,marginRight:40},textInput:{color:"rgba(255, 255,255, 0.87)"},textHint:{color:"rgba(255, 255,255, 0.67)"},iconButton:{backgroundColor:"rgba(0, 0, 0, 0.87)",color:"rgba(255, 255, 255, 0.87)",fill:"rgba(255, 255, 255, 0.87)"},divider:{backgroundColor:"rgba(255, 255,255, 0.87)",marginLeft:"12px",marginRight:"12px",alignSelf:"center"}},Tab=(0,_class.connect)(mapStateToProps,Tab)(Tab=function(){_inherits(Tab,React.PureComponent);var _super2=_createSuper(Tab);function Tab(){return _classCallCheck(this,Tab),_super2.apply(this,arguments)}return _createClass(Tab,[{key:"render",value:function(){var Editor=this.props.Editor,select=this.props,id=select.id,node=select.node,snackbarMessage=select.snackbarMessage,editorData=select.editorData,isActive=select.isActive,cardStyle=(select.style,this.props),editorSetActiveTab=cardStyle.editorSetActiveTab,tabModify=cardStyle.tabModify;if(!Editor)return null;select=function(){return editorSetActiveTab(id)},cardStyle={display:"flex",height:"40%",flex:1,margin:0,overflow:"hidden",whiteSpace:"nowrap",backgroundColor:"transparent",borderRadius:0};return isActive?React.createElement(AnimatedCard,{style:cardStyle,containerStyle:Tab.styles.container,maximised:!0,expanded:isActive,onExpandChange:isActive?null:select},React.createElement(Editor,{pydio:pydio,node:node,editorData:editorData,isActive:isActive}),React.createElement(BottomBar,{id:id,style:Tab.styles.toolbar}),React.createElement(_materialUi.Snackbar,{style:{left:"10%",bottom:24},open:""!==snackbarMessage,autoHideDuration:3e3,onRequestClose:function(){return tabModify({id:id,message:""})},message:React.createElement("span",null,snackbarMessage)})):React.createElement(AnimatedCard,{style:cardStyle,containerStyle:Tab.styles.container,maximised:isActive,expanded:isActive,onExpandChange:isActive?null:select},React.createElement(_materialUi.CardHeader,{title:id,actAsExpander:!0,showExpandableButton:!0}),React.createElement(_materialUi.CardMedia,{style:Tab.styles.child,mediaStyle:Tab.styles.child},React.createElement(Editor,{pydio:pydio,node:node,editorData:editorData,isActive:isActive})))}}],[{key:"styles",get:function(){return{container:{display:"flex",flex:1,flexFlow:"column nowrap",overflow:"auto",alignItems:"center"},child:{display:"flex",flex:1},toolbar:{backgroundColor:"rgb(0, 0, 0)",color:"rgba(255, 255, 255, 0.87)",width:"min-content",margin:"0 auto",padding:0,position:"absolute",bottom:24,height:48,borderRadius:3,alignSelf:"center"}}}}]),Tab}())||Tab;exports.default=Tab;var BottomBar=withContentControls(_class=withAutoPlayControls(_class=withSizeControls(_class=withResolutionControls(_class=(0,_class.connect)(mapStateToProps)(_class=function(){_inherits(BottomBar,React.Component);var _super=_createSuper(BottomBar);function BottomBar(scale){_classCallCheck(this,BottomBar);var _this=_super.call(this,scale),size=scale.size,scale=scale.scale;return _this.state={minusDisabled:scale-.5<=0,magnifyDisabled:"contain"==size,plusDisabled:20<=scale+.5},_this}return _createClass(BottomBar,[{key:"componentWillReceiveProps",value:function(scale){var size=scale.size,scale=scale.scale;this.setState({minusDisabled:scale-.5<=0,magnifyDisabled:"contain"==size,plusDisabled:20<=scale+.5})}},{key:"render",value:function(){var searchable=this.state,redoable=searchable.minusDisabled,minusDisabled=void 0!==redoable&&redoable,saveDisabled=searchable.magnifyDisabled,magnifyDisabled=void 0!==saveDisabled&&saveDisabled,undoDisabled=searchable.plusDisabled,plusDisabled=void 0!==undoDisabled&&undoDisabled,resizable=(searchable.searchString,searchable.searchJump,this.props),playable=resizable.readonly,scale=(resizable.size,resizable.scale),editable=resizable.playing,playing=void 0!==editable&&editable,resolution=resizable.resolution,onAutoPlayToggle=resizable.onAutoPlayToggle,onSizeChange=resizable.onSizeChange,onResolutionToggle=resizable.onResolutionToggle,remaining=_objectWithoutProperties(resizable,_excluded),editortools=this.props,saveable=editortools.saveable,undoable=editortools.undoable,redoable=editortools.redoable,onSave=editortools.onSave,onUndo=editortools.onUndo,onRedo=editortools.onRedo,saveDisabled=editortools.saveDisabled,undoDisabled=editortools.undoDisabled,redoDisabled=editortools.redoDisabled,searchable=this.props,onToggleLineNumbers=searchable.onToggleLineNumbers,onToggleLineWrapping=searchable.onToggleLineWrapping,hdable=this.props,onSearch=hdable.onSearch,onJumpTo=hdable.onJumpTo,editable=(saveable||undoable||redoable)&&!playable,resizable=this.props,editortools=resizable.editortools,searchable=resizable.searchable,hdable=this.props.hdable,playable=this.props.playable,resizable=this.props.resizable;return editable||editortools||searchable||hdable||playable||resizable?React.createElement(_reactDraggable.default,null,React.createElement(_materialUi.Toolbar,remaining,playable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi "+(playing?"mdi-pause":"mdi-play"),iconStyle:styles.iconButton,onClick:function(){return onAutoPlayToggle()}})),playable&&resizable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),resizable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-minus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"auto",scale:scale-.5})},disabled:minusDisabled}),React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-magnify-minus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"contain"})},disabled:magnifyDisabled}),React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-plus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"auto",scale:scale+.5})},disabled:plusDisabled})),(playable||resizable)&&hdable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),hdable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi "+("hi"==resolution?"mdi-quality-high":"mdi-image"),iconStyle:styles.iconButton,onClick:function(){return onResolutionToggle()}})),(playable||resizable||hdable)&&editable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),editable&&React.createElement(_materialUi.ToolbarGroup,null,saveable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-content-save",iconStyle:styles.iconButton,onClick:function(){return onSave()},disabled:saveDisabled}),undoable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-undo",iconStyle:styles.iconButton,onClick:function(){return onUndo()},disabled:undoDisabled}),redoable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-redo",iconStyle:styles.iconButton,onClick:function(){return onRedo()},disabled:redoDisabled})),(playable||resizable||hdable||editable)&&editortools&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),editortools&&React.createElement(_materialUi.ToolbarGroup,null,onToggleLineNumbers&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-format-list-numbers",iconStyle:styles.iconButton,onClick:function(){return onToggleLineNumbers()}}),onToggleLineWrapping&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-wrap",iconStyle:styles.iconButton,onClick:function(){return onToggleLineWrapping()}})),(playable||resizable||hdable||editable||editortools)&&searchable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),searchable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.TextField,{onMouseDown:function(e){return e.stopPropagation()},onKeyUp:function(target){var key=target.key,target=target.target;return"Enter"===key&&onJumpTo(target.value)},hintText:"Jump to Line",style:styles.textField,hintStyle:styles.textHint,inputStyle:styles.textInput}),React.createElement(_materialUi.TextField,{onMouseDown:function(e){return e.stopPropagation()},onKeyUp:function(target){var key=target.key,target=target.target;return"Enter"===key&&onSearch(target.value)},hintText:"Search...",style:styles.textField,hintStyle:styles.textHint,inputStyle:styles.textInput})))):null}}]),BottomBar}())||_class)||_class)||_class)||_class)||_class;function mapStateToProps(state,ownProps){var editor=state.editor,current=getActiveTab(state),message=current.readonly,readonly=void 0===message||message,editorClass=current.message,message=void 0===editorClass?"":editorClass,editorClass=current.editorData,editorClass=FuncUtils.getFunctionByName((void 0===editorClass?{editorClass:""}:editorClass).editorClass,window);return editorClass?_objectSpread(_objectSpread(_objectSpread({},ownProps),current),{},{resolution:getEditorResolution(state),isActive:editor.activeTabId===current.id,snackbarMessage:message,readonly:readonly,Editor:editorClass.Editor,Controls:editorClass.Controls,Actions:editorClass.Actions}):_objectSpread(_objectSpread({},ownProps),current)}var AnimatedCard=(0,_makeMaximise.default)(_materialUi.Card);module.exports=exports.default},{"./make-maximise":13,lodash:55,"material-ui":"material-ui",pydio:"pydio","react-draggable":"react-draggable","react-redux":"react-redux",redux:"redux"}],11:[function(makeTransitionHOC,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(makeTransitionHOC("react")),_pydio=_interopRequireDefault(makeTransitionHOC("pydio")),_api=_interopRequireDefault(makeTransitionHOC("pydio/http/api")),_dataModel=_interopRequireDefault(makeTransitionHOC("pydio/model/data-model")),_reactRedux=makeTransitionHOC("react-redux"),_materialUi=makeTransitionHOC("material-ui");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var ModalAppBar=PydioComponents.ModalAppBar,EditorToolbar=_pydio.default.requireLib("hoc"),getActiveTab=EditorToolbar.getActiveTab,makeTransitionHOC=EditorToolbar.makeTransitionHOC,EditorToolbar=EditorToolbar.EditorActions,EditorToolbar=makeTransitionHOC({translateY:-60,opacity:0},{translateY:0,opacity:1})(EditorToolbar=(0,_reactRedux.connect)(function(tab,ownProps){tab=getActiveTab(tab);return _objectSpread(_objectSpread({},ownProps),{},{title:tab.title,node:tab.node})},EditorToolbar)(EditorToolbar=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(EditorToolbar,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(EditorToolbar);function EditorToolbar(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditorToolbar),_super.apply(this,arguments)}return Constructor=EditorToolbar,(protoProps=[{key:"onClose",value:function(){(0,this.props.tabDeleteAll)()}},{key:"onMinimise",value:function(){(0,this.props.editorModify)({isMinimised:!0})}},{key:"render",value:function(){var spanStyle,onDL,_this=this,innerStyle=this.props,title=innerStyle.title,className=innerStyle.className,a=innerStyle.style,display=innerStyle.display,node=innerStyle.node,mainStyle={},innerStyle={};"fixed"===display?(mainStyle=_objectSpread({position:"relative",backgroundColor:"#424242",boxShadow:"none"},a),innerStyle={color:"#FFFFFF",fill:"#FFFFFF"},spanStyle={color:"#FFFFFF"}):(mainStyle=_objectSpread({position:"absolute",background:"linear-gradient(to bottom,rgba(0,0,0,0.65) 0%,transparent 100%)",boxShadow:"none"},a),innerStyle={color:"#FFFFFF",fill:"#FFFFFF"});a=_pydio.default.getInstance().getController().getActionByName("download");return!a||a.deny||a.contextHidden||(onDL=function(){var selection=new _dataModel.default(!0);selection.setSelectedNodes([node]),_api.default.getClient().downloadSelection(selection)}),_react.default.createElement(ModalAppBar,{className:className,style:mainStyle,title:_react.default.createElement("span",{style:spanStyle},title),titleStyle:{innerStyle:innerStyle,fontSize:16},iconElementLeft:_react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-arrow-left",iconStyle:innerStyle,touch:!0,onClick:function(){return _this.onClose()}}),iconElementRight:_react.default.createElement(_materialUi.ToolbarGroup,null,onDL&&_react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-download",iconStyle:innerStyle,touch:!0,onClick:onDL,tooltip:_pydio.default.getMessages()[88],tooltipPosition:"bottom-left"}),_react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-window-minimize",iconStyle:innerStyle,touch:!0,onClick:function(){return _this.onMinimise()}}))})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),EditorToolbar}())||EditorToolbar)||EditorToolbar;exports.default=EditorToolbar,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/data-model":"pydio/model/data-model",react:"react","react-redux":"react-redux"}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Editor",{enumerable:!0,get:function(){return _Editor.default}}),Object.defineProperty(exports,"EditorTab",{enumerable:!0,get:function(){return _EditorTab.default}});var _Editor=_interopRequireDefault(require("./Editor")),_EditorTab=_interopRequireDefault(require("./EditorTab"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./Editor":8,"./EditorTab":10}],13:[function(_default,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reactMotion=_default("react-motion");function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var getDisplayName=Pydio.requireLib("hoc").Utils.getDisplayName,ANIMATION={stiffness:400,damping:30},_default=function(Target){return function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(_class,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(_class);function _class(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,_class),(_this=_super.call(this,props)).state={maximised:props.maximised},_this}return Constructor=_class,staticProps=[{key:"displayName",get:function(){return"MakeMaximise(".concat(getDisplayName(Target),")")}}],(protoProps=[{key:"componentWillReceiveProps",value:function(nextProps){this.setState({maximised:nextProps.maximised})}},{key:"render",value:function(){var _this2=this,maximised=this.props.style,style=void 0===maximised?{}:maximised,motionStyle=style.width,width=void 0===motionStyle?"0":motionStyle,maximised=style.height,motionStyle=void 0===maximised?"0":maximised,maximised=this.state.maximised,motionStyle={width:maximised?(0,_reactMotion.spring)(100,ANIMATION):(0,_reactMotion.spring)(parseInt(width.replace(/%$/,"")),ANIMATION),height:maximised?(0,_reactMotion.spring)(100,ANIMATION):(0,_reactMotion.spring)(parseInt(motionStyle.replace(/%$/,"")),ANIMATION)};return React.createElement(_reactMotion.Motion,{style:motionStyle},function(height){var width=height.width,height=height.height;return React.createElement(Target,_extends({},_this2.props,{style:_objectSpread(_objectSpread({},style),{},{width:"".concat(width,"%"),height:"".concat(height,"%"),transition:"none"})}))})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),_class}()};exports.default=_default,module.exports=exports.default},{"react-motion":72}],14:[function(EditorActions,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ConnectedButton=_interopRequireDefault(EditorActions("pydio")),_reactRedux=EditorActions("react-redux"),_materialUi=EditorActions("material-ui"),_makeRotate=_interopRequireDefault(EditorActions("./make-rotate"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}EditorActions=ConnectedButton.default.requireLib("hoc").EditorActions,ConnectedButton=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Button,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(Button);function Button(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Button),_super.apply(this,arguments)}return Constructor=Button,(protoProps=[{key:"render",value:function(){var iconClassName=this.props.rotated?"mdi mdi-close":"mdi mdi-animation";return React.createElement(_materialUi.FloatingActionButton,_extends({},this.props,{iconClassName:iconClassName}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Button}(),ConnectedButton=(0,_makeRotate.default)(ConnectedButton);ConnectedButton=(0,_reactRedux.connect)(function(state,ownProps){return _objectSpread({},state.editor.menu)},EditorActions)(ConnectedButton);exports.default=ConnectedButton,module.exports=exports.default},{"./make-rotate":20,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],15:[function(EditorActions,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ConnectedMenu=_interopRequireDefault(EditorActions("pydio")),_reactRedux=EditorActions("react-redux"),_MainButton=_interopRequireDefault(EditorActions("./MainButton")),_MenuGroup=_interopRequireDefault(EditorActions("./MenuGroup")),_MenuItem=_interopRequireDefault(EditorActions("./MenuItem"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}EditorActions=ConnectedMenu.default.requireLib("hoc").EditorActions,ConnectedMenu=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Menu,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(Menu);function Menu(props){var _this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Menu),(_this=_super.call(this,props)).state={ready:!1};var editorModify=props.editorModify;return _this.toggle=function(){return editorModify({isMenuActive:!_this.props.isActive})},_this}return Constructor=Menu,(protoProps=[{key:"renderChild",value:function(){var tabs=this.props,isActive=tabs.isActive,tabs=tabs.tabs;return isActive?tabs.map(function(tab){return React.createElement(_MenuItem.default,{key:tab.id,id:tab.id,style:_objectSpread({},{position:"absolute",top:0,left:0,right:0,bottom:0,transition:"transform 0.3s ease-in"})})}):null}},{key:"render",value:function(){var isActive=this.props,style=isActive.style,isActive=isActive.isActive;return React.createElement("div",null,React.createElement(_MenuGroup.default,{style:style},this.renderChild()),React.createElement(_MainButton.default,{ref:"button",open:isActive,style:style,onClick:this.toggle}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Menu}();ConnectedMenu=(0,_reactRedux.connect)(function(activeTab,ownProps){var editor=activeTab.editor,tabs=activeTab.tabs,activeTab=tabs.filter(function(tab){return tab.id===editor.activeTabId})[0];return _objectSpread(_objectSpread({},editor),{},{activeTab:activeTab,tabs:tabs,isActive:editor.isMenuActive})},EditorActions)(ConnectedMenu);exports.default=ConnectedMenu,module.exports=exports.default},{"./MainButton":14,"./MenuGroup":16,"./MenuItem":17,pydio:"pydio","react-redux":"react-redux"}],16:[function(require,module,exports){"use strict";var obj;Object.defineProperty(exports,"__esModule",{value:!0});var AnimatedMenuGroup=(exports.default=void 0,((obj=require("./make-menu-transition"))&&obj.__esModule?obj:{default:obj}).default)(function(props){return React.createElement("div",props,props.children)});exports.default=AnimatedMenuGroup,module.exports=exports.default},{"./make-menu-transition":19}],17:[function(ConnectedMenuItem,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var EditorActions=_interopRequireDefault(ConnectedMenuItem("pydio")),_reactRedux=ConnectedMenuItem("react-redux"),_materialUi=ConnectedMenuItem("material-ui"),_lodash=_interopRequireDefault(ConnectedMenuItem("lodash"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}ConnectedMenuItem=EditorActions.default.requireLib("hoc"),ConnectedMenuItem.getActiveTab,EditorActions=ConnectedMenuItem.EditorActions,ConnectedMenuItem=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(MenuItem,React.PureComponent);var Constructor,protoProps,staticProps,_super=_createSuper(MenuItem);function MenuItem(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MenuItem);var _this=_super.call(this,props),editorSetActiveTab=props.editorSetActiveTab,editorModify=props.editorModify;return _this.onClick=function(){editorModify({isMinimised:!1}),editorSetActiveTab(_this.props.id)},_this}return Constructor=MenuItem,(protoProps=[{key:"render",value:function(){var tab=this.props,style=tab.style,tab=tab.tab;if(_lodash.default.isEmpty(tab))return null;return React.createElement("div",{style:style,onClick:this.onClick},React.createElement("span",{style:{position:"absolute",top:0,bottom:0,width:100,maxWidth:100,textAlign:"center",left:-120,lineHeight:"30px",margin:"5px 0",padding:"0 5px",borderRadius:4,background:"#000000",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",color:"#ffffff",opacity:"0.7"}},tab.title),React.createElement(_materialUi.FloatingActionButton,{mini:!0,ref:"container",backgroundColor:"#FFFFFF",zDepth:2,iconStyle:{backgroundColor:"#FFFFFF"}},React.createElement(tab.icon,_extends({},this.props.tab,{style:{fill:"#000000",flex:1,alignItems:"center",justifyContent:"center",fontSize:28,color:"#607d8b"},loadThumbnail:!0}))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),MenuItem}();ConnectedMenuItem=(0,_reactRedux.connect)(function(current,ownProps){return current=(void 0===(current=current.tabs)?{}:current).filter(function(tab){return tab.id===ownProps.id})[0],_objectSpread(_objectSpread({},ownProps),{},{tab:current})},EditorActions)(ConnectedMenuItem);exports.default=ConnectedMenuItem,module.exports=exports.default},{lodash:55,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Menu",{enumerable:!0,get:function(){return _Menu.default}});var obj,_Menu=(obj=require("./Menu"))&&obj.__esModule?obj:{default:obj}},{"./Menu":15}],19:[function(_default,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reactMotion=_default("react-motion");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var ANIMATION={stifness:500,damping:20},_default=function(Target){return function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(_class,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(_class);function _class(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,_class),_super.apply(this,arguments)}return Constructor=_class,(protoProps=[{key:"getStyles",value:function(){if(!this.props.children)return[];var counter=0;return React.Children.map(this.props.children,function(child){return{key:"t".concat(counter++),data:{element:child},style:{opacity:(0,_reactMotion.spring)(1,ANIMATION),y:(0,_reactMotion.spring)(70*counter,ANIMATION)}}})}},{key:"willEnter",value:function(){return{opacity:0,y:0}}},{key:"willLeave",value:function(){return{opacity:(0,_reactMotion.spring)(0,ANIMATION),y:(0,_reactMotion.spring)(0,ANIMATION)}}},{key:"render",value:function(){var _this=this;return React.createElement(_reactMotion.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},function(styles){return React.createElement(Target,_this.props,styles.map(function(loaded){var key=loaded.key,childStyle=loaded.style,data=loaded.data,loaded=1===childStyle.opacity||0===childStyle.opacity,childStyle={position:"absolute",opacity:childStyle.opacity,transition:"none",transform:"translate3d(-50%, -50%, 0) translateY(-".concat(childStyle.y,"px)")};return React.cloneElement(data.element,{key:key,loaded:loaded,style:childStyle})}))})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),_class}()};exports.default=_default,module.exports=exports.default},{"react-motion":72}],20:[function(_default,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reactMotion=_default("react-motion");function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}_default=function(Target){return function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(_class,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(_class);function _class(_this){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,_class),(_this=_super.call(this,_this)).state={rotate:!1},_this}return Constructor=_class,(protoProps=[{key:"componentWillReceiveProps",value:function(nextProps){this.setState({rotate:nextProps.open})}},{key:"render",value:function(){var _this2=this,style={rotate:this.state.rotate?-720:0};return React.createElement(_reactMotion.Motion,{style:style},function(rotate){rotate=rotate.rotate;return React.createElement(Target,_extends({},_this2.props,{rotated:-720===rotate,style:_objectSpread(_objectSpread({},_this2.props.style),{},{transform:"".concat(_this2.props.style.transform," rotate(").concat(rotate,"deg)")})}))})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),_class}()};exports.default=_default,module.exports=exports.default},{"react-motion":72}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Editor",{enumerable:!0,get:function(){return _App.default}});var obj,_App=(obj=require("./App"))&&obj.__esModule?obj:{default:obj}},{"./App":7}],22:[function(_default,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reactMotion=_default("react-motion");function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var ANIMATION={stiffness:150,damping:15,precision:1},_default=function(Target){return function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(_class,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(_class);function _class(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,_class),_super.apply(this,arguments)}return Constructor=_class,(protoProps=[{key:"getStyle",value:function(){return{y:(0,_reactMotion.spring)(0,ANIMATION)}}},{key:"willEnter",value:function(){return{y:800}}},{key:"willLeave",value:function(){return{y:800}}},{key:"render",value:function(){var _this=this;return React.createElement(_reactMotion.TransitionMotion,{styles:this.getStyle(),willLeave:this.willLeave,willEnter:this.willEnter},function(y){y=y.y;return React.createElement(Target,_extends({},_this.props,{style:_objectSpread(_objectSpread({},_this.props.style),{},{transform:"".concat(transform," translateY(").concat(y,"px)")})}))})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),_class}()};exports.default=_default,module.exports=exports.default},{"react-motion":72}],23:[function(classes,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _OpenNodesModel=_interopRequireDefault(classes("./OpenNodesModel")),_MainFilesList=_interopRequireDefault(classes("./views/MainFilesList")),_Breadcrumb=_interopRequireDefault(classes("./views/Breadcrumb")),_FilePreview=_interopRequireDefault(classes("./views/FilePreview")),_FSTemplate=_interopRequireDefault(classes("./views/FSTemplate")),_EditionPanel=_interopRequireDefault(classes("./views/EditionPanel")),_SearchForm=_interopRequireDefault(classes("./search/components/SearchForm")),_UnifiedSearchForm=_interopRequireDefault(classes("./search/components/UnifiedSearchForm")),_WorkspacesList=_interopRequireDefault(classes("./wslist/WorkspacesList")),_WorkspacesListMaterial=_interopRequireDefault(classes("./wslist/WorkspacesListMaterial")),_WorkspacePickerDialog=_interopRequireDefault(classes("./wslist/WorkspacePickerDialog")),_LeftPanel=_interopRequireDefault(classes("./leftnav/LeftPanel")),_UserWidget=_interopRequireDefault(classes("./leftnav/UserWidget")),_TourGuide=_interopRequireDefault(classes("./views/TourGuide")),_MasterLayout=_interopRequireDefault(classes("./views/MasterLayout")),_InfoPanel=_interopRequireDefault(classes("./detailpanes/InfoPanel")),_InfoPanelCard=_interopRequireDefault(classes("./detailpanes/InfoPanelCard")),_RootNode=_interopRequireDefault(classes("./detailpanes/RootNode")),_GenericInfoCard=_interopRequireDefault(classes("./detailpanes/GenericInfoCard")),_FileInfoCard=_interopRequireDefault(classes("./detailpanes/FileInfoCard")),classes=classes("./editor/components/editor");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}classes={OpenNodesModel:_OpenNodesModel.default,MainFilesList:_MainFilesList.default,EditionPanel:_EditionPanel.default,Breadcrumb:_Breadcrumb.default,SearchForm:_SearchForm.default,UnifiedSearchForm:_UnifiedSearchForm.default,FilePreview:_FilePreview.default,FSTemplate:_FSTemplate.default,WorkspacesList:_WorkspacesList.default,WorkspacesListMaterial:_WorkspacesListMaterial.default,WorkspacePickerDialog:_WorkspacePickerDialog.default,LeftPanel:_LeftPanel.default,UserWidget:_UserWidget.default,TourGuide:_TourGuide.default,MasterLayout:_MasterLayout.default,InfoPanel:_InfoPanel.default,InfoPanelCard:_InfoPanelCard.default,InfoRootNode:_RootNode.default,FileInfoCard:_FileInfoCard.default,GenericInfoCard:_GenericInfoCard.default,Editor:classes.Editor};exports.default=classes,module.exports=exports.default},{"./OpenNodesModel":1,"./detailpanes/FileInfoCard":2,"./detailpanes/GenericInfoCard":3,"./detailpanes/InfoPanel":4,"./detailpanes/InfoPanelCard":5,"./detailpanes/RootNode":6,"./editor/components/editor":12,"./leftnav/LeftPanel":25,"./leftnav/UserWidget":26,"./search/components/SearchForm":33,"./search/components/UnifiedSearchForm":35,"./views/Breadcrumb":37,"./views/EditionPanel":40,"./views/FSTemplate":41,"./views/FilePreview":42,"./views/MainFilesList":43,"./views/MasterLayout":44,"./views/TourGuide":46,"./wslist/WorkspacePickerDialog":51,"./wslist/WorkspacesList":52,"./wslist/WorkspacesListMaterial":53}],24:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("react")),BookmarksList=_interopRequireDefault(require("pydio")),_color=_interopRequireDefault(require("color")),_api=_interopRequireDefault(require("pydio/http/api")),_metaNodeProvider=_interopRequireDefault(require("pydio/model/meta-node-provider")),_FilePreview=_interopRequireDefault(require("../views/FilePreview")),_styles=require("material-ui/styles"),_materialUi=require("material-ui"),_cellsSdk=require("cells-sdk");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var EmptyStateView=BookmarksList.default.requireLib("components").EmptyStateView,BookmarksList=BookmarksList.default.requireLib("hoc"),PlaceHolder=BookmarksList.PlaceHolder,PhTextRow=BookmarksList.PhTextRow,PhRoundShape=BookmarksList.PhRoundShape,BookmarkLine=function(){_inherits(BookmarkLine,_react["default"].Component);var _super=_createSuper(BookmarkLine);function BookmarkLine(_this){return _classCallCheck(this,BookmarkLine),(_this=_super.call(this,_this)).state={},_this}return _createClass(BookmarkLine,[{key:"render",value:function(){var firstClick,preview,primaryText,secondaryTexts,_this2=this,nodeLinks=this.props,block=nodeLinks.pydio,placeHolder=nodeLinks.placeHolder,nodes=nodeLinks.nodes,_onClick=nodeLinks.onClick,onRemove=nodeLinks.onRemove,removing=this.state.removing,nodeLinks={style:{height:40,width:40,borderRadius:"50%"},mimeFontStyle:{fontSize:24,lineHeight:"40px",textAlign:"center"}},block=placeHolder?(firstClick=function(){},preview=_react.default.createElement(PhRoundShape,{style:{width:nodeLinks.style.width,height:nodeLinks.style.height}}),primaryText=_react.default.createElement(PhTextRow,{style:{width:"90%"}}),secondaryTexts=[_react.default.createElement(PhTextRow,{style:{width:"60%"}})],_react.default.createElement("div",null)):(firstClick=function(){return _onClick(nodes[0])},preview=_react.default.createElement(_FilePreview.default,_extends({pydio:block,node:nodes[0],loadThumbnail:!0},nodeLinks)),primaryText=nodes[0].getLabel()||nodes[0].getMetadata().get("WsLabel"),secondaryTexts=[_react.default.createElement("span",null,block.MessageHash["bookmark.secondary.inside"]," ")],nodeLinks=nodes.map(function(n,i){var link=_react.default.createElement("a",{className:"bmListEntryWs",onClick:function(e){e.stopPropagation(),_onClick(n)},style:{fontWeight:500}},n.getMetadata().get("WsLabel"));return i===nodes.length-1?link:_react.default.createElement("span",null,link,", ")}),secondaryTexts.push.apply(secondaryTexts,_toConsumableArray(nodeLinks)),_react.default.createElement(_materialUi.IconButton,{disabled:removing,iconClassName:"mdi mdi-delete",iconStyle:{opacity:.33,fontSize:18},onClick:function(){_this2.setState({removing:!0}),onRemove(nodes[0])},tooltip:block.MessageHash["bookmark.button.tip.remove"],tooltipPosition:"bottom-left"})),block=_react.default.createElement("div",{className:"bmListEntry",style:{display:"flex",alignItems:"center",width:"100%"}},_react.default.createElement("div",{style:{padding:"12px 16px",cursor:"pointer"},onClick:firstClick},preview),_react.default.createElement("div",{style:{flex:1,overflow:"hidden",cursor:"pointer"},onClick:firstClick},_react.default.createElement("div",{style:{fontSize:15,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},primaryText),_react.default.createElement("div",{style:{opacity:.33}},secondaryTexts)),_react.default.createElement("div",null,block));return placeHolder?_react.default.createElement(PlaceHolder,{customPlaceholder:block,showLoadingAnimation:!0}):block}}]),BookmarkLine}(),BookmarksList=function(){_inherits(BookmarksList,_react["default"].Component);var _super2=_createSuper(BookmarksList);function BookmarksList(_this3){return _classCallCheck(this,BookmarksList),(_this3=_super2.call(this,_this3)).state={open:!1,loading:!1,bookmarks:null},_this3}return _createClass(BookmarksList,[{key:"load",value:function(){var _this4=this;return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]||this.setState({loading:!0}),new _cellsSdk.UserMetaServiceApi(_api.default.getRestClient()).userBookmarks(new _cellsSdk.RestUserBookmarksRequest).then(function(collection){_this4.setState({bookmarks:collection.Nodes,loading:!1})}).catch(function(reason){_this4.setState({loading:!1})})}},{key:"handleTouchTap",value:function(event){event.preventDefault(),this.load(),this.setState({open:!0,anchorEl:event.currentTarget})}},{key:"handleRequestClose",value:function(){this.setState({open:!1})}},{key:"entryClicked",value:function(node){this.handleRequestClose(),this.props.pydio.goTo(node)}},{key:"removeBookmark",value:function(searchRequest){var _this5=this,nodeUuid=searchRequest.getMetadata().get("uuid"),api=new _cellsSdk.UserMetaServiceApi(_api.default.getRestClient()),searchRequest=new _cellsSdk.IdmSearchUserMetaRequest;searchRequest.NodeUuids=[nodeUuid],searchRequest.Namespace="bookmark";var request=new _cellsSdk.IdmUpdateUserMetaRequest;return api.searchUserMeta(searchRequest).then(function(res){res.Metadatas&&res.Metadatas.length&&(request.Operation=_cellsSdk.UpdateUserMetaRequestUserMetaOp.constructFromObject("DELETE"),request.MetaDatas=res.Metadatas,api.updateUserMeta(request).then(function(){_this5.load(!0)}))})}},{key:"bmToNodes",value:function(bm){return bm.AppearsIn.map(function(ws){var node=_objectSpread({},bm);node.Path=ws.WsSlug+"/"+ws.Path;node=_metaNodeProvider.default.parseTreeNode(node,ws.WsSlug);return node.getMetadata().set("repository_id",ws.WsUuid),node.getMetadata().set("WsLabel",ws.WsLabel),node})}},{key:"render",value:function(){var items,_this6=this,c=this.props,pydio=c.pydio,muiTheme=c.muiTheme,iconStyle=c.iconStyle,buttonStyle=this.state,loading=buttonStyle.loading,open=buttonStyle.open,anchorEl=buttonStyle.anchorEl,c=buttonStyle.bookmarks;if(!pydio.user.activeRepository)return null;c&&(items=c.map(function(nodes){nodes=_this6.bmToNodes(nodes);return _react.default.createElement(BookmarkLine,{key:nodes[0].getPath(),pydio:pydio,nodes:nodes,onClick:_this6.entryClicked.bind(_this6),onRemove:_this6.removeBookmark.bind(_this6)})}));buttonStyle={borderRadius:"50%"};return open&&iconStyle&&iconStyle.color&&(c=(0,_color.default)(iconStyle.color),buttonStyle=_objectSpread(_objectSpread({},buttonStyle),{},{backgroundColor:c.fade(.9).toString()})),_react.default.createElement("span",null,_react.default.createElement(_materialUi.IconButton,{onClick:this.handleTouchTap.bind(this),iconClassName:"userActionIcon mdi mdi-star",tooltip:pydio.MessageHash[147],tooltipPosition:"bottom-left",className:"userActionButton",iconStyle:iconStyle,style:buttonStyle}),_react.default.createElement(_materialUi.Popover,{open:open,anchorEl:anchorEl,anchorOrigin:{horizontal:"left",vertical:"top"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.handleRequestClose.bind(this),style:{width:320},zDepth:3},_react.default.createElement("div",{style:{display:"flex",alignItems:"center",borderRadius:"2px 2px 0 0",width:"100%",backgroundColor:"#f8fafc",borderBottom:"1px solid #ECEFF1",color:muiTheme.palette.primary1Color}},_react.default.createElement("span",{className:"mdi mdi-star",style:{fontSize:18,margin:"12px 8px 14px 16px"}}),_react.default.createElement("span",{style:{fontSize:15,fontWeight:500}},pydio.MessageHash[147])),loading&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(BookmarkLine,{placeHolder:!0}),_react.default.createElement(BookmarkLine,{placeHolder:!0}),_react.default.createElement(BookmarkLine,{placeHolder:!0})),!loading&&items&&items.length&&_react.default.createElement("div",{style:{maxHeight:330,minHeight:195,overflowY:"auto",overflowX:"hidden",padding:0}},items),!loading&&(!items||!items.length)&&_react.default.createElement(EmptyStateView,{pydio:pydio,iconClassName:"mdi mdi-star-outline",primaryTextId:"145",secondaryTextId:"482",style:{minHeight:200,backgroundColor:"white"}}),_react.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n.bmListEntry{\n    border-bottom: 1px solid rgba(0,0,0,0.025);\n    padding: 2px 0;\n}\n.bmListEntry:hover{\n    background-color:#FAFAFA;\n    border-bottom-color: #FAFAFA;\n}\n.bmListEntryWs:hover{\n    text-decoration:underline;\n}\n"}})))}}]),BookmarksList}();exports.default=BookmarksList,exports.default=BookmarksList=(0,_styles.muiThemeable)()(BookmarksList),module.exports=exports.default},{"../views/FilePreview":42,"cells-sdk":"cells-sdk",color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/meta-node-provider":"pydio/model/meta-node-provider",react:"react"}],25:[function(LeftPanel,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _UserWidget=_interopRequireDefault(LeftPanel("./UserWidget")),_WorkspacesList=_interopRequireDefault(LeftPanel("../wslist/WorkspacesList")),_color=_interopRequireDefault(LeftPanel("color"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var React=LeftPanel("react"),PropTypes=LeftPanel("prop-types"),Pydio=LeftPanel("pydio"),muiThemeable=LeftPanel("material-ui/styles").muiThemeable,TasksPanel=Pydio.requireLib("boot").TasksPanel,LeftPanel=function(taskBg){var wsListStyle=taskBg.muiTheme,onMouseOver=taskBg.style,style=void 0===onMouseOver?{}:onMouseOver,uWidgetProps=taskBg.userWidgetProps,wsSectionTitleStyle=taskBg.workspacesListProps,workspacesListProps=void 0===wsSectionTitleStyle?{}:wsSectionTitleStyle,pydio=taskBg.pydio,onClick=taskBg.onClick,onMouseOver=taskBg.onMouseOver,wsSectionTitleStyle=wsListStyle.palette,taskBg=(0,_color.default)(wsSectionTitleStyle.primary1Color).hsl().array()[0],wsListStyle=new _color.default({h:taskBg,s:35,l:98}),taskBg=new _color.default({h:taskBg,s:30,l:96}),style=_objectSpread({backgroundColor:wsListStyle.toString()},style),uWidgetProps=_objectSpread({},uWidgetProps);uWidgetProps.style=_objectSpread({backgroundColor:(0,_color.default)(wsSectionTitleStyle.primary1Color).darken(.2).toString(),width:"100%"},uWidgetProps.style);wsListStyle={backgroundColor:wsListStyle.toString(),color:(0,_color.default)(wsSectionTitleStyle.primary1Color).darken(.1).alpha(.87).toString(),borderRight:"1px solid #e0e0e0"},wsSectionTitleStyle={color:(0,_color.default)(wsSectionTitleStyle.primary1Color).darken(.1).alpha(.5).toString()};return React.createElement("div",{className:"left-panel vertical_fit vertical_layout",style:style,onClick:onClick,onMouseOver:onMouseOver},React.createElement(_UserWidget.default,_extends({pydio:pydio,controller:pydio.getController(),toolbars:["aUser","user","zlogin"]},uWidgetProps)),React.createElement(_WorkspacesList.default,_extends({className:"vertical_fit",style:wsListStyle,sectionTitleStyle:wsSectionTitleStyle,pydio:pydio,showTreeForWorkspace:!!pydio.user&&pydio.user.activeRepository},workspacesListProps)),React.createElement(TasksPanel,{pydio:pydio,mode:"flex",panelStyle:_objectSpread(_objectSpread({},wsListStyle),{},{backgroundColor:taskBg.toString()})}))};(exports.default=LeftPanel).propTypes={pydio:PropTypes.instanceOf(Pydio).isRequired,userWidgetProps:PropTypes.object,workspacesListProps:PropTypes.object,style:PropTypes.object},exports.default=LeftPanel=muiThemeable()(LeftPanel),module.exports=exports.default},{"../wslist/WorkspacesList":52,"./UserWidget":26,color:"color","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio",react:"react"}],26:[function(UserWidget,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(UserWidget("prop-types")),_pydio=_interopRequireDefault(UserWidget("pydio")),_BookmarksList=_interopRequireDefault(UserWidget("./BookmarksList"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var React=UserWidget("react"),AsyncComponent=_pydio.default.requireLib("boot").AsyncComponent,_Pydio$requireLib2=_pydio.default.requireLib("components"),UserAvatar=_Pydio$requireLib2.UserAvatar,MenuItemsConsumer=_Pydio$requireLib2.MenuItemsConsumer,MenuUtils=_Pydio$requireLib2.MenuUtils,Toolbar=_Pydio$requireLib2.Toolbar,UserWidget=UserWidget("material-ui"),Paper=UserWidget.Paper,Popover=UserWidget.Popover,UserWidget=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(UserWidget,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(UserWidget);function UserWidget(_this){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserWidget),(_this=_super.call(this,_this)).state={showMenu:!1},_this}return Constructor=UserWidget,staticProps=[{key:"getPropTypes",value:function(){return{pydio:_propTypes.default.instanceOf(_pydio.default),style:_propTypes.default.object,avatarStyle:_propTypes.default.object,actionBarStyle:_propTypes.default.object,avatarOnly:_propTypes.default.bool}}}],(protoProps=[{key:"showMenu",value:function(event){this.setState({showMenu:!0,anchor:event.currentTarget})}},{key:"closeMenu",value:function(event,index,menuItem){this.setState({showMenu:!1})}},{key:"applyAction",value:function(actionName){switch(actionName){case"home":this.props.pydio.triggerRepositoryChange("homepage");break;case"settings":this.props.pydio.triggerRepositoryChange("settings");break;case"about_pydio":this.props.pydio.getController().fireAction("splash")}}},{key:"render",value:function(){var notificationsButton,bookmarksButton,currentIsSettings,avatar,_this2=this,showMenu=this.props,pydio=showMenu.pydio,displayLabel=showMenu.displayLabel,avatarStyle=showMenu.avatarStyle,popoverDirection=showMenu.popoverDirection,popoverTargetPosition=showMenu.popoverTargetPosition,color=showMenu.color,actionBarStyle=showMenu.menuItems,anchor=this.state,showMenu=anchor.showMenu,anchor=anchor.anchor;pydio.user&&(currentIsSettings="settings"===(bookmarksButton=this.props.pydio.user).activeRepository,avatarStyle=_objectSpread(_objectSpread({},avatarStyle),{},{position:"relative"}),avatar=React.createElement("div",{onClick:function(e){_this2.showMenu(e)},style:{cursor:"pointer",maxWidth:155}},React.createElement(UserAvatar,{pydio:pydio,userId:bookmarksButton.id,style:avatarStyle,className:"user-display",labelClassName:"userLabel",displayLabel:displayLabel,displayLabelChevron:!0,labelChevronStyle:{color:color},labelMaxChars:8,labelStyle:{flex:1,marginLeft:8,color:color},avatarSize:38}),React.createElement(Popover,{zDepth:2,open:showMenu,anchorEl:anchor,anchorOrigin:{horizontal:popoverDirection||"right",vertical:popoverTargetPosition||"bottom"},targetOrigin:{horizontal:popoverDirection||"right",vertical:"top"},onRequestClose:function(){_this2.closeMenu()},useLayerForClickAway:!1,style:{marginTop:-10,marginLeft:10}},MenuUtils.itemsToMenu(actionBarStyle,this.closeMenu.bind(this),!1,{display:"right",width:160,desktop:!0}))),this.props.hideNotifications||(notificationsButton=React.createElement(AsyncComponent,_extends({namespace:"PydioActivityStreams",componentName:"UserPanel",noLoader:!0,iconClassName:"userActionIcon mdi mdi-bell",iconStyle:{color:color}},this.props))),bookmarksButton=React.createElement(_BookmarksList.default,{pydio:this.props.pydio,iconStyle:{color:color}}));var actionBar,actionBarStyle=this.props.actionBarStyle||{};return currentIsSettings||(actionBar=React.createElement("div",{className:"action_bar",style:_objectSpread({display:"flex"},actionBarStyle)},React.createElement(Toolbar,_extends({},this.props,{toolbars:["user-widget"],renderingType:"icon",toolbarStyle:{display:"inline"},buttonStyle:{color:color,fontSize:18},tooltipPosition:"bottom-right",className:"user-widget-toolbar"})),notificationsButton,bookmarksButton)),this.props.children?React.createElement(Paper,{zDepth:1,rounded:!1,style:_objectSpread(_objectSpread({},this.props.style),{},{display:"flex"}),className:"user-widget primaryColorDarkerPaper"},React.createElement("div",{style:{flex:1}},avatar,actionBar),this.props.children):React.createElement(Paper,{zDepth:1,rounded:!1,style:this.props.style,className:"user-widget primaryColorDarkerPaper"},avatar,this.props.style&&"flex"===this.props.style.display&&React.createElement("span",{style:{flex:1}}),actionBar)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),UserWidget}();exports.default=UserWidget,exports.default=UserWidget=MenuItemsConsumer(UserWidget),module.exports=exports.default},{"./BookmarksList":24,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio",react:"react"}],27:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("react")),_xml=_interopRequireDefault(require("pydio/util/xml")),_materialUi=require("material-ui"),_propTypes=_interopRequireDefault(require("prop-types")),_pydio=_interopRequireDefault(require("pydio")),_DatePanel=_interopRequireDefault(require("./DatePanel")),_FileFormatPanel=_interopRequireDefault(require("./FileFormatPanel")),_FileSizePanel=_interopRequireDefault(require("./FileSizePanel")),_lodash=require("lodash"),_SearchScopeSelector=_interopRequireDefault(require("./SearchScopeSelector")),_excluded=["basenameOrContent","scope","searchID","searchLABEL"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols)for(var sourceSymbolKeys=Object.getOwnPropertySymbols(source),i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key]);return target}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function FieldRow(labelStyle){var active,name=labelStyle.name,label=labelStyle.label,values=labelStyle.values,children=labelStyle.children,style=labelStyle.style,onRemove=void 0===(labelStyle=labelStyle.onRemove)?function(){}:labelStyle,labelStyle={width:100,fontSize:13,fontWeight:500,color:"#616161",height:34,lineHeight:"35px",padding:"0 7px",borderRadius:4,marginTop:6,marginRight:8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex"},actualKey=name;return values[name]?(active=!0,"scope"===name&&(active="all"!==values[name])):values["ajxp_meta_"+name]&&(actualKey="ajxp_meta_"+name,active=!0),active&&(labelStyle=_objectSpread(_objectSpread({},labelStyle),{},{backgroundColor:"#e8f5e9",color:"#43a047"})),_react.default.createElement("div",{style:_objectSpread({display:"flex",alignItems:"flex-start",margin:"0 16px"},style)},_react.default.createElement("div",{style:labelStyle},active?_react.default.createElement("span",{className:"mdi mdi-close",onClick:function(){return onRemove(actualKey)},style:{cursor:"pointer"}}):"",_react.default.createElement("div",{style:{flex:1,textAlign:"right"}},label)),_react.default.createElement("div",{style:{flex:1}},children))}var AdvancedSearch=_pydio.default.requireLib("boot").PydioContextConsumer,ModernTextField=_pydio.default.requireLib("hoc").ModernTextField,AdvancedSearch=AdvancedSearch(AdvancedSearch=function(){_inherits(AdvancedSearch,_react.Component);var _super=_createSuper(AdvancedSearch);function AdvancedSearch(props){_classCallCheck(this,AdvancedSearch);var _this=_super.call(this,props),registry=props.pydio.getXmlRegistry(),options={};try{options=JSON.parse(_xml.default.XPathGetSingleNodeText(registry,'client_configs/template_part[@ajxpClass="SearchEngine" and @theme="material"]/@ajxpOptions'))}catch(e){}return _this.state={options:options,basenameOrContent:props.values.basenameOrContent||""},_this}return _createClass(AdvancedSearch,[{key:"textFieldChange",value:function(fieldName,value){this.props.onChange(_defineProperty({},fieldName,value))}},{key:"onChange",value:function(values){this.props.onChange(values)}},{key:"renderField",value:function(key,val){var _this2=this,text=AdvancedSearch.styles.text,fieldname="basename"===key||"Content"===key||"basenameOrContent"===key?key:"ajxp_meta_"+key;if("object"===_typeof(val)){var value=this.props.values[fieldname],label=val.label,renderComponent=val.renderComponent;if(renderComponent)return renderComponent(_objectSpread(_objectSpread({},this.props),{},{label:label,value:value,fieldname:key,onChange:function(object){_this2.onChange(object)}}))}return _react.default.createElement(ModernTextField,{key:fieldname,value:this.props.values[fieldname]||"",style:text,hintText:val,fullWidth:!0,onChange:function(e,v){_this2.textFieldChange(fieldname,v)}})}},{key:"clearAll",value:function(){var onChange=this.props,values=onChange.values,onChange=onChange.onChange,clearVals={};Object.keys(values).forEach(function(k){clearVals[k]="basenameOrContent"===k?values[k]:"scope"===k?"all":void 0}),onChange(clearVals)}},{key:"render",value:function(){var _this3=this,text=AdvancedSearch.styles.text,fNameLabel=this.props,pydio=fNameLabel.pydio,getMessage=fNameLabel.getMessage,values=fNameLabel.values,rootStyle=fNameLabel.rootStyle,showScope=fNameLabel.showScope,saveSearch=fNameLabel.saveSearch,clearSavedSearch=fNameLabel.clearSavedSearch,showClear=this.state,options=showClear.options,promptSearchLabel=showClear.promptSearchLabel,currentSearchLabel=showClear.currentSearchLabel,headerStyle={fontSize:13,color:"rgb(144 165 178)",textTransform:"uppercase",fontWeight:500,marginBottom:-10,marginTop:10},rowProps={values:values,onRemove:function(key){var newValues=_objectSpread({},values);newValues[key]="scope"===key?"all":void 0,_this3.onChange(newValues)}},showRemove=values.basenameOrContent,showSave=values.scope,searchID=values.searchID,fNameLabel=(values.searchLABEL,_objectWithoutProperties(values,_excluded)),showClear="all"!==showSave||fNameLabel&&0<Object.keys(fNameLabel).length,showSave="all"!==showSave||showRemove||fNameLabel&&0<Object.keys(fNameLabel).length,showRemove=!!searchID,fNameLabel=options.indexContent,fNameLabel=getMessage(void 0!==fNameLabel&&fNameLabel?"searchengine.field.basenameOrContent":1);return _react.default.createElement("div",{className:"search-advanced",style:_objectSpread({},rootStyle)},promptSearchLabel&&_react.default.createElement("div",{style:{display:"flex",alignItems:"center",padding:"4px 12px 2px",backgroundColor:"#f8fafc"}},_react.default.createElement(ModernTextField,{focusOnMount:!0,hintText:getMessage("searchengine.query.save-label"),value:currentSearchLabel||"",onChange:function(e,v){return _this3.setState({currentSearchLabel:v})}}),_react.default.createElement(_materialUi.FlatButton,{label:getMessage("searchengine.query.action.save"),onClick:function(){saveSearch(currentSearchLabel),_this3.setState({promptSearchLabel:!1,currentSearchLabel:""})},disabled:!currentSearchLabel}),_react.default.createElement(_materialUi.FlatButton,{label:getMessage("54"),onClick:function(){_this3.setState({currentSearchLabel:"",promptSearchLabel:!1})}})),!promptSearchLabel&&_react.default.createElement("div",{style:{display:"flex"}},_react.default.createElement(_materialUi.Subheader,{style:_objectSpread(_objectSpread({},headerStyle),{},{marginTop:0,flex:1})},getMessage(341)),(showSave||showClear)&&_react.default.createElement("div",{style:{padding:"12px 20px 0",color:"#9e9e9e",textDecoration:"underline",cursor:"pointer"}},showRemove&&_react.default.createElement("a",{onClick:function(){return clearSavedSearch(searchID)}},getMessage("searchengine.query.action.delete")),showRemove&&showSave&&" | ",showSave&&_react.default.createElement("a",{onClick:function(){return searchID?saveSearch():_this3.setState({promptSearchLabel:!0})}},getMessage("searchengine.query.action.save")),showSave&&showClear&&" | ",showClear&&_react.default.createElement("a",{onClick:function(){return _this3.clearAll()}},getMessage("searchengine.query.action.clear")))),_react.default.createElement(FieldRow,_extends({},rowProps,{name:"basenameOrContent",label:fNameLabel}),this.renderField("basenameOrContent",fNameLabel)),showScope&&_react.default.createElement(FieldRow,_extends({},rowProps,{name:"scope",label:getMessage("searchengine.scope.title"),style:{marginRight:16}}),_react.default.createElement(_SearchScopeSelector.default,{pydio:pydio,value:values.scope,onChange:function(scope){_this3.onChange(_objectSpread(_objectSpread({},values),{},{scope:scope}))}})),_react.default.createElement(FieldRow,_extends({},rowProps,{name:"ajxp_mime",label:"Format"}),_react.default.createElement(_FileFormatPanel.default,{compact:showScope,values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this3.onChange(values)}})),_react.default.createElement(_materialUi.Subheader,{style:_objectSpread(_objectSpread({},headerStyle),{},{marginTop:0})},getMessage(489)),_react.default.createElement(AdvancedMetaFields,_extends({},this.props,{options:options}),function(fields){return _react.default.createElement("div",null,Object.keys(fields).map(function(key){return _react.default.createElement(FieldRow,_extends({},rowProps,{name:key,label:"object"===_typeof(fields[key])?fields[key].label:fields[key]}),_this3.renderField(key,fields[key]))}))}),_react.default.createElement(_materialUi.Subheader,{style:_objectSpread({},headerStyle)},getMessage(498)),_react.default.createElement(FieldRow,_extends({},rowProps,{name:"ajxp_modiftime",label:getMessage(4)}),_react.default.createElement(_DatePanel.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this3.onChange(values)}})),_react.default.createElement(FieldRow,_extends({},rowProps,{name:"ajxp_bytesize",label:getMessage(2)}),_react.default.createElement(_FileSizePanel.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this3.onChange(values)}})))}}],[{key:"styles",get:function(){return{text:{}}}}]),AdvancedSearch}()),AdvancedMetaFields=function(){_inherits(AdvancedMetaFields,_react.Component);var _super2=_createSuper(AdvancedMetaFields);function AdvancedMetaFields(_this4){return _classCallCheck(this,AdvancedMetaFields),(_this4=_super2.call(this,_this4)).dbuild=(0,_lodash.debounce)(_this4.build,500),_this4.state={fields:{}},_this4}return _createClass(AdvancedMetaFields,[{key:"componentWillMount",value:function(){this.build()}},{key:"build",value:function(){var _this5=this,fields=_objectSpread({},this.props.options),metaColumns=fields.metaColumns,reactColumnsRenderers=fields.reactColumnsRenderers,metaColumns=metaColumns||{},reactColumnsRenderers=reactColumnsRenderers||{},specialRendererKeys=Object.keys(_objectSpread({},reactColumnsRenderers)),fields=Object.keys(_objectSpread({},metaColumns)).filter(function(key){return-1===specialRendererKeys.indexOf(key)}),textFields={};fields.forEach(function(k){textFields[k]=metaColumns[k]});fields=Object.keys(_objectSpread({},reactColumnsRenderers)).map(function(key){var renderer=reactColumnsRenderers[key],namespace=renderer.split(".",1).shift();if(window[namespace])return _defineProperty({},key,{label:metaColumns[key],renderComponent:FuncUtils.getFunctionByName(renderer,global)});ResourcesManager.detectModuleToLoadAndApply(renderer,function(){return _this5.dbuild()},!0)}).reduce(function(obj,current){return _objectSpread(_objectSpread({},obj),current)},[]),fields=_objectSpread(_objectSpread(_objectSpread({},{}),textFields),fields);this.setState({fields:fields})}},{key:"render",value:function(){return this.props.children(this.state.fields)}}]),AdvancedMetaFields}();AdvancedMetaFields.propTypes={children:_propTypes.default.func.isRequired},exports.default=AdvancedSearch,module.exports=exports.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DatePanel":28,"./FileFormatPanel":30,"./FileSizePanel":31,"./SearchScopeSelector":34,lodash:55,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/util/xml":"pydio/util/xml",react:"react"}],28:[function(PydioContextConsumer,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(PydioContextConsumer("react")),SearchDatePanel=_interopRequireDefault(PydioContextConsumer("pydio")),_materialUi=PydioContextConsumer("material-ui");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var PydioContextConsumer=SearchDatePanel.default.requireLib("hoc"),ModernSelectField=PydioContextConsumer.ModernSelectField,ModernStyles=PydioContextConsumer.ModernStyles,PydioContextConsumer=SearchDatePanel.default.requireLib("boot").PydioContextConsumer,SearchDatePanel=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SearchDatePanel,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(SearchDatePanel);function SearchDatePanel(_this){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SearchDatePanel),(_this=_super.call(this,_this)).state={value:"",startDate:null,endDate:null},_this}return Constructor=SearchDatePanel,staticProps=[{key:"styles",get:function(){return{datePickerGroup:{display:"flex",justifyContent:"space-between"},datePicker:{flex:1,position:"relative"},dateInput:{width:"auto",flex:1},dateClose:{position:"absolute",lineHeight:"50px",right:5,top:0,cursor:"pointer",color:"rgba(0,0,0,0.5)"}}}}],(protoProps=[{key:"componentDidUpdate",value:function(prevProps,y){var startDate,startDay,endDay,e,_s,_e2,_s2,_e3;y!==this.state&&(_e3=(e=this.state).value,startDate=e.startDate,_s2=e.endDate,_e3||this.props.onChange({ajxp_modiftime:null}),startDay=function(date){return date.setHours(0),date.setMinutes(0),date.setSeconds(1),date},endDay=function(date){return date.setHours(23),date.setMinutes(59),date.setSeconds(59),date},"custom"===_e3?(startDate=startDate||new Date(0),_s2||(_s2=new Date).setFullYear(_s2.getFullYear()+1),this.props.onChange({ajxp_modiftime:{from:startDate,to:_s2}})):"PYDIO_SEARCH_RANGE_TODAY"===_e3?this.props.onChange({ajxp_modiftime:{from:startDay(new Date),to:endDay(new Date)}}):"PYDIO_SEARCH_RANGE_YESTERDAY"===_e3?((y=new Date).setDate(y.getDate()-1),(e=new Date).setDate(e.getDate()-1),this.props.onChange({ajxp_modiftime:{from:startDay(y),to:endDay(e)}})):"PYDIO_SEARCH_RANGE_LAST_WEEK"===_e3?((_s=new Date).setDate(_s.getDate()-7),_e2=new Date,this.props.onChange({ajxp_modiftime:{from:_s,to:_e2}})):"PYDIO_SEARCH_RANGE_LAST_MONTH"===_e3?((_s=new Date).setMonth(_s.getMonth()-1),_e2=new Date,this.props.onChange({ajxp_modiftime:{from:_s,to:_e2}}),this.props.onChange({ajxp_modiftime:{from:startDate,to:_s2}})):"PYDIO_SEARCH_RANGE_LAST_YEAR"===_e3&&((_s2=new Date).setFullYear(_s2.getFullYear()-1),_e3=new Date,this.props.onChange({ajxp_modiftime:{from:_s2,to:_e3}})))}},{key:"render",value:function(){var _this2=this,today=new Date,endDate=SearchDatePanel.styles,datePickerGroup=endDate.datePickerGroup,datePicker=endDate.datePicker,dateClose=endDate.dateClose,startDate=this.props,inputStyle=startDate.inputStyle,getMessage=startDate.getMessage,endDate=this.state,value=endDate.value,startDate=endDate.startDate,endDate=endDate.endDate;return _react.default.createElement("div",null,_react.default.createElement("div",null,_react.default.createElement(DatePickerFeed,{pydio:this.props.pydio},function(items){return _react.default.createElement(ModernSelectField,{hintText:getMessage(490),value:value,fullWidth:!0,onChange:function(e,index,value){return _this2.setState({value:value})}},items.map(function(item){return _react.default.createElement(_materialUi.MenuItem,{value:item.payload,label:item.text,primaryText:item.text})}))})),"custom"===value&&_react.default.createElement("div",{style:_objectSpread(_objectSpread({},datePickerGroup),inputStyle)},_react.default.createElement("div",{style:_objectSpread(_objectSpread({},datePicker),{},{marginRight:2})},_react.default.createElement(_materialUi.DatePicker,_extends({},ModernStyles.textField,{fullWidth:!0,value:startDate,onChange:function(e,date){return _this2.setState({startDate:date})},hintText:getMessage(491),autoOk:!0,maxDate:endDate||today,defaultDate:startDate,container:"inline"})),_react.default.createElement("span",{className:"mdi mdi-close",style:dateClose,onClick:function(){return _this2.setState({startDate:null})}})),_react.default.createElement("div",{style:_objectSpread(_objectSpread({},datePicker),{},{marginLeft:2})},_react.default.createElement(_materialUi.DatePicker,_extends({},ModernStyles.textField,{fullWidth:!0,value:endDate,onChange:function(e,date){return _this2.setState({endDate:date})},hintText:getMessage(492),autoOk:!0,minDate:startDate,maxDate:today,defaultDate:endDate,container:"inline"})),_react.default.createElement("span",{className:"mdi mdi-close",style:dateClose,onClick:function(){return _this2.setState({endDate:null})}}))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),SearchDatePanel}(),DatePickerFeed=function(_ref){_ref.pydio;var getMessage=_ref.getMessage;return(0,_ref.children)([{payload:"",text:""},{payload:"custom",text:getMessage("612")},{payload:"PYDIO_SEARCH_RANGE_TODAY",text:getMessage("493")},{payload:"PYDIO_SEARCH_RANGE_YESTERDAY",text:getMessage("494")},{payload:"PYDIO_SEARCH_RANGE_LAST_WEEK",text:getMessage("495")},{payload:"PYDIO_SEARCH_RANGE_LAST_MONTH",text:getMessage("496")},{payload:"PYDIO_SEARCH_RANGE_LAST_YEAR",text:getMessage("497")}])},SearchDatePanel=PydioContextConsumer(SearchDatePanel),DatePickerFeed=PydioContextConsumer(DatePickerFeed);exports.default=SearchDatePanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],29:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_materialUi=(_interopRequireDefault(require("pydio")),require("material-ui"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var BoxFacet=function(){_inherits(BoxFacet,_react["default"].Component);var _super2=_createSuper(BoxFacet);function BoxFacet(){return _classCallCheck(this,BoxFacet),_super2.apply(this,arguments)}return _createClass(BoxFacet,[{key:"select",value:function(){var _this$props4=this.props;(0,_this$props4.onSelect)(_this$props4.facet,!0)}},{key:"clear",value:function(){var _this$props5=this.props;(0,_this$props5.onSelect)(_this$props5.facet,!1)}},{key:"render",value:function(){var requestSelect,requestDelete,id,key,_this2=this,_this$props6=this.props,facet=_this$props6.facet,selected=_this$props6.selected,m=_this$props6.m;return selected?requestDelete=function(){return _this2.clear()}:requestSelect=function(){return _this2.select()},_react.default.createElement(_materialUi.Checkbox,{label:(id=facet.Label,(m(key="facet.label."+id)===key?id:m(key))+" ("+facet.Count+") "),labelPosition:"right",style:{padding:"5px 0",marginLeft:-2},iconStyle:{opacity:.5,marginRight:10},labelStyle:{fontSize:14,fontWeight:500,color:"inherit"},checked:selected,onCheck:function(e,v){(v?requestSelect:requestDelete)()}})}}]),BoxFacet}();exports.default=function(){_inherits(Facets,_react["default"].Component);var _super3=_createSuper(Facets);function Facets(){return _classCallCheck(this,Facets),_super3.apply(this,arguments)}return _createClass(Facets,[{key:"isSelected",value:function(selected,facet){return 0<selected.filter(function(s){return s.FieldName===facet.FieldName&&s.Label===facet.Label}).length}},{key:"render",value:function(){function m(id){return pydio.MessageHash["user_home."+id]||id}var _this3=this,_this$props7$styles=this.props,pydio=_this$props7$styles.pydio,hasFacets=_this$props7$styles.facets,onToggleFacet=_this$props7$styles.onToggleFacet,zDepth=_this$props7$styles.activeFacets,activeFacets=void 0===zDepth?[]:zDepth,zDepth=_this$props7$styles.zDepth,zDepth=void 0===zDepth?1:zDepth,_this$props7$styles=_this$props7$styles.styles,styles=void 0===_this$props7$styles?{}:_this$props7$styles,groups={},groupKeys={NodeType:"type",Extension:"extension",Size:"size",ModifTime:"modified",Basename:"found",Meta:"metadata"},hasContentSelected=0<activeFacets.filter(function(f){return"TextContent"===f.FieldName}).length;hasFacets.forEach(function(f){var fName=f.FieldName;"Basename"===(fName=0===fName.indexOf("Meta.")?"Meta":fName)&&hasContentSelected||(groups[fName="TextContent"===fName?"Basename":fName]||(groups[fName]=[]),groups[fName].push(f))});hasFacets=!0;return Object.keys(groupKeys).filter(function(k){return groups[k]}).filter(function(k){return 0<groups[k].filter(function(f){return _this3.isSelected(activeFacets,f)}).length||1<groups[k].length}).length||(hasFacets=!1),_react.default.createElement(_materialUi.Paper,{zDepth:zDepth,style:styles.container},hasFacets&&_react.default.createElement("div",{style:styles.header},m("search.facets.title")),hasFacets&&Object.keys(groupKeys).filter(function(k){return groups[k]}).filter(function(k){return 0<groups[k].filter(function(f){return _this3.isSelected(activeFacets,f)}).length||1<groups[k].length}).map(function(k){return _react.default.createElement("div",null,_react.default.createElement("div",{style:styles.subHeader},m("search.facet."+groupKeys[k])),_react.default.createElement("div",{style:{zoom:1}},groups[k].sort(function(a,b){return a.Label.localeCompare(b.Label)}).map(function(f){return _react.default.createElement(BoxFacet,{m:m,facet:f,selected:_this3.isSelected(activeFacets,f),onSelect:onToggleFacet})})))}))}}]),Facets}(),module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],30:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("react")),SearchFileFormatPanel=(obj=require("pydio"))&&obj.__esModule?obj:{default:obj},_materialUi=require("material-ui");function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var _Pydio$requireLib=SearchFileFormatPanel.default.requireLib("hoc"),ModernStyles=_Pydio$requireLib.ModernStyles,ModernTextField=_Pydio$requireLib.ModernTextField,SearchFileFormatPanel=(0,SearchFileFormatPanel.default.requireLib("boot").PydioContextConsumer)(SearchFileFormatPanel=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SearchFileFormatPanel,_react.Component);var Constructor,protoProps,staticProps,_super=_createSuper(SearchFileFormatPanel);function SearchFileFormatPanel(values){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SearchFileFormatPanel);var _this,values=(_this=_super.call(this,values)).props.values;return _this.state={folder:!(!values.ajxp_mime||"ajxp_folder"!==values.ajxp_mime)||void 0,ext:values.ajxp_mime&&"ajxp_folder"!==values.ajxp_mime?values.ajxp_mime:void 0},_this}return Constructor=SearchFileFormatPanel,(protoProps=[{key:"componentWillReceiveProps",value:function(values,nextContext){values.values.ajxp_mime!==this.props.values.ajxp_mime&&(values=values.values,this.setState({folder:!(!values.ajxp_mime||"ajxp_folder"!==values.ajxp_mime)||void 0,ext:values.ajxp_mime&&"ajxp_folder"!==values.ajxp_mime?values.ajxp_mime:void 0}))}},{key:"componentDidUpdate",value:function(prevProps,folder){var ext;folder!==this.state&&(folder=(ext=this.state).folder,ext=ext.ext,this.props.onChange({ajxp_mime:folder?"ajxp_folder":ext}))}},{key:"onToggle",value:function(e,v){v?this.setState({folder:v,ext:""}):this.setState({folder:v})}},{key:"render",value:function(){var _this2=this,ext=this.props,inputStyle=ext.inputStyle,getMessage=ext.getMessage,folder=ext.compact,compact=void 0!==folder&&folder,ext=this.state,folder=ext.folder,ext=ext.ext;return _react.default.createElement("div",{style:compact?{display:"flex"}:{}},_react.default.createElement("div",{style:_objectSpread(_objectSpread({},ModernStyles.div),{},{padding:6,paddingRight:6,flex:3,marginRight:4})},_react.default.createElement(_materialUi.Toggle,{fullWidth:!0,name:"toggleFolder",value:"ajxp_folder",label:getMessage(502),labelStyle:{fontSize:16,color:"rgba(0,0,0,.4)"},toggled:folder,onToggle:this.onToggle.bind(this)})),_react.default.createElement("div",{style:{flex:2,marginLeft:4}},_react.default.createElement(ModernTextField,{disabled:folder,style:_objectSpread(_objectSpread({},inputStyle),{},{opacity:folder?.5:1,marginLeft:compact?0:null,width:compact?"auto":null}),className:"mui-text-field",hintText:getMessage(500),value:ext||"",onChange:function(e,v){return _this2.setState({ext:v})}})))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),SearchFileFormatPanel}());exports.default=SearchFileFormatPanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],31:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("react")),_pydio=(obj=require("pydio"))&&obj.__esModule?obj:{default:obj},_materialUi=require("material-ui");function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var SearchFileSizePanel=_pydio.default.requireLib("hoc"),ModernTextField=SearchFileSizePanel.ModernTextField,ModernSelectField=SearchFileSizePanel.ModernSelectField,SearchFileSizePanel=(0,_pydio.default.requireLib("boot").PydioContextConsumer)(SearchFileSizePanel=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SearchFileSizePanel,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(SearchFileSizePanel);function SearchFileSizePanel(_this){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SearchFileSizePanel),(_this=_super.call(this,_this)).state={from:!1,to:null,fromUnit:"k",toUnit:"k"},_this}return Constructor=SearchFileSizePanel,(protoProps=[{key:"multiple",value:function(v,u){switch(u){case"k":return 1024*v;case"M":return 1024*v*1024;case"G":return 1024*v*1024*1024;case"T":return 1024*v*1024*1024*1024;default:return v}}},{key:"componentWillUpdate",value:function(nextProps,toUnit){var from,to,fromUnit;toUnit!==this.state&&(from=toUnit.from,to=toUnit.to,fromUnit=toUnit.fromUnit,toUnit=toUnit.toUnit,this.props.onChange({ajxp_bytesize:from||to?{from:this.multiple(from,fromUnit),to:this.multiple(to,toUnit)}:null}))}},{key:"render",value:function(){var _this2=this,sizeUnit=_pydio.default.getMessages().byte_unit_symbol||"B",getMessage=this.props.getMessage,blockStyle={display:"flex"};return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{style:blockStyle},_react.default.createElement("div",{style:{flex:2,marginRight:4}},_react.default.createElement(ModernTextField,{type:"number",hintText:getMessage(613),fullWidth:!0,onChange:function(e,v){_this2.setState({from:v||0})}})),_react.default.createElement("div",{style:{marginLeft:4,flex:1}},_react.default.createElement(ModernSelectField,{value:this.state.fromUnit,onChange:function(e,i,v){_this2.setState({fromUnit:v})},fullWidth:!0},_react.default.createElement(_materialUi.MenuItem,{value:"",primaryText:sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"k",primaryText:"K"+sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"M",primaryText:"M"+sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"G",primaryText:"G"+sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"T",primaryText:"T"+sizeUnit})))),_react.default.createElement("div",{style:blockStyle},_react.default.createElement("div",{style:{flex:2,marginRight:4}},_react.default.createElement(ModernTextField,{fullWidth:!0,type:"number",hintText:getMessage(614),onChange:function(e,v){_this2.setState({to:v||109951162})}})),_react.default.createElement("div",{style:{marginLeft:4,flex:1}},_react.default.createElement(ModernSelectField,{fullWidth:!0,value:this.state.toUnit,onChange:function(e,i,v){_this2.setState({toUnit:v})}},_react.default.createElement(_materialUi.MenuItem,{value:"",primaryText:sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"k",primaryText:"K"+sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"M",primaryText:"M"+sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"G",primaryText:"G"+sizeUnit}),_react.default.createElement(_materialUi.MenuItem,{value:"T",primaryText:"T"+sizeUnit})))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),SearchFileSizePanel}());exports.default=SearchFileSizePanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],32:[function(MainSearch,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(MainSearch("prop-types")),_react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(MainSearch("react")),_materialUi=MainSearch("material-ui"),_SearchScopeSelector=_interopRequireDefault(MainSearch("./SearchScopeSelector")),_styles=MainSearch("material-ui/styles");function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var PydioContextConsumer=MainSearch("pydio").requireLib("boot").PydioContextConsumer,MainSearch=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(MainSearch,_react.Component);var Constructor,protoProps,staticProps,_super=_createSuper(MainSearch);function MainSearch(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MainSearch),(_this=_super.call(this,props)).state={mode:props.mode,value:props.value||""},_this}return Constructor=MainSearch,staticProps=[{key:"propTypes",get:function(){return{title:_propTypes.default.string,mode:_propTypes.default.string,onOpen:_propTypes.default.func,onAdvanced:_propTypes.default.func,onMore:_propTypes.default.func,onClose:_propTypes.default.func,hintText:_propTypes.default.string,loading:_propTypes.default.bool,scopeSelectorProps:_propTypes.default.object,showAdvanced:_propTypes.default.bool}}},{key:"styles",get:function(){return{main:{width:"100%",height:36,transition:"all .25s",display:"flex",backgroundColor:"transparent",border:"1px solid rgba(255,255,255,.1)",borderRadius:2},input:{padding:"0 4px",border:0,color:"rgba(255, 255, 255, 0.64)"},hint:{transition:"all .25s",width:"100%",padding:"0 4px",bottom:0,lineHeight:"36px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgba(255, 255, 255, 0.64)"},magnifier:{padding:"7px 0 0 8px",fontSize:18,color:"rgba(255, 255, 255, 0.64)"},underline:{display:"none"}}}}],(protoProps=[{key:"componentWillReceiveProps",value:function(nextProps){this.setState({mode:nextProps.mode}),nextProps.value&&!this.state.value&&this.setState({value:nextProps.value})}},{key:"componentDidUpdate",value:function(){"closed"!==this.state.mode&&this.input&&this.input.focus()}},{key:"onChange",value:function(value){var _this2=this;this.setState({value:value},function(){_this2.props.onChange({basenameOrContent:value})})}},{key:"render",value:function(){var _this3=this,inputStyle=this.props,mode=(inputStyle.title,inputStyle.mode),onOpen=inputStyle.onOpen,onAdvanced=inputStyle.onAdvanced,onMore=inputStyle.onMore,onClose=inputStyle.onClose,hintText=inputStyle.hintText,loading=inputStyle.loading,scopeSelectorProps=inputStyle.scopeSelectorProps,showAdvanced=inputStyle.showAdvanced,getMessage=inputStyle.getMessage,hintStyle=MainSearch.styles,main=hintStyle.main,input=hintStyle.input,hint=hintStyle.hint,magnifier=hintStyle.magnifier,magnifierStyle=this.props,mainStyle=magnifierStyle.mainStyle,inputStyle=magnifierStyle.inputStyle,hintStyle=magnifierStyle.hintStyle,magnifierStyle=magnifierStyle.magnifierStyle;return _react.default.createElement("div",{className:"search-input"},_react.default.createElement("div",{className:"panel-header",style:{display:"flex"}},scopeSelectorProps&&_react.default.createElement("span",null,_react.default.createElement(_SearchScopeSelector.default,_extends({style:{marginTop:-16,marginLeft:-26},labelStyle:{color:"white"}},scopeSelectorProps))),_react.default.createElement("span",{style:{flex:1}}),showAdvanced&&_react.default.createElement(_materialUi.FlatButton,{style:{textTransform:"none",color:"white",fontSize:15,marginTop:-5,padding:"0 16px"},onClick:"advanced"===mode?onMore:onAdvanced},"advanced"===mode?"- "+getMessage(606):"+ "+getMessage(605)),"advanced"===mode&&loading&&_react.default.createElement("div",{style:{marginRight:10}},_react.default.createElement(_materialUi.CircularProgress,{size:20,thickness:2})),_react.default.createElement("span",{className:"panel-header-close mdi mdi-close",onClick:this.props.onClose})),"advanced"!==mode&&_react.default.createElement("div",{style:_objectSpread(_objectSpread({},main),mainStyle)},_react.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-magnify",style:_objectSpread(_objectSpread({},magnifier),magnifierStyle)}),_react.default.createElement(_materialUi.TextField,{ref:function(input){return _this3.input=input},style:{flex:1,height:main.height},inputStyle:_objectSpread(_objectSpread({},input),inputStyle),hintStyle:_objectSpread(_objectSpread({},hint),hintStyle),fullWidth:!0,underlineShow:!1,onFocus:onOpen,onBlur:"small"===mode?onClose:null,hintText:hintText,value:this.state.value||"",onChange:function(e,v){return _this3.onChange(v)},onKeyPress:function(e){return"Enter"===e.key?_this3.onChange(e.target.value):null}}),loading&&_react.default.createElement("div",{style:{marginTop:7,marginRight:9}},_react.default.createElement(_materialUi.CircularProgress,{size:20,thickness:2}))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),MainSearch}();exports.default=MainSearch,exports.default=MainSearch=PydioContextConsumer((0,_styles.muiThemeable)()(MainSearch)),module.exports=exports.default},{"./SearchScopeSelector":34,"material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio",react:"react"}],33:[function(SearchForm,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(SearchForm("react")),_FilePreview=_interopRequireDefault(SearchForm("../../views/FilePreview")),_AdvancedSearch=_interopRequireDefault(SearchForm("./AdvancedSearch")),_pydio=_interopRequireDefault(SearchForm("pydio")),_node=_interopRequireDefault(SearchForm("pydio/model/node")),_emptyNodeProvider=_interopRequireDefault(SearchForm("pydio/model/empty-node-provider")),_lang=_interopRequireDefault(SearchForm("pydio/util/lang")),_searchApi=_interopRequireDefault(SearchForm("pydio/http/search-api")),_SearchScopeSelector=_interopRequireDefault(SearchForm("./SearchScopeSelector")),_MainSearch=_interopRequireDefault(SearchForm("./MainSearch")),_materialUi=SearchForm("material-ui"),_lodash=SearchForm("lodash"),_excluded=["basenameOrContent"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols)for(var sourceSymbolKeys=Object.getOwnPropertySymbols(source),i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key]);return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var EmptyStateView=_pydio.default.requireLib("components").EmptyStateView,SearchForm=(0,SearchForm("pydio").requireLib("boot").PydioContextConsumer)(SearchForm=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SearchForm,_react.Component);var Constructor,protoProps,staticProps,_super=_createSuper(SearchForm);function SearchForm(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SearchForm);function clearDataModel(){var basicDataModel=new PydioDataModel(!0),rootNode=new _emptyNodeProvider.default;return basicDataModel.setAjxpNodeProvider(rootNode),rootNode=new _node.default("/",!1,"","",rootNode),basicDataModel.setRootNode(rootNode),basicDataModel}var _this=_super.call(this,props),dataModel=_this.props.dataModel;return _this.state={values:props.advancedPanel&&props.values?props.values:{},display:props.advancedPanel?"advanced":"closed",dataModel:dataModel||clearDataModel(),empty:!0,loading:!1,searchScope:props.uniqueSearchScope||props.searchScope||"folder"},_this.setMode=(0,_lodash.debounce)(_this.setMode,250),_this.update=(0,_lodash.debounce)(_this.update,500),_this.submit=(0,_lodash.debounce)(_this.submit,500),_this.props.pydio.observe("repository_list_refreshed",function(){props.advancedPanel||_this.setState({values:{},display:"closed",dataModel:dataModel||clearDataModel(),empty:!0,loading:!1})}),props.advancedPanel&&props.values&&Object.keys(props.values).length&&_this.submit(),_this}return Constructor=SearchForm,(protoProps=[{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;this.refs.results&&this.refs.results.refs.list&&(this.refs.results.refs.list.updateInfiniteContainerHeight(),FuncUtils.bufferCallback("search_results_resize_list",550,function(){try{_this2.refs.results.refs.list.updateInfiniteContainerHeight()}catch(e){}}))}},{key:"setMode",value:function(mode){var otherValues;"small"===mode&&"closed"!==this.state.display||("small"===mode&&"closed"===this.state.display&&((otherValues=this.state.values).basenameOrContent,(otherValues=_objectWithoutProperties(otherValues,_excluded))&&Object.keys(otherValues).length&&(mode="advanced")),this.setState({display:mode}))}},{key:"update",value:function(newValues){var searchScope=this.props,onUpdateState=searchScope.onUpdateState,searchScope=searchScope.searchScope,values=_objectSpread(_objectSpread({},this.state.values),newValues);Object.keys(values).forEach(function(key){return!values[key]&&delete values[key]}),this.setState({values:values},this.submit),onUpdateState&&onUpdateState({searchScope:searchScope,values:values})}},{key:"changeSearchScope",value:function(scope){var _this3=this,onUpdateState=this.props.onUpdateState,values=this.state,display=values.display,values=values.values;"small"===display&&setTimeout(function(){return _this3.setMode("small")},250),this.setState({searchScope:scope},this.submit),onUpdateState&&onUpdateState({searchScope:scope,values:values})}},{key:"submit",value:function(){var _this4=this,crossWorkspace=this.state,limit=crossWorkspace.display,values=crossWorkspace.values,searchScope=crossWorkspace.searchScope,keys=crossWorkspace.dataModel,crossWorkspace=this.props.crossWorkspace,limit=crossWorkspace||"all"===searchScope?6:"small"===limit?9:100,rootNode=keys.getRootNode();rootNode.setChildren([]),rootNode.setLoaded(!1);keys=Object.keys(values);0===keys.length||1===keys.length&&"basenameOrContent"===keys[0]&&!values.basenameOrContent?this.setState({loading:!1,empty:!0}):(this.setState({loading:!0,empty:!1}),rootNode.setLoading(!0),rootNode.notify("loading"),new _searchApi.default(this.props.pydio).search(values,crossWorkspace?"all":searchScope,limit).then(function(response){rootNode.setChildren(response.Results),rootNode.setLoading(!1),rootNode.setLoaded(!0),rootNode.notify("loaded"),_this4.setState({loading:!1})}).catch(function(){rootNode.setLoading(!1),rootNode.notify("loaded"),_this4.setState({loading:!1})}))}},{key:"render",value:function(){var _this5=this,style=this.props,crossWorkspace=style.crossWorkspace,pydio=style.pydio,getMessage=style.getMessage,advancedPanel=style.advancedPanel,onOpenAdvanced=style.onOpenAdvanced,onCloseAdvanced=style.onCloseAdvanced,id=style.id,formStyles=style.xtraSmallScreen,searchResultsStyle=this.state,searchScope=searchResultsStyle.searchScope,display=searchResultsStyle.display,loading=searchResultsStyle.loading,dataModel=searchResultsStyle.dataModel,empty=searchResultsStyle.empty,values=searchResultsStyle.values,renderSecondLine=null,renderIcon=null,elementHeight=49,renderIcon="small"!==display&&"closed"!==display?(elementHeight=PydioComponents.SimpleList.HEIGHT_TWO_LINES+10,renderSecondLine=function(crtFolder){var path=crtFolder.getPath();return"folder"===searchScope&&(crtFolder=pydio.getContextHolder().getContextNode().getPath(),0===path.indexOf(crtFolder)&&(path="./"+_lang.default.trimLeft(path.substr(crtFolder.length),"/"))),_react.default.createElement("div",null,path)},function(node){return _react.default.createElement(_FilePreview.default,{loadThumbnail:!(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).parentIsScrolling,node:node})}):function(node){return _react.default.createElement(_FilePreview.default,{loadThumbnail:!1,richPreview:!1,node:node,style:{width:30,height:30,borderRadius:"50%",margin:"9px 6px"},mimeFontStyle:{fontSize:16,display:"block",padding:"4px 7px"}})},results=function(targetRepo){pydio.goTo(targetRepo),advancedPanel?(targetRepo=targetRepo.getMetadata().get("repository_id"))&&targetRepo!==pydio.user.activeRepository&&onCloseAdvanced():_this5.setMode("closed")},style=_objectSpread(_objectSpread({},this.props.style),{},{backgroundColor:"transparent"}),searchResultsStyle="closed"===display||advancedPanel?{}:{backgroundColor:"white",position:"absolute",right:0,display:"block",width:256};formStyles&&(searchResultsStyle.width="100%",searchResultsStyle.flex=2);results=_react.default.createElement(_materialUi.Paper,{className:"search-results",zDepth:advancedPanel?0:2,style:searchResultsStyle,rounded:!advancedPanel},empty&&_react.default.createElement(EmptyStateView,{iconClassName:"",primaryTextId:611,style:{minHeight:180,backgroundColor:"transparent",padding:"0 20px"}}),_react.default.createElement(PydioComponents.NodeListCustomProvider,{ref:"results",className:"small"!==display?"files-list":null,elementHeight:elementHeight,entryRenderIcon:renderIcon,entryRenderActions:function(){return null},entryRenderSecondLine:renderSecondLine,presetDataModel:dataModel,heightAutoWithMax:advancedPanel?0:500,openCollection:results,nodeClicked:results,defaultGroupBy:crossWorkspace||"all"===searchScope?"repository_id":null,groupByLabel:crossWorkspace||"all"===searchScope?"repository_display":null,emptyStateProps:{iconClassName:"",primaryTextId:loading?"searchengine.searching":478,style:{minHeight:"small"===display?180:advancedPanel?240:412,backgroundColor:"transparent",padding:"0 20px"},secondaryTextId:"ws"===searchScope?620:"folder"===searchScope?619:null,actionLabelId:"ws"===searchScope?610:"folder"===searchScope?609:null,actionCallback:"all"!==searchScope?function(){_this5.changeSearchScope("ws"===searchScope?"all":"ws")}:null,actionStyle:{marginTop:10}}}),"small"===display&&_react.default.createElement("div",{style:{display:"flex",alignItems:"center",padding:4,paddingTop:0,backgroundColor:"#eeeeee",width:"100%"}},!crossWorkspace&&!this.props.uniqueSearchScope&&_react.default.createElement(_SearchScopeSelector.default,{style:{flex:1},labelStyle:{paddingLeft:8},value:searchScope,onChange:function(scope){_this5.changeSearchScope(scope)},onClick:function(){return _this5.setMode("small")}}),_react.default.createElement(_materialUi.FlatButton,{style:{marginTop:4,minWidth:0},labelStyle:{padding:"0 8px"},primary:!0,label:getMessage(456),onClick:function(){onOpenAdvanced()}})));if(advancedPanel)return _react.default.createElement(_materialUi.Paper,{ref:"root",zDepth:0,className:"top_search_form "+display,style:style,id:id},_react.default.createElement("div",{style:{display:"flex",alignItems:"center",padding:"0 8px 8px",height:44,width:"100%",backgroundColor:"#eee",borderBottom:"1px solid #e0e0e0"}},!crossWorkspace&&!this.props.uniqueSearchScope&&_react.default.createElement("div",{style:{flex:1,height:48}},_react.default.createElement(_SearchScopeSelector.default,{labelStyle:{paddingLeft:8},value:searchScope,onChange:function(scope){_this5.changeSearchScope(scope)}})),_react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-close",style:{minWidth:0,marginTop:4},tooltip:getMessage(86),onClick:function(){onCloseAdvanced()}})),_react.default.createElement("div",{style:{flex:1,display:"flex",flexDirection:formStyles?"column":"row",overflow:"hidden"}},_react.default.createElement(_AdvancedSearch.default,_extends({},this.props,{values:values,onChange:function(values){return _this5.update(values)},onSubmit:function(){return _this5.submit()},rootStyle:formStyles?{flex:1,width:"100%",borderRight:0}:{}})),results));formStyles=this.props.formStyles;return _react.default.createElement(_materialUi.Paper,{ref:"root",zDepth:0,className:"top_search_form "+display,style:style,id:id},_react.default.createElement(_MainSearch.default,_extends({mode:display,value:values.basenameOrContent,onOpen:function(){return _this5.setMode("small")},onClose:function(){return _this5.setMode("closed")},showAdvanced:!crossWorkspace,onAdvanced:onOpenAdvanced,onChange:function(values){return _this5.update(values)},onSubmit:function(){return _this5.submit()},hintText:getMessage(crossWorkspace||"all"===searchScope?607:87)+"...",loading:loading,scopeSelectorProps:crossWorkspace||this.props.uniqueSearchScope?null:{value:searchScope,onChange:this.changeSearchScope.bind(this)}},formStyles)),results)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),SearchForm}());exports.default=SearchForm,module.exports=exports.default},{"../../views/FilePreview":42,"./AdvancedSearch":27,"./MainSearch":32,"./SearchScopeSelector":34,lodash:55,"material-ui":"material-ui",pydio:"pydio","pydio/http/search-api":"pydio/http/search-api","pydio/model/empty-node-provider":"pydio/model/empty-node-provider","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react"}],34:[function(PydioContextConsumer,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(PydioContextConsumer("prop-types")),_react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(PydioContextConsumer("react")),SearchScopeSelector=_interopRequireDefault(PydioContextConsumer("pydio")),_materialUi=PydioContextConsumer("material-ui");function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var ModernSelectField=SearchScopeSelector.default.requireLib("hoc").ModernSelectField,PydioContextConsumer=SearchScopeSelector.default.requireLib("boot").PydioContextConsumer,SearchScopeSelector=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SearchScopeSelector,_react.Component);var Constructor,protoProps,staticProps,_super=_createSuper(SearchScopeSelector);function SearchScopeSelector(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SearchScopeSelector),_super.apply(this,arguments)}return Constructor=SearchScopeSelector,staticProps=[{key:"propTypes",get:function(){return{value:_propTypes.default.string,onChange:_propTypes.default.func.isRequired,onClick:_propTypes.default.func.isRequired,style:_propTypes.default.object,labelStyle:_propTypes.default.object}}}],(protoProps=[{key:"render",value:function(){var _this=this,user=this.props,getMessage=user.getMessage,user=user.pydio.user,items=[_react.default.createElement(_materialUi.MenuItem,{value:"all",primaryText:getMessage(610)})];return user&&user.getRepositoriesList().forEach(function(ws){"home"!==ws.getId()&&"settings"!==ws.getId()&&items.push(_react.default.createElement(_materialUi.MenuItem,{value:ws.getSlug()+"/",primaryText:ws.getLabel()}))}),_react.default.createElement(ModernSelectField,{value:this.props.value,onChange:function(e,i,v){_this.props.onChange(v)},fullWidth:!0},items)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),SearchScopeSelector}();exports.default=SearchScopeSelector,exports.default=SearchScopeSelector=PydioContextConsumer(SearchScopeSelector),module.exports=exports.default},{"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio",react:"react"}],35:[function(UnifiedSearchForm,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(UnifiedSearchForm("react")),_dom=(_interopRequireDefault(UnifiedSearchForm("pydio")),_interopRequireDefault(UnifiedSearchForm("pydio/util/dom"))),_materialUi=UnifiedSearchForm("material-ui"),_AdvancedSearch=_interopRequireDefault(UnifiedSearchForm("./AdvancedSearch"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var styles={container:{display:"flex",position:"relative",width:120,height:36,alignItems:"center",borderRadius:2,border:"1px solid #eee",marginRight:8,paddingLeft:8},textField:{inputStyle:{backgroundColor:"transparent",height:34,borderRadius:3,marginTop:6,padding:7},hintStyle:{paddingLeft:7,color:"rgba(0,0,0,0.5)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},underlineShow:!1},filterButton:{transition:_dom.default.getBeziersTransition(),position:"absolute",top:7,right:8,borderRadius:15,padding:"1px 6px 0px 6px",cursor:"pointer",fontSize:15,fontWeight:500},closeButton:{cursor:"pointer",fontSize:18}},UnifiedSearchForm=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(UnifiedSearchForm,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(UnifiedSearchForm);function UnifiedSearchForm(_this){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UnifiedSearchForm),(_this=_super.call(this,_this)).containerRef=_react.default.createRef(),_this}return Constructor=UnifiedSearchForm,(protoProps=[{key:"updateText",value:function(value){var savedId,savedSearches=this.props,onRequestOpen=savedSearches.onRequestOpen,values=(savedSearches.onRequestClose,savedSearches.values),setValues=savedSearches.setValues,savedSearches=savedSearches.savedSearches;0!==value.indexOf("#saved#")?(setValues(_objectSpread(_objectSpread({},values),{},{basenameOrContent:value})),value&&onRequestOpen()):(savedId=value.replace("#saved#",""),setValues(savedSearches.filter(function(s){return s.searchID===savedId})[0]))}},{key:"togglePopover",value:function(e){var popoverOpen=(this.state||{}).popoverOpen,onRequestOpen=this.props.onRequestOpen;popoverOpen?this.setState({popoverOpen:!1}):(onRequestOpen(),this.setState({popoverOpen:!0,anchorElement:this.containerRef.current}))}},{key:"focus",value:function(){var setValues=this.props,active=setValues.active,onRequestOpen=setValues.onRequestOpen,values=setValues.values,setValues=setValues.setValues;active||setValues(values),onRequestOpen()}},{key:"render",value:function(){var _this2=this,wStyle=this.props,onRequestClose=wStyle.onRequestClose,values=wStyle.values,setValues=wStyle.setValues,style=wStyle.style,active=wStyle.active,formStyles=wStyle.formStyles,searchFocus=wStyle.history,completeDataSource=void 0===searchFocus?[]:searchFocus,filtersCount=wStyle.savedSearches,savedSearches=void 0===filtersCount?[]:filtersCount,clearSavedSearch=wStyle.clearSavedSearch,saveSearch=wStyle.saveSearch,pydio=wStyle.pydio,_formStyles$filterBut=values.basenameOrContent,basenameOrContent=void 0===_formStyles$filterBut?"":_formStyles$filterBut,filterActiveStyles=this.state||{},popoverOpen=filterActiveStyles.popoverOpen,anchorElement=filterActiveStyles.anchorElement,searchFocus=filterActiveStyles.searchFocus,filtersCount=Object.keys(values).filter(function(key){return"basenameOrContent"!==key&&"searchLABEL"!==key&&"searchID"!==key}).filter(function(key){return values[key]}).filter(function(key){return!("scope"===key&&"all"===values[key])}).length,wStyle={};active&&(wStyle={width:420});_formStyles$filterBut=formStyles.filterButton,filterActiveStyles=formStyles.filterButtonActive,filterActiveStyles=0<filtersCount?_objectSpread({backgroundColor:(void 0===_formStyles$filterBut?{}:_formStyles$filterBut).color,color:"white",fontSize:13},void 0===filterActiveStyles?{}:filterActiveStyles):{},completeDataSource=[].concat(_toConsumableArray(savedSearches.map(function(k){return{text:"#saved#"+k.searchID,value:_react.default.createElement(_materialUi.MenuItem,{primaryText:_react.default.createElement("span",null,_react.default.createElement("span",{style:{opacity:.6,marginRight:5},className:"mdi mdi-content-save"})," ",k.searchLABEL)})}})),_toConsumableArray(completeDataSource.map(function(k){return{text:k,value:k}})));return _react.default.createElement("div",{style:_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},styles.container),formStyles.mainStyle),style),wStyle),{},{transition:_dom.default.getBeziersTransition()}),ref:this.containerRef},_react.default.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:anchorElement,anchorOrigin:{horizontal:"right",vertical:"bottom"},targetOrigin:{horizontal:"right",vertical:"top"},onRequestClose:function(){_this2.togglePopover()},style:{width:420},zDepth:3},_react.default.createElement(_AdvancedSearch.default,{values:values,onChange:function(newValues){return setValues(_objectSpread(_objectSpread({},values),newValues))},rootStyle:{paddingBottom:8,maxHeight:"80vh",overflowY:"auto"},showScope:!0,savedSearches:savedSearches,saveSearch:saveSearch,clearSavedSearch:clearSavedSearch})),_react.default.createElement("div",{onClick:onRequestClose,style:_objectSpread(_objectSpread({},styles.closeButton),formStyles.magnifierStyle)},_react.default.createElement("span",{className:"mdi mdi-"+(active?"close":"magnify")})),_react.default.createElement(_materialUi.AutoComplete,{dataSource:completeDataSource,filter:function(searchText,key){return(""===searchText||0===key.indexOf(searchText))&&searchText!==key},open:searchFocus,style:{marginLeft:5,flex:1},inputStyle:formStyles.inputStyle,hintStyle:formStyles.hintStyle,fullWidth:!0,underlineShow:!1,hintText:pydio.MessageHash["searchengine.main.placeholder"],searchText:basenameOrContent||"",menuProps:{desktop:!0},menuStyle:_objectSpread({maxHeight:300,width:400},formStyles.completeMenuStyle),onUpdateInput:function(v){return _this2.updateText(v)},onKeyPress:function(e){return"Enter"===e.key?_this2.updateText(e.target.value):null},onFocus:function(){_this2.focus(),setTimeout(function(){_this2.setState({searchFocus:!0})},1e3)},onBlur:function(){_this2.setState({searchFocus:!1})}}),active&&_react.default.createElement("div",{onClick:this.togglePopover.bind(this),title:pydio.MessageHash["searchengine.advanced-filter.tooltip"],style:_objectSpread(_objectSpread(_objectSpread({},styles.filterButton),formStyles.filterButton),filterActiveStyles)},_react.default.createElement("span",{className:"mdi mdi-filter"}),0<filtersCount&&_react.default.createElement("span",null,filtersCount)))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),UnifiedSearchForm}();exports.default=UnifiedSearchForm,module.exports=exports.default},{"./AdvancedSearch":27,"material-ui":"material-ui",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],36:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),AddressBookPanel=_interopRequireDefault(require("pydio")),_materialUi=require("material-ui"),_idmObjectHelper=_interopRequireDefault(require("pydio/model/idm-object-helper")),_dom=_interopRequireDefault(require("pydio/util/dom")),_InfoPanelCard=_interopRequireDefault(require("../detailpanes/InfoPanelCard"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var AddressBookPanel=AddressBookPanel.default.requireLib("components"),AddressBook=AddressBookPanel.AddressBook,UserAvatar=AddressBookPanel.UserAvatar,CellActionsRenderer=AddressBookPanel.CellActionsRenderer,ListStylesCompact=AddressBookPanel.ListStylesCompact,AddressBookPanel=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AddressBookPanel,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(AddressBookPanel);function AddressBookPanel(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddressBookPanel),(_this=_super.call(this,props)).state={noCell:!1,cellModel:null},_this._observer=function(){_this.forceUpdate()},_this}return Constructor=AddressBookPanel,(protoProps=[{key:"componentDidMount",value:function(){this.loadCell()}},{key:"componentWillUnmount",value:function(){this.state.cellModel&&this.state.cellModel.stopObserving("update",this._observer)}},{key:"loadCell",value:function(){var _this2=this,pydio=this.props.pydio;pydio.user.getActiveRepositoryAsCell().then(function(cell){cell?(cell.observe("update",_this2._observer),_this2.setState({cellModel:cell,noCell:!1,cellId:pydio.user.activeRepository})):_this2.setState({noCell:!0,cellId:pydio.user.activeRepository})})}},{key:"componentWillReceiveProps",value:function(nextProps){nextProps.pydio.user.activeRepository!==this.state.cellId&&(this.state.cellModel&&this.state.cellModel.stopObserving("update",this._observer),this.loadCell())}},{key:"renderListItem",value:function(menuItems){var userType,userId,pydio=this.props.pydio,cellModel=this.state.cellModel,label=_idmObjectHelper.default.extractLabel(pydio,menuItems);menuItems.User&&menuItems.User.Attributes&&menuItems.User.Attributes.avatar&&(avatar=menuItems.User.Attributes.avatar),menuItems.User?(userType="user",userId=menuItems.User.Login):menuItems.Group?(userType="group",userId=menuItems.Group.Uuid):(userId=menuItems.Role.Uuid,userType="team");var rightMenu,avatar=_react.default.createElement(UserAvatar,_extends({pydio:pydio,userType:userType,userId:userId,userLabel:label,avatar:avatar,avatarOnly:!0,useDefaultAvatar:!0},ListStylesCompact.avatar)),menuItems=new CellActionsRenderer(pydio,cellModel,menuItems).renderItems();return menuItems.length&&(rightMenu=_react.default.createElement(_materialUi.IconMenu,_extends({},ListStylesCompact.iconMenu,{iconButtonElement:_react.default.createElement(_materialUi.IconButton,_extends({iconClassName:"mdi mdi-dots-vertical"},ListStylesCompact.iconButton)),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"},desktop:!0}),menuItems)),_react.default.createElement(_materialUi.ListItem,_extends({className:"compact",primaryText:label,leftAvatar:avatar,rightIconButton:rightMenu},ListStylesCompact.listItem))}},{key:"render",value:function(){var cellInfo,acls,items,_this3=this,cellModel=this.props,pydio=cellModel.pydio,columnStyle=cellModel.style,zDepth=cellModel.zDepth,noCell=this.state,cellModel=noCell.cellModel,noCell=noCell.noCell;!noCell&&cellModel&&(acls=cellModel.getAcls(),items=[],Object.keys(acls).map(function(roleId){items.push(_this3.renderListItem(acls[roleId])),items.push(_react.default.createElement(_materialUi.Divider,{inset:!0,style:ListStylesCompact.divider.style}))}),items.pop(),cellInfo=_react.default.createElement(_InfoPanelCard.default,{title:pydio.MessageHash[639],style:{margin:"10px 10px 0"}},_react.default.createElement(_materialUi.List,null,items)));columnStyle=_objectSpread({position:"absolute",width:270,top:100,bottom:0,transition:_dom.default.getBeziersTransition(),overflowY:"auto"},columnStyle);return _react.default.createElement(_materialUi.Paper,{id:"info_panel",zDepth:zDepth,rounded:!1,style:_objectSpread({},columnStyle)},cellInfo,pydio.Controller.getActionByName("open_address_book")&&_react.default.createElement(_InfoPanelCard.default,null,_react.default.createElement(AddressBook,{mode:"selector",bookColumn:!0,pydio:pydio,disableSearch:!1,style:{height:null,flex:1,padding:0},actionsForCell:!(!noCell&&cellModel)||cellModel,listStyles:ListStylesCompact})))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),AddressBookPanel}();exports.default=AddressBookPanel,module.exports=exports.default},{"../detailpanes/InfoPanelCard":5,"material-ui":"material-ui",pydio:"pydio","pydio/model/idm-object-helper":"pydio/model/idm-object-helper","pydio/util/dom":"pydio/util/dom",react:"react"}],37:[function(Breadcrumb,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var React=Breadcrumb("react"),PydioNode=Breadcrumb("pydio/model/node"),muiThemeable=Breadcrumb("material-ui/styles").muiThemeable,LangUtils=Breadcrumb("pydio/util/lang"),Textfit=Breadcrumb("react-textfit").Textfit,Breadcrumb=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Breadcrumb,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(Breadcrumb);function Breadcrumb(){var _this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Breadcrumb);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this=_super.call.apply(_super,[this].concat(args))),"state",{node:null,minFit:!1}),_defineProperty(_assertThisInitialized(_this),"goTo",function(targetNode,event){targetNode=new PydioNode(targetNode);_this.props.pydio.getContextHolder().requireContextChange(targetNode)}),_defineProperty(_assertThisInitialized(_this),"toggleMinFit",function(newMinFit){newMinFit=12===newMinFit;newMinFit!==_this.state.minFit&&_this.setState({minFit:newMinFit})}),_this}return Constructor=Breadcrumb,(protoProps=[{key:"componentDidMount",value:function(){var n=this.props.pydio.getContextHolder().getContextNode();n&&this.setState({node:n}),this._observer=function(event){this.setState({node:event.memo,minFit:!1})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._observer)}},{key:"componentWillUnmount",value:function(){this.props.pydio.getContextHolder().stopObserving("context_changed",this._observer)}},{key:"render",value:function(){var _this2=this,minFit=this.props,path=minFit.pydio,repoLabel=minFit.muiTheme,mainStyle=minFit.rootStyle,styles=this.state,node=styles.node,minFit=styles.minFit,styles={main:{fontSize:21,height:36,lineHeight:"44px",padding:"0 20px",color:repoLabel.appBar.textColor,width:"100%"}};if(!path.user)return React.createElement("span",{className:"react_breadcrumb"});repoLabel=" ";path.user&&path.user.activeRepository&&path.user.repositories.has(path.user.activeRepository)&&(repoLabel=path.user.repositories.get(path.user.activeRepository).getLabel());var segments=[],path=node?LangUtils.trimLeft(node.getPath(),"/"):"",label=node?node.getLabel():"",rebuilt="",mainStyle=mainStyle||{},mainStyle=_objectSpread(_objectSpread({},styles.main),mainStyle);minFit&&(mainStyle=_objectSpread(_objectSpread({},mainStyle),{},{overflow:"hidden"}));var parts=path.split("/");return parts.forEach(function(seg,i){seg&&(rebuilt+="/"+seg,segments.push(React.createElement("span",{key:"bread_sep_"+i,className:"separator"}," / ")),segments.push(React.createElement("span",{key:"bread_"+i,className:"segment",onClick:this.goTo.bind(this,rebuilt)},i===parts.length-1?label:seg)))}.bind(this)),React.createElement(Textfit,{mode:"single",min:12,max:22,className:"react_breadcrumb",style:mainStyle,onReady:function(f){_this2.toggleMinFit(f)}},this.props.startWithSeparator&&React.createElement("span",{className:"separator"}," / "),React.createElement("span",{className:"segment first",onClick:this.goTo.bind(this,"/")},repoLabel),segments)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Breadcrumb}();exports.default=Breadcrumb,exports.default=Breadcrumb=muiThemeable()(Breadcrumb),module.exports=exports.default},{"material-ui/styles":"material-ui/styles","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react","react-textfit":"react-textfit"}],38:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),CellChat=_interopRequireDefault(require("pydio")),_materialUi=require("material-ui");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Chat=CellChat.default.requireLib("components").Chat,CellChat=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CellChat,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(CellChat);function CellChat(_this){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CellChat),(_this=_super.call(this,_this)).state={cellModel:null,cellId:""},_this}return Constructor=CellChat,(protoProps=[{key:"loadRoomData",value:function(){var _this2=this,user=this.props.pydio.user;user.getActiveRepositoryAsCell().then(function(c){_this2.setState({cellModel:c,cellId:c?user.activeRepository:""})})}},{key:"componentWillMount",value:function(){this.loadRoomData()}},{key:"componentWillReceiveProps",value:function(nextProps){nextProps.pydio.user.activeRepository!==this.state.cellId&&this.loadRoomData()}},{key:"render",value:function(){var cellModel=this.props,pydio=cellModel.pydio,style=cellModel.style,zDepth=cellModel.zDepth,onRequestClose=cellModel.onRequestClose,cellId=this.state,cellModel=cellId.cellModel,cellId=cellId.cellId;return _react.default.createElement(_materialUi.Paper,{id:"info_panel",zDepth:zDepth,rounded:!1,style:_objectSpread({display:"flex",flexDirection:"column"},style)},_react.default.createElement(Chat,{pydio:pydio,roomType:"WORKSPACE",roomObjectId:cellId,style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},chatUsersStyle:{borderBottom:0,padding:5,backgroundColor:"rgba(0,0,0,.05)",display:"flex",flexWrap:"wrap"},msgContainerStyle:{maxHeight:null,flex:1,paddingTop:"10px !important"},fieldHint:pydio.MessageHash[636],fieldContainerStyle:{backgroundColor:"transparent"},pushMessagesToBottom:!0,emptyStateProps:{iconClassName:"mdi mdi-comment-account-outline",primaryTextId:pydio.MessageHash[637],style:{padding:"0 10px",backgroundColor:"transparent"},iconStyle:{fontSize:60},legendStyle:{fontSize:14,padding:20}},computePresenceFromACLs:cellModel?cellModel.getAcls():{},onRequestClose:onRequestClose}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),CellChat}();exports.default=CellChat,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],39:[function(CellsMessageToolbar,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(CellsMessageToolbar("react"));_interopRequireDefault(CellsMessageToolbar("pydio/util/dom"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}CellsMessageToolbar=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CellsMessageToolbar,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(CellsMessageToolbar);function CellsMessageToolbar(node){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CellsMessageToolbar);var _this=_super.call(this,node),node=node.pydio.getContextHolder().getContextNode();return node&&(node.getMetadata().has("virtual_root")||node.getMetadata().has("local:renderListCustomMessage"))?_this.state={display:!0}:_this.state={display:!1},_this}return Constructor=CellsMessageToolbar,(protoProps=[{key:"componentDidMount",value:function(){var _this2=this,pydio=this.props.pydio;this._observer=function(){var node=pydio.getContextHolder().getContextNode();node&&(node.getMetadata().has("virtual_root")||node.getMetadata().has("local:renderListCustomMessage"))?_this2.setState({display:!0}):_this2.setState({display:!1})},pydio.observe("context_changed",this._observer)}},{key:"componentWillUnmount",value:function(){this.props.pydio.stopObserving("context_changed",this._observer)}},{key:"render",value:function(){var node=this.state.display,pydio=this.props.pydio;if(!node)return null;var s={padding:16,color:"#9E9E9E",borderBottom:"1px solid #F5F5F5"},node=pydio.getContextHolder().getContextNode();return node.getMetadata().has("local:renderListCustomMessage")?node.getMetadata().get("local:renderListCustomMessage")(node,s):_react.default.createElement("div",{style:s},pydio.MessageHash[638])}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),CellsMessageToolbar}();exports.default=CellsMessageToolbar,module.exports=exports.default},{"pydio/util/dom":"pydio/util/dom",react:"react"}],40:[function(_default,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(_default("prop-types")),_pydio=_interopRequireDefault(_default("pydio")),_OpenNodesModel=_interopRequireDefault(_default("../OpenNodesModel")),_reactRedux=_default("react-redux"),_editor=_default("../editor");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var EditorActions=_pydio.default.requireLib("hoc").EditorActions,_default=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(EditionPanel,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(EditionPanel);function EditionPanel(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditionPanel),_super.call(this,props)}return Constructor=EditionPanel,(protoProps=[{key:"componentDidMount",value:function(){var _this=this;this._updateObserver=function(nodes){return _this._handleUpdate(nodes)},this._nodesModelObserver=function(node){return _this._handleNodePushed(node)},this._nodesRemoveObserver=function(index){return _this._handleNodeRemoved(index)},this._titlesObserver=function(){return _this.forceUpdate()},_OpenNodesModel.default.getInstance().observe("update",this._updateObserver),_OpenNodesModel.default.getInstance().observe("nodePushed",this._nodesModelObserver),_OpenNodesModel.default.getInstance().observe("nodeRemovedAtIndex",this._nodesRemoveObserver),_OpenNodesModel.default.getInstance().observe("titlesUpdated",this._titlesObserver)}},{key:"componentWillUnmount",value:function(){(0,this.props.tabDeleteAll)(),_OpenNodesModel.default.getInstance().stopObserving("update",this._updateObserver),_OpenNodesModel.default.getInstance().stopObserving("nodePushed",this._nodesModelObserver),_OpenNodesModel.default.getInstance().stopObserving("nodeRemovedAtIndex",this._nodesRemoveObserver),_OpenNodesModel.default.getInstance().stopObserving("titlesUpdated",this._titlesObserver)}},{key:"_handleUpdate",value:function(nodes){var tabDeleteAll=this.props.tabDeleteAll;0===nodes.length&&tabDeleteAll()}},{key:"_handleNodePushed",value:function(object){var _object$node=this.props,pydio=_object$node.pydio,tabCreate=_object$node.tabCreate,editorModify=_object$node.editorModify,editorSetActiveTab=_object$node.editorSetActiveTab,_object$node=object.node,node=void 0===_object$node?{}:_object$node,editorData=object.editorData;pydio.Registry.loadEditorResources(editorData.resourcesManager,function(){var tabId=tabCreate({id:node.getLabel(),title:node.getLabel(),url:node.getPath(),metadata:node.getMetadata(),readonly:"true"===node.getMetadata().get("node_readonly"),node:node,editorData:editorData,icon:PydioWorkspaces.FilePreview}).id;editorSetActiveTab(tabId),editorModify({isMinimised:!1})})}},{key:"_handleNodeRemoved",value:function(index){}},{key:"render",value:function(){return React.createElement(_editor.Editor,null)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),EditionPanel}();_default.PropTypes={pydio:_propTypes.default.instanceOf(_pydio.default)};_default=(0,_reactRedux.connect)(null,EditorActions)(_default);exports.default=_default,module.exports=exports.default},{"../OpenNodesModel":1,"../editor":21,"prop-types":"prop-types",pydio:"pydio","react-redux":"react-redux"}],41:[function(withSearch,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(withSearch("react")),FSTemplate=_interopRequireDefault(withSearch("pydio")),_Breadcrumb=_interopRequireDefault(withSearch("./Breadcrumb")),_reactTextfit=_interopRequireDefault(withSearch("react-textfit")),_MainFilesList=_interopRequireDefault(withSearch("./MainFilesList")),_EditionPanel=_interopRequireDefault(withSearch("./EditionPanel")),_InfoPanel=_interopRequireDefault(withSearch("../detailpanes/InfoPanel")),_WelcomeTour=_interopRequireDefault(withSearch("./WelcomeTour")),_CellChat=_interopRequireDefault(withSearch("./CellChat")),_materialUi=withSearch("material-ui"),_AddressBookPanel=_interopRequireDefault(withSearch("./AddressBookPanel")),_MasterLayout=_interopRequireDefault(withSearch("./MasterLayout")),_styles=withSearch("material-ui/styles"),_dom=_interopRequireDefault(withSearch("pydio/util/dom")),_color=_interopRequireDefault(withSearch("color")),_UnifiedSearchForm=_interopRequireDefault(withSearch("../search/components/UnifiedSearchForm")),_excluded=["style"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols)for(var sourceSymbolKeys=Object.getOwnPropertySymbols(source),i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key]);return target}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var withSearch=FSTemplate.default.requireLib("hoc").withSearch,FSTemplate=FSTemplate.default.requireLib("components"),ButtonMenu=FSTemplate.ButtonMenu,Toolbar=FSTemplate.Toolbar,ListPaginator=FSTemplate.ListPaginator,FSTemplate=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(FSTemplate,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(FSTemplate);function FSTemplate(themeLight){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FSTemplate);var _this=_super.call(this,themeLight),rState="info-panel";void 0!==localStorage.getItem("pydio.layout.rightColumnState")&&localStorage.getItem("pydio.layout.rightColumnState")&&(rState=localStorage.getItem("pydio.layout.rightColumnState"));var closedToggle="closed"===localStorage.getItem("pydio.layout.infoPanelToggle"),closedInfo="closed"===localStorage.getItem("pydio.layout.infoPanelOpen"),w=_this.props.pydio,themeLight=!1;w.user&&w.user.getPreference("theme")&&"default"!==w.user.getPreference("theme")?themeLight="light"===w.user.getPreference("theme"):"light"===w.getPluginConfigs("gui.ajax").get("GUI_THEME")&&(themeLight=!0);w=_dom.default.getViewportWidth();return _this.state={infoPanelOpen:!closedInfo,infoPanelToggle:!closedToggle,drawerOpen:!1,rightColumnState:rState,searchFormState:{},themeLight:themeLight,smallScreen:w<=758,xtraSmallScreen:w<=420,searchView:!1},_this}return Constructor=FSTemplate,(protoProps=[{key:"setSearchView",value:function(){var dm=this.props.pydio.getContextHolder();dm.setSelectedNodes([]),dm.getContextNode()!==dm.getSearchNode()&&this.setState({previousContext:dm.getContextNode()})}},{key:"unsetSearchView",value:function(){var dm=this.props.pydio.getContextHolder(),previousContext=this.state.previousContext;dm.setSelectedNodes([]),previousContext?dm.setContextNode(previousContext,!0):dm.setContextNode(dm.getRootNode(),!0),this.setState({previousContext:null})}},{key:"componentDidMount",value:function(){var _this2=this,pydio=this.props.pydio;this._themeObserver=function(uTheme){uTheme&&(uTheme=uTheme.getPreference("theme")&&"default"!==uTheme.getPreference("theme")?uTheme.getPreference("theme"):pydio.getPluginConfigs("gui.ajax").get("GUI_THEME"),_this2.setState({themeLight:"light"===uTheme}))},pydio.observe("user_logged",this._themeObserver),this._resizer=function(){var w=_dom.default.getViewportWidth();_this2.setState({smallScreen:w<758,xtraSmallScreen:w<=420})},_dom.default.observeWindowResize(this._resizer),this._ctxObserver=function(){var searchView=pydio.getContextHolder().getContextNode()===pydio.getContextHolder().getSearchNode();_this2.setState({searchView:searchView})},pydio.observe("context_changed",this._ctxObserver)}},{key:"componentWillUnmount",value:function(){var pydio=this.props.pydio;pydio.stopObserving("user_logged",this._themeObserver),pydio.stopObserving("context_changed",this._ctxObserver),_dom.default.stopObservingWindowResize(this._resizer)}},{key:"openRightPanel",value:function(name){var _this3=this,rightColumnState=this.state.rightColumnState;name!==rightColumnState?this.setState({rightColumnState:name},function(){var infoPanelOpen=_this3.state.infoPanelOpen;"info-panel"!==name&&(infoPanelOpen=!0),"advanced-search"!==name&&(localStorage.setItem("pydio.layout.rightColumnState",name),localStorage.setItem("pydio.layout.infoPanelToggle","open"),localStorage.setItem("pydio.layout.infoPanelOpen",infoPanelOpen?"open":"closed")),_this3.setState({infoPanelToggle:!0,infoPanelOpen:infoPanelOpen},function(){return _this3.resizeAfterTransition()})}):this.closeRightPanel()}},{key:"closeRightPanel",value:function(){var rState,_this4=this;"advanced-search"===this.state.rightColumnState?void 0!==(rState=localStorage.getItem("pydio.layout.rightColumnState"))&&rState&&"advanced-search"!==rState?this.openRightPanel(rState):this.setState({infoPanelToggle:!1},function(){_this4.resizeAfterTransition()}):(this.setState({infoPanelToggle:!1},function(){_this4.resizeAfterTransition()}),localStorage.setItem("pydio.layout.rightColumnState",""),localStorage.setItem("pydio.layout.infoPanelToggle","closed"))}},{key:"resizeAfterTransition",value:function(){var _this5=this;setTimeout(function(){_this5.refs.list&&_this5.refs.list.resize(),_this5.state.infoPanelToggle||_this5.setState({rightColumnState:null})},300)}},{key:"infoPanelContentChange",value:function(numberOfCards){var _this6=this;this.setState({infoPanelOpen:0<numberOfCards},function(){return _this6.resizeAfterTransition()})}},{key:"openDrawer",value:function(event){event.stopPropagation(),this.setState({drawerOpen:!0})}},{key:"render",value:function(){var _this7=this,saveSearch=this.props.muiTheme,mobile=this.props.pydio.UI.MOBILE_EXTENSIONS,appBarTextColor=(0,_color.default)(saveSearch.appBar.textColor),style=(0,_color.default)(saveSearch.appBar.color),thumbDisplay=(0,_color.default)(saveSearch.palette.primary1Color).hsl().array()[0],superLightBack=new _color.default({h:thumbDisplay,s:35,l:98}),props=new _color.default({h:thumbDisplay,s:30,l:96}),facets=this.state,themeLight=facets.themeLight,smallScreen=facets.smallScreen,leftPanelProps=facets.xtraSmallScreen;themeLight&&(style=superLightBack,appBarTextColor=(0,_color.default)(saveSearch.appBar.color));var searchLoading=_dom.default.getViewportWidth(),styles={appBarStyle:{zIndex:mobile?1:901,backgroundColor:style.toString(),height:72,display:"flex"},listStyle:{},buttonsStyle:{width:40,height:40,padding:10,borderRadius:"50%",color:appBarTextColor.fade(.03).toString(),transition:_dom.default.getBeziersTransition()},buttonsIconStyle:{fontSize:18,color:appBarTextColor.fade(.03).toString()},activeButtonStyle:{backgroundColor:appBarTextColor.fade(.9).toString()},activeButtonIconStyle:{color:appBarTextColor.fade(.03).toString()},raisedButtonStyle:{height:23,minWidth:0},raisedButtonLabelStyle:{height:23,paddingLeft:12,paddingRight:8,lineHeight:"23px",fontSize:11},flatButtonStyle:{height:23,lineHeight:"23px",minWidth:0},flatButtonLabelStyle:{height:23,fontSize:11,paddingLeft:8,paddingRight:8,color:appBarTextColor.fade(.03).toString()},infoPanelStyle:{backgroundColor:props.toString(),top:72},otherPanelsStyle:{backgroundColor:props.toString(),top:72,borderLeft:0,width:270},searchFormPanelStyle:{top:72,borderLeft:0,margin:10,width:smallScreen?leftPanelProps?searchLoading:420:520,right:leftPanelProps?-10:null,overflowY:"hidden",display:"flex",flexDirection:"column",backgroundColor:"white"},breadcrumbStyle:{},searchForm:{}};styles.activeButtonStyle=_objectSpread(_objectSpread({},styles.buttonsStyle),styles.activeButtonStyle),styles.activeButtonIconStyle=_objectSpread(_objectSpread({},styles.buttonsIconStyle),styles.activeButtonIconStyle);var savedSearches=this.state,setValues=savedSearches.infoPanelOpen,drawerOpen=savedSearches.drawerOpen,history=savedSearches.infoPanelToggle,values=savedSearches.filesListDisplayMode,rightColumnState=this.state.rightColumnState,pydio=this.props.pydio,labelStyle=pydio.user?pydio.user.getPreference("gui_preferences",!0):[],count=pydio.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR"),newButtonProps=pydio.getContextHolder(),searchView=newButtonProps.getContextNode()===newButtonProps.getSearchNode(),showChatTab=!pydio.getPluginConfigs("action.advanced_settings").get("GLOBAL_DISABLE_CHATS"),showAddressBook=!pydio.getPluginConfigs("action.user").get("DASH_DISABLE_ADDRESS_BOOK")&&!smallScreen,showInfoPanel=!leftPanelProps;!showChatTab||(clearSavedSearch=pydio.user.getRepositoriesList().get(pydio.user.activeRepository))&&!clearSavedSearch.getOwner()&&(showChatTab=!1),showChatTab||"chat"!==rightColumnState||(rightColumnState="info-panel"),showInfoPanel||"info-panel"!==rightColumnState||(rightColumnState="");var classes=["vertical_layout","vertical_fit","react-fs-template"],thumbDisplay=values&&0===values.indexOf("grid-")||"masonry"===values;(setValues||thumbDisplay)&&history&&classes.push("info-panel-open");var tutorialComponent,facets=this.props,style=facets.style,props=_objectWithoutProperties(facets,_excluded);count&&!labelStyle["WelcomeComponent.Pydio8.TourGuide.FSTemplate"]&&(tutorialComponent=_react.default.createElement(_WelcomeTour.default,{ref:"welcome",pydio:this.props.pydio}));searchLoading="rgba(255,255,255,.93)",savedSearches=null;themeLight&&(humanizeValues=(0,_color.default)(saveSearch.palette.primary1Color).hsl().array()[0],searchLoading=(0,_color.default)(saveSearch.palette.primary1Color).darken(.1).alpha(.87).toString(),savedSearches=new _color.default({h:humanizeValues,s:35,l:98}).toString());newButtonProps={buttonStyle:_objectSpread(_objectSpread({},styles.flatButtonStyle),{},{marginRight:4}),buttonLabelStyle:_objectSpread({},styles.flatButtonLabelStyle),buttonBackgroundColor:"rgba(255,255,255,0.17)",buttonHoverColor:"rgba(255,255,255,0.33)"},leftPanelProps={headerHeight:72,userWidgetProps:{color:searchLoading,mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:72,display:"flex",alignItems:"center"}}};themeLight&&(leftPanelProps.userWidgetProps.style=_objectSpread(_objectSpread({},leftPanelProps.userWidgetProps.style),{},{boxShadow:"none",backgroundColor:savedSearches,borderRight:"1px solid #e0e0e0"}),styles.breadcrumbStyle={color:appBarTextColor.toString()},styles.searchForm={mainStyle:{backgroundColor:"white",border:"1px solid "+appBarTextColor.fade(searchView?.6:.8).toString(),borderRadius:50},inputStyle:{color:appBarTextColor.toString()},hintStyle:{color:appBarTextColor.fade(.5).toString()},magnifierStyle:{color:appBarTextColor.fade(.1).toString()},filterButton:{color:appBarTextColor.toString()}},newButtonProps.buttonLabelStyle.color=saveSearch.palette.accent1Color,newButtonProps.buttonBackgroundColor="rgba(0,0,0,0.05)",newButtonProps.buttonHoverColor="rgba(0,0,0,0.10)");var stLabel,searchToolbar,clearSavedSearch=this.props,values=clearSavedSearch.values,setValues=clearSavedSearch.setValues,history=clearSavedSearch.history,facets=clearSavedSearch.facets,count=clearSavedSearch.activeFacets,labelStyle=clearSavedSearch.toggleFacet,humanizeValues=clearSavedSearch.humanizeValues,limit=clearSavedSearch.limit,setLimit=clearSavedSearch.setLimit,searchLoading=clearSavedSearch.searchLoading,savedSearches=clearSavedSearch.savedSearches,saveSearch=clearSavedSearch.saveSearch,clearSavedSearch=clearSavedSearch.clearSavedSearch;return searchView&&(leftPanelProps.userWidgetProps.style=_objectSpread(_objectSpread({},leftPanelProps.userWidgetProps.style),{},{opacity:0}),leftPanelProps.workspacesListProps={searchView:!0,values:values,setValues:setValues,searchLoading:searchLoading,facets:facets,activeFacets:count,toggleFacet:labelStyle},styles.appBarStyle=_objectSpread(_objectSpread({},styles.appBarStyle),{},{backgroundColor:"white",marginLeft:0}),styles.listStyle=_objectSpread(_objectSpread({},styles.listStyle),{},{marginLeft:250}),count=pydio.getContextHolder().getSearchNode().getChildren().size,searchToolbar=!0,labelStyle=_objectSpread({},styles.flatButtonLabelStyle),searchLoading?stLabel=pydio.MessageHash["searchengine.searching"]:0===count?stLabel=pydio.MessageHash[478]:count<limit?stLabel=pydio.MessageHash["searchengine.results.foundN"].replace("%1",count):count===limit&&(searchToolbar=!1,stLabel=pydio.MessageHash["searchengine.results.withMore"].replace("%1",limit)),searchToolbar&&(labelStyle=_objectSpread(_objectSpread({},labelStyle),{},{color:themeLight?"#616161":"white"})),searchToolbar=_react.default.createElement(_materialUi.FlatButton,{style:styles.flatButtonStyle,labelStyle:labelStyle,label:stLabel,disabled:searchToolbar,onClick:function(){setLimit(limit+20)}})),_react.default.createElement(_MasterLayout.default,{pydio:pydio,style:_objectSpread(_objectSpread({},style),{},{overflow:"hidden"}),desktopStyle:searchView?{marginLeft:0}:{},classes:classes,tutorialComponent:tutorialComponent,drawerOpen:drawerOpen,leftPanelProps:leftPanelProps,onCloseDrawerRequested:function(){_this7.setState({drawerOpen:!1})}},_react.default.createElement(_materialUi.Paper,{zDepth:themeLight&&!searchView?0:1,style:styles.appBarStyle,rounded:!1},searchView&&_react.default.createElement("div",null,_react.default.createElement(_materialUi.IconButton,{style:{width:56,height:56,padding:14,margin:"6px -6px 6px 6px"},iconClassName:"mdi mdi-arrow-left",iconStyle:{fontSize:30,color:appBarTextColor.fade(.03).toString()},onClick:function(){return _this7.unsetSearchView()}})),_react.default.createElement("div",{id:"workspace_toolbar",style:{flex:1,width:"calc(100% - 430px)",display:"flex"}},_react.default.createElement("span",{className:"drawer-button",style:{marginLeft:12,marginRight:-6}},_react.default.createElement(_materialUi.IconButton,{iconStyle:{color:appBarTextColor.fade(.03).toString()},iconClassName:"mdi mdi-menu",onClick:this.openDrawer.bind(this)})),_react.default.createElement("div",{style:{flex:1,overflow:"hidden"}},searchView&&_react.default.createElement(_reactTextfit.default,{mode:"single",min:12,max:22,style:_objectSpread(_objectSpread({},styles.breadcrumbStyle),{},{padding:"0 20px",fontSize:22,lineHeight:"44px",height:36})},pydio.MessageHash["searchengine.topbar.title"],humanizeValues(values)),!searchView&&_react.default.createElement(_Breadcrumb.default,_extends({},props,{startWithSeparator:!1,rootStyle:styles.breadcrumbStyle})),_react.default.createElement("div",{style:{height:32,paddingLeft:20,alignItems:"center",display:"flex",overflow:"hidden"}},searchToolbar,!searchView&&_react.default.createElement(ButtonMenu,_extends({},props,newButtonProps,{id:"create-button-menu",toolbars:["upload","create"],buttonTitle:this.props.pydio.MessageHash[198],raised:!1,secondary:!0,controller:props.pydio.Controller,openOnEvent:"tutorial-open-create-menu"})),_react.default.createElement(ListPaginator,{id:"paginator-toolbar",style:{height:23,borderRadius:2,background:newButtonProps.buttonBackgroundColor,marginRight:5},dataModel:props.pydio.getContextHolder(),smallDisplay:!0,toolbarDisplay:!0,toolbarColor:appBarTextColor}),!mobile&&_react.default.createElement(Toolbar,_extends({},props,{id:"main-toolbar",toolbars:["change_main","info_panel","info_panel_share","info_panel_edit_share"],groupOtherList:["change","other"],renderingType:"button",toolbarStyle:{overflow:"hidden"},flatButtonStyle:styles.flatButtonStyle,buttonStyle:styles.flatButtonLabelStyle})),mobile&&_react.default.createElement("span",{style:{flex:1}})))),_react.default.createElement("div",{style:{display:"flex",alignItems:"center"}},_react.default.createElement(Toolbar,_extends({},props,{id:"display-toolbar",toolbars:["display_toolbar"],renderingType:"icon-font",mergeItemsAsOneMenu:!0,mergedMenuIcom:"mdi mdi-settings",mergedMenuTitle:this.props.pydio.MessageHash[151],buttonStyle:styles.buttonsIconStyle,flatButtonStyle:styles.buttonsStyle})),!smallScreen&&_react.default.createElement(_UnifiedSearchForm.default,{style:{flex:1},active:searchView,pydio:pydio,formStyles:styles.searchForm,values:values,setValues:setValues,humanizeValues:humanizeValues,history:history,savedSearches:savedSearches,clearSavedSearch:clearSavedSearch,saveSearch:saveSearch,onRequestOpen:function(){return _this7.setSearchView()},onRequestClose:function(){return _this7.unsetSearchView()}}),_react.default.createElement("div",{style:{borderLeft:"1px solid "+appBarTextColor.fade(.77).toString(),margin:"0 10px",height:72,display:"none"}}),_react.default.createElement("div",{style:{display:"flex",paddingRight:10}},showInfoPanel&&_react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-information",style:"info-panel"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"info-panel"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onClick:function(){_this7.openRightPanel("info-panel")},tooltip:pydio.MessageHash["info-panel"===rightColumnState?"86":"341"]}),!searchView&&showChatTab&&_react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-message-text",style:"chat"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"chat"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onClick:function(){_this7.openRightPanel("chat")},tooltip:pydio.MessageHash["chat"===rightColumnState?"86":"635"],tooltipPosition:"bottom-left"}),!searchView&&showAddressBook&&_react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-account-card-details",style:"address-book"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"address-book"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onClick:function(){_this7.openRightPanel("address-book")},tooltip:pydio.MessageHash["address-book"===rightColumnState?"86":"592"],tooltipPosition:showChatTab?"bottom-center":"bottom-left"})))),_react.default.createElement(_MainFilesList.default,{ref:"list",key:searchView?"search-results":"files-list",pydio:pydio,dataModel:pydio.getContextHolder(),searchResults:searchView,searchScope:values?values.scope:null,searchLoading:searchLoading,onDisplayModeChange:function(dMode){_this7.setState({filesListDisplayMode:dMode})},gridBackground:superLightBack,style:styles.listStyle}),"info-panel"===rightColumnState&&_react.default.createElement(_InfoPanel.default,_extends({},props,{dataModel:pydio.getContextHolder(),onRequestClose:function(){_this7.closeRightPanel()},onContentChange:this.infoPanelContentChange.bind(this),style:styles.infoPanelStyle,mainEmptyStateProps:thumbDisplay?{iconClassName:"",primaryTextId:"ajax_gui.infopanel.empty.select.file",style:{minHeight:180,backgroundColor:"transparent",padding:"0 20px"}}:null})),"chat"===rightColumnState&&_react.default.createElement(_CellChat.default,{pydio:pydio,style:styles.otherPanelsStyle,zDepth:0,onRequestClose:function(){_this7.closeRightPanel()}}),"address-book"===rightColumnState&&_react.default.createElement(_AddressBookPanel.default,{pydio:pydio,style:styles.otherPanelsStyle,zDepth:0,onRequestClose:function(){_this7.closeRightPanel()}}),_react.default.createElement(_EditionPanel.default,props))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),FSTemplate}();exports.default=FSTemplate,exports.default=FSTemplate=withSearch(FSTemplate,"main","all"),exports.default=FSTemplate=(0,_styles.muiThemeable)()(FSTemplate),FSTemplate.INFO_PANEL_WIDTH=270,module.exports=exports.default},{"../detailpanes/InfoPanel":4,"../search/components/UnifiedSearchForm":35,"./AddressBookPanel":36,"./Breadcrumb":37,"./CellChat":38,"./EditionPanel":40,"./MainFilesList":43,"./MasterLayout":44,"./WelcomeTour":47,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react","react-textfit":"react-textfit"}],42:[function(_default,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(_default("prop-types")),_pydio=_interopRequireDefault(_default("pydio")),_react=_default("react"),_styles=_default("material-ui/styles"),_materialUi=_default("material-ui"),_color=_interopRequireDefault(_default("color")),_func=_interopRequireDefault(_default("pydio/util/func"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var CircularWithValue=function(){_inherits(CircularWithValue,_react.PureComponent);var _super=_createSuper(CircularWithValue);function CircularWithValue(){return _classCallCheck(this,CircularWithValue),_super.apply(this,arguments)}return _createClass(CircularWithValue,[{key:"render",value:function(){var onClick=this.props,size=onClick.size,value=onClick.value,thickness=onClick.thickness,color=onClick.color,styles=onClick.bgColor,trackColor=onClick.trackColor,fontSize=onClick.fontSize,rootStyle=onClick.rootStyle,onClick=onClick.onClick,styles={track:_objectSpread({position:"relative",height:size,width:size,backgroundColor:trackColor,borderRadius:"50%",cursor:onClick?"pointer":"default"},rootStyle),label:{color:color,fontSize:fontSize,fontWeight:500,height:size-2*thickness,width:size-2*thickness,backgroundColor:styles,position:"absolute",top:thickness,left:thickness,lineHeight:size-2*thickness+"px",borderRadius:"50%",textAlign:"center"}};return React.createElement("div",{style:styles.track,onClick:onClick},React.createElement("div",{style:styles.label},value,"%"),React.createElement(_materialUi.CircularProgress,{size:size,thickness:thickness,mode:"determinate",value:value,style:{position:"absolute",top:0,left:0}}))}}]),CircularWithValue}(),_default=function(){_inherits(FilePreview,_react.PureComponent);var _super2=_createSuper(FilePreview);function FilePreview(_this){return _classCallCheck(this,FilePreview),(_this=_super2.call(this,_this)).state={loading:!1},_this}return _createClass(FilePreview,[{key:"getStyles",value:function(){var color=this.props,style=color.style,mimeFontStyle=color.mimeFontStyle,lightBackground=color.lightBackground,muiTheme=color.muiTheme,color=new _color.default(muiTheme.palette.primary1Color).saturationl(18).lightness(44).toString();return{rootStyle:_objectSpread({backgroundColor:new _color.default(muiTheme.palette.primary1Color).saturationl(15).lightness(lightBackground?98:94).toString(),alignItems:"initial"},style),mimeFontStyle:_objectSpread({color:color},mimeFontStyle),progressColor:muiTheme.palette.primary1Color}}},{key:"insertPreviewNode",value:function(containerNode){this._previewNode=containerNode;containerNode=this.refs.container;containerNode.innerHTML="",containerNode.className="richPreviewContainer",containerNode.appendChild(this._previewNode)}},{key:"destroyPreviewNode",value:function(){this._previewNode&&(this._previewNode.destroyElement(),this._previewNode.parentNode&&this._previewNode.parentNode.removeChild(this._previewNode),this._previewNode=null)}},{key:"componentDidMount",value:function(){this.loadCoveringImage()}},{key:"componentWillUnmount",value:function(){this.destroyPreviewNode()}},{key:"componentWillReceiveProps",value:function(nextProps){if(nextProps.node.getPath()!==this.props.node.getPath())return this.destroyPreviewNode(),void this.loadCoveringImage();this._previewNode||nextProps.loadThumbnail!==this.props.loadThumbnail&&nextProps.loadThumbnail&&this.loadCoveringImage(!0)}},{key:"loadCoveringImage",value:function(){var editorClassName,pydio=this.props,node=pydio.node,editors=pydio.loadThumbnail,richPreview=pydio.richPreview;!(editors||0<arguments.length&&void 0!==arguments[0]&&arguments[0])||((editors=(pydio=_pydio.default.getInstance()).Registry.findEditorsForMime(node.isLeaf()?node.getAjxpMime():"mime_folder",!0))&&editors.length||(richPreview&&node.getMetadata().get("PDFPreview")?editors=pydio.Registry.findEditorsForMime("pdf",!0):node.getMetadata().get("ImagePreview")&&(editors=pydio.Registry.findEditorsForMime("jpg",!0)),editors&&editors.length))&&(editorClassName=editors[0].editorClass,pydio.Registry.loadEditorResources(editors[0].resourcesManager,function(){var component=_func.default.getFunctionByName(editorClassName,window);component&&this.loadPreviewFromEditor(component,node)}.bind(this)))}},{key:"loadPreviewFromEditor",value:function(editorClass,node){this.setState({EditorClass:this.props.richPreview?editorClass.Panel:editorClass.Badge})}},{key:"render",value:function(){var element,EditorClass=this.getStyles(),rootStyle=EditorClass.rootStyle,mimeFontStyle=EditorClass.mimeFontStyle,progressColor=EditorClass.progressColor,additionalClass=this.props,icClass=additionalClass.node,mimeClassName=additionalClass.mimeClassName,processing=additionalClass.processing,uploading=additionalClass.uploading,uploadprogress=additionalClass.uploadprogress,displayLarge=additionalClass.displayLarge,EditorClass=this.state.EditorClass,additionalClass="";return uploading?(displayLarge&&(rootStyle.display="flex",rootStyle.alignItems="center",rootStyle.justifyContent="center"),element=React.createElement(CircularWithValue,{size:displayLarge?48:28,thickness:displayLarge?4:2,value:uploadprogress,rootStyle:displayLarge?{}:{margin:6},fontSize:displayLarge?12:9,color:progressColor,bgColor:rootStyle.backgroundColor,trackColor:"white",onClick:function(){_pydio.default.getInstance().Controller.fireAction("upload")}})):processing?150<rootStyle.height?(element=React.createElement(_materialUi.CircularProgress,{size:30,thickness:2}),rootStyle.alignItems="center",rootStyle.justifyContent="center"):element=React.createElement(_materialUi.CircularProgress,{size:24,thickness:1.5,style:{margin:8}}):EditorClass?(element=React.createElement(EditorClass,_extends({pydio:_pydio.default.getInstance()},this.props,{preview:!0,mimeFontStyle:mimeFontStyle})),additionalClass=" editor_mime_"+icClass.getAjxpMime()):((icClass=icClass.getSvgSource()||(icClass.isLeaf()?"file":"folder"))&&!icClass.startsWith("icomoon")&&(icClass="mdi mdi-"+icClass),element=React.createElement("div",{key:"icon",className:mimeClassName||"mimefont "+icClass,style:mimeFontStyle})),React.createElement("div",{ref:"container",style:rootStyle,className:"mimefont-container"+(EditorClass?" with-editor-badge":"")+additionalClass,onClick:this.props.onClick},element)}}],[{key:"propTypes",get:function(){return{node:_propTypes.default.instanceOf(AjxpNode).isRequired,loadThumbnail:_propTypes.default.bool,richPreview:_propTypes.default.bool,processing:_propTypes.default.bool,style:_propTypes.default.object,mimeFontStyle:_propTypes.default.object,mimeClassName:_propTypes.default.string}}},{key:"defaultProps",get:function(){return{richPreview:!1}}}]),FilePreview}(),_default=(0,_styles.muiThemeable)()(_default);exports.default=_default,module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/util/func":"pydio/util/func",react:"react"}],43:[function(require,module,exports){!function(global){!function(){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_pydio=_interopRequireDefault(require("pydio")),_path=_interopRequireDefault(require("pydio/util/path")),_xml=_interopRequireDefault(require("pydio/util/xml")),_resourcesManager=_interopRequireDefault(require("pydio/http/resources-manager")),_action=_interopRequireDefault(require("pydio/model/action")),_reactDom=_interopRequireDefault(require("react-dom")),_FilePreview=_interopRequireDefault(require("./FilePreview")),_materialUi=require("material-ui"),_CellsMessageToolbar=_interopRequireDefault(require("./CellsMessageToolbar")),_OverlayIcon=_interopRequireDefault(require("./OverlayIcon")),_lodash=require("lodash");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var MainFilesList=_pydio.default.requireLib("components"),SimpleList=MainFilesList.SimpleList,Masonry=MainFilesList.Masonry,MainFilesList=_pydio.default.requireLib("boot"),moment=MainFilesList.moment,SingleJobProgress=MainFilesList.SingleJobProgress,ComponentConfigsParser=function(){function ComponentConfigsParser(renderLabel){_classCallCheck(this,ComponentConfigsParser),this.renderLabel=renderLabel}return _createClass(ComponentConfigsParser,[{key:"getDefaultListColumns",value:function(){return{text:{label:"File Name",message:"1",width:"50%",renderCell:this.renderLabel,sortType:"file-natural",remoteSortAttribute:"ajxp_label"},filesize:{label:"File Size",message:"2",sortType:"number",sortAttribute:"bytesize",remoteSortAttribute:"filesize"},mimestring:{label:"File Type",message:"3",sortType:"string"},ajxp_modiftime:{label:"Mofidied on",message:"4",sortType:"number"}}}},{key:"loadConfigs",value:function(){var _this=this,columnsNodes=_xml.default.XPathSelectNodes(_pydio.default.getInstance().getXmlRegistry(),'client_configs/component_config[@component="FilesList"]/columns/column|client_configs/component_config[@component="FilesList"]/columns/additional_column'),columns={},messages=_pydio.default.getMessages(),proms=[];return columnsNodes.forEach(function(className){var reactModifier,name=className.getAttribute("attributeName"),sortType={String:"string",StringDirFile:"string",MyDate:"number",CellSorterValue:"number",Number:"number"}[sortType=className.getAttribute("sortType")]||"string";"bytesize"===name&&(sortType="number"),columns[name]={message:className.getAttribute("messageId"),label:className.getAttribute("messageString")?className.getAttribute("messageString"):messages[className.getAttribute("messageId")],sortType:sortType,inlineHide:"false"===className.getAttribute("defaultVisibilty")},"ajxp_label"===name&&(columns[name].renderCell=_this.renderLabel),className.getAttribute("reactModifier")&&(className=(reactModifier=className.getAttribute("reactModifier")).split(".",1).shift(),proms.push(_resourcesManager.default.loadClass(className).then(function(){columns[name].renderCell=FuncUtils.getFunctionByName(reactModifier,global),columns[name].renderComponent=columns[name].renderCell,-1<reactModifier.indexOf("renderTagsCloud")&&(columns[name].renderBlock=!0)})))}),Promise.all(proms).then(function(){return columns||_this.getDefaultListColumns()})}}]),ComponentConfigsParser}(),MainFilesList=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(MainFilesList,_react["default"].Component);var _super=_createSuper(MainFilesList);function MainFilesList(props,dataModel){_classCallCheck(this,MainFilesList);var _this2=_super.call(this,props,dataModel),configParser=new ComponentConfigsParser(_this2.tableEntryRenderCell.bind(_assertThisInitialized(_this2)));configParser.loadConfigs("FilesList").then(function(columns){_this2.setState({columns:columns})});var dMode=_this2.getPrefValue("FilesListDisplayMode",_this2.props.displayMode||"list"),tSize=200;"grid-320"===dMode?tSize=320:"grid-80"===dMode&&(tSize=80);dataModel=_this2.props.dataModel;return _this2.state={contextNode:dataModel.getContextNode(),displayMode:dMode,showExtensions:_this2.getPrefValue("FilesListShowExtensions",!1),pinBookmarks:_this2.getPrefValue("FilesListPinBookmarks",!1),thumbNearest:tSize,thumbSize:tSize,elementsPerLine:5,columns:configParser.getDefaultListColumns(),parentIsScrolling:props.parentIsScrolling,repositoryId:props.pydio.repositoryId},_this2}return _createClass(MainFilesList,[{key:"getPrefValue",value:function(prefName,defaultValue){var guiPrefs=this.props.pydio;if(!guiPrefs.user)return defaultValue;var slug=guiPrefs.user.getActiveRepositoryObject().getSlug(),guiPrefs=guiPrefs.user?guiPrefs.user.getPreference("gui_preferences",!0):{};return guiPrefs[prefName]&&void 0!==guiPrefs[prefName][slug]?guiPrefs[prefName][slug]:defaultValue}},{key:"setPrefValue",value:function(prefName,value){var slug,guiPrefs,dPrefs,pydio=this.props.pydio;pydio.user&&(slug=pydio.user.getActiveRepositoryObject().getSlug(),(dPrefs=(guiPrefs=pydio.user?pydio.user.getPreference("gui_preferences",!0):{})[prefName]||{})[slug]=value,guiPrefs[prefName]=dPrefs,pydio.user.setPreference("gui_preferences",guiPrefs,!0),pydio.user.savePreference("gui_preferences"))}},{key:"componentDidMount",value:function(){var dataModel=this.props.dataModel;this._contextObserver=function(){this.setState({contextNode:dataModel.getContextNode()})}.bind(this),dataModel.observe("context_changed",this._contextObserver),this.props.pydio.getController().updateGuiActions(this.getPydioActions()),this.recomputeThumbnailsDimension(),this._thumbObserver=(0,_lodash.debounce)(this.recomputeThumbnailsDimension.bind(this),500),window.addEventListener?window.addEventListener("resize",this._thumbObserver):window.attachEvent("onresize",this._thumbObserver),this.props.onDisplayModeChange&&this.state&&this.state.displayMode&&this.props.onDisplayModeChange(this.state.displayMode)}},{key:"componentWillUnmount",value:function(){this.props.dataModel.stopObserving("context_changed",this._contextObserver),this.getPydioActions(!0).map(function(key){this.props.pydio.getController().deleteFromGuiActions(key)}.bind(this)),window.addEventListener?window.removeEventListener("resize",this._thumbObserver):window.detachEvent("onresize",this._thumbObserver)}},{key:"shouldComponentUpdate",value:function(nextProps,nextState){return!this.state||this.state.repositoryId!==nextProps.pydio.repositoryId||nextProps.dataModel!==this.props.dataModel||nextProps.searchLoading!==this.props.searchLoading||nextProps.searchResults!==this.props.searchResults||nextProps.searchScope!==this.props.searchScope||nextState!==this.state}},{key:"componentWillReceiveProps",value:function(tSize){var dMode,_this3=this;tSize.dataModel!==this.props.dataModel&&(this.props.dataModel.stopObserving("context_changed",this._contextObserver),tSize.dataModel.observe("context_changed",this._contextObserver),this._contextObserver()),this.state&&this.state.repositoryId!==this.props.pydio.repositoryId&&(this.props.pydio.getController().updateGuiActions(this.getPydioActions()),new ComponentConfigsParser(this.tableEntryRenderCell.bind(this)).loadConfigs("FilesList").then(function(columns){_this3.setState({columns:columns})}),dMode=this.getPrefValue("FilesListDisplayMode",this.state&&this.state.displayMode?this.state.displayMode:"list"),this.state.displayMode!==dMode&&0===dMode.indexOf("grid-")&&(tSize=200,"grid-320"===dMode?tSize=320:"grid-80"===dMode&&(tSize=80),this.setState({thumbNearest:tSize,thumbSize:tSize})),this.setState({repositoryId:this.props.pydio.repositoryId,displayMode:dMode},function(){_this3.props.onDisplayModeChange&&_this3.props.onDisplayModeChange(dMode)}))}},{key:"resize",value:function(){this.recomputeThumbnailsDimension()}},{key:"recomputeThumbnailsDimension",value:function(nearest){var width=this.state,contextNode=width.contextNode,displayMode=width.displayMode,blockNumber=width.thumbNearest;if(0===displayMode.indexOf("grid")){var containerWidth,width="grid-80"===displayMode?4:8;try{containerWidth=_reactDom.default.findDOMNode(this.refs.list.refs.infinite).clientWidth-5}catch(e){containerWidth=200}(!nearest||nearest instanceof Event)&&(nearest=blockNumber);blockNumber=Math.floor(containerWidth/nearest),width=Math.floor(containerWidth/blockNumber)-2*width;this.props.horizontalRibbon&&(blockNumber=contextNode.getChildren().size,width="grid-160"===displayMode?160:"grid-320"===displayMode?280:"grid-80"===displayMode?100:200),this.setState({elementsPerLine:blockNumber,thumbSize:width,thumbNearest:nearest})}}},{key:"computeLabel",value:function(ext){var showExtensions=this.state.showExtensions,label=ext.getLabel();return!ext.isLeaf()||"."===label[0]||(ext=_path.default.getFileExtension(label))&&(label=_react.default.createElement("span",null,label.substring(0,label.length-(ext="."+ext).length),_react.default.createElement("span",{className:"label-extension",style:{opacity:.33,display:showExtensions?null:"none"}},ext))),label}},{key:"tableEntryRenderCell",value:function(node){return _react.default.createElement("span",null,_react.default.createElement(_FilePreview.default,{rounded:!0,loadThumbnail:!1,node:node,style:{backgroundColor:"transparent"}}),_react.default.createElement("span",{style:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},title:node.getLabel()},this.computeLabel(node)))}},{key:"entryRenderIcon",value:function(node){var _this4=this,entryProps=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},displayMode=this.state.displayMode,lightBackground=0===displayMode.indexOf("grid")||"masonry"===displayMode;if(entryProps&&entryProps.parent)return _react.default.createElement(_FilePreview.default,{loadThumbnail:!1,node:node,mimeClassName:"mimefont mdi mdi-chevron-left",onClick:function(){_this4.entryHandleClicks(node,SimpleList.CLICK_TYPE_DOUBLE)},style:{cursor:"pointer"},lightBackground:lightBackground});var hasThumbnail=!!node.getMetadata().get("thumbnails")||!!node.getMetadata().get("ImagePreview"),processing=!!node.getMetadata().get("Processing"),uploading="loading"===node.getMetadata().get("local:UploadStatus"),uploadprogress=node.getMetadata().get("local:UploadProgress");return _react.default.createElement(_FilePreview.default,{loadThumbnail:!entryProps.parentIsScrolling&&hasThumbnail&&!processing,node:node,processing:processing,lightBackground:lightBackground,displayLarge:lightBackground,mimeFontOverlay:"list"===displayMode,uploading:uploading,uploadprogress:uploadprogress})}},{key:"entryRenderActions",value:function(node){var style,content=null,elements=this.props,pydio=elements.pydio,dataModel=elements.dataModel,searchResults=elements.searchResults,displayMode=this.state.displayMode,gridMode=0===displayMode.indexOf("grid-")||"masonry"===displayMode,overlayClasses=node.getMetadata().get("overlay_class")||"";if(node.getMetadata().has("local:entryRenderActions"))return node.getMetadata().get("local:entryRenderActions")(node,this.props,this.state);if(pydio.UI.MOBILE_EXTENSIONS){var ContextMenuModel=require("pydio/model/context-menu");return _react.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-dots-vertical",style:{zIndex:0,padding:10},tooltip:"Info",onClick:function(event){pydio.observeOnce("actions_refreshed",function(){ContextMenuModel.getInstance().openNodeAtPosition(node,event.clientX,event.clientY)}),event.stopPropagation(),dataModel.setSelectedNodes([node]),ContextMenuModel.getInstance().openNodeAtPosition(node,event.clientX,event.clientY)}})}return!overlayClasses&&"list"===displayMode||(elements=overlayClasses.split(",").filter(function(c){return!!c}),elements=(elements=gridMode?elements.filter(function(c){return"mdi mdi-star"!==c}):elements).map(function(c){return _react.default.createElement(_OverlayIcon.default,{node:node,key:c,overlay:c,pydio:pydio,disableActions:!!searchResults,tooltipPosition:gridMode?"bottom-right":void 0,popoverDirection:gridMode?"left":"right"})}),"list"!==displayMode&&"masonry"!==displayMode&&elements.push(_react.default.createElement(_OverlayIcon.default,{pydio:pydio,node:node,overlay:"mdi mdi-tag-outline",disableActions:!!searchResults,tooltipPosition:gridMode?"bottom-right":void 0,popoverDirection:gridMode?"left":"right"})),gridMode&&elements.unshift(_react.default.createElement(_OverlayIcon.default,{pydio:pydio,node:node,overlay:"mdi mdi-star"+(-1<overlayClasses.indexOf("mdi-star")?"":"-outline"),disableActions:!!searchResults,tooltipPosition:"bottom-right",clickActions:!0})),"detail"===displayMode&&(style={width:34*elements.length}),content=_react.default.createElement("div",{className:"overlay_icon_div",style:style},elements),0===displayMode.indexOf("grid-")&&node.isLeaf()&&node.getMetadata().get("ImagePreview")&&node.getSvgSource()&&(content=_react.default.createElement(_react.default.Fragment,null,content,_react.default.createElement("span",{style:{flex:1}}),_react.default.createElement("div",{className:"mdi mdi-"+node.getSvgSource()+" mimefont mimefont-overlay"})))),content}},{key:"entryHandleClicks",value:function(node,otherSelection,event){var mobile=this.props,dm=mobile.dataModel,newSelection=mobile.pydio,mobile=newSelection.UI.MOBILE_EXTENSIONS||this.props.horizontalRibbon;dm.getContextNode().getParent()===node&&otherSelection===SimpleList.CLICK_TYPE_SIMPLE||(mobile||otherSelection&&otherSelection!==SimpleList.CLICK_TYPE_SIMPLE?!mobile&&otherSelection!==SimpleList.CLICK_TYPE_DOUBLE||(node.isBrowsable()?newSelection.goTo(node):(dm.setSelectedNodes([node]),newSelection.Controller.fireAction("open_with_unique"))):(otherSelection=dm.getSelectedNodes(),event&&event.shiftKey&&otherSelection.length&&this.refs.list?(newSelection=this.refs.list.computeSelectionFromCurrentPlusTargetNode(otherSelection,node),dm.setSelectedNodes(newSelection)):event&&(event.ctrlKey||event.metaKey)&&otherSelection.length?-1===otherSelection.indexOf(node)?dm.setSelectedNodes([].concat(_toConsumableArray(otherSelection),[node])):(otherSelection=otherSelection.filter(function(obj){return obj!==node}),dm.setSelectedNodes(otherSelection)):dm.setSelectedNodes([node])))}},{key:"entryRenderSecondLine",value:function(node){var dateString,title,pieces=this.props,metaIc=pieces.searchResults,searchScope=pieces.searchScope,pydio=pieces.pydio,metaData=node.getMetadata(),pieces=[],standardPieces=[],otherPieces=[];if(metaData.has("pending_operation"))return metaData.has("pending_operation_uuid")?_react.default.createElement(SingleJobProgress,{jobID:metaData.get("pending_operation_uuid"),style:{display:"flex",flexDirection:"row-reverse",alignItems:"center"},progressStyle:{width:60,paddingRight:10},labelStyle:{flex:1}}):_react.default.createElement("span",{style:{fontStyle:"italic",color:"rgba(0,0,0,.33)"}},metaData.get("pending_operation"));if(metaData.has("local:entryRenderSecondLine"))return metaData.get("local:entryRenderSecondLine")();if(metaData.has("local:entryDescription"))return _react.default.createElement("span",{className:"metadata_chunk metadata_chunk_description"},metaData.get("local:entryDescription"));metaIc&&(node.getMetadata().get("repository_display")&&(title="["+node.getMetadata().get("repository_display")+"]"),(dateString=node.isLeaf()?_path.default.getDirname(node.getPath()):node.getPath())&&"/"===dateString.charAt(0)&&(dateString=dateString.substr(1)),pieces.push(_react.default.createElement("span",{className:"metadata_chunk metadata_chunk_description metadata_chunk_clickable",key:"result_path",style:{marginRight:5,cursor:"pointer"},onClick:function(e){e.stopPropagation(),pydio.goTo(node)}},dateString="all"===searchScope&&dateString?title+" "+dateString:dateString||title),_react.default.createElement("span",null,"• "))),metaData.get("ajxp_modiftime")&&(-1<(dateString=(title=moment(1e3*parseFloat(metaData.get("ajxp_modiftime")))).calendar()).indexOf("/")&&(dateString=title.fromNow()),title=_path.default.formatModifDate(title.toDate()),pieces.push(_react.default.createElement("span",{key:"time_description",title:title,className:"metadata_chunk metadata_chunk_description"},dateString)));var columns=this.state.columns;Object.keys(columns).forEach(function(s){var columnDef=columns[s],standard=!1;if("ajxp_label"!==s&&"text"!==s&&"ajxp_modiftime"!==s&&!columnDef.inlineHide){if("ajxp_dirname"===s&&metaData.get("filename"))var sep=_path.default.getDirname(metaData.get("filename")),cell=sep||"/",standard=!0;else if("bytesize"===s){if(!metaData.has(s)||"-"===metaData.get(s))return;cell=_path.default.roundFileSize(parseInt(metaData.get(s))),standard=!0}else if(columnDef.renderComponent){if(columnDef.name=s,null===(cell=columnDef.renderComponent(node,columnDef)))return}else{"mimestring"!==s&&"readable_dimension"!==s||(standard=!0);var cellClass=metaData.get(s)||"";if(!cellClass)return;cell=cellClass=cellClass.length&&26<cellClass.length?_react.default.createElement(_react.default.Fragment,null,cellClass.substr(0,26),"…"):cellClass}sep=_react.default.createElement("span",{className:"icon-angle-right"}),cellClass="metadata_chunk metadata_chunk_"+(standard?"standard":"other")+" metadata_chunk_"+s;columnDef.renderComponent&&columnDef.renderBlock&&(cellClass+=" metadata_chunk_block");cell=_react.default.createElement("span",{key:s,className:cellClass},sep,_react.default.createElement("span",{className:"text_label"},cell));(standard?standardPieces:otherPieces).push(cell)}});metaIc=_react.default.createElement(_OverlayIcon.default,{pydio:pydio,node:node,overlay:"mdi mdi-tag-outline",style:{height:22,width:22,margin:"0 2px",padding:"0 2px"},disableActions:!!metaIc,className:"metadata_chunk metadata_chunk_standard",tooltipPosition:"bottom-right",popoverDirection:"left"});return pieces.push.apply(pieces,otherPieces.concat([metaIc],standardPieces)),pieces}},{key:"switchDisplayMode",value:function(displayMode){var _this5=this;this.setState({displayMode:displayMode},function(){var near=null;0===displayMode.indexOf("grid-")&&(near=parseInt(displayMode.split("-")[1])),_this5.recomputeThumbnailsDimension(near),_this5.setPrefValue("FilesListDisplayMode",displayMode),_this5.props.onDisplayModeChange&&_this5.props.onDisplayModeChange(displayMode),_this5.props.pydio.notify("actions_refreshed")})}},{key:"buildDisplayModeItems",value:function(){var _this6=this,displayMode=this.state.displayMode;return[{name:_pydio.default.getMessages()["ajax_gui.list.display-mode.list"],title:227,icon_class:"mdi mdi-view-list",value:"list",hasAccessKey:!0,accessKey:"list_access_key"},{name:_pydio.default.getMessages()["ajax_gui.list.display-mode.details"],title:461,icon_class:"mdi mdi-view-headline",value:"detail",hasAccessKey:!0,accessKey:"detail_access_key"},{name:_pydio.default.getMessages()["ajax_gui.list.display-mode.thumbs"],title:229,icon_class:"mdi mdi-view-grid",value:"grid-160",hasAccessKey:!0,accessKey:"thumbs_access_key"},{name:_pydio.default.getMessages()["ajax_gui.list.display-mode.thumbs-large"],title:229,icon_class:"mdi mdi-view-agenda",value:"grid-320",hasAccessKey:!1},{name:_pydio.default.getMessages()["ajax_gui.list.display-mode.thumbs-small"],title:229,icon_class:"mdi mdi-view-module",value:"grid-80",hasAccessKey:!1},{name:_pydio.default.getMessages()["ajax_gui.list.display-mode.masonry"],title:229,icon_class:"mdi mdi-view-dashboard",value:"masonry",hasAccessKey:!1}].map(function(value){var i=_objectSpread({},value),value=value.value;return i.callback=function(){_this6.switchDisplayMode(i.value)},value===displayMode&&(i.icon_class="mdi mdi-check"),i})}},{key:"buildShowExtensionsItems",value:function(){var _this7=this,_this$state2=this.state,showExtensions=_this$state2.showExtensions,pinBookmarks=_this$state2.pinBookmarks;return[{name:_pydio.default.getMessages()["ajax_gui.list.extensions.show"],icon_class:showExtensions?"mdi mdi-toggle-switch":"mdi mdi-toggle-switch-off",callback:function(){_this7.setState({showExtensions:!showExtensions},function(){_this7.props.pydio.notify("actions_refreshed"),_this7.setPrefValue("FilesListShowExtensions",!showExtensions)})}},{name:_pydio.default.getMessages()["ajax_gui.list.pin.bookmarks"],icon_class:pinBookmarks?"mdi mdi-toggle-switch":"mdi mdi-toggle-switch-off",callback:function(){_this7.setState({pinBookmarks:!pinBookmarks},function(){_this7.props.pydio.notify("actions_refreshed"),_this7.setPrefValue("FilesListPinBookmarks",!pinBookmarks)})}}]}},{key:"getPydioActions",value:function(){if(0<arguments.length&&void 0!==arguments[0]&&arguments[0])return["switch_display_mode","toggle_show_extensions"];var extAction=new _action.default({name:"switch_display_mode",icon_class:"mdi mdi-view-list",text_id:150,title_id:151,text:MessageHash[150],title:MessageHash[151],hasAccessKey:!1,subMenu:!0,subMenuUpdateImage:!0},{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"display_toolbar",contextMenu:!1,infoPanel:!1},{},{},{dynamicBuilder:this.buildDisplayModeItems.bind(this)}),buttons=new Map;buttons.set("switch_display_mode",extAction);extAction=new _action.default({name:"toggle_show_extensions",icon_class:"mdi mdi-format-size",text_id:"ajax_gui.list.extensions.action",text:_pydio.default.getMessages()["ajax_gui.list.extensions.action"],subMenu:!0,subMenuUpdateImage:!0},{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"display_toolbar",contextMenu:!1,infoPanel:!1},{},{},{dynamicBuilder:this.buildShowExtensionsItems.bind(this)});return buttons.set("toggle_show_extensions",extAction),buttons}},{key:"render",value:function(){var tableKeys,sortKeys,elementStyle,elementHeight,entryRenderSecondLine,_this8=this,dMode=this.props,pydio=dMode.pydio,dataModel=dMode.dataModel,style=dMode.style,searchResults=dMode.gridBackground,infiniteSliceCount=this.state,contextNode=infiniteSliceCount.contextNode,additionalStyle=infiniteSliceCount.displayMode,iconClassName=infiniteSliceCount.columns,thumbSize=infiniteSliceCount.thumbSize,pinBookmarks=infiniteSliceCount.pinBookmarks,className="files-list layout-fill main-files-list",elementsPerLine=1,dMode=additionalStyle;0===dMode.indexOf("grid-")&&(emptyStateProps=parseInt(dMode.split("-")[1]),dMode="grid");infiniteSliceCount=50,additionalStyle={};"detail"===dMode?(elementHeight=SimpleList.HEIGHT_ONE_LINE,tableKeys=iconClassName):"grid"===dMode?(sortKeys=iconClassName,className+=" material-list-grid grid-size-"+emptyStateProps,searchLoading=80===emptyStateProps?16:36,(elementHeight=0<(elementsPerLine=this.state.elementsPerLine)?Math.ceil((thumbSize+searchLoading)/elementsPerLine):elementHeight)&&!this.props.horizontalRibbon||(elementHeight=1),elementStyle={width:thumbSize,height:thumbSize+searchLoading},this.props.horizontalRibbon&&(className+=" horizontal-ribbon"),320===emptyStateProps?infiniteSliceCount=25:160===emptyStateProps?infiniteSliceCount=80:80===emptyStateProps&&(infiniteSliceCount=200),additionalStyle={backgroundColor:searchResults}):"list"===dMode&&(sortKeys=iconClassName,elementHeight=SimpleList.HEIGHT_TWO_LINES,entryRenderSecondLine=this.entryRenderSecondLine.bind(this));var recyclePath,searchLoading=pydio.MessageHash,emptyStateProps=pydio.Controller.getActionByName("upload")&&!contextNode.getMetadata().has("node_readonly"),searchResults=searchLoading[emptyStateProps?"565":"566"],iconClassName=emptyStateProps?"mdi mdi-cloud-upload":"mdi mdi-folder-outline",emptyStateProps={style:{backgroundColor:"transparent"},iconClassName:iconClassName,primaryTextId:searchLoading[562],secondaryTextId:searchResults};contextNode.isRoot()?(groupProps=!(!pydio.user||!pydio.user.activeRepository)&&pydio.user.getRepositoriesList().get(pydio.user.activeRepository).getOwner(),recyclePath=contextNode.getMetadata().get("repo_has_recycle"),emptyStateProps={style:{backgroundColor:"transparent"},iconClassName:iconClassName,primaryTextId:groupProps?searchLoading[631]:searchLoading[563],secondaryTextId:searchResults},recyclePath&&(emptyStateProps=_objectSpread(_objectSpread({},emptyStateProps),{},{checkEmptyState:function(node){return node.isLoaded()&&1===node.getChildren().size&&node.getChildren().get(recyclePath)},actionLabelId:searchLoading[567],actionIconClassName:"mdi mdi-delete",actionCallback:function(e){pydio.goTo(recyclePath)}}))):(searchScope=dataModel.getRootNode().getMetadata().get("repo_has_recycle"),contextNode.getPath()===searchScope&&(emptyStateProps=_objectSpread(_objectSpread({},emptyStateProps),{},{iconClassName:"mdi mdi-delete-empty",primaryTextId:searchLoading[564],secondaryTextId:null})));var groupProps=this.props,searchResults=groupProps.searchResults,searchScope=groupProps.searchScope,searchLoading=groupProps.searchLoading,groupProps={};if(searchResults?(groupProps={skipParentNavigation:!0},"all"===searchScope&&(groupProps=_objectSpread(_objectSpread({},groupProps),{},{defaultGroupBy:"repository_id",groupByLabel:"repository_display"})),emptyStateProps={primaryTextId:searchLoading?"searchengine.searching":478,style:{backgroundColor:"transparent"}}):pinBookmarks&&(groupProps={groupSkipUnique:!0,defaultGroupBy:"bookmark",groupByValueFunc:function(value){return"true"===value?-1:1},renderGroupLabels:function(groupBy,value){return-1===value?_react.default.createElement("span",null,_react.default.createElement("span",{className:"mdi mdi-pin"})," ",pydio.MessageHash[147]):_react.default.createElement("span",null,_react.default.createElement("span",{className:"mdi mdi-folder-multiple-outline"})," ",pydio.MessageHash["ajax_gui.pinned-bookmarks.other"])}}),"masonry"!==dMode)return _react.default.createElement(SimpleList,_extends({ref:"list",tableKeys:tableKeys,sortKeys:sortKeys,node:contextNode,dataModel:dataModel,observeNodeReload:!0,className:className,actionBarGroups:["change_main"],infiniteSliceCount:infiniteSliceCount,skipInternalDataModel:!0,style:_objectSpread(_objectSpread({},style),additionalStyle),displayMode:dMode,usePlaceHolder:!0,elementsPerLine:elementsPerLine,elementHeight:elementHeight,elementStyle:elementStyle,passScrollingStateToChildren:!0,entryRenderIcon:this.entryRenderIcon.bind(this),entryRenderParentIcon:this.entryRenderIcon.bind(this),entryRenderFirstLine:function(node){return _this8.computeLabel(node)},entryRenderSecondLine:entryRenderSecondLine,entryRenderActions:this.entryRenderActions.bind(this),entryHandleClicks:this.entryHandleClicks.bind(this),entriesProps:"grid"===dMode?{selectedAsBorder:!0,noHover:!0}:{},horizontalRibbon:this.props.horizontalRibbon,emptyStateProps:emptyStateProps,defaultSortingInfo:{sortType:"file-natural",attribute:"",direction:"asc"},hideToolbar:!0,customToolbar:_react.default.createElement(_CellsMessageToolbar.default,{pydio:pydio})},groupProps));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(Masonry,{className:"masonic-grid",dataModel:dataModel,entryProps:{handleClicks:this.entryHandleClicks.bind(this),renderIcon:this.entryRenderIcon.bind(this),renderActions:this.entryRenderActions.bind(this)},emptyStateProps:emptyStateProps,containerStyle:style}),_react.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n               .masonic-grid .mimefont-container {\n                    display:flex; \n                    height:100%; \n                    align-items:center !important; \n                    justify-content:center;\n                    border-radius: 4px;\n               }\n               .masonic-grid .mimefont-container .mimefont {\n                    font-size: 36px;\n                    margin-bottom: 22px;\n               }\n               .react-mui-context .info-panel-open .masonic-grid{\n                    width: calc(100% - 270px) !important;\n               }\n            "}}))}}]),MainFilesList}();_defineProperty(exports.default=MainFilesList,"propTypes",{pydio:_propTypes.default.instanceOf(_pydio.default),horizontalRibbon:_propTypes.default.bool}),module.exports=exports.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CellsMessageToolbar":39,"./FilePreview":42,"./OverlayIcon":45,lodash:55,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/action":"pydio/model/action","pydio/model/context-menu":"pydio/model/context-menu","pydio/util/path":"pydio/util/path","pydio/util/xml":"pydio/util/xml",react:"react","react-dom":"react-dom"}],44:[function(withContextMenu,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var MasterLayout=_interopRequireDefault(withContextMenu("pydio")),_react=_interopRequireDefault(withContextMenu("react")),_reactDom=_interopRequireDefault(withContextMenu("react-dom")),_LeftPanel=_interopRequireDefault(withContextMenu("../leftnav/LeftPanel"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var dropProvider=MasterLayout.default.requireLib("hoc"),withContextMenu=dropProvider.withContextMenu,dropProvider=dropProvider.dropProvider,ContextMenu=MasterLayout.default.requireLib("components").ContextMenu,MasterLayout=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(MasterLayout,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(MasterLayout);function MasterLayout(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MasterLayout),_super.apply(this,arguments)}return Constructor=MasterLayout,(protoProps=[{key:"closeDrawer",value:function(e){var widgets;this.props.drawerOpen&&((widgets=document.getElementsByClassName("left-panel"))&&0<widgets.length&&widgets[0].contains(_reactDom.default.findDOMNode(e.target))||this.props.onCloseDrawerRequested())}},{key:"render",value:function(){var desktopStyle=this.props,pydio=desktopStyle.pydio,tutorialComponent=desktopStyle.tutorialComponent,onContextMenu=desktopStyle.onContextMenu,allClasses=desktopStyle.classes,style=desktopStyle.style,leftPanelProps=desktopStyle.leftPanelProps,children=desktopStyle.children,drawerOpen=desktopStyle.drawerOpen,connectDropTarget=desktopStyle.desktopStyle,desktopStyle=void 0===connectDropTarget?{}:connectDropTarget,connectDropTarget=this.props.connectDropTarget||function(c){return c},allClasses=_toConsumableArray(allClasses);return drawerOpen&&allClasses.push("drawer-open"),connectDropTarget(_react.default.createElement("div",{style:_objectSpread(_objectSpread({},style),{},{overflow:"hidden"}),className:allClasses.join(" "),onClick:this.closeDrawer.bind(this),onContextMenu:onContextMenu},tutorialComponent,_react.default.createElement(_LeftPanel.default,_extends({className:"left-panel",pydio:pydio},leftPanelProps)),_react.default.createElement("div",{className:"desktop-container vertical_layout vertical_fit",style:desktopStyle},children),_react.default.createElement("span",{className:"context-menu"},_react.default.createElement(ContextMenu,{pydio:this.props.pydio}))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),MasterLayout}();exports.default=MasterLayout,exports.default=MasterLayout=dropProvider(MasterLayout),exports.default=MasterLayout=withContextMenu(MasterLayout),module.exports=exports.default},{"../leftnav/LeftPanel":25,pydio:"pydio",react:"react","react-dom":"react-dom"}],45:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function(obj,cache){if(!cache&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};cache=_getRequireWildcardCache(cache);if(cache&&cache.has(obj))return cache.get(obj);var key,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj){var desc;"default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("react")),OverlayIcon=_interopRequireDefault(require("pydio")),_styles=require("material-ui/styles"),_color=_interopRequireDefault(require("color")),_materialUi=require("material-ui");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var AsyncComponent=OverlayIcon.default.requireLib("boot").AsyncComponent,Callbacks=(OverlayIcon.default.requireLib("components").IconButtonMenu,OverlayIcon.default.requireLib("actions/core").Callbacks),OverlayIcon=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(OverlayIcon,_react.Component);var Constructor,protoProps,staticProps,_super=_createSuper(OverlayIcon);function OverlayIcon(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OverlayIcon),_super.apply(this,arguments)}return Constructor=OverlayIcon,(protoProps=[{key:"findAction",value:function(){function m(id){return pydio.MessageHash[id]||id}var tooltip,count,popoverNS,popoverComponent,clickAction,_this$props=this.props,overlay=_this$props.overlay,pydio=_this$props.pydio,node=_this$props.node,clickActions=_this$props.clickActions,isLeaf=node.isLeaf();switch(overlay){case"mdi mdi-star":case"mdi mdi-star-outline":tooltip=m(isLeaf?"overlay.bookmark.file":"overlay.bookmark.folder"),clickActions&&(clickAction=function(){return Callbacks.toggleBookmarkNode(node)});break;case"mdi mdi-share-variant":popoverNS="ShareDialog",popoverComponent="InfoPanel",tooltip=m(isLeaf?"overlay.shared.file":"overlay.shared.folder");break;case"mdi mdi-lock-outline":tooltip=m(isLeaf?"overlay.lock.file":"overlay.lock.folder");break;case"mdi mdi-bell":popoverNS="PydioActivityStreams",popoverComponent="OverlayPanel",tooltip=m(isLeaf?"overlay.watch.file":"overlay.watch.folder");break;case"mdi mdi-tag":case"mdi mdi-tag-outline":tooltip="",popoverNS="ReactMeta",popoverComponent="InfoPanel";break;case"mdi mdi-message-outline":case"mdi mdi-message":tooltip=(count=node.getMetadata().get("has_comments"))+" comment"+(1<count?"s":""),popoverNS="MetaComments",popoverComponent="InfoPanel"}return{tooltip:tooltip,count:count,popoverNS:popoverNS,popoverComponent:popoverComponent,clickAction:clickAction}}},{key:"selectAndApply",value:function(action){var dm=this.props,pydio=dm.pydio,node=dm.node,dm=pydio.getContextHolder();dm.getUniqueNode()===node?action.apply():(pydio.observeOnce("actions_refreshed",function(){action.apply()}),dm.setSelectedNodes([node]))}},{key:"render",value:function(){var _this=this,popoverNS=this.props,pydio=popoverNS.pydio,node=popoverNS.node,popoverComponent=popoverNS.muiTheme,overlay=popoverNS.overlay,selected=popoverNS.selected,popoverAnchor=popoverNS.tooltipPosition,tooltipPosition=void 0===popoverAnchor?"bottom-left":popoverAnchor,popoverDirection=popoverNS.popoverDirection,style=popoverNS.style,className=popoverNS.className,ic=new _color.default(popoverComponent.palette.primary1Color).saturationl(15).lightness(73).toString(),_this$findAction=this.findAction(),tooltip=_this$findAction.tooltip,popoverAnchor=_this$findAction.count,popoverNS=_this$findAction.popoverNS,popoverComponent=_this$findAction.popoverComponent,clickAction=_this$findAction.clickAction;popoverComponent?popoverOpen=function(e){e.stopPropagation(),pydio.getContextHolder().setSelectedNodes([node]),_this.setState({popoverAnchor:e.currentTarget,popoverOpen:!0})}:clickAction&&(popoverOpen=function(e){e.stopPropagation(),clickAction()});ic=_react.default.createElement(_materialUi.IconButton,{tooltip:tooltip,tooltipPosition:tooltipPosition,iconClassName:overlay+" overlay-icon-span"+(className?" "+className:""),style:_objectSpread({width:30,height:30,padding:6,margin:"6px 2px",zIndex:0,cursor:popoverOpen?"pointer":"default"},style),iconStyle:{color:selected?"white":ic,fontSize:15,transition:"none"},onClick:popoverOpen,"data-icon-count":popoverAnchor});if(popoverComponent){var popoverOpen=this.state||{},popoverAnchor=popoverOpen.popoverAnchor,popoverOpen=popoverOpen.popoverOpen;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:popoverAnchor,anchorOrigin:{horizontal:popoverDirection,vertical:"top"},targetOrigin:{horizontal:popoverDirection,vertical:"top"},canAutoPosition:!0,onRequestClose:function(){_this.setState({popoverOpen:!1})},style:{backgroundColor:"transparent",width:310},zDepth:0},_react.default.createElement(AsyncComponent,{namespace:popoverNS,componentName:popoverComponent,pydio:pydio,node:node,popoverPanel:!0,popoverRequestClose:function(){_this.setState({popoverOpen:!1})},onLoad:function(){window.dispatchEvent(new Event("resize"))}})),ic)}return ic}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),OverlayIcon}();exports.default=OverlayIcon,exports.default=OverlayIcon=(0,_styles.muiThemeable)()(OverlayIcon),module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],46:[function(PydioContextConsumer,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=PydioContextConsumer("react"),TourGuide=_interopRequireDefault(PydioContextConsumer("pydio")),_reactJoyride=_interopRequireDefault(PydioContextConsumer("react-joyride"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}PydioContextConsumer=TourGuide.default.requireLib("boot").PydioContextConsumer,TourGuide=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(TourGuide,_react.Component);var Constructor,protoProps,staticProps,_super=_createSuper(TourGuide);function TourGuide(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TourGuide),_super.apply(this,arguments)}return Constructor=TourGuide,(protoProps=[{key:"render",value:function(){var _this=this,locale={};return["back","close","last","next","skip"].forEach(function(k){locale[k]=_this.props.getMessage("ajax_gui.tour.locale."+k)}),React.createElement(_reactJoyride.default,_extends({},this.props,{locale:locale,allowClicksThruHole:!0}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),TourGuide}();exports.default=TourGuide,exports.default=TourGuide=PydioContextConsumer(TourGuide),module.exports=exports.default},{pydio:"pydio",react:"react","react-joyride":64}],47:[function(WelcomeTour,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=WelcomeTour("react"),_materialUi=WelcomeTour("material-ui"),PydioContextConsumer=_interopRequireDefault(WelcomeTour("pydio")),_TourGuide=_interopRequireDefault(WelcomeTour("./TourGuide"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var PydioContextConsumer=PydioContextConsumer.default.requireLib("boot").PydioContextConsumer,DOMUtils=WelcomeTour("pydio/util/dom"),Scheme=function(){_inherits(Scheme,_react.Component);var _super=_createSuper(Scheme);function Scheme(){return _classCallCheck(this,Scheme),_super.apply(this,arguments)}return _createClass(Scheme,[{key:"render",value:function(){var style={position:"relative",fontSize:24,width:this.props.dimension||100,height:this.props.dimension||100,backgroundColor:"#ECEFF1",color:"#607d8b",borderRadius:"50%",margin:"0 auto"};return React.createElement("div",{style:_objectSpread(_objectSpread({},style),this.props.style)},this.props.children)}}]),Scheme}(),IconScheme=function(){_inherits(IconScheme,_react.Component);var _super2=_createSuper(IconScheme);function IconScheme(props){var _this;return _classCallCheck(this,IconScheme),(_this=_super2.call(this,props)).state={icon:props.icon||props.icons[0],index:0},_this}return _createClass(IconScheme,[{key:"componentDidMount",value:function(){this.componentWillReceiveProps(this.props)}},{key:"componentWillReceiveProps",value:function(icons){var state,_this2=this,icon=icons.icon,icons=icons.icons;this._interval&&clearInterval(this._interval),icon?state={icon:icon}:icons&&(state={icon:icons[0],index:0},this._interval=setInterval(function(){_this2.nextIcon()},1700)),this.setState(state)}},{key:"nextIcon",value:function(){var icons=this.props.icons,next=this.state.index+1;next>icons.length-1&&(next=0),this.setState({index:next,icon:icons[next]})}},{key:"componentWillUnmount",value:function(){this._interval&&clearInterval(this._interval)}},{key:"render",value:function(){var icon=this.state.icon;return React.createElement(Scheme,{dimension:80},React.createElement("span",{className:"mdi mdi-"+icon,style:{position:"absolute",top:14,left:14,fontSize:50}}))}}]),IconScheme}(),CreateMenuCard=function(){_inherits(CreateMenuCard,_react.Component);var _super3=_createSuper(CreateMenuCard);function CreateMenuCard(){return _classCallCheck(this,CreateMenuCard),_super3.apply(this,arguments)}return _createClass(CreateMenuCard,[{key:"componentDidMount",value:function(){var _this3=this;setTimeout(function(){_this3.props.pydio.notify("tutorial-open-create-menu")},950)}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("p",null,this.props.message("create-menu")),React.createElement(IconScheme,{icons:["file-plus","folder-plus"]}))}}]),CreateMenuCard}(),InfoPanelCard=function(){_inherits(InfoPanelCard,_react.Component);var _super4=_createSuper(InfoPanelCard);function InfoPanelCard(){return _classCallCheck(this,InfoPanelCard),_super4.apply(this,arguments)}return _createClass(InfoPanelCard,[{key:"componentDidMount",value:function(){var _this4=this;this._int=setInterval(function(){_this4.setState({closed:!(_this4.state&&_this4.state.closed)})},1500)}},{key:"componentWillUnmount",value:function(){this._int&&clearInterval(this._int)}},{key:"render",value:function(){var leftStyle={width:24,transition:DOMUtils.getBeziersTransition(),transform:"scaleX(1)",transformOrigin:"right"};return this.state&&this.state.closed&&(leftStyle=_objectSpread(_objectSpread({},leftStyle),{},{width:0,transform:"scaleX(0)"})),React.createElement("div",null,React.createElement("p",null,this.props.message("infopanel.1")),React.createElement(Scheme,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC",display:"flex"}},React.createElement("div",{style:{backgroundColor:"white",flex:3}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",this.props.message("infopanel.folder")," 1 "),React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white"}},React.createElement("span",{className:"mdi mdi-folder"}),"  ",this.props.message("infopanel.folder")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",this.props.message("infopanel.file")," 3"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",this.props.message("infopanel.file")," 4")),React.createElement("div",{style:leftStyle},React.createElement("div",{style:{backgroundColor:"#edf4f7",padding:4,height:"100%",fontSize:17}},React.createElement("span",{className:"mdi mdi-information-variant"}))))),React.createElement("p",null,this.props.message("infopanel.2")," (",React.createElement("span",{className:"mdi mdi-information",style:{fontSize:18,color:"#5c7784"}}),")."))}}]),InfoPanelCard}(),UserWidgetCard=function(){_inherits(UserWidgetCard,_react.Component);var _super5=_createSuper(UserWidgetCard);function UserWidgetCard(){return _classCallCheck(this,UserWidgetCard),_super5.apply(this,arguments)}return _createClass(UserWidgetCard,[{key:"render",value:function(){var iconStyle={display:"inline-block",textAlign:"center",fontSize:17,lineHeight:"20px",backgroundColor:"#ECEFF1",color:"#607D8B",borderRadius:"50%",padding:"5px 6px",width:30,height:30,marginRight:5};return React.createElement("div",null,React.createElement("p",null,React.createElement("span",{className:"mdi mdi-book-open-variant",style:iconStyle})," ",this.props.message("uwidget.addressbook")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-bell-outline",style:iconStyle})," ",this.props.message("uwidget.alerts")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-dots-vertical",style:iconStyle})," ",this.props.message("uwidget.menu")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-home-variant",style:iconStyle})," ",this.props.message("uwidget.home")))}}]),UserWidgetCard}(),WelcomeTour=function(){_inherits(WelcomeTour,_react.Component);var _super6=_createSuper(WelcomeTour);function WelcomeTour(props,_this5){return _classCallCheck(this,WelcomeTour),(_this5=_super6.call(this,props,_this5)).state={started:!(props.pydio.user&&!props.pydio.user.getPreference("gui_preferences",!0)["UserAccount.WelcomeModal.Shown"])},_this5}return _createClass(WelcomeTour,[{key:"discard",value:function(){var finished=0<arguments.length&&void 0!==arguments[0]&&arguments[0],user=this.props.pydio.user,guiPrefs=user.getPreference("gui_preferences",!0);guiPrefs["UserAccount.WelcomeModal.Shown"]=!0,finished&&(guiPrefs["WelcomeComponent.Pydio8.TourGuide.FSTemplate"]=!0),user.setPreference("gui_preferences",guiPrefs,!0),user.savePreference("gui_preferences")}},{key:"componentDidMount",value:function(){var _this6=this;this.state.started||pydio.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(skip){skip?_this6.discard(!0):(_this6.discard(),_this6.setState({started:!0,skip:skip}))}})}},{key:"render",value:function(){var _this7=this;if(!this.state.started||this.state.skip)return null;function message(id){return getMessage("ajax_gui.tour."+id)}var user=this.props,getMessage=user.getMessage,mkdir=user.pydio,tourguideSteps=[],upload=mkdir.Controller,user=mkdir.user,mkdir=upload.getActionByName("mkdir")||{},upload=upload.getActionByName("upload")||{};!user||!user.activeRepository||mkdir.deny&&upload.deny||tourguideSteps.push({title:message("create-menu.title"),text:React.createElement(CreateMenuCard,{message:message,pydio:this.props.pydio}),selector:"#create-button-menu",position:"left",style:{width:220}}),document.getElementById("display-toolbar")&&tourguideSteps.push({title:message("display-bar.title"),text:React.createElement("div",null,React.createElement("p",null,message("display-bar")),React.createElement(IconScheme,{icons:["view-list","view-grid","view-carousel","sort-ascending","sort-descending"]})),selector:"#display-toolbar",position:"left"}),document.getElementById("info_panel")&&tourguideSteps.push({title:message("infopanel.title"),text:React.createElement(InfoPanelCard,{message:message}),selector:"#info_panel",position:"left"}),tourguideSteps.push({title:message("uwidget.title"),text:React.createElement(UserWidgetCard,{message:message}),selector:".user-widget",position:"right",style:{width:320}});return React.createElement(_TourGuide.default,{ref:"joyride",steps:tourguideSteps,run:!0,autoStart:!0,debug:!1,callback:function(data){("step:after"===data.type&&data.index===tourguideSteps.length-1||"skip"===data.action)&&_this7.discard(!0)},type:"continuous",showSkipButton:!0})}}]),WelcomeTour}();exports.default=WelcomeTour,exports.default=WelcomeTour=PydioContextConsumer(WelcomeTour),module.exports=exports.default},{"./TourGuide":46,"material-ui":"material-ui",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],48:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),WorkspaceCard=_interopRequireDefault(require("pydio")),_resourcesManager=_interopRequireDefault(require("pydio/http/resources-manager"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var WorkspaceCard=WorkspaceCard.default.requireLib("components"),GenericCard=WorkspaceCard.GenericCard,GenericLine=WorkspaceCard.GenericLine,QuotaUsageLine=WorkspaceCard.QuotaUsageLine,WorkspaceCard=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(WorkspaceCard,_react["default"].Component);var Constructor,protoProps,staticProps,_super=_createSuper(WorkspaceCard);function WorkspaceCard(props){var _this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WorkspaceCard),(_this=_super.call(this,props)).state={};var rootNode=_this.props.rootNode;return rootNode.getMetadata().has("virtual_root")?rootNode.isLoaded()?(_this.state.rootNodes=[],rootNode.getChildren().forEach(function(n){return _this.state.rootNodes.push(n)})):(rootNode.observeOnce("loaded",function(){var rootNodes=[];rootNode.getChildren().forEach(function(n){return rootNodes.push(n)}),_this.setState({rootNodes:rootNodes})}),rootNode.load()):_this.state.rootNodes=[rootNode],_resourcesManager.default.loadClassesAndApply(["PydioActivityStreams"],function(){_this.setState({ASLib:!0})}),_resourcesManager.default.loadClassesAndApply(["PydioCoreActions"],function(){_this.setState({CALib:!0})}),_this}return Constructor=WorkspaceCard,(protoProps=[{key:"render",value:function(){var bookmarkAction,selector=this.props,pydio=selector.pydio,workspace=selector.workspace,onDismiss=selector.onDismiss,rootNodes=this.state.rootNodes,CALib=this.state,selector=CALib.ASLib,CALib=CALib.CALib,lines=[];return workspace.getDescription()&&lines.push(_react.default.createElement(GenericLine,{iconClassName:"mdi mdi-information",legend:pydio.MessageHash["share_center.145"],data:workspace.getDescription()})),rootNodes&&rootNodes.length&&rootNodes.forEach(function(node){node.getMetadata().get("ws_quota")&&lines.push(_react.default.createElement(QuotaUsageLine,{node:node}))}),pydio.getPluginConfigs("core.activitystreams").get("ACTIVITY_SHOW_ACTIVITIES")&&selector&&rootNodes&&(selector=_react.default.createElement(PydioActivityStreams.WatchSelector,{pydio:pydio,nodes:rootNodes}),lines.push(_react.default.createElement(GenericLine,{iconClassName:"mdi mdi-bell-outline",legend:pydio.MessageHash["meta.watch.selector.legend"],iconStyle:{marginTop:32},data:selector}))),CALib&&rootNodes&&(bookmarkAction=_react.default.createElement(PydioCoreActions.BookmarkButton,{pydio:pydio,nodes:rootNodes,styles:{iconStyle:{color:"white"}}})),_react.default.createElement(GenericCard,{pydio:pydio,title:workspace.getLabel(),onDismissAction:onDismiss,style:{width:350},otherActions:[bookmarkAction]},lines)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),WorkspaceCard}();exports.default=WorkspaceCard,module.exports=exports.default},{pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],49:[function(collectDrop,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(collectDrop("react")),_propTypes=_interopRequireDefault(collectDrop("prop-types")),_pydio=_interopRequireDefault(collectDrop("pydio")),_styles=collectDrop("material-ui/styles"),_color=_interopRequireDefault(collectDrop("color")),_materialUi=collectDrop("material-ui"),_reactDnd=collectDrop("react-dnd"),_node=_interopRequireDefault(collectDrop("pydio/model/node")),_dom=_interopRequireDefault(collectDrop("pydio/util/dom")),_resourcesManager=_interopRequireDefault(collectDrop("pydio/http/resources-manager")),_metaNodeProvider=_interopRequireDefault(collectDrop("pydio/model/meta-node-provider")),_WorkspaceCard=_interopRequireDefault(collectDrop("./WorkspaceCard"));_interopRequireDefault(collectDrop("pydio/model/context-menu"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var nodeDropTarget=_pydio.default.requireLib("components"),FoldersTree=nodeDropTarget.FoldersTree,WorkspaceEntry=nodeDropTarget.DND,ChatIcon=nodeDropTarget.ChatIcon,Types=WorkspaceEntry.Types,collectDrop=WorkspaceEntry.collectDrop,nodeDropTarget=WorkspaceEntry.nodeDropTarget,Confirm=((0,_styles.muiThemeable)()(function(style){var children=style.children,style={display:"inline-block",backgroundColor:style.muiTheme.palette.accent1Color,color:"white",fontSize:10,borderRadius:6,padding:"0 5px",marginLeft:5,height:16,lineHeight:"17px",fontWeight:500};return _react.default.createElement("span",{style:style},children)}),function(){_inherits(Confirm,_react["default"].Component);var _super=_createSuper(Confirm);function Confirm(){return _classCallCheck(this,Confirm),_super.apply(this,arguments)}return _createClass(Confirm,[{key:"render",value:function(){var _this=this,messages=this.props.pydio.MessageHash,messageTitle=messages[545],messageBody=messages[546],actions=[{text:messages[548],ref:"decline",onClick:this.props.onDecline},{text:messages[547],ref:"accept",onClick:this.props.onAccept}];return"reject_accepted"===this.props.mode&&(messageBody=messages[549],actions=[{text:messages[54],ref:"decline",onClick:this.props.onDecline},{text:messages[551],ref:"accept",onClick:this.props.onAccept}]),Object.keys(this.props.replacements).forEach(function(key){messageTitle=messageTitle.replace(new RegExp(key),_this.props.replacements[key]),messageBody=messageBody.replace(new RegExp(key),_this.props.replacements[key])}),_react.default.createElement("div",{className:"react-mui-context",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"transparent"}},_react.default.createElement(_materialUi.Dialog,{title:messageTitle,actions:actions,modal:!1,dismissOnClickAway:!0,onDismiss:this.props.onDismiss.bind(this),open:!0},messageBody))}}]),Confirm}());_defineProperty(Confirm,"propTypes",{pydio:_propTypes.default.instanceOf(_pydio.default),onDecline:_propTypes.default.func,onAccept:_propTypes.default.func,mode:_propTypes.default.oneOf(["new_share","reject_accepted"])});WorkspaceEntry=function(){_inherits(WorkspaceEntry,_react["default"].Component);var _super2=_createSuper(WorkspaceEntry);function WorkspaceEntry(){var _this2;_classCallCheck(this,WorkspaceEntry);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this2=_super2.call.apply(_super2,[this].concat(args))),"state",{openAlert:!1,openFoldersTree:!1,currentContextNode:_this2.props.pydio.getContextHolder().getContextNode()}),_defineProperty(_assertThisInitialized(_this2),"getLetterBadge",function(){return{__html:_this2.props.workspace.getHtmlBadge(!0)}}),_defineProperty(_assertThisInitialized(_this2),"handleAccept",function(){_this2.props.workspace.setAccessStatus("accepted"),_this2.handleCloseAlert(),_this2.onClick()}),_defineProperty(_assertThisInitialized(_this2),"handleDecline",function(){_this2.props.workspace.setAccessStatus("declined"),_this2.props.pydio.fire("repository_list_refreshed",{list:_this2.props.pydio.user.getRepositoriesList(),active:_this2.props.pydio.user.getActiveRepository()}),_this2.handleCloseAlert()}),_defineProperty(_assertThisInitialized(_this2),"handleOpenAlert",function(){var mode=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"new_share";(1<arguments.length?arguments[1]:void 0).stopPropagation(),_this2.wrapper=document.body.appendChild(document.createElement("div")),_this2.wrapper.style.zIndex=11;var replacements={"%%OWNER%%":_this2.props.workspace.getOwner()};ReactDOM.render(_react.default.createElement(Confirm,_extends({},_this2.props,{mode:mode,replacements:replacements,onAccept:("new_share"===mode?_this2.handleAccept:_this2.handleDecline).bind(_assertThisInitialized(_this2)),onDecline:("new_share"===mode?_this2.handleDecline:_this2.handleCloseAlert).bind(_assertThisInitialized(_this2)),onDismiss:_this2.handleCloseAlert})),_this2.wrapper)}),_defineProperty(_assertThisInitialized(_this2),"handleCloseAlert",function(){ReactDOM.unmountComponentAtNode(_this2.wrapper),_this2.wrapper.remove()}),_defineProperty(_assertThisInitialized(_this2),"toggleFoldersPanelOpen",function(ev){ev.stopPropagation(),_this2.setState({openFoldersTree:!_this2.state.openFoldersTree})}),_defineProperty(_assertThisInitialized(_this2),"getRootItemStyle",function(accent2){var isContext=_this2.props.pydio.getContextHolder().getContextNode()===accent2,accent2=_this2.props.muiTheme.palette.accent2Color;return isContext?{borderLeft:"4px solid "+accent2,paddingLeft:12}:{}}),_defineProperty(_assertThisInitialized(_this2),"getItemStyle",function(node){var isContext=_this2.props.pydio.getContextHolder().getContextNode()===node,accent2=_this2.props.muiTheme.palette.accent2Color;return isContext?{color:"rgba(0,0,0,.77)",fontWeight:500,backgroundColor:(0,_color.default)(accent2).fade(.9).toString()}:-1!==_this2.props.pydio.getContextHolder().getSelectedNodes().indexOf(node)?{color:accent2,fontWeight:500}:{}}),_defineProperty(_assertThisInitialized(_this2),"workspacePopoverNode",function(workspace){var menuNode=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return menuNode?Promise.resolve(menuNode):_metaNodeProvider.default.loadRoots([workspace.getSlug()]).then(function(fakeNode){if(fakeNode&&fakeNode[workspace.getSlug()])return fakeNode[workspace.getSlug()];fakeNode=new _node.default("/",!1,workspace.getLabel());return fakeNode.setRoot(!0),fakeNode.getMetadata().set("repository_id",workspace.getId()),fakeNode.getMetadata().set("workspaceEntry",workspace),fakeNode})}),_defineProperty(_assertThisInitialized(_this2),"workspacePopover",function(offsetTop){var menuNode=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,_this2$props=_this2.props,pydio=_this2$props.pydio,workspace=_this2$props.workspace;offsetTop.stopPropagation();var target=offsetTop.target,offsetTop=target.getBoundingClientRect().top,popoverTop=_dom.default.getViewportHeight()-offsetTop<250;_this2.workspacePopoverNode(workspace,menuNode).then(function(n){var popoverContent;workspace.getOwner()?_resourcesManager.default.loadClassesAndApply(["ShareDialog"],function(){var popoverContent=_react.default.createElement(ShareDialog.CellCard,{pydio:pydio,cellId:workspace.getId(),onDismiss:function(){_this2.setState({popoverOpen:!1})},onHeightChange:function(){_this2.setState({popoverHeight:500})},editorOneColumn:!0,rootNode:n});_this2.setState({popoverAnchor:target,popoverOpen:!0,popoverContent:popoverContent,popoverTop:popoverTop,popoverHeight:null})}):(popoverContent=_react.default.createElement(_WorkspaceCard.default,{pydio:pydio,workspace:workspace,rootNode:n,onDismiss:function(){_this2.setState({popoverOpen:!1})}}),_this2.setState({popoverAnchor:target,popoverOpen:!0,popoverContent:popoverContent,popoverTop:popoverTop,popoverHeight:null}))})}),_this2}return _createClass(WorkspaceEntry,[{key:"componentDidMount",value:function(){this.props.showFoldersTree&&(this._monitorFolder=function(){this.setState({currentContextNode:this.props.pydio.getContextHolder().getContextNode()})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._monitorFolder))}},{key:"componentWillUnmount",value:function(){this._monitorFolder&&this.props.pydio.getContextHolder().stopObserving("context_changed",this._monitorFolder)}},{key:"onClick",value:function(){var _this3=this,_this$props=this.props,workspace=_this$props.workspace,pydio=_this$props.pydio,showFoldersTree=_this$props.showFoldersTree,scope=_this$props.searchView,values=_this$props.values,setValues=_this$props.setValues;_this$props.searchLoading;scope?(scope="ALL"===(scope=workspace.getSlug())?"all":scope+"/",setValues(_objectSpread(_objectSpread({},values),{},{scope:scope}))):workspace.getId()===pydio.user.activeRepository&&showFoldersTree?pydio.goTo("/"):(pydio.observeOnce("repository_list_refreshed",function(){_this3.setState({loading:!1})}),this.setState({loading:!0}),pydio.triggerRepositoryChange(workspace.getId()))}},{key:"onContextMenu",value:function(event,menuNode){event.preventDefault(),event.stopPropagation(),this.workspacePopover(event,menuNode)}},{key:"render",value:function(){var current,_this4=this,title=this.props,workspace=title.workspace,pydio=title.pydio,onHoverLink=title.onHoverLink,onOutLink=title.onOutLink,showFoldersTree=title.showFoldersTree,results=title.searchView,crtScopeAll=title.values;title.setValues,title.searchLoading;results?"ALL"===workspace.getSlug()?(current=crtScopeAll.scope&&"all"===crtScopeAll.scope,popoverOpen=!0):current=crtScopeAll.scope&&0===crtScopeAll.scope.indexOf(workspace.getSlug()+"/"):current=pydio.user.getActiveRepository()===workspace.getId();var onHover,onOut,additionalAction,chatIcon,currentClass="workspace-entry",style={};current&&(currentClass+=" workspace-current",style=this.getRootItemStyle(pydio.getContextHolder().getContextNode())),style=_objectSpread({paddingLeft:16},style),currentClass+=" workspace-access-"+workspace.getAccessType(),onHoverLink&&(onHover=function(event){onHoverLink(event,workspace)}.bind(this)),onOutLink&&(onOut=function(event){onOutLink(event,workspace)}.bind(this));var popoverNode,hasFolders,treeToggle,menuNode,wsBlock=this.props.muiTheme.palette.accent2Color,icon="mdi mdi-folder",entryIcon={fontSize:20,marginRight:10,opacity:.3};results?(icon=popoverOpen?"mdi mdi-folder-multiple":"mdi mdi-folder",current||(icon+="-outline")):"workspace-personal"===workspace.getRepositoryType()?icon="mdi mdi-folder-account":"cell"===workspace.getRepositoryType()&&(icon="icomoon-cells",entryIcon=_objectSpread(_objectSpread({},entryIcon),{},{fontSize:22})),current&&!results?(menuNode=pydio.getContextHolder().getRootNode(),showFoldersTree&&(menuNode.isLoading()&&menuNode.observeOnce("loaded",function(){_this4.forceUpdate()}),popoverAnchor=menuNode.getChildren(),hasFolders=!1,popoverAnchor.forEach(function(c){c.isLeaf()||(hasFolders=!0)}),hasFolders&&(popoverTop=this.state.openFoldersTree?"mdi mdi-chevron-down":"mdi mdi-chevron-right",treeToggle=_react.default.createElement("span",{style:{opacity:.3},className:"workspace-additional-action "+popoverTop,onClick:this.toggleFoldersPanelOpen}))),entryIcon.opacity=1,entryIcon.color=wsBlock,popoverNode=menuNode):((menuNode=new _node.default("/",!1,workspace.getLabel())).setRoot(!0),menuNode.getMetadata().set("repository_id",workspace.getId()),menuNode.getMetadata().set("workspaceEntry",workspace));var title=this.state,popoverOpen=title.popoverOpen,popoverAnchor=title.popoverAnchor,popoverTop=title.popoverTop,wsBlock=title.popoverHeight;title.loading?additionalAction=_react.default.createElement(_materialUi.CircularProgress,{size:20,thickness:2,style:{marginTop:2,marginRight:6,opacity:.5}}):results||(label=popoverOpen?{opacity:1}:{},popoverOpen&&(style=_objectSpread(_objectSpread({},style),{},{backgroundColor:"rgba(133, 133, 133, 0.1)"})),additionalAction=_react.default.createElement("span",{className:"workspace-additional-action with-hover mdi mdi-dots-vertical",onClick:function(e){return _this4.workspacePopover(e,popoverNode)},style:label})),results||!workspace.getOwner()||pydio.getPluginConfigs("action.advanced_settings").get("GLOBAL_DISABLE_CHATS")||(chatIcon=_react.default.createElement(ChatIcon,{pydio:pydio,roomType:"WORKSPACE",objectId:workspace.getId()}));var count,title=workspace.getLabel(),label=workspace.getLabel();workspace.getDescription()&&(title+=" - "+workspace.getDescription()),results&&(count=0,results=pydio.getContextHolder().getSearchNode().getChildren(),"ALL"===workspace.getSlug()?count=results.size:results.forEach(function(node){node.getMetadata().get("repository_id")===workspace.getId()&&count++}),crtScopeAll=crtScopeAll.scope&&"all"===crtScopeAll.scope,count&&(crtScopeAll||current)&&(label+=" ("+count+")"));entryIcon=_react.default.createElement("span",{className:icon,style:entryIcon}),wsBlock=_react.default.createElement(ContextMenuWrapper,{node:menuNode,className:currentClass,onClick:this.onClick.bind(this),onMouseOver:onHover,onMouseOut:onOut,onContextMenu:function(event){return _this4.onContextMenu(event,popoverNode)},style:style},entryIcon,_react.default.createElement("span",{className:"workspace-label",title:title},label),chatIcon,treeToggle,_react.default.createElement("span",{style:{flex:1}}),additionalAction,_react.default.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:popoverAnchor,useLayerForClickAway:!0,autoCloseWhenOffScreen:!1,canAutoPosition:!0,onRequestClose:function(){_this4.setState({popoverOpen:!1})},anchorOrigin:{horizontal:"right",vertical:popoverTop?"bottom":"center"},targetOrigin:{horizontal:"left",vertical:popoverTop?"bottom":"center"},zDepth:3,style:{overflow:"hidden",borderRadius:10,height:wsBlock}},_react.default.createElement(_materialUi.Menu,{style:{maxWidth:350},listStyle:{paddingBottom:0,paddingTop:0}},this.state.popoverContent)));return showFoldersTree?_react.default.createElement("div",null,wsBlock,_react.default.createElement(FoldersTree,{pydio:pydio,dataModel:pydio.getContextHolder(),className:this.state.openFoldersTree?"open":"closed",draggable:!0,getItemStyle:this.getItemStyle})):wsBlock}}]),WorkspaceEntry}();_defineProperty(exports.default=WorkspaceEntry,"propTypes",{pydio:_propTypes.default.instanceOf(_pydio.default).isRequired,workspace:_propTypes.default.instanceOf(Repository).isRequired,showFoldersTree:_propTypes.default.bool,onHoverLink:_propTypes.default.func,onOutLink:_propTypes.default.func});var ContextMenuWrapper=function(props){var canDrop=props.canDrop,isOver=props.isOver,connectDropTarget=props.connectDropTarget,className=props.className||"";return canDrop&&isOver&&(className+=" droppable-active"),_react.default.createElement("div",_extends({},props,{className:className,ref:function(node){node=ReactDOM.findDOMNode(node);"function"==typeof connectDropTarget&&connectDropTarget(node)}}))},ContextMenuWrapper=(0,_reactDnd.DropTarget)(Types.NODE_PROVIDER,nodeDropTarget,collectDrop)(ContextMenuWrapper);exports.default=(0,_styles.muiThemeable)()(WorkspaceEntry),module.exports=exports.default},{"./WorkspaceCard":48,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/context-menu":"pydio/model/context-menu","pydio/model/meta-node-provider":"pydio/model/meta-node-provider","pydio/model/node":"pydio/model/node","pydio/util/dom":"pydio/util/dom",react:"react","react-dnd":"react-dnd"}],50:[function(WorkspaceEntryMaterial,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var React=WorkspaceEntryMaterial("react"),Repository=WorkspaceEntryMaterial("material-ui"),ListItem=Repository.ListItem,Avatar=Repository.Avatar,FontIcon=Repository.FontIcon,muiThemeable=WorkspaceEntryMaterial("material-ui/styles").muiThemeable,PropTypes=(WorkspaceEntryMaterial("color"),WorkspaceEntryMaterial("prop-types")),Pydio=WorkspaceEntryMaterial("pydio"),Repository=WorkspaceEntryMaterial("pydio/model/repository"),WorkspaceEntryMaterial=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(WorkspaceEntryMaterial,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(WorkspaceEntryMaterial);function WorkspaceEntryMaterial(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WorkspaceEntryMaterial),_super.apply(this,arguments)}return Constructor=WorkspaceEntryMaterial,(protoProps=[{key:"onClick",value:function(){this.props.onWorkspaceTouchTap?this.props.onWorkspaceTouchTap(this.props.workspace.getId()):this.props.workspace.getId()===this.props.pydio.user.activeRepository&&this.props.showFoldersTree?this.props.pydio.goTo("/"):this.props.pydio.triggerRepositoryChange(this.props.workspace.getId())}},{key:"render",value:function(){var icon=this.props,workspace=icon.workspace,leftAvatar=icon.muiTheme.palette.primary1Color,leftAvatar=workspace.getOwner()||"inbox"===workspace.getAccessType()?(leftAvatar=MaterialUI.Style.colors.teal500,icon="inbox"===workspace.getAccessType()?"file-multiple":"folder-outline","remote"===workspace.getRepositoryType()&&(icon="cloud-outline"),React.createElement(Avatar,{backgroundColor:"#ECEFF1",color:leftAvatar,icon:React.createElement(FontIcon,{className:"mdi mdi-"+icon})})):React.createElement(Avatar,{style:{fontSize:18},backgroundColor:"#ECEFF1",color:leftAvatar},workspace.getLettersBadge());return React.createElement(ListItem,{leftAvatar:leftAvatar,leftIcon:void 0,primaryText:workspace.getLabel(),secondaryText:workspace.getDescription(),onClick:this.onClick.bind(this)})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),WorkspaceEntryMaterial}();(exports.default=WorkspaceEntryMaterial).propTypes={pydio:PropTypes.instanceOf(Pydio).isRequired,workspace:PropTypes.instanceOf(Repository).isRequired,muiTheme:PropTypes.object},exports.default=WorkspaceEntryMaterial=muiThemeable()(WorkspaceEntryMaterial),module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/model/repository":"pydio/model/repository",react:"react"}],51:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_WorkspacesListMaterial=(obj=require("./WorkspacesListMaterial"))&&obj.__esModule?obj:{default:obj};var React=require("react"),createReactClass=require("create-react-class"),WorkspacePickerDialog=require("pydio").requireLib("boot"),WorkspacePickerDialog=createReactClass({displayName:"WorkspacePickerDialog",mixins:[WorkspacePickerDialog.ActionDialogMixin,WorkspacePickerDialog.CancelButtonProviderMixin],getDefaultProps:function(){return{dialogTitleId:"user_home.90",dialogSize:"sm",dialogPadding:!1,dialogIsModal:!0,dialogScrollBody:!0}},submit:function(){this.dismiss()},workspaceTouchTap:function(wsId){this.dismiss(),UploaderModel.Store.getInstance().handleDropEventResults(this.props.items,this.props.files,new AjxpNode("/"),null,null,wsId),this.props.switchAtUpload&&pydio.triggerRepositoryChange(wsId)},render:function(){var legend=this.props,pydio=legend.pydio,legend=legend.files,legend=legend&&legend[0]?React.createElement("div",{style:{fontSize:13,padding:16,backgroundColor:"#FFEBEE"}},pydio.MessageHash["user_home.89"],": ",legend[0].name):void 0;return React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},legend,React.createElement(_WorkspacesListMaterial.default,{pydio:pydio,workspaces:pydio.user?pydio.user.getRepositoriesList():[],showTreeForWorkspace:!1,onWorkspaceTouchTap:this.workspaceTouchTap,filterByType:"entries",sectionTitleStyle:{display:"none"},style:{flex:1,overflowY:"auto",maxHeight:400}}))}});exports.default=WorkspacePickerDialog,module.exports=exports.default},{"./WorkspacesListMaterial":53,"create-react-class":"create-react-class",pydio:"pydio",react:"react"}],52:[function(WorkspacesList,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(WorkspacesList("react")),_propTypes=_interopRequireDefault(WorkspacesList("prop-types")),_pydio=_interopRequireDefault(WorkspacesList("pydio")),_WorkspaceEntry=_interopRequireDefault(WorkspacesList("./WorkspaceEntry")),_repository=_interopRequireDefault(WorkspacesList("pydio/model/repository")),_resourcesManager=_interopRequireDefault(WorkspacesList("pydio/http/resources-manager")),_materialUi=WorkspacesList("material-ui"),_color=_interopRequireDefault(WorkspacesList("color")),_Facets=_interopRequireDefault(WorkspacesList("../search/components/Facets"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var muiThemeable=_pydio.default.requireLib("hoc"),withVerticalScroll=muiThemeable.withVerticalScroll,ModernTextField=muiThemeable.ModernTextField,muiThemeable=WorkspacesList("material-ui/styles").muiThemeable,Entries=function(){_inherits(Entries,_react["default"].Component);var _super=_createSuper(Entries);function Entries(_this){return _classCallCheck(this,Entries),(_this=_super.call(this,_this)).state={toggleFilter:!1,filterValue:""},_this}return _createClass(Entries,[{key:"computePagination",value:function(entries){if(!entries||!entries.length)return{use:!1};if(entries.length<=15)return{use:!1};var page=this.state.page,sliceStart=this.props.activeWorkspace;page||(page=1,!sliceStart||-1<(sliceEnd=entries.map(function(ws){return ws.getId()}).indexOf(sliceStart))&&(page=Math.floor(sliceEnd/15)+1));for(var max=Math.ceil(entries.length/15),sliceStart=15*(page-1),sliceEnd=Math.min(15*page,entries.length),pages=[],i=1;i<=max;i++)pages.push(i);return{use:!0,sliceStart:sliceStart,sliceEnd:sliceEnd,total:entries.length,pages:pages,page:page,pageSize:15}}},{key:"renderPagination",value:function(chevStyles){var _this2=this,titleStyle=this.props.titleStyle,page=chevStyles.page,pages=chevStyles.pages,sliceStart=chevStyles.sliceStart,sliceEnd=chevStyles.sliceEnd,total=chevStyles.total,chevStyles={style:{width:36,height:36,padding:6},iconStyle:{color:titleStyle.color}};return _react.default.createElement("div",{style:{display:"flex",backgroundColor:"rgba(0, 0, 0, 0.03)",color:titleStyle.color,alignItems:"center",justifyContent:"center",fontWeight:400}},_react.default.createElement(_materialUi.IconButton,_extends({iconClassName:"mdi mdi-chevron-left",disabled:1===page,onClick:function(){return _this2.setState({page:page-1})}},chevStyles)),_react.default.createElement("div",null,sliceStart+1,"-",sliceEnd," of ",total),_react.default.createElement(_materialUi.IconButton,_extends({iconClassName:"mdi mdi-chevron-right",disabled:page===pages.length,onClick:function(){return _this2.setState({page:page+1})}},chevStyles)))}},{key:"render",value:function(){var uniqueResult,_this3=this,wss=this.props,title=wss.title,entries=wss.entries,filterHint=wss.filterHint,titleStyle=wss.titleStyle,pydio=wss.pydio,createAction=wss.createAction,activeWorkspace=wss.activeWorkspace,palette=wss.palette,buttonStyles=wss.buttonStyles,emptyState=wss.emptyState,searchView=wss.searchView,values=wss.values,setValues=wss.setValues,searchLoading=wss.searchLoading,pagination=this.state,toggleFilter=pagination.toggleFilter,filterValue=pagination.filterValue,wss=entries.filter(function(ws){return function(t,f,ws){return!t||!f||0<=ws.getLabel().toLowerCase().indexOf(f.toLowerCase())}(toggleFilter,filterValue,ws)}),pagination=this.computePagination(wss);return pagination.use&&(wss=wss.slice(pagination.sliceStart,pagination.sliceEnd)),toggleFilter&&filterValue&&1===wss.length&&wss[0].getId()!==activeWorkspace&&(uniqueResult=wss[0]),_react.default.createElement("div",null,!toggleFilter&&_react.default.createElement("div",{key:"shared-title",className:"section-title",style:titleStyle},_react.default.createElement("span",{style:{cursor:"pointer"},title:filterHint,onClick:function(){_this3.setState({toggleFilter:!0})}},title,0<entries.length&&_react.default.createElement("span",{style:{fontSize:12,opacity:"0.4",marginLeft:3},className:"mdi mdi-filter"})),createAction),toggleFilter&&_react.default.createElement("div",{key:"shared-title",className:"section-title",style:_objectSpread(_objectSpread({},titleStyle),{},{paddingLeft:12,paddingRight:8,textTransform:"none",transition:"none"})},_react.default.createElement(ModernTextField,{focusOnMount:!0,fullWidth:!0,style:{marginTop:-16,marginBottom:-16,top:-1},hintText:filterHint,hintStyle:{fontWeight:400},inputStyle:{fontWeight:400,color:palette.primary1Color,backgroundColor:"rgba(0,0,0,.03)"},value:filterValue,onChange:function(e,v){_this3.setState({filterValue:v})},onBlur:function(){setTimeout(function(){filterValue||_this3.setState({toggleFilter:!1})},150)},onKeyPress:function(scope){"Enter"===scope.key&&uniqueResult&&(searchView?(scope="ALL"===(scope=uniqueResult.getSlug())?"all":scope+"/",setValues(_objectSpread(_objectSpread({},values),{},{scope:scope}))):pydio.triggerRepositoryChange(uniqueResult.getId()),_this3.setState({filterValue:"",toggleFilter:!1}))}}),uniqueResult&&_react.default.createElement("div",{style:_objectSpread(_objectSpread({},buttonStyles.button),{},{right:28,lineHeight:"24px",fontSize:20,opacity:.5})},_react.default.createElement("span",{className:"mdi mdi-keyboard-return"})),_react.default.createElement(_materialUi.IconButton,{key:"close-filter",iconClassName:"mdi mdi-close",style:buttonStyles.button,iconStyle:buttonStyles.icon,onClick:function(){_this3.setState({toggleFilter:!1,filterValue:""})}})),_react.default.createElement("div",{className:"workspaces"},wss.map(function(ws){return _react.default.createElement(_WorkspaceEntry.default,{pydio:pydio,key:ws.getId(),workspace:ws,showFoldersTree:activeWorkspace&&activeWorkspace===ws.getId(),searchView:searchView,values:values,setValues:setValues,searchLoading:searchLoading})}),!entries.length&&emptyState,pagination.use&&this.renderPagination(pagination)))}}]),Entries}(),WorkspacesList=function(){_inherits(WorkspacesList,_react["default"].Component);var _super2=_createSuper(WorkspacesList);function WorkspacesList(props,context){var _this4;return _classCallCheck(this,WorkspacesList),(_this4=_super2.call(this,props,context)).state=_this4.stateFromPydio(props.pydio),_this4._reloadObserver=function(){_this4.setState(_this4.stateFromPydio(_this4.props.pydio))},_this4}return _createClass(WorkspacesList,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return nextState.random!==this.state.random||nextState.popoverOpen!==this.state.popoverOpen||nextProps.searchView!==this.props.searchView||nextProps.values!==this.props.values||nextProps.facets!==this.props.facets||nextProps.activeFacets!==this.props.activeFacets}},{key:"stateFromPydio",value:function(pydio){var workspaces=pydio.user?pydio.user.getRepositoriesList():[],wsList=[];return workspaces.forEach(function(o){return wsList.push(o)}),{merge:pydio.getPluginConfigs("core.pydio").get("MERGE_WORKSPACES_AND_CELLS"),random:Math.random(),workspaces:workspaces,activeWorkspace:!!pydio.user&&pydio.user.activeRepository,activeRepoIsHome:pydio.user&&"homepage"===pydio.user.activeRepository}}},{key:"componentDidMount",value:function(){this.props.pydio.observe("repository_list_refreshed",this._reloadObserver)}},{key:"componentWillUnmount",value:function(){this.props.pydio.stopObserving("repository_list_refreshed",this._reloadObserver)}},{key:"createRepositoryEnabled",value:function(){return this.props.pydio.getPluginConfigs("auth").get("USER_CREATE_CELLS")}},{key:"render",value:function(){var createAction,_this6=this,createClick=this.state,classNames=createClick.workspaces,activeWorkspace=createClick.activeWorkspace,popoverOpen=createClick.popoverOpen,popoverAnchor=createClick.popoverAnchor,popoverContent=createClick.popoverContent,merge=createClick.merge,buttonStyles=this.props,pydio=buttonStyles.pydio,fakeAllEntry=buttonStyles.className,muiTheme=buttonStyles.muiTheme,sectionTitleStyle=buttonStyles.sectionTitleStyle,searchView=buttonStyles.searchView,values=buttonStyles.values,setValues=buttonStyles.setValues,searchLoading=buttonStyles.searchLoading,facets=buttonStyles.facets,activeFacets=buttonStyles.activeFacets,toggleFacet=buttonStyles.toggleFacet,wsList=[];classNames.forEach(function(o){return wsList.push(o)}),(wsList=wsList.filter(function(ws){return!_repository.default.isInternal(ws.getId())})).sort(function(oA,oB){if("workspace-personal"===oA.getRepositoryType())return-1;if("workspace-personal"===oB.getRepositoryType())return 1;var res=oA.getLabel().localeCompare(oB.getLabel(),void 0,{numeric:!0});return 0===res?oA.getSlug().localeCompare(oB.getSlug()):res});var entries=wsList.filter(function(ws){return!ws.getOwner()}),sharedEntries=wsList.filter(function(ws){return ws.getOwner()}),messages=pydio.MessageHash,createClick=function(event){var _this5=this,target=event.target;_resourcesManager.default.loadClassesAndApply(["ShareDialog"],function(){_this5.setState({popoverOpen:!0,popoverAnchor:target,popoverContent:_react.default.createElement(ShareDialog.CreateCellDialog,{pydio:pydio,onDismiss:function(){_this5.setState({popoverOpen:!1})}})})})}.bind(this),buttonStyles={button:{width:36,height:36,padding:6,position:"absolute",right:4,top:8},icon:{fontSize:22,color:muiTheme.palette.primary1Color}};this.createRepositoryEnabled()&&(sharedEntries.length||merge&&(sharedEntries.length||entries.length))&&(createAction=_react.default.createElement(_materialUi.IconButton,{key:"create-cell",style:buttonStyles.button,iconStyle:buttonStyles.icon,iconClassName:"mdi mdi-plus",tooltip:messages[417],tooltipPosition:merge?"bottom-left":"top-left",onClick:createClick}));classNames=["user-workspaces-list"];if(fakeAllEntry&&classNames.push(fakeAllEntry),searchView){fakeAllEntry=new _repository.default("ALL");return fakeAllEntry.setSlug("ALL"),fakeAllEntry.setLabel(messages[610]),_react.default.createElement("div",{className:classNames.join(" ")},_react.default.createElement(Entries,{title:messages["searchengine.scope.title"],entries:[fakeAllEntry].concat(_toConsumableArray(entries),_toConsumableArray(sharedEntries)),filterHint:messages["ws.quick-filter"],titleStyle:_objectSpread(_objectSpread({},sectionTitleStyle),{},{marginTop:5,position:"relative",overflow:"visible",transition:"none"}),pydio:pydio,activeWorkspace:activeWorkspace,palette:muiTheme.palette,buttonStyles:buttonStyles,searchView:searchView,values:values,setValues:setValues,searchLoading:searchLoading}),_react.default.createElement(_Facets.default,{pydio:pydio,facets:facets,activeFacets:activeFacets,onToggleFacet:toggleFacet,values:values,dataModel:pydio.getContextHolder(),zDepth:0,styles:{container:{color:"inherit",backgroundColor:"transparent",padding:"0 16px 16px"},header:{display:"none"},subHeader:{color:(0,_color.default)(muiTheme.palette.primary1Color).darken(.1).alpha(.5).toString(),fontWeight:500,textTransform:"uppercase",padding:"12px 0"}}}))}return _react.default.createElement("div",{className:classNames.join(" ")},_react.default.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:popoverAnchor,useLayerForClickAway:!0,onRequestClose:function(){_this6.setState({popoverOpen:!1})},anchorOrigin:sharedEntries.length?{horizontal:"left",vertical:"top"}:{horizontal:"left",vertical:"bottom"},targetOrigin:sharedEntries.length?{horizontal:"left",vertical:"top"}:{horizontal:"left",vertical:"bottom"},zDepth:3,style:{borderRadius:6,overflow:"hidden",marginLeft:sharedEntries.length?-10:0,marginTop:sharedEntries.length?-10:0}},popoverContent),!merge&&0<entries.length&&_react.default.createElement(Entries,{title:messages[468],entries:entries,filterHint:messages["ws.quick-filter"],titleStyle:_objectSpread(_objectSpread({},sectionTitleStyle),{},{marginTop:5,position:"relative",overflow:"visible",transition:"none"}),pydio:pydio,activeWorkspace:activeWorkspace,palette:muiTheme.palette,buttonStyles:buttonStyles}),_react.default.createElement(Entries,{title:messages[merge?468:469],entries:merge?[].concat(_toConsumableArray(entries),_toConsumableArray(sharedEntries)):sharedEntries,filterHint:messages["cells.quick-filter"],titleStyle:_objectSpread(_objectSpread({},sectionTitleStyle),{},{position:"relative",overflow:"visible",transition:"none"}),pydio:pydio,createAction:createAction,activeWorkspace:activeWorkspace,palette:muiTheme.palette,buttonStyles:buttonStyles,emptyState:_react.default.createElement("div",{style:{textAlign:"center",color:(0,_color.default)(muiTheme.palette.primary1Color).fade(.6).toString()}},_react.default.createElement("div",{className:"icomoon-cells",style:{fontSize:80}}),this.createRepositoryEnabled()&&_react.default.createElement(_materialUi.FlatButton,{style:{color:muiTheme.palette.accent2Color,marginTop:5},primary:!0,label:messages[418],onClick:createClick}),_react.default.createElement("div",{style:{fontSize:13,padding:"5px 20px"}},messages[633]))}))}}]),WorkspacesList}();(exports.default=WorkspacesList).PropTypes={pydio:_propTypes.default.instanceOf(_pydio.default),workspaces:_propTypes.default.instanceOf(Map),onHoverLink:_propTypes.default.func,onOutLink:_propTypes.default.func,className:_propTypes.default.string,style:_propTypes.default.object,sectionTitleStyle:_propTypes.default.object,filterByType:_propTypes.default.oneOf(["shared","entries","create"])},exports.default=WorkspacesList=withVerticalScroll(WorkspacesList),exports.default=WorkspacesList=muiThemeable()(WorkspacesList),module.exports=exports.default},{"../search/components/Facets":29,"./WorkspaceEntry":49,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/repository":"pydio/model/repository",react:"react"}],53:[function(WorkspacesListMaterial,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _WorkspaceEntryMaterial=_interopRequireDefault(WorkspacesListMaterial("./WorkspaceEntryMaterial")),_propTypes=_interopRequireDefault(WorkspacesListMaterial("prop-types")),_pydio=_interopRequireDefault(WorkspacesListMaterial("pydio"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(self):call}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var React=WorkspacesListMaterial("react"),Repository=WorkspacesListMaterial("pydio/model/repository"),WorkspacesListMaterial=WorkspacesListMaterial("material-ui"),List=WorkspacesListMaterial.List,Subheader=WorkspacesListMaterial.Subheader,Divider=WorkspacesListMaterial.Divider,WorkspacesListMaterial=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(WorkspacesListMaterial,React.Component);var Constructor,protoProps,staticProps,_super=_createSuper(WorkspacesListMaterial);function WorkspacesListMaterial(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WorkspacesListMaterial),_super.apply(this,arguments)}return Constructor=WorkspacesListMaterial,(protoProps=[{key:"render",value:function(){var inboxEntry,allEntries=this.props,messages=allEntries.workspaces,showTreeForWorkspace=allEntries.showTreeForWorkspace,allEntries=allEntries.filterByType,entries=[],sharedEntries=[],remoteShares=[];messages.forEach(function(object,entry){Repository.isInternal(object.getId())||object.hasContentFilter()||"declined"!==object.getAccessStatus()&&(entry=React.createElement(_WorkspaceEntryMaterial.default,_extends({},this.props,{key:entry,workspace:object,showFoldersTree:showTreeForWorkspace&&showTreeForWorkspace===entry})),"inbox"==object.getAccessType()?inboxEntry=entry:(object.getOwner()?"remote"===object.getRepositoryType()?remoteShares:sharedEntries:entries).push(entry))}.bind(this));messages=pydio.MessageHash;return sharedEntries.length&&sharedEntries.unshift(React.createElement(Subheader,null,messages[626])),inboxEntry&&(sharedEntries.length&&sharedEntries.unshift(React.createElement(Divider,null)),sharedEntries.unshift(inboxEntry),sharedEntries.unshift(React.createElement(Subheader,null,messages[630]))),remoteShares.length&&(remoteShares.unshift(React.createElement(Subheader,null,messages[627])),remoteShares.unshift(React.createElement(Divider,null)),sharedEntries=sharedEntries.concat(remoteShares)),"entries"===allEntries&&entries.unshift(React.createElement(Subheader,null,messages[468])),allEntries=allEntries?"shared"===allEntries?sharedEntries:entries:entries.concat(sharedEntries),React.createElement(List,{style:this.props.style},allEntries)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),WorkspacesListMaterial}();(exports.default=WorkspacesListMaterial).propTypes={pydio:_propTypes.default.instanceOf(_pydio.default),workspaces:_propTypes.default.instanceOf(Map),filterByType:_propTypes.default.oneOf(["shared","entries","create"]),sectionTitleStyle:_propTypes.default.object,showTreeForWorkspace:_propTypes.default.string,onHoverLink:_propTypes.default.func,onOutLink:_propTypes.default.func,className:_propTypes.default.string,style:_propTypes.default.object},module.exports=exports.default},{"./WorkspaceEntryMaterial":50,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/model/repository":"pydio/model/repository",react:"react"}],54:[function(require,module,exports){!function(global){!function(){var win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};module.exports=win}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],55:[function(require,module,exports){!function(global){!function(){!function(){var undefined,FUNC_ERROR_TEXT="Expected a function",PLACEHOLDER="__lodash_placeholder__",NAN=NaN,wrapFlags=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrimStart=/^\s+/,reWhitespace=/\s/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,freeExports="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rsMiscUpper="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsSymbol="[\\ud800-\\udfff]",rsBreak="["+rsMiscUpper+"]",rsCombo="["+freeExports+"]",rsDigits="\\d+",nodeUtil="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsSeq="[^\\ud800-\\udfff"+rsMiscUpper+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsSeq+")",rsMiscUpper="(?:"+rsUpper+"|"+rsSeq+")",rsSeq="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+rsSeq+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+rsSeq+")*"),nodeUtil="(?:"+[nodeUtil,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsSymbol].join("|")+")",reApos=RegExp("['’]","g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,nodeUtil].join("|"),"g"),reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff"+freeExports+"\\ufe0e\\ufe0f]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,nodeUtil="object"==typeof global&&global&&global.Object===Object&&global,freeExports="object"==typeof self&&self&&self.Object===Object&&self,root=nodeUtil||freeExports||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&nodeUtil.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&!1!==iteratee(array[length],length,array););return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){return!!(null==array?0:array.length)&&-1<baseIndexOf(array,value,0)}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}var asciiSize=baseProperty("length");function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value==value?function(array,value,fromIndex){var index=fromIndex-1,length=array.length;for(;++index<length;)if(array[index]===value)return index;return-1}(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!=value}function baseMean(array,iteratee){var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseTrim(string){return string&&string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,"")}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&-1<baseIndexOf(chrSymbols,strSymbols[index],0););return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&-1<baseIndexOf(chrSymbols,strSymbols[index],0););return index}var deburrLetter=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),escapeHtmlChar=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function hasUnicode(string){return reHasUnicode.test(string)}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function stringSize(string){return(hasUnicode(string)?function(string){var result=reUnicode.lastIndex=0;for(;reUnicode.test(string);)++result;return result}:asciiSize)(string)}function stringToArray(string){return hasUnicode(string)?function(string){return string.match(reUnicode)||[]}(string):string.split("")}function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}var unescapeHtmlChar=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _=function runInContext(methodOf){var Array=(methodOf=null==methodOf?root:_.defaults(root.Object(),methodOf,_.pick(root,contextProps))).Array,method=methodOf.Date,Error=methodOf.Error,Function=methodOf.Function,Math=methodOf.Math,Object=methodOf.Object,RegExp=methodOf.RegExp,String=methodOf.String,TypeError=methodOf.TypeError,arrayProto=Array.prototype,bindAll=Function.prototype,objectProto=Object.prototype,ceil=methodOf["__core-js_shared__"],funcToString=bindAll.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=(flow=/[^.]+$/.exec(ceil&&ceil.keys&&ceil.keys.IE_PROTO||""))?"Symbol(src)_1."+flow:"",nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),flowRight=moduleExports?methodOf.Buffer:undefined,over=methodOf.Symbol,Uint8Array=methodOf.Uint8Array,allocUnsafe=flowRight?flowRight.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=over?over.isConcatSpreadable:undefined,symIterator=over?over.iterator:undefined,symToStringTag=over?over.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),overSome=methodOf.clearTimeout!==root.clearTimeout&&methodOf.clearTimeout,multiply=method&&method.now!==root.Date.now&&method.now,divide=methodOf.setTimeout!==root.setTimeout&&methodOf.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,subtract=flowRight?flowRight.isBuffer:undefined,nativeIsFinite=methodOf.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=method.now,nativeParseInt=methodOf.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,range=getNative(methodOf,"DataView"),Map=getNative(methodOf,"Map"),rangeRight=getNative(methodOf,"Promise"),Set=getNative(methodOf,"Set"),add=getNative(methodOf,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=add&&new add,realNames={},dataViewCtorString=toSource(range),mapCtorString=toSource(Map),promiseCtorString=toSource(rangeRight),setCtorString=toSource(Set),weakMapCtorString=toSource(add),overEvery=over?over.prototype:undefined,symbolValueOf=overEvery?overEvery.valueOf:undefined,symbolToString=overEvery?overEvery.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var baseCreate=function(result){if(!isObject(result))return{};if(objectCreate)return objectCreate(result);object.prototype=result;result=new object;return object.prototype=undefined,result};function object(){}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(data){data=this.__data__=new ListCache(data);this.size=data.size}function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number==number&&(upper!==undefined&&(number=number<=upper?number:upper),lower!==undefined&&(number=lower<=number?number:lower)),number}function baseClone(value,bitmask,customizer,isFunc,object,stack){var result,stacked=1&bitmask,isFlat=2&bitmask,isFull=4&bitmask;if((result=customizer?object?customizer(value,isFunc,object,stack):customizer(value):result)!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=new array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!stacked)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,stacked);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!stacked)return isFlat?function(source,object){return copyObject(source,getSymbolsIn(source),object)}(value,function(object,source){return object&&copyObject(source,keysIn(source),object)}(result,value)):function(source,object){return copyObject(source,getSymbols(source),object)}(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function(dataView,buffer){buffer=buffer?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case"[object Uint8ClampedArray]":case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return function(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return new Ctor;case symbolTag:return function(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}(object)}}(value,tag,stacked)}}stacked=(stack=stack||new Stack).get(value);if(stacked)return stacked;stack.set(value,result),isSet(value)?value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}):isMap(value)&&value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))});var props=isArr?undefined:(isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys)(value);return arrayEach(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):200<=values.length&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value),value=comparator||0!==value?value:0;if(isCommon&&computed==computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},(lodash.prototype=baseLodash.prototype).constructor=lodash,(LodashWrapper.prototype=baseCreate(baseLodash.prototype)).constructor=LodashWrapper,(LazyWrapper.prototype=baseCreate(baseLodash.prototype)).constructor=LazyWrapper,Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(result){return result=this.has(result)&&delete this.__data__[result],this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(index){var data=this.__data__;return!((index=assocIndexOf(data,index))<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(index){var data=this.__data__;return(index=assocIndexOf(data,index))<0?undefined:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(result){return result=getMapData(this,result).delete(result),this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(result){var data=this.__data__,result=data.delete(result);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var computed,result,value=array[index],current=iteratee(value);null!=current&&(computed===undefined?current==current&&!isSymbol(current):comparator(current,computed))&&(computed=current,result=value)}return result}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate=predicate||isFlattenable,result=result||[];++index<length;){var value=array[index];0<depth&&predicate(value)?1<depth?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,result,symbolsFunc){result=result(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?value===undefined?"[object Undefined]":"[object Null]":(symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}:function(value){return nativeObjectToString.call(value)})(value)}function baseGt(value,other){return other<value}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||120<=length&&120<=array.length)?new SetCache(othIndex&&array):undefined}var array=arrays[0],index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value,value=comparator||0!==value?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInvoke(object,func,args){func=null==(object=parent(object,func=castPath(func,object)))?object:object[toKey(last(func))];return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othUnwrapped=isArray(other),objTag=objIsArr?arrayTag:getTag(object),isSameTag=othUnwrapped?arrayTag:getTag(other),objUnwrapped=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othUnwrapped=(isSameTag=isSameTag==argsTag?objectTag:isSameTag)==objectTag,isSameTag=objTag==isSameTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objUnwrapped=!(objIsArr=!0)}if(isSameTag&&!objUnwrapped)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var result=mapToArray;case setTag:var stacked=1&bitmask;if(result=result||setToArray,object.size!=other.size&&!stacked)return!1;stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);result=equalArrays(result(object),result(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){objUnwrapped=objUnwrapped&&hasOwnProperty.call(object,"__wrapped__"),othUnwrapped=othUnwrapped&&hasOwnProperty.call(other,"__wrapped__");if(objUnwrapped||othUnwrapped){objUnwrapped=objUnwrapped?object.value():object,othUnwrapped=othUnwrapped?other.value():other;return stack=stack||new Stack,equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return isSameTag&&(stack=stack||new Stack,function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length,othCtor=getAllKeys(other).length;if(objLength!=othCtor&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var objCtor=stack.get(object),othCtor=stack.get(other);if(objCtor&&othCtor)return objCtor==other&&othCtor==object;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){key=objProps[index];var compared,objValue=object[key],othValue=other[key];if(!((compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||"constructor"==key}result&&!skipCtor&&(objCtor=object.constructor,othCtor=other.constructor,objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1));return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var result,stack=new Stack;if(!((result=customizer?customizer(objValue,srcValue,key,object,source,stack):result)===undefined?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}function baseIsNative(value){return!(!isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value));var func}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var key,isProto=isPrototype(object),result=[];for(key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){var newValue;stack=stack||new Stack,isObject(srcValue)?function(object,isTyped,key,srcIndex,mergeFunc,customizer,stack){var newValue,isCommon,isArr,objValue=safeGet(object,key),srcValue=safeGet(isTyped,key),isBuff=stack.get(srcValue);isBuff?assignMergeValue(object,key,isBuff):(newValue=customizer?customizer(objValue,srcValue,key+"",object,isTyped,stack):undefined,(isCommon=newValue===undefined)&&(isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue),newValue=srcValue,isArr||isBuff||isTyped?newValue=isArray(objValue)?objValue:isArrayLikeObject(objValue)?copyArray(objValue):isBuff?cloneBuffer(srcValue,!(isCommon=!1)):isTyped?cloneTypedArray(srcValue,!(isCommon=!1)):[]:isPlainObject(srcValue)||isArguments(srcValue)?isArguments(newValue=objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue)):isCommon=!1),isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue))}(object,source,key,srcIndex,baseMerge,customizer,stack):(newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined,assignMergeValue(object,key,newValue=newValue===undefined?srcValue:newValue))},keysIn)}function baseNth(array,n){var length=array.length;if(length)return isIndex(n+=n<0?length:0,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){iteratees=iteratees.length?arrayMap(iteratees,function(iteratee){return isArray(iteratee)?function(value){return baseGet(value,1===iteratee.length?iteratee[0]:iteratee)}:iteratee}):[identity];var index=-1;return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),function(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}(baseMap(collection,function(value,key,collection){return{criteria:arrayMap(iteratees,function(iteratee){return iteratee(value)}),index:++index,value:value}}),function(object,other){return function(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;for(;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(ordersLength<=index)return result;var order=orders[index];return result*("desc"==order?-1:1)}}return object.index-other.index}(object,other,orders)})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;-1<(fromIndex=indexOf(seen,computed,fromIndex,comparator));)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var previous,index=indexes[length];length!=lastIndex&&index===previous||(isIndex(previous=index)?splice.call(array,index,1):baseUnset(array,index))}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRepeat(string,n){var result="";if(!string||n<1||9007199254740991<n)return result;for(;n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string),n;);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(array,n){array=values(array);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object))return object;for(var index=-1,length=(path=castPath(path,object)).length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var objValue,key=toKey(path[index]),newValue=value;if("__proto__"===key||"constructor"===key||"prototype"===key)return object;index!=lastIndex&&(objValue=nested[key],(newValue=customizer?customizer(objValue,key,nested):undefined)===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})),assignValue(nested,key,newValue),nested=nested[key]}return object}var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,floor=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;(end=length<end?length:end)<0&&(end+=length),length=end<(start=start<0?length<-start?0:length+start:start)?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return!(result=predicate(value,index,collection))}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=null==array?low:array.length;if("number"==typeof value&&value==value&&high<=2147483647){for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=1+mid:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){var low=0,high=null==array?0:array.length;if(0===high)return 0;for(var valIsNaN=(value=iteratee(value))!=value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),setLow=iteratee(array[mid]),othIsDefined=setLow!==undefined,othIsNull=null===setLow,othIsReflexive=setLow==setLow,othIsSymbol=isSymbol(setLow),setLow=valIsNaN?retHighest||othIsReflexive:valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?setLow<=value:setLow<value);setLow?low=mid+1:high=mid}return nativeMin(high,4294967294)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var seen,value=array[index],computed=iteratee?iteratee(value):value;index&&eq(computed,seen)||(seen=computed,result[resIndex++]=0===value?0:value)}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value}function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(200<=length){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value,value=comparator||0!==value?value:0;if(isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){return null==(object=parent(object,path=castPath(path,object)))||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result=value instanceof LazyWrapper?value.value():result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}var round=baseRest;function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&length<=end?array:baseSlice(array,start,end)}var clearTimeout=overSome||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,result){if(result)return buffer.slice();result=buffer.length,result=allocUnsafe?allocUnsafe(result):new buffer.constructor(result);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneTypedArray(typedArray,buffer){buffer=buffer?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&other<value||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array=array||Array(length);++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;(isNew?baseAssignValue:assignValue)(object,key,newValue=newValue===undefined?source[key]:newValue)}return object}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:undefined,guard=2<length?sources[2]:undefined,customizer=3<assigner.length&&"function"==typeof customizer?(length--,customizer):undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}function createCaseFirst(methodName){return function(trailing){var strSymbols=hasUnicode(trailing=toString(trailing))?stringToArray(trailing):undefined,chr=strSymbols?strSymbols[0]:trailing.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):trailing.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length,holders=getHolder(wrapper);index--;)args[index]=arguments[index];holders=length<3&&args[0]!==holders&&args[length-1]!==holders?[]:replaceHolders(args,holders);return(length-=holders.length)<arity?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length):apply(this&&this!==root&&this instanceof wrapper?Ctor:func,this,args)}}function createFind(findIndexFunc){return function(collection,predicate,index){var iteratee,iterable=Object(collection);isArrayLike(collection)||(iteratee=getIteratee(predicate,3),collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)});index=findIndexFunc(collection,predicate,index);return-1<index?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);prereq&&!wrapper&&"wrapper"==getFuncName(func)&&(wrapper=new LodashWrapper([],!0))}for(index=wrapper?index:length;++index<length;)var funcName=getFuncName(func=funcs[index]),data="wrapper"==funcName?getData(func):undefined,wrapper=data&&isLaziable(data[0])&&424==data[1]&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=128&bitmask,isBind=1&bitmask,isBindKey=2&bitmask,isCurried=24&bitmask,isFlip=512&bitmask,Ctor=isBindKey?undefined:createCtor(func);return function wrapper(){for(var holdersCount,args=Array(length=arguments.length),index=length;index--;)args[index]=arguments[index];if(isCurried&&(holdersCount=function(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}(args,thisBinding=getHolder(wrapper))),partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var fn=replaceHolders(args,thisBinding);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,fn,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func,length=args.length;return argPos?args=function(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}(args,argPos):isFlip&&1<length&&args.reverse(),isAry&&ary<length&&(args.length=ary),(fn=this&&this!==root&&this instanceof wrapper?Ctor||createCtor(fn):fn).apply(thisBinding,args)}}function createInverter(setter,toIteratee){return function(object,iteratee){return function(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;other="string"==typeof value||"string"==typeof other?(value=baseToString(value),baseToString(other)):(value=baseToNumber(value),baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){var result=(chars=chars===undefined?" ":baseToString(chars)).length;if(result<2)return result?baseRepeat(chars,length):chars;result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}(start,end,step=step===undefined?start<end?1:-1:toFinite(step),fromRight)}}function createRelationalOperation(operator){return function(value,other){return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,result,placeholder,thisArg,partials,holders,argPos,ary,newData){var isCurry=8&bitmask;bitmask|=isCurry?32:64,4&(bitmask&=~(isCurry?64:32))||(bitmask&=-4);newData=[func,bitmask,thisArg,isCurry?partials:undefined,isCurry?holders:undefined,isCurry?undefined:partials,isCurry?undefined:holders,argPos,ary,newData],result=result.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),(precision=null==precision?0:nativeMin(toInteger(precision),292))&&nativeIsFinite(number)){var pair=(toString(number)+"e").split("e");return+((pair=(toString(func(pair[0]+"e"+(+pair[1]+precision)))+"e").split("e"))[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=Set&&1/setToArray(new Set([,-0]))[1]==1/0?function(values){return new Set(values)}:noop;function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):function(object,props){return arrayMap(props,function(key){return[key,object[key]]})}(object,keysFunc(object))}}function createWrap(func,bitmask,result,partials,holders,argPos,newData,arity){var isBindKey=2&bitmask;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var partialsRight,holdersRight,length=partials?partials.length:0;length||(bitmask&=-97,partials=holders=undefined),newData=newData===undefined?newData:nativeMax(toInteger(newData),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,64&bitmask&&(partialsRight=partials,holdersRight=holders,partials=holders=undefined);var data=isBindKey?undefined:getData(func),newData=[func,bitmask,result,partials,holders,partialsRight,holdersRight,argPos,newData,arity];data&&function(data,source){var value=data[1],srcBitmask=source[1],newBitmask=value|srcBitmask,isCommon=newBitmask<131,isCombo=128==srcBitmask&&8==value||128==srcBitmask&&256==value&&data[7].length<=source[8]||384==srcBitmask&&source[7].length<=source[8]&&8==value;if(!isCommon&&!isCombo)return;1&srcBitmask&&(data[2]=source[2],newBitmask|=1&value?0:4);value=source[3];{var partials;value&&(partials=data[3],data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4])}(value=source[5])&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]);(value=source[7])&&(data[7]=value);128&srcBitmask&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8]));null==data[9]&&(data[9]=source[9]);data[0]=source[0],data[1]=newBitmask}(newData,data),func=newData[0],bitmask=newData[1],result=newData[2],partials=newData[3],holders=newData[4],!(arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0))&&24&bitmask&&(bitmask&=-25);result=bitmask&&1!=bitmask?8==bitmask||16==bitmask?createCurry(func,bitmask,arity):32!=bitmask&&33!=bitmask||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,result,partials):function(func,bitmask,thisArg){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,arguments)}}(func,bitmask,result);return setWrapToString((data?baseSetData:setData)(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack.delete(srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othStacked=other.length;if(arrLength!=othStacked&&!(isPartial&&arrLength<othStacked))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if((compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){return!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=metaMap?function(func){return metaMap.get(func)}:noop;function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){return(hasOwnProperty.call(lodash,"placeholder")?lodash:func).placeholder}function getIteratee(){var result=(result=lodash.iteratee||iteratee)===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result}function getMapData(type,key){var value,data=type.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,value){value=function(object,key){return null==object?undefined:object[key]}(object,value);return baseIsNative(value)?value:undefined}var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(isObject(object)){var type=typeof index;return("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}}function isKey(value,object){if(!isArray(value)){var type=typeof value;return"number"==type||"symbol"==type||"boolean"==type||null==value||isSymbol(value)||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}}function isLaziable(func){var funcName=getFuncName(func),data=lodash[funcName];if("function"==typeof data&&funcName in LazyWrapper.prototype){if(func===data)return 1;data=getData(data);return data&&func===data[0]}}(range&&getTag(new range(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||rangeRight&&"[object Promise]"!=getTag(rangeRight.resolve())||Set&&getTag(new Set)!=setTag||add&&getTag(new add)!=weakMapTag)&&(getTag=function(ctorString){var result=baseGetTag(ctorString),ctorString=result==objectTag?ctorString.constructor:undefined,ctorString=ctorString?toSource(ctorString):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isMaskable=ceil?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function isStrictComparable(value){return value==value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(srcValue!==undefined||key in Object(object)))}}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];for(var index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function safeGet(object,key){if(("constructor"!==key||"function"!=typeof object[key])&&"__proto__"!=key)return object[key]}var setData=shortOut(baseSetData),setTimeout=divide||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(floor);function setWrapToString(wrapper,match,bitmask){var match=match+"";return setToString(wrapper,function(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(1<length?"& ":"")+details[lastIndex],details=details.join(2<length?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}(match,function(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}((match=(match=match).match(reWrapDetails))?match[1].split(reSplitDetails):[],bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;for(size=size===undefined?length:size;++index<size;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size,array}var stringToPath=function(result){var cache=(result=memoize(result,function(key){return 500===cache.size&&cache.clear(),key})).cache;return result}(function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}),result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]});function findIndex(array,predicate,index){var length=null==array?0:array.length;if(!length)return-1;index=null==index?0:toInteger(index);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}function head(array){return array&&array.length?array[0]:undefined}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return(comparator="function"==typeof comparator?comparator:undefined)&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}var pullAt=flatRest(function(array,indexes){var length=null==array?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result});function reverse(array){return null==array?array:nativeReverse.call(array)}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator="function"==typeof(comparator=last(arrays))?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)});function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){return isArrayLikeObject(group)&&(length=nativeMax(group.length,length),1)}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(result,iteratee){if(!result||!result.length)return[];result=unzip(result);return null==iteratee?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator="function"==typeof(comparator=last(arrays))?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip);var zipWith=baseRest(function(arrays){var iteratee=arrays.length,iteratee="function"==typeof(iteratee=1<iteratee?arrays[iteratee-1]:undefined)?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee)});function chain(result){result=lodash(result);return result.__chain__=!0,result}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){function interceptor(object){return baseAt(object,paths)}var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__;return!(1<length||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?((value=value.slice(start,+start+(length?1:0))).__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor)});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)});var find=createFind(findIndex),findLast=createFind(findLastIndex);function forEach(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){return(isArray(collection)?arrayEachRight:baseEachRight)(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])});var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result}),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,getIteratee(iteratee,3))}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});var sortBy=baseRest(function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return 1<length&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:2<length&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=multiply||function(){return root.Date.now()};function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,createWrap(func,128,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return 0<--n&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}var bind=baseRest(function(func,thisArg,partials){var holders,bitmask=1;return partials.length&&(holders=replaceHolders(partials,getHolder(bind)),bitmask|=32),createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var holders,bitmask=3;return partials.length&&(holders=replaceHolders(partials,getHolder(bindKey)),bitmask|=32),createWrap(key,bitmask,object,partials,holders)});function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return lastCallTime===undefined||wait<=timeSinceLastCall||timeSinceLastCall<0||maxing&&maxWait<=time-lastInvokeTime}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return function(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){timerId!==undefined&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined},debounced.flush=function(){return timerId===undefined?result:trailingEdge(now())},debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var result=arguments,key=resolver?resolver.apply(this,result):result[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);result=func.apply(this,result);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}memoize.Cache=MapCache;var overArgs=round(function(func,transforms){var funcsLength=(transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()))).length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,32,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,64,undefined,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,256,undefined,undefined,undefined,indexes)});function eq(value,other){return value===other||value!=value&&other!=other}var gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return other<=value}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):function(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag};function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=subtract||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):function(value){return isObjectLike(value)&&baseGetTag(value)==dateTag};function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||"[object DOMException]"==tag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}function isFunction(tag){if(!isObject(tag))return!1;tag=baseGetTag(tag);return tag==funcTag||tag==genTag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isMap=nodeIsMap?baseUnary(nodeIsMap):function(value){return isObjectLike(value)&&getTag(value)==mapTag};function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(Ctor){if(!isObjectLike(Ctor)||baseGetTag(Ctor)!=objectTag)return!1;Ctor=getPrototype(Ctor);if(null===Ctor)return!0;Ctor=hasOwnProperty.call(Ctor,"constructor")&&Ctor.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):function(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag};var isSet=nodeIsSet?baseUnary(nodeIsSet):function(value){return isObjectLike(value)&&getTag(value)==setTag};function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};var lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value)return[];if(isArrayLike(value))return(isString(value)?stringToArray:copyArray)(value);if(symIterator&&value[symIterator])return function(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}(value[symIterator]());var tag=getTag(value);return(tag==mapTag?mapToArray:tag==setTag?setToArray:values)(value)}function toFinite(value){return value?(value=toNumber(value))!==1/0&&value!==-1/0?value==value?value:0:17976931348623157e292*(value<0?-1:1):0===value?value:0}function toInteger(remainder){var result=toFinite(remainder),remainder=result%1;return result==result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,4294967295):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if("string"!=typeof(value=isObject(value)?isObject(isBinary="function"==typeof value.valueOf?value.valueOf():value)?isBinary+"":isBinary:value))return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toString(value){return null==value?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))copyObject(source,keys(source),object);else for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt);var defaults=baseRest(function(object,sources){object=Object(object);var index=-1,length=sources.length,guard=2<length?sources[2]:undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(length=1);++index<length;)for(var source=sources[index],props=keysIn(source),propsIndex=-1,propsLength=props.length;++propsIndex<propsLength;){var key=props[propsIndex],value=object[key];(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key))&&(object[key]=source[key])}return object}),defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)});function get(object,result,defaultValue){result=null==object?undefined:baseGet(object,result);return result===undefined?defaultValue:result}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){result[value=null!=value&&"function"!=typeof value.toString?nativeObjectToString.call(value):value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke);function keys(object){return(isArrayLike(object)?arrayLikeKeys:baseKeys)(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep=isDeep||1<path.length,path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,7,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result});var pick=flatRest(function(object,paths){return null==object?{}:function(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}(object,paths)});function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}var toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn);function values(object){return null==object?[]:baseValues(object,keys(object))}var camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){return string=toString(string),(pattern=guard?undefined:pattern)===undefined?(function(string){return reHasUnicodeWord.test(string)}(string)?function(string){return string.match(reUnicodeWord)||[]}:function(string){return string.match(reAsciiWord)||[]})(string):string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))}),object});function constant(value){return function(){return value}}var flow=createFlow(),flowRight=createFlow(!0);function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,1))}method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__);return(result.__actions__=copyArray(this.__actions__)).push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noop(){}over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):function(path){return function(object){return baseGet(object,path)}}(path)}range=createRange(),rangeRight=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}add=createMathOperation(function(augend,addend){return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor");var source,multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);return lodash.after=function(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}},lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=function(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]},lodash.chain=chain,lodash.chunk=function(array,size,guard){size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);var length=null==array?0:array.length;if(!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result},lodash.compact=function(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result},lodash.concat=function(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))},lodash.cond=function(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})},lodash.conforms=function(source){return function(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}(baseClone(source,1))},lodash.constant=constant,lodash.countBy=countBy,lodash.create=function(result,properties){return result=baseCreate(result),null==properties?result:baseAssign(result,properties)},lodash.curry=function curry(func,result,guard){result=createWrap(func,8,undefined,undefined,undefined,undefined,undefined,result=guard?undefined:result);return result.placeholder=curry.placeholder,result},lodash.curryRight=function curryRight(func,result,guard){result=createWrap(func,16,undefined,undefined,undefined,undefined,undefined,result=guard?undefined:result);return result.placeholder=curryRight.placeholder,result},lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=guard||n===undefined?1:toInteger(n))<0?0:n,length):[]},lodash.dropRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,0,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n):[]},lodash.dropRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]},lodash.dropWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]},lodash.fill=function(array,value,start,end){var length=null==array?0:array.length;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),function(array,value,start,end){var length=array.length;for((start=toInteger(start))<0&&(start=length<-start?0:length+start),(end=end===undefined||length<end?length:toInteger(end))<0&&(end+=length),end=end<start?0:toLength(end);start<end;)array[start++]=value;return array}(array,value,start,end)):[]},lodash.filter=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,getIteratee(predicate,3))},lodash.flatMap=function(collection,iteratee){return baseFlatten(map(collection,iteratee),1)},lodash.flatMapDeep=function(collection,iteratee){return baseFlatten(map(collection,iteratee),1/0)},lodash.flatMapDepth=function(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)},lodash.flatten=flatten,lodash.flattenDeep=function(array){return(null==array?0:array.length)?baseFlatten(array,1/0):[]},lodash.flattenDepth=function(array,depth){return(null==array?0:array.length)?baseFlatten(array,depth=depth===undefined?1:toInteger(depth)):[]},lodash.flip=function(func){return createWrap(func,512)},lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=function(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result},lodash.functions=function(object){return null==object?[]:baseFunctions(object,keys(object))},lodash.functionsIn=function(object){return null==object?[]:baseFunctions(object,keysIn(object))},lodash.groupBy=groupBy,lodash.initial=function(array){return(null==array?0:array.length)?baseSlice(array,0,-1):[]},lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result},lodash.mapValues=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result},lodash.matches=function(source){return baseMatches(baseClone(source,1))},lodash.matchesProperty=function(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,1))},lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})},lodash.omit=omit,lodash.omitBy=function(object,predicate){return pickBy(object,negate(getIteratee(predicate)))},lodash.once=function(func){return before(2,func)},lodash.orderBy=function(collection,iteratees,orders,guard){return null==collection?[]:baseOrderBy(collection,iteratees=!isArray(iteratees)?null==iteratees?[]:[iteratees]:iteratees,orders=!isArray(orders=guard?undefined:orders)?null==orders?[]:[orders]:orders)},lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function(object){return function(path){return null==object?undefined:baseGet(object,path)}},lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=function(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array},lodash.pullAllWith=function(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array},lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,negate(getIteratee(predicate,3)))},lodash.remove=function(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result},lodash.rest=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return baseRest(func,start=start===undefined?start:toInteger(start))},lodash.reverse=reverse,lodash.sampleSize=function(collection,n,guard){return n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n),(isArray(collection)?arraySampleSize:baseSampleSize)(collection,n)},lodash.set=function(object,path,value){return null==object?object:baseSet(object,path,value)},lodash.setWith=function(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)},lodash.shuffle=function(collection){return(isArray(collection)?arrayShuffle:baseShuffle)(collection)},lodash.slice=function(array,start,end){var length=null==array?0:array.length;return length?(end=end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,length):(start=null==start?0:toInteger(start),end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]},lodash.sortBy=sortBy,lodash.sortedUniq=function(array){return array&&array.length?baseSortedUniq(array):[]},lodash.sortedUniqBy=function(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]},lodash.split=function(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=limit===undefined?4294967295:limit>>>0)?(string=toString(string))&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&!(separator=baseToString(separator))&&hasUnicode(string)?castSlice(stringToArray(string),0,limit):string.split(separator,limit):[]},lodash.spread=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=null==start?0:nativeMax(toInteger(start),0),baseRest(function(otherArgs){var array=otherArgs[start],otherArgs=castSlice(otherArgs,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})},lodash.tail=function(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[]},lodash.take=function(array,n,guard){return array&&array.length?baseSlice(array,0,(n=guard||n===undefined?1:toInteger(n))<0?0:n):[]},lodash.takeRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n,length):[]},lodash.takeRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]},lodash.takeWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]},lodash.tap=function(value,interceptor){return interceptor(value),value},lodash.throttle=function(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=function(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))},lodash.toPlainObject=toPlainObject,lodash.transform=function(object,iteratee,accumulator){var Ctor,isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);return iteratee=getIteratee(iteratee,4),null==accumulator&&(Ctor=object&&object.constructor,accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{}),(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator},lodash.unary=function(func){return ary(func,1)},lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=function(array){return array&&array.length?baseUniq(array):[]},lodash.uniqBy=function(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]},lodash.uniqWith=function(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]},lodash.unset=function(object,path){return null==object||baseUnset(object,path)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))},lodash.updateWith=function(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)},lodash.values=values,lodash.valuesIn=function(object){return null==object?[]:baseValues(object,keysIn(object))},lodash.without=without,lodash.words=words,lodash.wrap=function(value,wrapper){return partial(castFunction(wrapper),value)},lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=function(props,values){return baseZipObject(props||[],values||[],assignValue)},lodash.zipObjectDeep=function(props,values){return baseZipObject(props||[],values||[],baseSet)},lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=function(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=(upper=toNumber(upper))==upper?upper:0),lower!==undefined&&(lower=(lower=toNumber(lower))==lower?lower:0),baseClamp(toNumber(number),lower,upper)},lodash.clone=function(value){return baseClone(value,4)},lodash.cloneDeep=function(value){return baseClone(value,5)},lodash.cloneDeepWith=function(value,customizer){return baseClone(value,5,customizer="function"==typeof customizer?customizer:undefined)},lodash.cloneWith=function(value,customizer){return baseClone(value,4,customizer="function"==typeof customizer?customizer:undefined)},lodash.conformsTo=function(object,source){return null==source||baseConformsTo(object,source,keys(source))},lodash.deburr=deburr,lodash.defaultTo=function(value,defaultValue){return null==value||value!=value?defaultValue:value},lodash.divide=divide,lodash.endsWith=function(string,target,position){string=toString(string),target=baseToString(target);var end=string.length,end=position=position===undefined?end:baseClamp(toInteger(position),0,end);return 0<=(position-=target.length)&&string.slice(position,end)==target},lodash.eq=eq,lodash.escape=function(string){return(string=toString(string))&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string},lodash.escapeRegExp=function(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string},lodash.every=function(collection,predicate,guard){return(isArray(collection)?arrayEvery:baseEvery)(collection,getIteratee(predicate=guard&&isIterateeCall(collection,predicate,guard)?undefined:predicate,3))},lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)},lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)},lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)},lodash.forInRight=function(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)},lodash.forOwn=function(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))},lodash.forOwnRight=function(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))},lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=function(object,path){return null!=object&&hasPath(object,path,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function(collection,value,fromIndex,length){return collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!length?toInteger(fromIndex):0,length=collection.length,fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&-1<collection.indexOf(value,fromIndex):!!length&&-1<baseIndexOf(collection,value,fromIndex)},lodash.indexOf=function(array,value,index){var length=null==array?0:array.length;return length?(index=null==index?0:toInteger(index),baseIndexOf(array,value,index=index<0?nativeMax(length+index,0):index)):-1},lodash.inRange=function(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}(number=toNumber(number),start,end)},lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function(value){return!0===value||!1===value||isObjectLike(value)&&baseGetTag(value)==boolTag},lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=function(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value)},lodash.isEmpty=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var key,tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(key in value)if(hasOwnProperty.call(value,key))return!1;return!0},lodash.isEqual=function(value,other){return baseIsEqual(value,other)},lodash.isEqualWith=function(value,other,customizer){var result=(customizer="function"==typeof customizer?customizer:undefined)?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result},lodash.isError=isError,lodash.isFinite=function(value){return"number"==typeof value&&nativeIsFinite(value)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=function(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))},lodash.isMatchWith=function(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)},lodash.isNaN=function(value){return isNumber(value)&&value!=+value},lodash.isNative=function(value){if(isMaskable(value))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return baseIsNative(value)},lodash.isNil=function(value){return null==value},lodash.isNull=function(value){return null===value},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=function(value){return isInteger(value)&&-9007199254740991<=value&&value<=9007199254740991},lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=function(value){return value===undefined},lodash.isWeakMap=function(value){return isObjectLike(value)&&getTag(value)==weakMapTag},lodash.isWeakSet=function(value){return isObjectLike(value)&&"[object WeakSet]"==baseGetTag(value)},lodash.join=function(array,separator){return null==array?"":nativeJoin.call(array,separator)},lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length;return fromIndex!==undefined&&(index=(index=toInteger(fromIndex))<0?nativeMax(length+index,0):nativeMin(index,length-1)),value==value?function(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)},lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=function(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined},lodash.maxBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined},lodash.mean=function(array){return baseMean(array,identity)},lodash.meanBy=function(array,iteratee){return baseMean(array,getIteratee(iteratee,2))},lodash.min=function(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined},lodash.minBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function(){return{}},lodash.stubString=function(){return""},lodash.stubTrue=function(){return!0},lodash.multiply=multiply,lodash.nth=function(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined},lodash.noConflict=function(){return root._===this&&(root._=oldDash),this},lodash.noop=noop,lodash.now=now,lodash.pad=function(string,length,chars){string=toString(string);var mid=(length=toInteger(length))?stringSize(string):0;return!length||length<=mid?string:createPadding(nativeFloor(mid=(length-mid)/2),chars)+string+createPadding(nativeCeil(mid),chars)},lodash.padEnd=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string},lodash.padStart=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string},lodash.parseInt=function(string,radix,guard){return radix=guard||null==radix?0:radix&&+radix,nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)},lodash.random=function(lower,upper,rand){var temp;if(rand&&"boolean"!=typeof rand&&isIterateeCall(lower,upper,rand)&&(upper=rand=undefined),rand===undefined&&("boolean"==typeof upper?(rand=upper,upper=undefined):"boolean"==typeof lower&&(rand=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),upper<lower&&(temp=lower,lower=upper,upper=temp),rand||lower%1||upper%1){rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)},lodash.reduce=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)},lodash.reduceRight=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)},lodash.repeat=function(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)},lodash.replace=function(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])},lodash.result=function(object,path,defaultValue){var index=-1,length=(path=castPath(path,object)).length;for(length||(length=1,object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object},lodash.round=round,lodash.runInContext=runInContext,lodash.sample=function(collection){return(isArray(collection)?arraySample:baseSample)(collection)},lodash.size=function(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length},lodash.snakeCase=snakeCase,lodash.some=function(collection,predicate,guard){return(isArray(collection)?arraySome:baseSome)(collection,getIteratee(predicate=guard&&isIterateeCall(collection,predicate,guard)?undefined:predicate,3))},lodash.sortedIndex=function(array,value){return baseSortedIndex(array,value)},lodash.sortedIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))},lodash.sortedIndexOf=function(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1},lodash.sortedLastIndex=function(array,value){return baseSortedIndex(array,value,!0)},lodash.sortedLastIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)},lodash.sortedLastIndexOf=function(array,value){if(null==array?0:array.length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1},lodash.startCase=startCase,lodash.startsWith=function(string,target,position){return string=toString(string),position=null==position?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target},lodash.subtract=subtract,lodash.sum=function(array){return array&&array.length?baseSum(array,identity):0},lodash.sumBy=function(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0},lodash.template=function(string,result,guard){var reDelimiters=lodash.templateSettings;guard&&isIterateeCall(string,result,guard)&&(result=undefined),string=toString(string),result=assignInWith({},result,reDelimiters,customDefaultsAssignIn);var isEscaping,isEvaluating,importsKeys=keys(reDelimiters=assignInWith({},result.imports,reDelimiters.imports,customDefaultsAssignIn)),importsValues=baseValues(reDelimiters,importsKeys),index=0,reDelimiters=result.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((result.escape||reNoMatch).source+"|"+reDelimiters.source+"|"+(reDelimiters===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(result.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+(hasOwnProperty.call(result,"sourceURL")?(result.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++templateCounter+"]")+"\n";if(string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue=interpolateValue||esTemplateValue,source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n",result=hasOwnProperty.call(result,"variable")&&result.variable){if(reForbiddenIdentifierChars.test(result))throw new Error("Invalid `variable` option passed into `_.template`")}else source="with (obj) {\n"+source+"\n}\n";if(source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(result||"obj")+") {\n"+(result?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}",(result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)})).source=source,isError(result))throw result;return result},lodash.times=function(n,iteratee){if((n=toInteger(n))<1||9007199254740991<n)return[];var index=4294967295,result=nativeMin(n,4294967295);for(n-=4294967295,result=baseTimes(result,iteratee=getIteratee(iteratee));++index<n;)iteratee(index);return result},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function(value){return toString(value).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function(value){return value?baseClamp(toInteger(value),-9007199254740991,9007199254740991):0===value?value:0},lodash.toString=toString,lodash.toUpper=function(value){return toString(value).toUpperCase()},lodash.trim=function(strSymbols,chrSymbols,guard){return(strSymbols=toString(strSymbols))&&(guard||chrSymbols===undefined)?baseTrim(strSymbols):strSymbols&&(chrSymbols=baseToString(chrSymbols))?(strSymbols=stringToArray(strSymbols),chrSymbols=stringToArray(chrSymbols),castSlice(strSymbols,charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols)+1).join("")):strSymbols},lodash.trimEnd=function(strSymbols,chars,guard){return(strSymbols=toString(strSymbols))&&(guard||chars===undefined)?strSymbols.slice(0,trimmedEndIndex(strSymbols)+1):strSymbols&&(chars=baseToString(chars))?castSlice(strSymbols=stringToArray(strSymbols),0,charsEndIndex(strSymbols,stringToArray(chars))+1).join(""):strSymbols},lodash.trimStart=function(strSymbols,chars,guard){return(strSymbols=toString(strSymbols))&&(guard||chars===undefined)?strSymbols.replace(reTrimStart,""):strSymbols&&(chars=baseToString(chars))?castSlice(strSymbols=stringToArray(strSymbols),charsStartIndex(strSymbols,stringToArray(chars))).join(""):strSymbols},lodash.truncate=function(string,index){var separator,result=30,omission="...";isObject(index)&&(separator="separator"in index?index.separator:separator,result="length"in index?toInteger(index.length):result,omission="omission"in index?baseToString(index.omission):omission);var strSymbols,index=(string=toString(string)).length;if((index=hasUnicode(string)?(strSymbols=stringToArray(string)).length:index)<=result)return string;if((index=result-stringSize(omission))<1)return omission;if(result=strSymbols?castSlice(strSymbols,0,index).join(""):string.slice(0,index),separator===undefined)return result+omission;if(strSymbols&&(index+=result.length-index),isRegExp(separator)){if(string.slice(index).search(separator)){var match,substring=result;for((separator=!separator.global?RegExp(separator.source,toString(reFlags.exec(separator))+"g"):separator).lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,newEnd===undefined?index:newEnd)}}else string.indexOf(baseToString(separator),index)==index||-1<(index=result.lastIndexOf(separator))&&(result=result.slice(0,index));return result+omission},lodash.unescape=function(string){return(string=toString(string))&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string},lodash.uniqueId=function(prefix){var id=++idCounter;return toString(prefix)+id},lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(source={},baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source),{chain:!1}),lodash.VERSION="4.17.21",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,4294967295),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=1==type||3==type;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(0<start||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined?(end=toInteger(end))<0?result.dropRight(-end):result.take(end-start):result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(4294967295)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){function interceptor(result){return result=lodashFunc.apply(lodash,arrayPush([result],args)),isTaker&&chainAll?result[0]:result}var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,isUnwrapped=args[0],useLazy=isLazy||isArray(value);useLazy&&checkIteratee&&"function"==typeof isUnwrapped&&1!=isUnwrapped.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,onlyLazy=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!onlyLazy;if(retUnwrapped||!useLazy)return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result);var value=onlyLazy?value:new LazyWrapper(this),result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(!retUnwrapped||this.__chain__)return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)});var value=this.value();return func.apply(isArray(value)?value:[],args)}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var key,lodashFunc=lodash[methodName];lodashFunc&&(key=lodashFunc.name+"",hasOwnProperty.call(realNames,key)||(realNames[key]=[]),realNames[key].push({name:methodName,func:lodashFunc}))}),realNames[createHybrid(undefined,2).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=function(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result},LazyWrapper.prototype.reverse=function(){var result;return this.__filtered__?((result=new LazyWrapper(this)).__dir__=-1,result.__filtered__=!0):(result=this.clone()).__dir__*=-1,result},LazyWrapper.prototype.value=function(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,end=function(start,end,transforms){var index=-1,length=transforms.length;for(;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}(0,arrLength,this.__views__),start=end.start,length=(end=end.end)-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){for(var iterIndex=-1,value=array[index+=dir];++iterIndex<iterLength;){var type=iteratees[iterIndex],computed=type.iteratee,type=type.type,computed=computed(value);if(2==type)value=computed;else if(!computed){if(1==type)continue outer;break outer}}result[resIndex++]=value}return result},lodash.prototype.at=wrapperAt,lodash.prototype.chain=function(){return chain(this)},lodash.prototype.commit=function(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length;return{done:done,value:done?undefined:this.__values__[this.__index__++]}},lodash.prototype.plant=function(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone,parent=parent.__wrapped__}return previous.__wrapped__=value,result},lodash.prototype.reverse=function(){var wrapped=this.__wrapped__;if(wrapped instanceof LazyWrapper){wrapped=wrapped;return(wrapped=(wrapped=this.__actions__.length?new LazyWrapper(this):wrapped).reverse()).__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=function(){return this}),lodash}();freeModule?((freeModule.exports=_)._=_,freeExports._=_):root._=_}.call(this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(require,module,exports){"use strict";module.exports={set:function(object,property,value){{if(object&&"object"==typeof object){if("string"!=typeof property||""===property)return"number"==typeof property?(object[property]=value,object[property]):object;var split=property.split(".");return split.reduce(function(obj,prop,idx){return obj[prop]=obj[prop]||{},split.length==idx+1&&(obj[prop]=value),obj[prop]},object)}return object}},get:function(object,property){return object&&"object"==typeof object?"string"!=typeof property||""===property?"number"==typeof property?object[property]:object:property.split(".").reduce(function(obj,prop){return obj&&obj[prop]},object):object},has:function(object,property,options){return options=options||{},!(!object||"object"!=typeof object)&&("string"!=typeof property||""===property?"number"==typeof property&&property in object:property.split(".").reduce(function(obj,prop,idx,array){return idx==array.length-1?options.own?!(!obj||!obj.hasOwnProperty(prop)):!!(null!==obj&&"object"==typeof obj&&prop in obj):obj&&obj[prop]},object))},hasOwn:function(object,property,options){return this.has(object,property,options||{own:!0})},isIn:function(pathExists,split,objectInPath,options){{if(options=options||{},pathExists&&"object"==typeof pathExists){if("string"!=typeof split||""===split)return!1;var split=split.split("."),isIn=!1;return pathExists=!!split.reduce(function(obj,prop){return isIn=isIn||obj===objectInPath||!!obj&&obj[prop]===objectInPath,obj&&obj[prop]},pathExists),options.validPath?isIn&&pathExists:isIn}return!1}}}},{}],57:[function(require,module,exports){!function(process){!function(){!function(){var getNanoSeconds,hrtime,loadTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:loadTime=null!=process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-loadTime)/1e6},hrtime=process.hrtime,(getNanoSeconds=function(){var hr=hrtime();return 1e9*hr[0]+hr[1]})()):Date.now?(module.exports=function(){return Date.now()-loadTime},Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},(new Date).getTime())}.call(this)}.call(this)}.call(this,require("_process"))},{_process:59}],58:[function(require,module,exports){!function(process){!function(){!function(){var getNanoSeconds,hrtime,loadTime,moduleLoadTime,nodeLoadTime,upTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:null!=process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-nodeLoadTime)/1e6},hrtime=process.hrtime,moduleLoadTime=(getNanoSeconds=function(){var hr=hrtime();return 1e9*hr[0]+hr[1]})(),upTime=1e9*process.uptime(),nodeLoadTime=moduleLoadTime-upTime):loadTime=Date.now?(module.exports=function(){return Date.now()-loadTime},Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},(new Date).getTime())}.call(this)}.call(this)}.call(this,require("_process"))},{_process:59}],59:[function(require,process,exports){var cachedSetTimeout,cachedClearTimeout,process=process.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],60:[function(require,module,exports){!function(global){!function(){for(var last,id,queue,now=require("performance-now"),root="undefined"==typeof window?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];raf&&caf||(id=last=0,queue=[],raf=function(callback){var _now,next;return 0===queue.length&&(_now=now(),next=Math.max(0,1e3/60-(_now-last)),last=next+_now,setTimeout(function(){for(var cp=queue.slice(0),i=queue.length=0;i<cp.length;i++)if(!cp[i].cancelled)try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}},Math.round(next))),queue.push({handle:++id,callback:callback,cancelled:!1}),id},caf=function(handle){for(var i=0;i<queue.length;i++)queue[i].handle===handle&&(queue[i].cancelled=!0)}),module.exports=function(fn){return raf.call(root,fn)},module.exports.cancel=function(){caf.apply(root,arguments)},module.exports.polyfill=function(object){(object=object||root).requestAnimationFrame=raf,object.cancelAnimationFrame=caf}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":58}],61:[function(cancel,module,exports){var global=cancel("global"),request=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||function(fn){var curr=+new Date,req=Math.max(0,16-(curr-prev)),req=setTimeout(fn,req);return prev=curr,req},prev=+new Date;cancel=global.cancelAnimationFrame||global.webkitCancelAnimationFrame||global.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(request=request.bind(global),cancel=cancel.bind(global)),(module.exports=request).cancel=cancel},{global:54}],62:[function(JoyrideBeacon,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _react2=_interopRequireDefault(JoyrideBeacon("react")),_propTypes2=_interopRequireDefault(JoyrideBeacon("prop-types")),_utils=JoyrideBeacon("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isTouch=!1;"undefined"!=typeof window&&(isTouch="ontouchstart"in window||navigator.msMaxTouchPoints);JoyrideBeacon=function(){function JoyrideBeacon(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JoyrideBeacon),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(JoyrideBeacon.__proto__||Object.getPrototypeOf(JoyrideBeacon)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(JoyrideBeacon,_react2.default.Component),_createClass(JoyrideBeacon,[{key:"render",value:function(){var stepStyles=this.props,eventType=stepStyles.eventType,onTrigger=stepStyles.onTrigger,rgb=stepStyles.step,styles=stepStyles.xPos,stepStyles=stepStyles.yPos,styles={beacon:{left:styles,position:!0===rgb.isFixed?"fixed":"absolute",top:stepStyles},inner:{},outer:{}},stepStyles=rgb.style||{},rgb=void 0;return stepStyles.beacon&&("string"==typeof stepStyles.beacon?(rgb=(0,_utils.hexToRGB)(stepStyles.beacon),styles.inner.backgroundColor=stepStyles.beacon,styles.outer={backgroundColor:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", 0.2)",borderColor:stepStyles.beacon}):(stepStyles.beacon.inner&&(styles.inner.backgroundColor=stepStyles.beacon.inner),stepStyles.beacon.outer&&(rgb=(0,_utils.hexToRGB)(stepStyles.beacon.outer),styles.outer={backgroundColor:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", 0.4)",borderColor:stepStyles.beacon.outer}))),_react2.default.createElement("button",{className:"joyride-beacon",style:styles.beacon,onClick:"click"===eventType||isTouch?onTrigger:null,onMouseEnter:"hover"!==eventType||isTouch?null:onTrigger},_react2.default.createElement("span",{className:"joyride-beacon__inner",style:styles.inner}),_react2.default.createElement("span",{className:"joyride-beacon__outer",style:styles.outer}))}}]),JoyrideBeacon}();JoyrideBeacon.propTypes={eventType:_propTypes2.default.string.isRequired,onTrigger:_propTypes2.default.func.isRequired,step:_propTypes2.default.object.isRequired,xPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired,yPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired},JoyrideBeacon.defaultProps={xPos:-1e3,yPos:-1e3},exports.default=JoyrideBeacon},{"./utils":65,"prop-types":"prop-types",react:"react"}],63:[function(JoyrideTooltip,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _react2=_interopRequireDefault(JoyrideTooltip("react")),_propTypes2=_interopRequireDefault(JoyrideTooltip("prop-types")),_utils=JoyrideTooltip("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}JoyrideTooltip=function(){function JoyrideTooltip(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JoyrideTooltip);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(JoyrideTooltip.__proto__||Object.getPrototypeOf(JoyrideTooltip)).call(this,props));return _this.handleMouseMove=function(inHole){var offsetX=inHole||window.e,hole=_this.state.styles.hole,inHole="fixed"===hole.position?offsetX.clientY:offsetX.pageY,offsetX="fixed"===hole.position?offsetX.clientX:offsetX.pageX,inHole=inHole>=hole.top&&inHole<=hole.top+hole.height,inHole=offsetX>=hole.left&&offsetX<=hole.left+hole.width&&inHole;inHole&&!_this.state.mouseOverHole&&_this.setState({mouseOverHole:!0}),!inHole&&_this.state.mouseOverHole&&_this.setState({mouseOverHole:!1})},_this.state={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(JoyrideTooltip,_react2.default.Component),_createClass(JoyrideTooltip,[{key:"componentWillMount",value:function(){var opts=this.setOpts(),styles=this.setStyles(this.props.step.style,opts,this.props);this.setState({styles:styles,opts:opts})}},{key:"componentDidMount",value:function(){var showOverlay=this.props,allowClicksThruHole=showOverlay.allowClicksThruHole,onRender=showOverlay.onRender,showOverlay=showOverlay.showOverlay;this.forceUpdate(),onRender(),showOverlay&&allowClicksThruHole&&document.addEventListener("mousemove",this.handleMouseMove,!1)}},{key:"componentWillReceiveProps",value:function(styles){var nextAllowClicksThruHole=styles.allowClicksThruHole,nextAnimate=styles.animate,nextStandalone=styles.standalone,nextStep=styles.step,nextHolePadding=styles.holePadding,nextPosition=styles.position,nextXPos=styles.xPos,nextYPos=styles.yPos,nextShowOverlay=styles.showOverlay,showOverlay=this.props,allowClicksThruHole=showOverlay.allowClicksThruHole,animate=showOverlay.animate,standalone=showOverlay.standalone,step=showOverlay.step,holePadding=showOverlay.holePadding,position=showOverlay.position,xPos=showOverlay.xPos,opts=showOverlay.yPos,showOverlay=showOverlay.showOverlay;nextAnimate===animate&&nextStandalone===standalone&&nextStep===step&&nextHolePadding===holePadding&&nextPosition===position&&nextXPos===xPos&&nextYPos===opts||(opts=this.setOpts(styles),styles=this.setStyles(styles.step.style,opts,styles),this.setState({styles:styles,opts:opts})),nextShowOverlay!==showOverlay&&(nextShowOverlay&&nextAllowClicksThruHole?document.addEventListener("mousemove",this.handleMouseMove,!1):document.removeEventListener("mousemove",this.handleMouseMove,!1)),nextAllowClicksThruHole!==allowClicksThruHole&&(nextAllowClicksThruHole?document.addEventListener("mousemove",this.handleMouseMove,!1):document.removeEventListener("mousemove",this.handleMouseMove,!1))}},{key:"componentDidUpdate",value:function(prevProps){var selector=this.props,onRender=selector.onRender,selector=selector.selector;prevProps.selector!==selector&&(this.forceUpdate(),onRender())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove,!1)}},{key:"getArrowPosition",value:function(position){var arrowPosition=position;return window.innerWidth<480?position<8?arrowPosition=8:92<position&&(arrowPosition=92):window.innerWidth<1024?position<6?arrowPosition=6:94<position&&(arrowPosition=94):position<5?arrowPosition=5:95<position&&(arrowPosition=95),arrowPosition}},{key:"generateArrow",value:function(){var opts=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};opts.location=opts.location||"top",opts.color=opts.color||"#f04",opts.color=opts.color.replace("#","%23"),opts.width=opts.width||36,opts.height=opts.width/2,opts.scale=opts.width/16,opts.rotate="0";var height=opts.height,rotate=opts.rotate,width=opts.width;return"bottom"===opts.location?rotate="180 8 4":"left"===opts.location?(height=opts.width,width=opts.height,rotate="270 8 8"):"right"===opts.location&&(height=opts.width,width=opts.height,rotate="90 4 4"),"data:image/svg+xml,%3Csvg%20width%3D%22"+width+"%22%20height%3D%22"+height+"%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpolygon%20points%3D%220%2C%200%208%2C%208%2016%2C0%22%20fill%3D%22"+opts.color+"%22%20transform%3D%22scale%28"+opts.scale+"%29%20rotate%28"+rotate+"%29%22%3E%3C%2Fpolygon%3E%3C%2Fsvg%3E"}},{key:"setStyles",value:function(stepStyles,opts,yPos){var holePadding=yPos.holePadding,isFixed=yPos.step,styles=yPos.xPos,yPos=yPos.yPos,isFixed=!0===isFixed.isFixed,styles={arrow:{left:opts.arrowPosition},buttons:{},header:{},main:{},footer:{},hole:{},tooltip:{position:isFixed?"fixed":"absolute",top:Math.round(yPos),left:Math.round(styles)}};return styles.hole={top:Math.round(opts.rect.top-(isFixed?0:document.body.getBoundingClientRect().top)-holePadding),left:Math.round(opts.rect.left-holePadding),width:Math.round(opts.rect.width+2*holePadding),height:Math.round(opts.rect.height+2*holePadding)},isFixed&&(styles.hole.position="fixed"),styles.buttons={back:{},close:{},primary:{},skip:{}},stepStyles&&(stepStyles.backgroundColor&&(styles.arrow.backgroundImage='url("'+this.generateArrow({location:opts.positonBaseClass,color:stepStyles.backgroundColor})+'")',styles.tooltip.backgroundColor=stepStyles.backgroundColor),stepStyles.borderRadius&&(styles.tooltip.borderRadius=stepStyles.borderRadius),stepStyles.color&&(styles.buttons.primary.color=stepStyles.color,styles.buttons.close.color=stepStyles.color,styles.buttons.skip.color=stepStyles.color,styles.header.color=stepStyles.color,styles.tooltip.color=stepStyles.color,stepStyles.mainColor&&stepStyles.mainColor===stepStyles.color&&(styles.buttons.primary.color=stepStyles.backgroundColor)),stepStyles.mainColor&&(styles.buttons.primary.backgroundColor=stepStyles.mainColor,styles.buttons.back.color=stepStyles.mainColor,styles.header.borderColor=stepStyles.mainColor),stepStyles.textAlign&&(styles.tooltip.textAlign=stepStyles.textAlign),stepStyles.width&&(styles.tooltip.width=stepStyles.width),stepStyles.header&&(styles.header=_extends({},styles.header,stepStyles.header)),stepStyles.main&&(styles.main=_extends({},styles.main,stepStyles.main)),stepStyles.footer&&(styles.footer=_extends({},styles.footer,stepStyles.footer)),stepStyles.back&&(styles.buttons.back=_extends({},styles.buttons.back,stepStyles.back)),stepStyles.arrow&&(styles.arrow=_extends({},styles.arrow,stepStyles.arrow)),stepStyles.button&&(styles.buttons.primary=_extends({},styles.buttons.primary,stepStyles.button)),stepStyles.close&&(styles.buttons.close=_extends({},styles.buttons.close,stepStyles.close)),stepStyles.skip&&(styles.buttons.skip=_extends({},styles.buttons.skip,stepStyles.skip)),stepStyles.hole&&(styles.hole=_extends({},stepStyles.hole,styles.hole))),styles}},{key:"setOpts",value:function(){var offsetParent=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props,animate=offsetParent.animate,tooltip=offsetParent.offsetParentSelector,opts=offsetParent.position,standalone=offsetParent.standalone,target=offsetParent.target,xPos=offsetParent.xPos,offsetParent=document.querySelector((0,_utils.sanitizeSelector)(tooltip)),tooltip=document.querySelector(".joyride-tooltip"),opts={classes:["joyride-tooltip"],rect:(0,_utils.getOffsetBoundingClientRect)(target,offsetParent),positionClass:opts};return opts.positonBaseClass=opts.positionClass.match(/-/)?opts.positionClass.split("-")[0]:opts.positionClass,(/^bottom$/.test(opts.positionClass)||/^top$/.test(opts.positionClass))&&-1<xPos&&(opts.tooltip={width:450},tooltip&&(opts.tooltip=(0,_utils.getOffsetBoundingClientRect)(tooltip,offsetParent)),opts.targetMiddle=opts.rect.left+opts.rect.width/2,opts.arrowPosition=((opts.targetMiddle-xPos)/opts.tooltip.width*100).toFixed(2),opts.arrowPosition=this.getArrowPosition(opts.arrowPosition)+"%"),standalone&&opts.classes.push("joyride-tooltip--standalone"),opts.positonBaseClass!==opts.positionClass&&opts.classes.push(opts.positonBaseClass),opts.classes.push(opts.positionClass),animate&&opts.classes.push("joyride-tooltip--animate"),opts}},{key:"render",value:function(){var opts=this.props,buttons=opts.buttons,disableOverlay=opts.disableOverlay,onClick=opts.onClick,selector=opts.selector,overlayStyles=opts.showOverlay,step=opts.step,styles=opts.target,type=opts.type;if(styles){var output=this.state,opts=output.opts,styles=output.styles,output={};if(step.title&&(output.header=_react2.default.createElement("div",{className:"joyride-tooltip__header",style:styles.header},step.title)),buttons.skip&&(output.skip=_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--skip",style:styles.buttons.skip,"data-type":"skip",onClick:onClick},buttons.skip)),step.text&&"string"!=typeof step.text?output.main=_react2.default.createElement("div",{className:"joyride-tooltip__main",style:styles.main},step.text):output.main=_react2.default.createElement("div",{className:"joyride-tooltip__main",style:styles.main,dangerouslySetInnerHTML:{__html:step.text||""}}),buttons.secondary&&(output.secondary=_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--secondary",style:styles.buttons.back,"data-type":"back",onClick:onClick},buttons.secondary)),"hover"===step.event&&(styles.buttons.close.opacity=0),output.tooltipComponent=_react2.default.createElement("div",{className:opts.classes.join(" "),style:styles.tooltip,"data-target":selector},_react2.default.createElement("div",{className:"joyride-tooltip__triangle joyride-tooltip__triangle-"+opts.positionClass,style:styles.arrow}),_react2.default.createElement("button",{className:"joyride-tooltip__close"+(output.header?" joyride-tooltip__close--header":""),style:styles.buttons.close,"data-type":"close",onClick:onClick}),output.header,output.main,_react2.default.createElement("div",{className:"joyride-tooltip__footer",style:styles.footer},output.skip,output.secondary,_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--primary",style:styles.buttons.primary,"data-type":["single","casual"].includes(type)?"close":"next",onClick:onClick},buttons.primary))),overlayStyles&&(output.hole=_react2.default.createElement("div",{className:"joyride-hole "+_utils.browser,style:styles.hole,onClick:function(){}})),!overlayStyles)return output.tooltipComponent;overlayStyles={cursor:disableOverlay?"default":"pointer",height:document.body.clientHeight,pointerEvents:this.state.mouseOverHole?"none":"auto"};return _react2.default.createElement("div",{className:"joyride-overlay",style:overlayStyles,"data-type":"close",onClick:disableOverlay?void 0:onClick},output.hole,output.tooltipComponent)}}}]),JoyrideTooltip}();JoyrideTooltip.propTypes={allowClicksThruHole:_propTypes2.default.bool.isRequired,animate:_propTypes2.default.bool.isRequired,buttons:_propTypes2.default.object.isRequired,disableOverlay:_propTypes2.default.bool,holePadding:_propTypes2.default.number,offsetParentSelector:_propTypes2.default.string,onClick:_propTypes2.default.func.isRequired,onRender:_propTypes2.default.func.isRequired,position:_propTypes2.default.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","right","left"]).isRequired,selector:_propTypes2.default.string.isRequired,showOverlay:_propTypes2.default.bool.isRequired,standalone:_propTypes2.default.bool,step:_propTypes2.default.object.isRequired,target:_propTypes2.default.object.isRequired,type:_propTypes2.default.string.isRequired,xPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired,yPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired},JoyrideTooltip.defaultProps={buttons:{primary:"Close"},step:{},xPos:-1e3,yPos:-1e3},exports.default=JoyrideTooltip},{"./utils":65,"prop-types":"prop-types",react:"react"}],64:[function(Joyride,module,exports){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _react2=_interopRequireDefault(Joyride("react")),_propTypes2=_interopRequireDefault(Joyride("prop-types")),_scroll2=_interopRequireDefault(Joyride("scroll")),_nestedProperty2=_interopRequireDefault(Joyride("nested-property")),_utils=Joyride("./utils"),_Beacon2=_interopRequireDefault(Joyride("./Beacon")),_Tooltip2=_interopRequireDefault(Joyride("./Tooltip"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaultState={action:"",index:0,isRunning:!1,isTourSkipped:!1,shouldRedraw:!0,shouldRenderTooltip:!1,shouldRun:!1,standaloneData:!1,xPos:-1e3,yPos:-1e3},callbackTypes={STEP_BEFORE:"step:before",BEACON_BEFORE:"beacon:before",BEACON_TRIGGER:"beacon:trigger",TOOLTIP_BEFORE:"tooltip:before",STEP_AFTER:"step:after",STANDALONE_BEFORE:"standalone:before",STANDALONE_AFTER:"standalone:after",OVERLAY:"overlay:click",HOLE:"hole:click",FINISHED:"finished",TARGET_NOT_FOUND:"error:target_not_found"},DEFAULTS_position="top",DEFAULTS_minWidth=290,hasTouch=!1,Joyride=function(){function Joyride(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Joyride);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Joyride.__proto__||Object.getPrototypeOf(Joyride)).call(this,props));return _this.handleKeyboardNavigation=function(e){var hasSteps=_this.state,index=hasSteps.index,shouldRenderTooltip=hasSteps.shouldRenderTooltip,steps=_this.props.steps,intKey=window.Event?e.which:e.keyCode;shouldRenderTooltip&&([32,38,40].includes(intKey)&&e.preventDefault(),27===intKey?_this.toggleTooltip({show:!1,index:index+1,action:"esc"}):[13,32].includes(intKey)&&(hasSteps=Boolean(steps[index+1]),_this.toggleTooltip({show:hasSteps,index:index+1,action:"next"})))},_this.handleClickStandaloneTrigger=function(e){e.preventDefault();var tooltipData=_this.state,isRunning=tooltipData.isRunning,standaloneData=tooltipData.standaloneData,tooltipData=e.currentTarget.dataset.tooltip;["mouseenter","mouseleave"].includes(e.type)&&hasTouch||tooltipData&&(tooltipData=JSON.parse(tooltipData),standaloneData&&standaloneData.selector===tooltipData.selector?document.querySelector(".joyride-tooltip__close").click():_this.setState({isRunning:!1,shouldRenderTooltip:!1,shouldRun:isRunning,standaloneData:tooltipData,xPos:-1e3,yPos:-1e3}))},_this.handleClickBeacon=function(e){e.preventDefault();var index=_this.state.index,steps=_this.props.steps;_this.triggerCallback({action:e.type,index:index,type:callbackTypes.BEACON_TRIGGER,step:steps[index]}),_this.toggleTooltip({show:!0,index:index,action:"beacon:"+e.type})},_this.handleClickTooltip=function(e){var dataType=_this.state,index=dataType.index,shouldRun=dataType.shouldRun,tooltip=_this.props,steps=tooltip.steps,shouldDisplay=tooltip.type,newIndex=e.currentTarget.className.includes("joyride-")&&["A","BUTTON"].includes(e.currentTarget.tagName)?e.currentTarget:e.target,dataType=newIndex.dataset.type;"string"==typeof newIndex.className&&newIndex.className.startsWith("joyride-")&&(e.preventDefault(),e.stopPropagation(),tooltip=document.querySelector(".joyride-tooltip"),newIndex=index+("back"===dataType?-1:1),"skip"===dataType&&(_this.setState({isTourSkipped:!0}),newIndex=steps.length+1),tooltip.classList.contains("joyride-tooltip--standalone")?_this.setState({isRunning:shouldRun,shouldRedraw:!0,shouldRun:!1,standaloneData:!1}):dataType&&(shouldDisplay=["continuous","guided"].includes(shouldDisplay)&&!["close","skip"].includes(dataType)&&Boolean(steps[newIndex]),_this.toggleTooltip({show:shouldDisplay,index:newIndex,action:dataType})),"joyride-overlay"===e.target.className&&_this.triggerCallback({action:"click",type:callbackTypes.OVERLAY,step:steps[index]}),e.target.classList.contains("joyride-hole")&&_this.triggerCallback({action:"click",type:callbackTypes.HOLE,step:steps[index]}))},_this.handleRenderTooltip=function(){_this.calcPlacement()},_this.state=_extends({},defaultState),_this.listeners={tooltips:{}},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Joyride,_react2.default.Component),_createClass(Joyride,[{key:"componentDidMount",value:function(){var _this2=this,stepsAreValid=this.props,autoStart=stepsAreValid.autoStart,keyboardNavigation=stepsAreValid.keyboardNavigation,resizeDebounce=stepsAreValid.resizeDebounce,resizeDebounceDelay=stepsAreValid.resizeDebounceDelay,run=stepsAreValid.run,steps=stepsAreValid.steps,type=stepsAreValid.type;(0,_utils.logger)({type:"joyride:initialized",msg:[this.props],debug:this.props.debug});var timeoutId,stepsAreValid=this.checkStepsValidity(steps);steps&&stepsAreValid&&run&&this.start(autoStart),resizeDebounce?(timeoutId=void 0,this.listeners.resize=function(){clearTimeout(timeoutId),timeoutId=setTimeout(function(){timeoutId=null,_this2.calcPlacement()},resizeDebounceDelay)}):this.listeners.resize=function(){_this2.calcPlacement()},window.addEventListener("resize",this.listeners.resize),keyboardNavigation&&"continuous"===type&&(this.listeners.keyboard=this.handleKeyboardNavigation,document.body.addEventListener("keydown",this.listeners.keyboard)),window.addEventListener("touchstart",function setHasTouch(){hasTouch=!0,window.removeEventListener("touchstart",setHasTouch)},!1)}},{key:"componentWillReceiveProps",value:function(nextProps){(0,_utils.logger)({type:"joyride:willReceiveProps",msg:[nextProps],debug:nextProps.debug});var runChanged=this.state,isRunning=runChanged.isRunning,shouldRun=runChanged.shouldRun,standaloneData=runChanged.standaloneData,shouldStart=this.props,keyboardNavigation=shouldStart.keyboardNavigation,run=shouldStart.run,steps=shouldStart.steps,didStop=shouldStart.stepIndex,stepsChanged=nextProps.steps!==steps,shouldDisplay=nextProps.stepIndex!==didStop&&nextProps.stepIndex!==this.state.index,runChanged=nextProps.run!==run,shouldStart=!1,didStop=!1;stepsChanged&&this.checkStepsValidity(nextProps.steps)&&(nextProps.steps&&nextProps.steps.length?!steps.length&&nextProps.run&&(shouldStart=!0):this.reset()),runChanged&&(run&&!nextProps.run?(this.stop(),didStop=!0):(!run&&nextProps.run||!isRunning&&shouldRun&&!standaloneData)&&(shouldStart=!0)),shouldDisplay?(shouldDisplay=nextProps.steps[nextProps.stepIndex]&&nextProps.autoStart,runChanged&&shouldStart||nextProps.run&&!isRunning?this.start(nextProps.autoStart,nextProps.steps,nextProps.stepIndex):didStop||this.toggleTooltip({show:shouldDisplay,index:nextProps.stepIndex,steps:nextProps.steps,action:"jump"})):shouldStart&&this.start(nextProps.autoStart,nextProps.steps),!this.listeners.keyboard&&(!keyboardNavigation&&nextProps.keyboardNavigation||keyboardNavigation)&&"continuous"===nextProps.type?(this.listeners.keyboard=this.handleKeyboardNavigation,document.body.addEventListener("keydown",this.listeners.keyboard)):!this.listeners.keyboard||!keyboardNavigation||nextProps.keyboardNavigation&&"continuous"===nextProps.type||(document.body.removeEventListener("keydown",this.listeners.keyboard),delete this.listeners.keyboard)}},{key:"componentWillUpdate",value:function(nextStep,nextState){var step=this.state,index=step.index,isRunning=step.isRunning,shouldRenderTooltip=step.shouldRenderTooltip,standaloneData=step.standaloneData,hasRenderedTarget=this.props.steps,nextSteps=nextStep.steps,step=hasRenderedTarget[index],nextStep=nextSteps[nextState.index],hasRenderedTarget=Boolean(this.getStepTargetElement(nextStep));!standaloneData&&nextState.standaloneData?this.triggerCallback({type:callbackTypes.STANDALONE_BEFORE,step:nextState.standaloneData}):standaloneData&&!nextState.standaloneData&&this.triggerCallback({type:callbackTypes.STANDALONE_AFTER,step:standaloneData}),"start"!==nextState.action||nextState.isRunning||nextStep&&!hasRenderedTarget&&(console.warn("Target not mounted",nextStep,nextState.action),this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.TARGET_NOT_FOUND,step:nextStep})),!isRunning&&nextState.isRunning&&0===nextState.index&&(this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.STEP_BEFORE,step:nextStep}),nextState.shouldRenderTooltip||this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.BEACON_BEFORE,step:nextStep})),isRunning&&nextState.index!==index&&(this.triggerCallback({action:nextState.action,index:index,type:callbackTypes.STEP_AFTER,step:step}),nextStep&&!hasRenderedTarget?(console.warn("Target not mounted",nextStep,nextState.action),this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.TARGET_NOT_FOUND,step:nextStep})):nextStep&&nextState.index&&this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.STEP_BEFORE,step:nextStep})),!nextState.isRunning||shouldRenderTooltip===nextState.shouldRenderTooltip&&nextState.index===index||(nextState.shouldRenderTooltip?this.triggerCallback({action:nextState.action||(0===nextState.index?"autostart":""),index:nextState.index,type:callbackTypes.TOOLTIP_BEFORE,step:nextStep}):this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.BEACON_BEFORE,step:nextStep})),nextState.isRunning||!nextSteps.length||index===nextState.index||nextStep||this.triggerCallback({action:nextState.action,type:callbackTypes.FINISHED,steps:nextSteps,isTourSkipped:nextState.isTourSkipped})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var step=this.state,shouldScroll=step.index,shouldRedraw=step.shouldRedraw,isRunning=step.isRunning,shouldRun=step.shouldRun,standaloneData=step.standaloneData,scrollTop=this.props,scrollToFirstStep=scrollTop.scrollToFirstStep,scrollToSteps=scrollTop.scrollToSteps,steps=scrollTop.steps,step=steps[shouldScroll],scrollTop=this.getScrollTop(),shouldScroll=(scrollToFirstStep||0<shouldScroll||prevState.index>shouldScroll)&&step&&!step.isFixed;shouldRedraw&&step&&this.calcPlacement(),isRunning&&scrollToSteps&&shouldScroll&&0<=scrollTop&&_scroll2.default.top((0,_utils.getRootEl)(),this.getScrollTop()),steps.length&&!isRunning&&shouldRun&&!standaloneData&&this.start()}},{key:"componentWillUnmount",value:function(){var _this3=this;window.removeEventListener("resize",this.listeners.resize),this.listeners.keyboard&&document.body.removeEventListener("keydown",this.listeners.keyboard),Object.keys(this.listeners.tooltips).length&&Object.keys(this.listeners.tooltips).map(function(key){return{el:document.querySelector(key),event:_this3.listeners.tooltips[key].event,cb:_this3.listeners.tooltips[key].cb,key:key}}).filter(function(_ref){return!!_ref.el}).forEach(function(key){var el=key.el,event=key.event,cb=key.cb,key=key.key;el.removeEventListener(event,cb),delete _this3.listeners.tooltips[key]})}},{key:"start",value:function(autorun){var steps=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.props.steps,startIndex=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.state.index,hasMountedTarget=Boolean(this.getStepTargetElement(steps[startIndex])),shouldRenderTooltip=!0===autorun&&hasMountedTarget;(0,_utils.logger)({type:"joyride:start",msg:["autorun:",!0===autorun],debug:this.props.debug}),this.setState({action:"start",index:startIndex,isRunning:Boolean(steps.length)&&hasMountedTarget,shouldRenderTooltip:shouldRenderTooltip,shouldRun:!steps.length})}},{key:"stop",value:function(){(0,_utils.logger)({type:"joyride:stop",debug:this.props.debug}),this.setState({isRunning:!1,shouldRenderTooltip:!1})}},{key:"next",value:function(){var steps=this.state,nextIndex=steps.index,shouldDisplay=steps.shouldRenderTooltip,steps=this.props.steps,nextIndex=nextIndex+1,shouldDisplay=Boolean(steps[nextIndex])&&shouldDisplay;(0,_utils.logger)({type:"joyride:next",msg:["new index:",nextIndex],debug:this.props.debug}),this.toggleTooltip({show:shouldDisplay,index:nextIndex,action:"next"})}},{key:"back",value:function(){var steps=this.state,previousIndex=steps.index,shouldDisplay=steps.shouldRenderTooltip,steps=this.props.steps,previousIndex=previousIndex-1,shouldDisplay=Boolean(steps[previousIndex])&&shouldDisplay;(0,_utils.logger)({type:"joyride:back",msg:["new index:",previousIndex],debug:this.props.debug}),this.toggleTooltip({show:shouldDisplay,index:previousIndex,action:"next"})}},{key:"reset",value:function(newState){var shouldRestart=this.state,index=shouldRestart.index,isRunning=shouldRestart.isRunning,shouldRestart=!0===newState,newState=_extends({},defaultState,{isRunning:shouldRestart,shouldRenderTooltip:this.props.autoStart});(0,_utils.logger)({type:"joyride:reset",msg:["restart:",shouldRestart],debug:this.props.debug}),shouldRestart&&isRunning===shouldRestart&&0===index&&this.forceUpdate(),this.setState(newState)}},{key:"getProgress",value:function(){var index=this.state.index,steps=this.props.steps;return(0,_utils.logger)({type:"joyride:getProgress",msg:["steps:",steps],debug:this.props.debug}),{index:index,percentageComplete:parseFloat((index/steps.length*100).toFixed(2).replace(".00","")),step:steps[index]}}},{key:"addTooltip",value:function(data){var key,el;this.checkStepValidity(data)?((0,_utils.logger)({type:"joyride:addTooltip",msg:["data:",data],debug:this.props.debug}),key=data.trigger||(0,_utils.sanitizeSelector)(data.selector),(el=document.querySelector(key))&&(el.setAttribute("data-tooltip",JSON.stringify(data)),"hover"===(data.event||"click")&&(this.listeners.tooltips[key+"mouseenter"]={event:"mouseenter",cb:this.handleClickStandaloneTrigger},this.listeners.tooltips[key+"mouseleave"]={event:"mouseleave",cb:this.handleClickStandaloneTrigger},el.addEventListener("mouseenter",this.listeners.tooltips[key+"mouseenter"].cb),el.addEventListener("mouseleave",this.listeners.tooltips[key+"mouseleave"].cb)),this.listeners.tooltips[key+"click"]={event:"click",cb:this.handleClickStandaloneTrigger},el.addEventListener("click",this.listeners.tooltips[key+"click"].cb))):(0,_utils.logger)({type:"joyride:addTooltip:FAIL",msg:["data:",data],debug:this.props.debug})}},{key:"parseSteps",value:function(steps){return console.warn("joyride.parseSteps() is deprecated.  It is no longer necessary to parse steps before providing them to Joyride"),steps}},{key:"checkStepValidity",value:function(step){var _this4=this;if(!step||"object"!==(void 0===step?"undefined":_typeof(step))||Array.isArray(step))return(0,_utils.logger)({type:"joyride:checkStepValidity",msg:"Did not provide a step object.",warn:!0,debug:this.props.debug}),!1;return["selector"].every(function(requiredField){var hasField=Boolean(step[requiredField]);return hasField||(0,_utils.logger)({type:"joyride:checkStepValidity",msg:["Provided a step without the required "+requiredField+" property.","Step:",step],warn:!0,debug:_this4.props.debug}),hasField})}},{key:"checkStepsValidity",value:function(steps){return Array.isArray(steps)||"object"!==(void 0===steps?"undefined":_typeof(steps))?0<steps.length&&steps.every(this.checkStepValidity):this.checkStepValidity(steps)}},{key:"getStepTargetElement",value:function(el){if(!this.checkStepValidity(el))return null;el=document.querySelector((0,_utils.sanitizeSelector)(el.selector));return el||((0,_utils.logger)({type:"joyride:getStepTargetElement",msg:"Target not rendered. For best results only add steps after they are mounted.",warn:!0,debug:this.props.debug}),null)}},{key:"getElementDimensions",value:function(){var height=this.state,styles=height.shouldRenderTooltip,width=height.standaloneData,el=document.querySelector(!!width||styles?".joyride-tooltip":".joyride-beacon"),height=0,width=0;return el&&(styles=window.getComputedStyle(el),height=el.clientHeight+parseInt(styles.marginTop||0,10)+parseInt(styles.marginBottom||0,10),width=el.clientWidth+parseInt(styles.marginLeft||0,10)+parseInt(styles.marginRight||0,10)),{height:height,width:width}}},{key:"getScrollTop",value:function(){var scrollOffset=this.state,targetTop=scrollOffset.index,yPos=scrollOffset.yPos,scrollTo=this.props,position=scrollTo.offsetParentSelector,scrollOffset=scrollTo.scrollOffset,scrollTo=scrollTo.steps[targetTop],targetTop=this.getStepTargetElement(scrollTo),position=document.querySelector((0,_utils.sanitizeSelector)(position));if(!targetTop)return 0;targetTop=(0,_utils.getOffsetBoundingClientRect)(targetTop,position).top+(window.pageYOffset||document.documentElement.scrollTop),position=this.calcPosition(scrollTo),scrollTo=0;return/^top/.test(position)?scrollTo=Math.floor(yPos-scrollOffset):/^bottom|^left|^right/.test(position)&&(scrollTo=Math.floor(targetTop-scrollOffset)),scrollTo}},{key:"triggerCallback",value:function(options){var callback=this.props.callback;"function"==typeof callback&&((0,_utils.logger)({type:"joyride:triggerCallback",msg:[options],debug:this.props.debug}),callback(options))}},{key:"toggleTooltip",value:function(nextStep){var show=nextStep.show,hasMountedTarget=nextStep.index,index=void 0===hasMountedTarget?this.state.index:hasMountedTarget,action=nextStep.action,hasMountedTarget=nextStep.steps,nextStep=(void 0===hasMountedTarget?this.props.steps:hasMountedTarget)[index],hasMountedTarget=Boolean(this.getStepTargetElement(nextStep));this.setState({action:action,index:index,isRunning:!(!nextStep||!hasMountedTarget)&&this.state.isRunning,shouldRedraw:!show||!hasMountedTarget,shouldRenderTooltip:show&&hasMountedTarget,xPos:-1e3,yPos:-1e3})}},{key:"calcPlacement",value:function(){var displayTooltip=this.state,component=displayTooltip.index,offsetY=displayTooltip.isRunning,offsetX=displayTooltip.standaloneData,rect=displayTooltip.shouldRenderTooltip,target=this.props,placement=target.offsetParentSelector,position=target.steps,tooltipOffset=target.tooltipOffset,scrollTop=offsetX||position[component]||{},displayTooltip=!!offsetX||rect,target=this.getStepTargetElement(scrollTop),rect=document.querySelector((0,_utils.sanitizeSelector)(placement));(0,_utils.logger)({type:"joyride:calcPlacement"+this.getRenderStage(),msg:["step:",scrollTop],debug:this.props.debug}),target&&(placement={x:-1e3,y:-1e3},scrollTop&&(offsetX||offsetY&&position[component])&&(offsetX=_nestedProperty2.default.get(scrollTop,"style.beacon.offsetX")||0,offsetY=_nestedProperty2.default.get(scrollTop,"style.beacon.offsetY")||0,position=this.calcPosition(scrollTop),component=(0,_utils.getRootEl)().getBoundingClientRect(),scrollTop=!0===scrollTop.isFixed?0:component.top,component=this.getElementDimensions(),rect=(0,_utils.getOffsetBoundingClientRect)(target,rect),/^left/.test(position)?placement.x=rect.left-(displayTooltip?component.width+tooltipOffset:component.width/2+offsetX):/^right/.test(position)?placement.x=rect.left+rect.width-(displayTooltip?-tooltipOffset:component.width/2-offsetX):placement.x=rect.left+(rect.width/2-component.width/2),/^top/.test(position)?placement.y=rect.top-scrollTop-(displayTooltip?component.height+tooltipOffset:component.height/2+offsetY):/^bottom/.test(position)?placement.y=rect.top-scrollTop+(rect.height-(displayTooltip?-tooltipOffset:component.height/2-offsetY)):placement.y=rect.top-scrollTop,/^bottom|^top/.test(position)&&(/left/.test(position)?placement.x=rect.left-(displayTooltip?tooltipOffset:component.width/2):/right/.test(position)&&(placement.x=rect.left+(rect.width-(displayTooltip?component.width-tooltipOffset:component.width/2)))),this.setState({shouldRedraw:!1,xPos:this.preventWindowOverflow(Math.ceil(placement.x),"x",component.width,component.height),yPos:this.preventWindowOverflow(Math.ceil(placement.y),"y",component.width,component.height)})))}},{key:"calcPosition",value:function(step){var rect=this.props,width=rect.offsetParentSelector,tooltipOffset=rect.tooltipOffset,scrollingElement=(0,_utils.getRootEl)(),scrollingElementRect=scrollingElement.getBoundingClientRect(),height=this.getStepTargetElement(step),position=document.querySelector((0,_utils.sanitizeSelector)(width)),rect=(0,_utils.getOffsetBoundingClientRect)(height,position),width=this.getElementDimensions(),height=width.height,position=width.width,width=void 0===position?DEFAULTS_minWidth:position,position=step.position||DEFAULTS_position;return/^left/.test(position)&&rect.left-(width+tooltipOffset)<0?position="top":/^right/.test(position)&&rect.left+rect.width+(width+tooltipOffset)>scrollingElementRect.width&&(position="bottom"),/^top/.test(position)&&(rect.top+scrollingElement.scrollTop-(height+tooltipOffset)<0||step.isFixed&&rect.top-height<0)?position="bottom":/^bottom/.test(position)&&(rect.top+scrollingElement.scrollTop+(height+tooltipOffset)>(0,_utils.getDocHeight)()||step.isFixed&&rect.top+rect.height+height>scrollingElementRect.height)&&(position="top"),position}},{key:"getRenderStage",value:function(){var xPos=this.state,shouldRedraw=xPos.shouldRedraw,xPos=xPos.xPos;return shouldRedraw?":redraw":xPos<0?":pre-render":""}},{key:"preventWindowOverflow",value:function(value,axis,elWidth,elHeight){var winWidth=window.innerWidth,docHeight=(0,_utils.getDocHeight)(),newValue=value;return"x"===axis?winWidth<=value+elWidth?newValue=winWidth-elWidth-15:value<15&&(newValue=15):"y"===axis&&(docHeight<=value+elHeight?newValue=docHeight-elHeight-15:value<15&&(newValue=15)),newValue}},{key:"createComponent",value:function(){var target=this.state,index=target.index,shouldRedraw=target.shouldRedraw,position=target.shouldRenderTooltip,standaloneData=target.standaloneData,xPos=target.xPos,yPos=target.yPos,allowClicksThruHole=this.props,disableOverlay=allowClicksThruHole.disableOverlay,holePadding=allowClicksThruHole.holePadding,locale=allowClicksThruHole.locale,offsetParentSelector=allowClicksThruHole.offsetParentSelector,showBackButton=allowClicksThruHole.showBackButton,buttons=allowClicksThruHole.showOverlay,showSkipButton=allowClicksThruHole.showSkipButton,next=allowClicksThruHole.showStepsProgress,steps=allowClicksThruHole.steps,type=allowClicksThruHole.type,shouldShowOverlay=standaloneData||steps[index],step=_extends({},shouldShowOverlay),target=this.getStepTargetElement(step),allowClicksThruHole=step&&step.allowClicksThruHole||this.props.allowClicksThruHole,shouldShowOverlay=!standaloneData&&buttons,buttons={primary:locale.close};return(0,_utils.logger)({type:"joyride:createComponent"+this.getRenderStage(),msg:["component:",position||standaloneData?"Tooltip":"Beacon","animate:",-1<xPos&&!shouldRedraw,"step:",step],debug:this.props.debug,warn:!target}),!!target&&(position||standaloneData?(position=this.calcPosition(step),standaloneData||(["continuous","guided"].includes(type)&&(buttons.primary=locale.last,steps[index+1]&&(next?(next=locale.next,"string"==typeof locale.next&&(next=_react2.default.createElement("span",null,locale.next)),buttons.primary=_react2.default.createElement("span",null,next," ",_react2.default.createElement("span",null,index+1+"/"+steps.length))):buttons.primary=locale.next),showBackButton&&0<index&&(buttons.secondary=locale.back)),showSkipButton&&(buttons.skip=locale.skip)),_react2.default.createElement(_Tooltip2.default,{allowClicksThruHole:allowClicksThruHole,animate:-1<xPos&&!shouldRedraw,buttons:buttons,disableOverlay:disableOverlay,holePadding:holePadding,offsetParentSelector:offsetParentSelector,position:position,selector:(0,_utils.sanitizeSelector)(step.selector),showOverlay:shouldShowOverlay,step:step,standalone:Boolean(standaloneData),target:target,type:type,xPos:xPos,yPos:yPos,onClick:this.handleClickTooltip,onRender:this.handleRenderTooltip})):_react2.default.createElement(_Beacon2.default,{step:step,xPos:xPos,yPos:yPos,onTrigger:this.handleClickBeacon,eventType:step.type||"click"}))}},{key:"render",value:function(){var standaloneComponent=this.state,index=standaloneComponent.index,isRunning=standaloneComponent.isRunning,standaloneData=standaloneComponent.standaloneData,steps=this.props.steps,hasStep=Boolean(steps[index]),component=void 0,standaloneComponent=void 0;return isRunning&&hasStep?(0,_utils.logger)({type:"joyride:render"+this.getRenderStage(),msg:["step:",steps[index]],debug:this.props.debug}):!isRunning&&standaloneData&&(0,_utils.logger)({type:"joyride:render",msg:["tooltip:",standaloneData],debug:this.props.debug}),standaloneData?standaloneComponent=this.createComponent():isRunning&&hasStep&&(component=this.createComponent()),_react2.default.createElement("div",{className:"joyride"},component,standaloneComponent)}}]),Joyride}();Joyride.propTypes={allowClicksThruHole:_propTypes2.default.bool,autoStart:_propTypes2.default.bool,callback:_propTypes2.default.func,debug:_propTypes2.default.bool,disableOverlay:_propTypes2.default.bool,holePadding:_propTypes2.default.number,keyboardNavigation:_propTypes2.default.bool,locale:_propTypes2.default.object,offsetParentSelector:_propTypes2.default.string,resizeDebounce:_propTypes2.default.bool,resizeDebounceDelay:_propTypes2.default.number,run:_propTypes2.default.bool,scrollOffset:_propTypes2.default.number,scrollToFirstStep:_propTypes2.default.bool,scrollToSteps:_propTypes2.default.bool,showBackButton:_propTypes2.default.bool,showOverlay:_propTypes2.default.bool,showSkipButton:_propTypes2.default.bool,showStepsProgress:_propTypes2.default.bool,stepIndex:_propTypes2.default.number,steps:_propTypes2.default.array,tooltipOffset:_propTypes2.default.number,type:_propTypes2.default.string},Joyride.defaultProps={allowClicksThruHole:!1,autoStart:!1,debug:!1,disableOverlay:!1,holePadding:5,keyboardNavigation:!0,locale:{back:"Back",close:"Close",last:"Last",next:"Next",skip:"Skip"},offsetParentSelector:"body",resizeDebounce:!1,resizeDebounceDelay:200,run:!1,scrollOffset:20,scrollToFirstStep:!1,scrollToSteps:!0,showBackButton:!0,showOverlay:!0,showSkipButton:!1,showStepsProgress:!1,stepIndex:0,steps:[],tooltipOffset:15,type:"single"},exports.default=Joyride},{"./Beacon":62,"./Tooltip":63,"./utils":65,"nested-property":56,"prop-types":"prop-types",react:"react",scroll:78}],65:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.hexToRGB=function(result){result=result.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(m,r,g,b){return r+r+g+g+b+b}),result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(result);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null},exports.getDocHeight=function(){var html=document,body=html.body,html=html.documentElement;return Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight)},exports.getRootEl=function(){var scrollingElement=document.scrollingElement;return scrollingElement||(-1<["ie","firefox"].indexOf(browser)?document.documentElement:document.body)},exports.logger=function(debug){var loggingFunction=debug.type,type=void 0===loggingFunction?"joyride":loggingFunction,msg=debug.msg,loggingFunction=debug.warn,loggingFunction=void 0!==loggingFunction&&loggingFunction,debug=debug.debug,debug=void 0!==debug&&debug,loggingFunction=loggingFunction?console.warn||console.error:console.log;debug&&(console.log("%c"+type,"color: #760bc5; font-weight: bold; font-size: 12px;"),msg&&(Array.isArray(msg)?loggingFunction.apply(console,msg):loggingFunction.apply(console,[msg])))},exports.sanitizeSelector=function(selector){{if(selector.dataset&&selector.dataset.reactid)return console.warn("Deprecation warning: React 15.0 removed reactid. Update your code."),'[data-reactid="'+selector.dataset.reactid+'"]';if(selector.dataset&&(console.error("Unsupported error: React 15.0+ doesn’t write reactid to the DOM anymore, please use a plain class in your step.",selector),selector.className))return"."+selector.className.replace(" ",".")}return selector},exports.getOffsetBoundingClientRect=function(offsetLeft,offsetRight){var elementRect=offsetLeft.getBoundingClientRect();if(!offsetRight)return elementRect;var offsetBottom=offsetRight.getBoundingClientRect(),offsetTop=0<offsetBottom.top?elementRect.top-offsetBottom.top:elementRect.top,offsetLeft=0<offsetBottom.left?elementRect.left-offsetBottom.left:elementRect.left,offsetRight=0<offsetBottom.right?offsetBottom.right-elementRect.right:elementRect.right,offsetBottom=0<offsetBottom.bottom?offsetBottom.bottom-elementRect.bottom:elementRect.bottom;return{top:offsetTop,left:offsetLeft,right:offsetRight,bottom:offsetBottom,x:offsetLeft,y:offsetTop,width:elementRect.width,height:elementRect.height}};var browser=exports.browser=function(){if("undefined"==typeof window)return"node";var isOpera=Boolean(window.opera)||0<=navigator.userAgent.indexOf(" OPR/"),isFirefox="undefined"!=typeof InstallTrigger,isChrome=!!window.chrome&&!!window.chrome.webstore,isSafari=(0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")||!isChrome)&&!isOpera&&void 0!==window.webkitAudioContext,isIE=Boolean(document.documentMode);return isOpera?"opera":isFirefox?"firefox":isChrome?"chrome":isSafari?"safari":isIE?"ie":""}()},{}],66:[function(Motion,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _mapToZero2=_interopRequireDefault(Motion("./mapToZero")),_stripStyle2=_interopRequireDefault(Motion("./stripStyle")),_stepper4=_interopRequireDefault(Motion("./stepper")),_performanceNow2=_interopRequireDefault(Motion("performance-now")),_raf2=_interopRequireDefault(Motion("raf")),_shouldStopAnimation2=_interopRequireDefault(Motion("./shouldStopAnimation")),_react2=_interopRequireDefault(Motion("react")),_propTypes2=_interopRequireDefault(Motion("prop-types")),msPerFrame=1e3/60,Motion=function(_React$Component){function Motion(props){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Motion),_React$Component.call(this,props),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(destStyle){var key,styleValue,dirty=!1,_state=_this.state,currentStyle=_state.currentStyle,currentVelocity=_state.currentVelocity,lastIdealStyle=_state.lastIdealStyle,lastIdealVelocity=_state.lastIdealVelocity;for(key in destStyle)Object.prototype.hasOwnProperty.call(destStyle,key)&&("number"==typeof(styleValue=destStyle[key])&&(dirty||(dirty=!0,currentStyle=_extends({},currentStyle),currentVelocity=_extends({},currentVelocity),lastIdealStyle=_extends({},lastIdealStyle),lastIdealVelocity=_extends({},lastIdealVelocity)),currentStyle[key]=styleValue,currentVelocity[key]=0,lastIdealStyle[key]=styleValue,lastIdealVelocity[key]=0));dirty&&_this.setState({currentStyle:currentStyle,currentVelocity:currentVelocity,lastIdealStyle:lastIdealStyle,lastIdealVelocity:lastIdealVelocity})},this.startAnimationIfNecessary=function(){_this.animationID=_raf2.default(function(timeDelta){var propsStyle=_this.props.style;if(_shouldStopAnimation2.default(_this.state.currentStyle,propsStyle,_this.state.currentVelocity))return _this.wasAnimating&&_this.props.onRest&&_this.props.onRest(),_this.animationID=null,_this.wasAnimating=!1,void(_this.accumulatedTime=0);_this.wasAnimating=!0;var currentTime=timeDelta||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();var key,currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),newLastIdealStyle={},newLastIdealVelocity={},newCurrentStyle={},newCurrentVelocity={};for(key in propsStyle)if(Object.prototype.hasOwnProperty.call(propsStyle,key)){var styleValue=propsStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=_this.state.lastIdealStyle[key],newLastIdealVelocityValue=_this.state.lastIdealVelocity[key],i=0;i<framesToCatchUp;i++)var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1];var nextIdealV=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=nextIdealV[0],nextIdealV=nextIdealV[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyle:newCurrentStyle,currentVelocity:newCurrentVelocity,lastIdealStyle:newLastIdealStyle,lastIdealVelocity:newLastIdealVelocity}),_this.unreadPropStyle=null,_this.startAnimationIfNecessary()})},this.state=this.defaultState()}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Motion,_React$Component),_createClass(Motion,null,[{key:"propTypes",value:{defaultStyle:_propTypes2.default.objectOf(_propTypes2.default.number),style:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.object])).isRequired,children:_propTypes2.default.func.isRequired,onRest:_propTypes2.default.func},enumerable:!0}]),Motion.prototype.defaultState=function(){var currentVelocity=this.props,currentStyle=currentVelocity.defaultStyle,currentVelocity=currentVelocity.style,currentStyle=currentStyle||_stripStyle2.default(currentVelocity),currentVelocity=_mapToZero2.default(currentStyle);return{currentStyle:currentStyle,currentVelocity:currentVelocity,lastIdealStyle:currentStyle,lastIdealVelocity:currentVelocity}},Motion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},Motion.prototype.componentWillReceiveProps=function(props){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=props.style,null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},Motion.prototype.componentWillUnmount=function(){null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},Motion.prototype.render=function(){var renderedChildren=this.props.children(this.state.currentStyle);return renderedChildren&&_react2.default.Children.only(renderedChildren)},Motion}(_react2.default.Component);exports.default=Motion,module.exports=exports.default},{"./mapToZero":69,"./shouldStopAnimation":74,"./stepper":76,"./stripStyle":77,"performance-now":57,"prop-types":"prop-types",raf:60,react:"react"}],67:[function(StaggeredMotion,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _mapToZero2=_interopRequireDefault(StaggeredMotion("./mapToZero")),_stripStyle2=_interopRequireDefault(StaggeredMotion("./stripStyle")),_stepper4=_interopRequireDefault(StaggeredMotion("./stepper")),_performanceNow2=_interopRequireDefault(StaggeredMotion("performance-now")),_raf2=_interopRequireDefault(StaggeredMotion("raf")),_shouldStopAnimation2=_interopRequireDefault(StaggeredMotion("./shouldStopAnimation")),_react2=_interopRequireDefault(StaggeredMotion("react")),_propTypes2=_interopRequireDefault(StaggeredMotion("prop-types")),msPerFrame=1e3/60;StaggeredMotion=function(_React$Component){function StaggeredMotion(props){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StaggeredMotion),_React$Component.call(this,props),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(unreadPropStyles){for(var _state=_this.state,currentStyles=_state.currentStyles,currentVelocities=_state.currentVelocities,lastIdealStyles=_state.lastIdealStyles,lastIdealVelocities=_state.lastIdealVelocities,someDirty=!1,i=0;i<unreadPropStyles.length;i++){var key,styleValue,unreadPropStyle=unreadPropStyles[i],dirty=!1;for(key in unreadPropStyle)Object.prototype.hasOwnProperty.call(unreadPropStyle,key)&&("number"==typeof(styleValue=unreadPropStyle[key])&&(dirty||(someDirty=dirty=!0,currentStyles[i]=_extends({},currentStyles[i]),currentVelocities[i]=_extends({},currentVelocities[i]),lastIdealStyles[i]=_extends({},lastIdealStyles[i]),lastIdealVelocities[i]=_extends({},lastIdealVelocities[i])),currentStyles[i][key]=styleValue,currentVelocities[i][key]=0,lastIdealStyles[i][key]=styleValue,lastIdealVelocities[i][key]=0))}someDirty&&_this.setState({currentStyles:currentStyles,currentVelocities:currentVelocities,lastIdealStyles:lastIdealStyles,lastIdealVelocities:lastIdealVelocities})},this.startAnimationIfNecessary=function(){_this.animationID=_raf2.default(function(timeDelta){var destStyles=_this.props.styles(_this.state.lastIdealStyles);if(function(currentStyles,styles,currentVelocities){for(var i=0;i<currentStyles.length;i++)if(!_shouldStopAnimation2.default(currentStyles[i],styles[i],currentVelocities[i]))return;return 1}(_this.state.currentStyles,destStyles,_this.state.currentVelocities))return _this.animationID=null,void(_this.accumulatedTime=0);var currentTime=timeDelta||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();for(var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),newLastIdealStyles=[],newLastIdealVelocities=[],newCurrentStyles=[],newCurrentVelocities=[],i=0;i<destStyles.length;i++){var key,destStyle=destStyles[i],newCurrentStyle={},newCurrentVelocity={},newLastIdealStyle={},newLastIdealVelocity={};for(key in destStyle)if(Object.prototype.hasOwnProperty.call(destStyle,key)){var styleValue=destStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=_this.state.lastIdealStyles[i][key],newLastIdealVelocityValue=_this.state.lastIdealVelocities[i][key],j=0;j<framesToCatchUp;j++)var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1];var nextIdealV=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=nextIdealV[0],nextIdealV=nextIdealV[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}newCurrentStyles[i]=newCurrentStyle,newCurrentVelocities[i]=newCurrentVelocity,newLastIdealStyles[i]=newLastIdealStyle,newLastIdealVelocities[i]=newLastIdealVelocity}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyles:newCurrentStyles,currentVelocities:newCurrentVelocities,lastIdealStyles:newLastIdealStyles,lastIdealVelocities:newLastIdealVelocities}),_this.unreadPropStyles=null,_this.startAnimationIfNecessary()})},this.state=this.defaultState()}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(StaggeredMotion,_React$Component),_createClass(StaggeredMotion,null,[{key:"propTypes",value:{defaultStyles:_propTypes2.default.arrayOf(_propTypes2.default.objectOf(_propTypes2.default.number)),styles:_propTypes2.default.func.isRequired,children:_propTypes2.default.func.isRequired},enumerable:!0}]),StaggeredMotion.prototype.defaultState=function(){var currentVelocities=this.props,currentStyles=currentVelocities.defaultStyles,currentVelocities=currentVelocities.styles,currentStyles=currentStyles||currentVelocities().map(_stripStyle2.default),currentVelocities=currentStyles.map(function(currentStyle){return _mapToZero2.default(currentStyle)});return{currentStyles:currentStyles,currentVelocities:currentVelocities,lastIdealStyles:currentStyles,lastIdealVelocities:currentVelocities}},StaggeredMotion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},StaggeredMotion.prototype.componentWillReceiveProps=function(props){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=props.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},StaggeredMotion.prototype.componentWillUnmount=function(){null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},StaggeredMotion.prototype.render=function(){var renderedChildren=this.props.children(this.state.currentStyles);return renderedChildren&&_react2.default.Children.only(renderedChildren)},StaggeredMotion}(_react2.default.Component);exports.default=StaggeredMotion,module.exports=exports.default},{"./mapToZero":69,"./shouldStopAnimation":74,"./stepper":76,"./stripStyle":77,"performance-now":57,"prop-types":"prop-types",raf:60,react:"react"}],68:[function(TransitionMotion,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _mapToZero2=_interopRequireDefault(TransitionMotion("./mapToZero")),_stripStyle2=_interopRequireDefault(TransitionMotion("./stripStyle")),_stepper4=_interopRequireDefault(TransitionMotion("./stepper")),_mergeDiff2=_interopRequireDefault(TransitionMotion("./mergeDiff")),_performanceNow2=_interopRequireDefault(TransitionMotion("performance-now")),_raf2=_interopRequireDefault(TransitionMotion("raf")),_shouldStopAnimation2=_interopRequireDefault(TransitionMotion("./shouldStopAnimation")),_react2=_interopRequireDefault(TransitionMotion("react")),_propTypes2=_interopRequireDefault(TransitionMotion("prop-types")),msPerFrame=1e3/60;function rehydrateStyles(mergedPropsStyles,unreadPropStyles,plainStyles){var cUnreadPropStyles=unreadPropStyles;return null==cUnreadPropStyles?mergedPropsStyles.map(function(mergedPropsStyle,i){return{key:mergedPropsStyle.key,data:mergedPropsStyle.data,style:plainStyles[i]}}):mergedPropsStyles.map(function(mergedPropsStyle,i){for(var j=0;j<cUnreadPropStyles.length;j++)if(cUnreadPropStyles[j].key===mergedPropsStyle.key)return{key:cUnreadPropStyles[j].key,data:cUnreadPropStyles[j].data,style:plainStyles[i]};return{key:mergedPropsStyle.key,data:mergedPropsStyle.data,style:plainStyles[i]}})}function mergeAndSync(willEnter,willLeave,didLeave,oldMergedPropsStyles,destStyles,oldCurrentStyles,oldCurrentVelocities,oldLastIdealStyles,oldLastIdealVelocities){for(var newMergedPropsStyles=_mergeDiff2.default(oldMergedPropsStyles,destStyles,function(oldIndex,oldMergedPropsStyle){var leavingStyle=willLeave(oldMergedPropsStyle);return null==leavingStyle||_shouldStopAnimation2.default(oldCurrentStyles[oldIndex],leavingStyle,oldCurrentVelocities[oldIndex])?(didLeave({key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data}),null):{key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data,style:leavingStyle}}),newCurrentStyles=[],newCurrentVelocities=[],newLastIdealStyles=[],newLastIdealVelocities=[],i=0;i<newMergedPropsStyles.length;i++){for(var velocity,newMergedPropsStyleCell=newMergedPropsStyles[i],foundOldIndex=null,j=0;j<oldMergedPropsStyles.length;j++)if(oldMergedPropsStyles[j].key===newMergedPropsStyleCell.key){foundOldIndex=j;break}null==foundOldIndex?(velocity=willEnter(newMergedPropsStyleCell),newCurrentStyles[i]=velocity,newLastIdealStyles[i]=velocity,velocity=_mapToZero2.default(newMergedPropsStyleCell.style),newCurrentVelocities[i]=velocity,newLastIdealVelocities[i]=velocity):(newCurrentStyles[i]=oldCurrentStyles[foundOldIndex],newLastIdealStyles[i]=oldLastIdealStyles[foundOldIndex],newCurrentVelocities[i]=oldCurrentVelocities[foundOldIndex],newLastIdealVelocities[i]=oldLastIdealVelocities[foundOldIndex])}return[newMergedPropsStyles,newCurrentStyles,newCurrentVelocities,newLastIdealStyles,newLastIdealVelocities]}TransitionMotion=function(_React$Component){function TransitionMotion(props){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TransitionMotion),_React$Component.call(this,props),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(unreadPropStyles){for(var _mergeAndSync=mergeAndSync(_this.props.willEnter,_this.props.willLeave,_this.props.didLeave,_this.state.mergedPropsStyles,unreadPropStyles,_this.state.currentStyles,_this.state.currentVelocities,_this.state.lastIdealStyles,_this.state.lastIdealVelocities),mergedPropsStyles=_mergeAndSync[0],currentStyles=_mergeAndSync[1],currentVelocities=_mergeAndSync[2],lastIdealStyles=_mergeAndSync[3],lastIdealVelocities=_mergeAndSync[4],i=0;i<unreadPropStyles.length;i++){var key,styleValue,unreadPropStyle=unreadPropStyles[i].style,dirty=!1;for(key in unreadPropStyle)Object.prototype.hasOwnProperty.call(unreadPropStyle,key)&&("number"==typeof(styleValue=unreadPropStyle[key])&&(dirty||(dirty=!0,currentStyles[i]=_extends({},currentStyles[i]),currentVelocities[i]=_extends({},currentVelocities[i]),lastIdealStyles[i]=_extends({},lastIdealStyles[i]),lastIdealVelocities[i]=_extends({},lastIdealVelocities[i]),mergedPropsStyles[i]={key:mergedPropsStyles[i].key,data:mergedPropsStyles[i].data,style:_extends({},mergedPropsStyles[i].style)}),currentStyles[i][key]=styleValue,currentVelocities[i][key]=0,lastIdealStyles[i][key]=styleValue,lastIdealVelocities[i][key]=0,mergedPropsStyles[i].style[key]=styleValue))}_this.setState({currentStyles:currentStyles,currentVelocities:currentVelocities,mergedPropsStyles:mergedPropsStyles,lastIdealStyles:lastIdealStyles,lastIdealVelocities:lastIdealVelocities})},this.startAnimationIfNecessary=function(){_this.unmounting||(_this.animationID=_raf2.default(function(timeDelta){if(!_this.unmounting){var currentTime=_this.props.styles,_mergeAndSync2="function"==typeof currentTime?currentTime(rehydrateStyles(_this.state.mergedPropsStyles,_this.unreadPropStyles,_this.state.lastIdealStyles)):currentTime;if(function(currentStyles,destStyles,currentVelocities,mergedPropsStyles){if(mergedPropsStyles.length===destStyles.length){for(var i=0;i<mergedPropsStyles.length;i++)if(mergedPropsStyles[i].key!==destStyles[i].key)return;for(i=0;i<mergedPropsStyles.length;i++)if(!_shouldStopAnimation2.default(currentStyles[i],destStyles[i].style,currentVelocities[i]))return;return 1}}(_this.state.currentStyles,_mergeAndSync2,_this.state.currentVelocities,_this.state.mergedPropsStyles))return _this.animationID=null,void(_this.accumulatedTime=0);currentTime=timeDelta||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();for(var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),_mergeAndSync2=mergeAndSync(_this.props.willEnter,_this.props.willLeave,_this.props.didLeave,_this.state.mergedPropsStyles,_mergeAndSync2,_this.state.currentStyles,_this.state.currentVelocities,_this.state.lastIdealStyles,_this.state.lastIdealVelocities),newMergedPropsStyles=_mergeAndSync2[0],newCurrentStyles=_mergeAndSync2[1],newCurrentVelocities=_mergeAndSync2[2],newLastIdealStyles=_mergeAndSync2[3],newLastIdealVelocities=_mergeAndSync2[4],i=0;i<newMergedPropsStyles.length;i++){var key,newMergedPropsStyle=newMergedPropsStyles[i].style,newCurrentStyle={},newCurrentVelocity={},newLastIdealStyle={},newLastIdealVelocity={};for(key in newMergedPropsStyle)if(Object.prototype.hasOwnProperty.call(newMergedPropsStyle,key)){var styleValue=newMergedPropsStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=newLastIdealStyles[i][key],newLastIdealVelocityValue=newLastIdealVelocities[i][key],j=0;j<framesToCatchUp;j++)var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1];var nextIdealV=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=nextIdealV[0],nextIdealV=nextIdealV[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}newLastIdealStyles[i]=newLastIdealStyle,newLastIdealVelocities[i]=newLastIdealVelocity,newCurrentStyles[i]=newCurrentStyle,newCurrentVelocities[i]=newCurrentVelocity}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyles:newCurrentStyles,currentVelocities:newCurrentVelocities,lastIdealStyles:newLastIdealStyles,lastIdealVelocities:newLastIdealVelocities,mergedPropsStyles:newMergedPropsStyles}),_this.unreadPropStyles=null,_this.startAnimationIfNecessary()}}))},this.state=this.defaultState()}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(TransitionMotion,_React$Component),_createClass(TransitionMotion,null,[{key:"propTypes",value:{defaultStyles:_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,data:_propTypes2.default.any,style:_propTypes2.default.objectOf(_propTypes2.default.number).isRequired})),styles:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,data:_propTypes2.default.any,style:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.object])).isRequired}))]).isRequired,children:_propTypes2.default.func.isRequired,willEnter:_propTypes2.default.func,willLeave:_propTypes2.default.func,didLeave:_propTypes2.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(styleThatEntered){return _stripStyle2.default(styleThatEntered.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),TransitionMotion.prototype.defaultState=function(){var oldMergedPropsStyles=this.props,mergedPropsStyles=oldMergedPropsStyles.defaultStyles,_mergeAndSync3=oldMergedPropsStyles.styles,willEnter=oldMergedPropsStyles.willEnter,willLeave=oldMergedPropsStyles.willLeave,didLeave=oldMergedPropsStyles.didLeave,destStyles="function"==typeof _mergeAndSync3?_mergeAndSync3(mergedPropsStyles):_mergeAndSync3,oldMergedPropsStyles=void 0,oldMergedPropsStyles=null==mergedPropsStyles?destStyles:mergedPropsStyles.map(function(defaultStyleCell){for(var i=0;i<destStyles.length;i++)if(destStyles[i].key===defaultStyleCell.key)return destStyles[i];return defaultStyleCell}),_mergeAndSync3=(null==mergedPropsStyles?destStyles:mergedPropsStyles).map(function(s){return _stripStyle2.default(s.style)}),mergedPropsStyles=(null==mergedPropsStyles?destStyles:mergedPropsStyles).map(function(s){return _mapToZero2.default(s.style)}),_mergeAndSync3=mergeAndSync(willEnter,willLeave,didLeave,oldMergedPropsStyles,destStyles,_mergeAndSync3,mergedPropsStyles,_mergeAndSync3,mergedPropsStyles),mergedPropsStyles=_mergeAndSync3[0];return{currentStyles:_mergeAndSync3[1],currentVelocities:_mergeAndSync3[2],lastIdealStyles:_mergeAndSync3[3],lastIdealVelocities:_mergeAndSync3[4],mergedPropsStyles:mergedPropsStyles}},TransitionMotion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},TransitionMotion.prototype.componentWillReceiveProps=function(styles){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);styles=styles.styles;this.unreadPropStyles="function"==typeof styles?styles(rehydrateStyles(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):styles,null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},TransitionMotion.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},TransitionMotion.prototype.render=function(){var renderedChildren=rehydrateStyles(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),renderedChildren=this.props.children(renderedChildren);return renderedChildren&&_react2.default.Children.only(renderedChildren)},TransitionMotion}(_react2.default.Component);exports.default=TransitionMotion,module.exports=exports.default},{"./mapToZero":69,"./mergeDiff":70,"./shouldStopAnimation":74,"./stepper":76,"./stripStyle":77,"performance-now":57,"prop-types":"prop-types",raf:60,react:"react"}],69:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(obj){var key,ret={};for(key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(ret[key]=0);return ret},module.exports=exports.default},{}],70:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(prev,next,onRemove){for(var prevKeyIndex={},i=0;i<prev.length;i++)prevKeyIndex[prev[i].key]=i;for(var nextKeyIndex={},i=0;i<next.length;i++)nextKeyIndex[next[i].key]=i;for(var ret=[],i=0;i<next.length;i++)ret[i]=next[i];for(i=0;i<prev.length;i++){var fill;Object.prototype.hasOwnProperty.call(nextKeyIndex,prev[i].key)||null!=(fill=onRemove(i,prev[i]))&&ret.push(fill)}return ret.sort(function(a,b){var nextOrderA=nextKeyIndex[a.key],nextOrderB=nextKeyIndex[b.key],prevOrderA=prevKeyIndex[a.key],prevOrderB=prevKeyIndex[b.key];if(null!=nextOrderA&&null!=nextOrderB)return nextKeyIndex[a.key]-nextKeyIndex[b.key];if(null!=prevOrderA&&null!=prevOrderB)return prevKeyIndex[a.key]-prevKeyIndex[b.key];if(null!=nextOrderA){for(var i=0;i<next.length;i++){var pivot=next[i].key;if(Object.prototype.hasOwnProperty.call(prevKeyIndex,pivot)){if(nextOrderA<nextKeyIndex[pivot]&&prevOrderB>prevKeyIndex[pivot])return-1;if(nextOrderA>nextKeyIndex[pivot]&&prevOrderB<prevKeyIndex[pivot])return 1}}return 1}for(i=0;i<next.length;i++){pivot=next[i].key;if(Object.prototype.hasOwnProperty.call(prevKeyIndex,pivot)){if(nextOrderB<nextKeyIndex[pivot]&&prevOrderA>prevKeyIndex[pivot])return 1;if(nextOrderB>nextKeyIndex[pivot]&&prevOrderA<prevKeyIndex[pivot])return-1}}return-1})},module.exports=exports.default},{}],71:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},module.exports=exports.default},{}],72:[function(_reorderKeys,module,exports){"use strict";function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}exports.__esModule=!0;var _stripStyle=_reorderKeys("./Motion");exports.Motion=_interopRequire(_stripStyle);_stripStyle=_reorderKeys("./StaggeredMotion");exports.StaggeredMotion=_interopRequire(_stripStyle);_stripStyle=_reorderKeys("./TransitionMotion");exports.TransitionMotion=_interopRequire(_stripStyle);_stripStyle=_reorderKeys("./spring");exports.spring=_interopRequire(_stripStyle);_stripStyle=_reorderKeys("./presets");exports.presets=_interopRequire(_stripStyle);_stripStyle=_reorderKeys("./stripStyle");exports.stripStyle=_interopRequire(_stripStyle);_reorderKeys=_reorderKeys("./reorderKeys");exports.reorderKeys=_interopRequire(_reorderKeys)},{"./Motion":66,"./StaggeredMotion":67,"./TransitionMotion":68,"./presets":71,"./reorderKeys":73,"./spring":75,"./stripStyle":77}],73:[function(require,module,exports){!function(process){!function(){"use strict";exports.__esModule=!0;var hasWarned=!(exports.default=function(){"development"===process.env.NODE_ENV&&(hasWarned||(hasWarned=!0,console.error("`reorderKeys` has been removed, since it is no longer needed for TransitionMotion's new styles array API.")))});module.exports=exports.default}.call(this)}.call(this,require("_process"))},{_process:59}],74:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(currentStyle,style,currentVelocity){for(var key in style)if(Object.prototype.hasOwnProperty.call(style,key)){if(0!==currentVelocity[key])return!1;var styleValue="number"==typeof style[key]?style[key]:style[key].val;if(currentStyle[key]!==styleValue)return!1}return!0},module.exports=exports.default},{}],75:[function(_presets2,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(val,config){return _extends({},defaultConfig,config,{val:val})};var obj,_presets=_presets2("./presets"),_presets2=(obj=_presets)&&obj.__esModule?obj:{default:obj},defaultConfig=_extends({},_presets2.default.noWobble,{precision:.01});module.exports=exports.default},{"./presets":71}],76:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(newX,x,newV,destX,k,b,precision){newV+=(-k*(x-destX)+-b*newV)*newX,newX=x+newV*newX;if(Math.abs(newV)<precision&&Math.abs(newX-destX)<precision)return reusedTuple[0]=destX,reusedTuple[1]=0,reusedTuple;return reusedTuple[0]=newX,reusedTuple[1]=newV,reusedTuple};var reusedTuple=[0,0];module.exports=exports.default},{}],77:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(style){var key,ret={};for(key in style)Object.prototype.hasOwnProperty.call(style,key)&&(ret[key]="number"==typeof style[key]?style[key]:style[key].val);return ret},module.exports=exports.default},{}],78:[function(require,module,exports){var raf=require("rafl"),E_NOSCROLL=new Error("Element already at target scroll position"),E_CANCELLED=new Error("Scroll cancelled"),min=Math.min;function make(prop){return function(el,to,opts,cb){"function"==typeof(opts=opts||{})&&(cb=opts,opts={}),"function"!=typeof cb&&(cb=noop);var start=+new Date,from=el[prop],ease=opts.ease||inOutSine,duration=isNaN(opts.duration)?350:+opts.duration,cancelled=!1;return from===to?cb(E_NOSCROLL,el[prop]):raf(function animate(timestamp){if(cancelled)return cb(E_CANCELLED,el[prop]);var eased=+new Date;var time=min(1,(eased-start)/duration);eased=ease(time);el[prop]=eased*(to-from)+from;raf(time<1?animate:function(){cb(null,el[prop])})}),function(){cancelled=!0}}}function inOutSine(n){return.5*(1-Math.cos(Math.PI*n))}function noop(){}module.exports={left:make("scrollLeft"),top:make("scrollTop")}},{rafl:61}]},{},[23])(23)});