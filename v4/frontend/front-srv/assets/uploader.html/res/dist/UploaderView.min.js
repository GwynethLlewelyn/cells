!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).UploaderView=e()}(function(){return function o(r,i,a){function l(t,e){if(!i[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},r[t][0].call(n.exports,function(e){return l(r[t][1][e]||e)},n,n.exports,o,r,i,a)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("pydio/lang/observable")),a=i(e("pydio"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return e=o?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?d(t):e}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,o["default"]);var e,t,n,i=f(l);function l(e,t){var n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=i.call(this))._status=l.StatusNew,n._type=e,n._id=Math.random(),n._errorMessage=null;var r=a.default.getInstance();return n._repositoryId=o?o.getRepositoryId():r.user.activeRepository,n._exists=!1,n._progress=0,n.children={folders:[],files:[],pg:{}},n._targetNode=t,o&&(n._parent=o,(e===l.TypeFolder?o.children.folders:o.children.files).push(d(n))),n}return e=l,(t=[{key:"getId",value:function(){return this._id}},{key:"getParent",value:function(){return this._parent}},{key:"getLabel",value:function(){return this._label.normalize?this._label.normalize("NFC"):this._label}},{key:"updateLabel",value:function(e){this._label=e}},{key:"getFullPath",value:function(){return this._parent.getFullPath()+"/"+this.getLabel()}},{key:"getProgress",value:function(){return this._progress}},{key:"setExists",value:function(){this._exists=!0}},{key:"getExists",value:function(){return this._exists}},{key:"getType",value:function(){return this._type}},{key:"getStatus",value:function(){return this._status}},{key:"setStatus",value:function(e){this._status=e,this.notify("status",e)}},{key:"updateRepositoryId",value:function(e){this._repositoryId=e}},{key:"getRepositoryId",value:function(){return this._repositoryId}},{key:"getErrorMessage",value:function(){return this._errorMessage||""}},{key:"onError",value:function(e){this._errorMessage=e,this.setStatus(l.StatusError)}},{key:"process",value:function(e){this._doProcess(e)}},{key:"abort",value:function(e){this._doAbort&&this._doAbort(e)}},{key:"pause",value:function(){var e;this._doPause&&(e=this._doPause(),this.setStatus(e))}},{key:"resume",value:function(){this._doResume&&(this._doResume(),this.setStatus(l.StatusLoading))}},{key:"addChild",value:function(t){var n=this;this.children.pg[t.getId()]=0,t.observe("progress",function(e){n.children.pg[t.getId()]=e,n.recomputeProgress()})}},{key:"recomputeProgress",value:function(){var e,t=this,n=Object.keys(this.children.pg).map(function(e){return t.children.pg[e]});n.length&&(e=n.reduce(function(e,t){return e+t}),this._progress=e/n.length,this.notify("progress",this._progress))}},{key:"removeChild",value:function(e){e.abort(),e.walk(function(e){e.abort()},function(){return!0},l.TypeFile);var t=e.getId(),n=this.children.folders.indexOf(e),o=this.children.files.indexOf(e),r=!1;-1<n?(this.children.folders=LangUtils.arrayWithout(this.children.folders,n),r=!0):-1<o&&(this.children.files=LangUtils.arrayWithout(this.children.files,o),r=!0),r&&(e.stopObserving("progress"),delete this.children.pg[t],this.recomputeProgress(),this.notify("children"))}},{key:"getChildren",value:function(){return[].concat(u(this.children.folders),u(this.children.files))}},{key:"walk",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:l.TypeBoth,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e){return!1},e=!1;if(o===l.TypeBoth||o===l.TypeFile)for(var i=this.children.files,a=0;a<i.length;a++){if(r(i[a])){e=!0;break}n(i[a])&&t(i[a])}e||this.children.folders.forEach(function(e){o!==l.TypeFolder&&o!==l.TypeBoth||!n(e)||t(e),r(e)||e.walk(t,n,o,r)})}},{key:"collectWithLimit",value:function(t){var n=[];return this.walk(function(e){n.push(e)},1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},2<arguments.length&&void 0!==arguments[2]?arguments[2]:"both",function(e){return n.length>=t}),n}}])&&s(e.prototype,t),n&&s(e,n),l}();(n.default=e).StatusNew="new",e.StatusAnalyze="analyse",e.StatusFolders="folders",e.StatusLoading="loading",e.StatusLoaded="loaded",e.StatusError="error",e.StatusPause="pause",e.StatusCannotPause="cannot-pause",e.StatusMultiPause="multi-pause",e.TypeFolder="folder",e.TypeFile="file",e.TypeBoth="both",t.exports=n.default},{pydio:"pydio","pydio/lang/observable":"pydio/lang/observable"}],2:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("react")),a=o(e("pydio")),l=e("material-ui");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return e=o?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,i["default"].Component);var e,t,n,o=c(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return e=r,(t=[{key:"clear",value:function(e){var t=UploaderModel.Store.getInstance();switch(e){case"all":t.clearAll();break;case"loaded":t.clearStatus("loaded");break;case"error":t.clearStatus("error")}this.props.onDismiss()}},{key:"render",value:function(){var t=this,e=a.default.getMessages();return i.default.createElement(l.Popover,{open:this.props.open,anchorEl:this.props.anchorEl,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:function(e){t.props.onDismiss(e)}},i.default.createElement(l.Menu,{style:{width:146},desktop:!0},i.default.createElement(l.Subheader,{style:{lineHeight:"26px"}},e["html_uploader.clear-header"]),i.default.createElement(l.MenuItem,{primaryText:e["html_uploader.clear-finished"],onClick:function(){t.clear("loaded")}}),i.default.createElement(l.MenuItem,{primaryText:e["html_uploader.clear-failed"],onClick:function(){t.clear("error")}}),i.default.createElement(l.MenuItem,{primaryText:e["html_uploader.clear-all"],onClick:function(){t.clear("all")}})))}}])&&u(e.prototype,t),n&&u(e,n),r}();n.default=e,t.exports=n.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],3:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("react")),a=o(e("pydio")),l=e("material-ui");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return e=o?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,i["default"].Component);var e,t,n,o=c(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o.call(this,e)).state={value:"rename-folders",saveValue:!1},e}return e=r,(t=[{key:"cancel",value:function(){this.props.onCancel()}},{key:"submit",value:function(){var e=this.state,t=e.value,e=e.saveValue;this.props.onConfirm(t,e)}},{key:"checkChange",value:function(e,t){this.setState({saveValue:t})}},{key:"radioChange",value:function(e,t){this.setState({value:t})}},{key:"render",value:function(){var e=a.default.getInstance(),t=this.state,n=t.value,t=t.saveValue;return i.default.createElement("div",{style:{position:"absolute",padding:16,fontSize:14,top:49,left:0,right:0,bottom:0,display:"flex",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)"}},i.default.createElement(l.Paper,{style:{width:500,padding:16,fontSize:14,margin:"0 auto"},zDepth:2},i.default.createElement("div",null,i.default.createElement("h5",null,e.MessageHash[124]),i.default.createElement(l.RadioButtonGroup,{ref:"group",name:"shipSpeed",defaultSelected:n,onChange:this.radioChange.bind(this)},i.default.createElement(l.RadioButton,{value:"rename-folders",label:e.MessageHash["html_uploader.confirm.rename.all"],style:{paddingBottom:8}}),i.default.createElement(l.RadioButton,{value:"rename",label:e.MessageHash["html_uploader.confirm.rename.merge"],style:{paddingBottom:8}}),i.default.createElement(l.RadioButton,{value:"overwrite",label:e.MessageHash["html_uploader.confirm.overwrite"]}))),i.default.createElement("div",{style:{display:"flex",marginTop:30,alignItems:"center"}},i.default.createElement(l.Checkbox,{label:e.MessageHash["html_uploader.confirm.save.choice"],checked:t,onCheck:this.checkChange.bind(this)}),i.default.createElement("span",{style:{flex:1}}),i.default.createElement(l.FlatButton,{label:e.MessageHash[54],onClick:this.cancel.bind(this)}),i.default.createElement(l.RaisedButton,{primary:!0,label:e.MessageHash[48],onClick:this.submit.bind(this)}))))}}])&&u(e.prototype,t),n&&u(e,n),r}();n.default=e,t.exports=n.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],4:[function(o,c,f){!function(s){!function(){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var h=e(o("react")),y=e(o("pydio")),m=e(o("./UploadOptionsPane")),g=e(o("./ClearOptionsPane")),b=e(o("./TransfersList")),v=e(o("./ConfirmExists")),_=o("material-ui");function e(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=u(n);return e=o?(e=u(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var t=y.default.requireLib("hoc").dropProvider,O=y.default.requireLib("form").FileDropZone,n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,h["default"].Component);var e,t,n,o=l(r);function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=o.call(this,e),n=UploaderModel.Store.getInstance();return t._storeObserver=function(){t.setState({sessions:n.getSessions(),storeRunning:n.isRunning()})},n.observe("update",t._storeObserver),n.observe("auto_close",function(){t.props.onDismiss&&t.props.onDismiss()}),t.state={showOptions:!1,configs:UploaderModel.Configs.getInstance(),sessions:n.getSessions(),storeRunning:n.isRunning(),confirmDialog:e.confirmDialog},t}return e=r,(t=[{key:"componentWillReceiveProps",value:function(e){e.confirmDialog!==this.state.confirmDialog&&this.setState({confirmDialog:e.confirmDialog})}},{key:"componentWillUnmount",value:function(){this._storeObserver&&(UploaderModel.Store.getInstance().stopObserving("update",this._storeObserver),UploaderModel.Store.getInstance().stopObserving("auto_close"))}},{key:"onDrop",value:function(e){var t=y.default.getInstance().getContextHolder().getContextNode();UploaderModel.Store.getInstance().handleDropEventResults(null,e,t)}},{key:"onFolderPicked",value:function(e){var t=y.default.getInstance().getContextHolder().getContextNode();UploaderModel.Store.getInstance().handleFolderPickerResult(e,t)}},{key:"start",value:function(e){e.preventDefault(),UploaderModel.Store.getInstance().resume()}},{key:"pause",value:function(e){UploaderModel.Store.getInstance().pause()}},{key:"openClear",value:function(e){e.preventDefault(),this.setState({showClear:!0,clearAnchorEl:e.currentTarget})}},{key:"toggleOptions",value:function(e){e.preventDefault&&e.preventDefault();var t=this.state,n=t.showOptions;t.currentTarget;this.setState({showOptions:!(void 0!==n&&n),optionsAnchorEl:e.currentTarget})}},{key:"openFilePicker",value:function(e){e.preventDefault(),this.refs.dropzone.open()}},{key:"openFolderPicker",value:function(e){e.preventDefault(),this.refs.dropzone.openFolderPicker()}},{key:"dialogSubmit",value:function(t,e){var n=this.state.configs;UploaderModel.Store.getInstance().getSessions().forEach(function(e){"confirm"===e.getStatus()&&e.prepare(t)}),e&&n.updateOption("upload_existing",t),this.setState({confirmDialog:!1}),y.default.getInstance().getController().fireAction("upload")}},{key:"dialogCancel",value:function(){var t=UploaderModel.Store.getInstance();t.getSessions().forEach(function(e){"confirm"===e.getStatus()&&t.removeSession(e)}),this.setState({confirmDialog:!1}),y.default.getInstance().getController().fireAction("upload")}},{key:"supportsFolder",value:function(){var e=!1,t=s.document.createElement("input");return t.setAttribute("type","file"),"webkitdirectory"in t&&(e=!0),t=null,e}},{key:"render",value:function(){var t=this,e=y.default.getInstance().MessageHash,n=this.props,o=n.showDismiss,r=n.onDismiss,i=this.props.connectDropTarget||function(e){return e},a=this.state,l=a.configs,u=a.showOptions,s=a.optionsAnchorEl,c=a.showClear,f=a.clearAnchorEl,d=a.sessions,n=(a.storeRunning,a.confirmDialog),a=UploaderModel.Store.getInstance(),p=!0;return d.forEach(function(e){e.getChildren().length&&(p=!1)}),i(h.default.createElement("div",{style:{position:"relative",backgroundColor:"#FAFAFA"}},h.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",paddingLeft:16,paddingRight:16,width:"100%"}},h.default.createElement("h3",{style:{marginBottom:16}},e["html_uploader.dialog.title"]),h.default.createElement(_.IconButton,{iconClassName:"mdi mdi-dots-vertical",primary:!0,iconStyle:{fontSize:18},style:{padding:14},tooltip:e["html_uploader.options"],onClick:this.toggleOptions.bind(this)}),h.default.createElement("span",{style:{flex:1}}),h.default.createElement(_.FlatButton,{icon:h.default.createElement(_.FontIcon,{style:{fontSize:16},className:"mdi mdi-play"}),label:e["html_uploader.start"],onClick:this.start.bind(this),primary:!0,disabled:a.isRunning()||!a.hasQueue()}),h.default.createElement(_.FlatButton,{icon:h.default.createElement(_.FontIcon,{style:{fontSize:16},className:"mdi mdi-pause"}),label:e["html_uploader.pause"],onClick:this.pause.bind(this),primary:!0,disabled:!a.isRunning()}),h.default.createElement(_.FlatButton,{icon:h.default.createElement(_.FontIcon,{style:{fontSize:16},className:"mdi mdi-delete"}),label:h.default.createElement("span",null,e["html_uploader.clear"],h.default.createElement("span",{className:"mdi mdi-menu-down"})),onClick:this.openClear.bind(this),primary:!0,disabled:p}),o&&h.default.createElement(_.IconButton,{iconClassName:"mdi mdi-close",style:{padding:14},onClick:function(){return r()}})),h.default.createElement(O,{className:"transparent-dropzone",ref:"dropzone",multiple:!0,enableFolders:!0,supportClick:!1,ignoreNativeDrop:!0,onDrop:this.onDrop.bind(this),onFolderPicked:this.onFolderPicked.bind(this),style:{width:"100%",height:420}},h.default.createElement(b.default,{sessions:d,autoStart:l.getOptionAsBool("DEFAULT_AUTO_START","upload_auto_send"),onDismiss:this.props.onDismiss,store:a,onPickFile:function(e){t.openFilePicker(e)},onPickFolder:this.supportsFolder()?function(e){t.openFolderPicker(e)}:null})),h.default.createElement(m.default,{configs:l,open:u,anchorEl:s,onDismiss:function(e){t.toggleOptions(e)}}),h.default.createElement(g.default,{configs:l,open:c,anchorEl:f,onDismiss:function(){t.setState({showClear:!1,clearAnchorEl:null})}}),n&&h.default.createElement(v.default,{onConfirm:this.dialogSubmit.bind(this),onCancel:this.dialogCancel.bind(this)})))}}])&&i(e.prototype,t),n&&i(e,n),r}();f.default=n,f.default=t(n),c.exports=f.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ClearOptionsPane":2,"./ConfirmExists":3,"./TransfersList":6,"./UploadOptionsPane":7,"material-ui":"material-ui",pydio:"pydio",react:"react"}],5:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var C=o(e("pydio")),x=o(e("react")),R=o(e("pydio/util/path")),j=e("material-ui"),M=o(e("../model/StatusItem"));function o(e){return e&&e.__esModule?e:{default:e}}function i(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function I(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){var t,n;t=o,e=r[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))})}return o}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=o?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(P,x["default"].Component);var e,t,n,o=u(P);function P(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P),(t=o.call(this,e)).state={open:!1,showAll:!1,status:e.item.getStatus(),previewUrl:null,progress:e.item.getProgress()||0},t}return e=P,(t=[{key:"componentDidMount",value:function(){var e,t=this,n=this.props.item;this._pgObserver=function(e){t.setState({progress:e})},this._statusObserver=function(e){t.setState({status:e})},n.observe("progress",this._pgObserver),n.observe("status",this._statusObserver),n.observe("children",function(){t.forceUpdate()}),n instanceof UploaderModel.UploadItem&&/\.(jpe?g|png|gif)$/i.test(n.getFile().name)&&(n.previewUrl?this.setState({previewUrl:n.previewUrl}):((e=new FileReader).addEventListener("load",function(){n.previewUrl=e.result,t.setState({previewUrl:e.result})},!1),e.readAsDataURL(n.getFile())))}},{key:"componentWillUnmount",value:function(){var e=this.props.item;e.stopObserving("progress",this._pgObserver),e.stopObserving("status",this._statusObserver)}},{key:"remove",value:function(){var e=this.props.item;e.getParent()&&e.getParent().removeChild(e)}},{key:"abort",value:function(){this.props.item.abort()}},{key:"retry",value:function(){var e=this.props,t=e.item,e=e.store;t.setStatus(M.default.StatusNew),e.processNext()}},{key:"render",value:function(){var e,t,n,o,r=this,i=this.props,a=i.item,l=i.className,u=i.style,s=i.limit,c=i.level,f=i.extensions,d=i.store,p=this.state,h=p.open,y=p.showAll,m=p.progress,g=p.status,b=p.previewUrl,v=a.getChildren(),_=a instanceof UploaderModel.FolderItem,O=a instanceof UploaderModel.PartItem,S=a instanceof UploaderModel.Session,i=C.default.getMessages(),p={main:I(I({},u),{},{fontSize:14,color:"#424242"}),line:{paddingLeft:24*(c-1),display:"flex",alignItems:"center",paddingTop:1<c?10:16,paddingBottom:6,cursor:v.length?"pointer":"default",borderLeft:1===c?"3px solid transparent":""},secondaryLine:{display:"flex",alignItems:"center",opacity:.3,fontSize:11},leftIcon:{display:"inline-block",width:50,textAlign:"center",color:O?"#9e9e9e":"#616161",fontSize:18},previewImage:{display:"inline-block",backgroundColor:"#eee",backgroundSize:"cover",height:32,width:32,borderRadius:"50%"},label:{fontSize:15,fontWeight:_?500:400,color:O?"#9e9e9e":null,fontStyle:O?"italic":null,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},errMessage:{color:"#e53935",fontSize:11,flex:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},pgBar:{position:"relative"},rightButton:{display:"inline-block",width:48,textAlign:"center",cursor:"pointer",color:"#9e9e9e",fontSize:16},toggleIcon:{color:"#bdbdbd",marginLeft:4}},u=[];v.length&&((h||S&&g!==M.default.StatusAnalyze)&&(u=(o=y?v:v.slice(0,s)).map(function(e){return x.default.createElement(P,{key:e.getId(),item:e,limit:s,level:c+1,extensions:f,store:d})}),v.length>o.length&&u.push(x.default.createElement("div",{style:I(I({},p.line),{},{cursor:"pointer",borderLeft:"",paddingLeft:20*c}),onClick:function(){r.setState({showAll:!0})}},x.default.createElement("span",{style:p.leftIcon,className:"mdi mdi-plus-box-outline"}),x.default.createElement("span",{style:{flex:1,fontStyle:"italic"}},i["html_uploader.list.show-more"].replace("%d",v.length-o.length))))),o=x.default.createElement("span",{onClick:t=function(){r.setState({open:!h})},style:p.toggleIcon,className:"mdi mdi-chevron-"+(h?"down":"right")})),_?(k="mdi mdi-folder",e=x.default.createElement("span",{className:"mdi mdi-close-circle-outline",onClick:function(){r.remove()}}),100===m&&(n="#4caf50")):O?(k="mdi mdi-package-up",100===m&&(n="#4caf50")):(k="mdi mdi-file",w=R.default.getFileExtension(a.getFullPath()),f.has(w)&&(k="mimefont mdi mdi-"+f.get(w).fontIcon),e=g===M.default.StatusLoading||g===M.default.StatusCannotPause||g===M.default.StatusMultiPause?x.default.createElement("span",{className:"mdi mdi-stop",onClick:function(){return r.abort()}}):g===M.default.StatusError?x.default.createElement("span",{className:"mdi mdi-restart",style:{color:n="#e53935"},onClick:function(){r.retry()}}):(n="#4caf50",x.default.createElement("span",{className:"mdi mdi-close-circle-outline",onClick:function(){r.remove()}})));var E,w=R.default.getBasename(a.getFullPath()),m=x.default.createElement(j.LinearProgress,{style:{backgroundColor:"#eeeeee",height:3},color:n,min:0,max:100,value:m,mode:"determinate"});if(S){if(g!==M.default.StatusAnalyze)return x.default.createElement("div",null,u);w=C.default.getMessages()["html_uploader.analyze.step"],o=t=m=null,e=x.default.createElement(j.CircularProgress,{size:16,thickness:2,style:{marginTop:1}})}var b=b?x.default.createElement("span",{style:I(I({},p.leftIcon),{},{marginTop:-4,marginBottom:-5})},x.default.createElement("div",{style:I({background:"url("+b+")"},p.previewImage)})):x.default.createElement("span",{style:p.leftIcon},x.default.createElement("span",{className:k,style:{display:"block",width:p.previewImage.width,height:p.previewImage.height,lineHeight:p.previewImage.width+"px",backgroundColor:"#ECEFF1",borderRadius:"50%",marginLeft:6}})),k=I({},p.secondaryLine),O=_?"dir":O?"part":"file";return"error"===g?(k.opacity=1,E=x.default.createElement("span",{style:p.errMessage,title:a.getErrorMessage()},a.getErrorMessage())):(E=i["html_uploader.status."+O+"."+g]||i["html_uploader.status."+g]||g,a.getSize&&(E=a.getHumanSize()+" - "+E),"analyse"===g&&a.getAnalyzeStatus&&a.getAnalyzeStatus()&&(E+=" ("+a.getAnalyzeStatus()+")")),x.default.createElement("div",{style:p.main,className:"upload-"+g+" "+(l||"")},x.default.createElement("div",{style:p.line},b,x.default.createElement("div",{style:{flex:1,overflow:"hidden",paddingLeft:4}},x.default.createElement("div",{onClick:t,style:p.label},w," ",o),x.default.createElement("div",{style:k},E),x.default.createElement("div",{style:p.pgBar},m)),x.default.createElement("span",{style:p.rightButton},e)),u)}}])&&a(e.prototype,t),n&&a(e,n),P}();n.default=e,t.exports=n.default},{"../model/StatusItem":1,"material-ui":"material-ui",pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],6:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=i(e("react")),c=i(e("pydio")),f=i(e("./Transfer")),o=e("material-ui/styles"),d=i(e("pydio/util/dom"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return e=o?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,s["default"].Component);var e,t,n,o=u(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.call(this,e)}return e=r,(t=[{key:"render",value:function(){var e,t,n,o=this.props,r=o.sessions,i=o.store,a=(o.muiTheme,o.onPickFile),l=o.onPickFolder,u=d.default.getBeziersTransition().replace("all ","color "),o=c.default.getMessages();r&&(t=!0,n=c.default.getInstance().Registry.getFilesExtensions(),r=r.map(function(e){return e.getChildren().length&&(t=!1),s.default.createElement(f.default,{item:e,store:i,style:{},limit:10,level:0,extensions:n})}),t||(e=s.default.createElement("div",{style:{height:"100%",overflowY:"auto",padding:10,paddingBottom:20}},r)));o=s.default.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%",width:"100%",backgroundColor:"#F5F5F5",transition:u},className:"drop-transfer-list"},s.default.createElement("div",{style:{textAlign:"center",width:"100%",fontWeight:500,fontSize:18,padding:24,lineHeight:"28px"}},s.default.createElement("div",{className:"mdi mdi-cloud-upload",style:{fontSize:110}}),s.default.createElement("div",null,o["html_uploader.drophere"]," ",o["html_uploader.drop-or"]," ",s.default.createElement("a",{onClick:a},o["html_uploader.drop-pick-file"]),l&&s.default.createElement("span",null," ",o["html_uploader.drop-or"]," ",s.default.createElement("a",{onClick:l},o["html_uploader.drop-pick-folder"])))),s.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n            .drop-transfer-list{\n                color:rgba(3, 169, 244, 0.5);\n            }\n            .transparent-dropzone.active .drop-transfer-list{\n                color:rgba(3, 169, 244, 0.8);\n            }\n            .drop-transfer-list a,.drop-transfer-list a:hover {\n                color:rgba(3, 169, 244, 1);\n                cursor: pointer;\n            }\n        "}}));return s.default.createElement("div",{style:{display:"flex",height:"100%",overflow:"hidden"}},s.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},o),e&&s.default.createElement("div",{style:{width:420,minWidth:420,maxWidth:420}},e))}}])&&a(e.prototype,t),n&&a(e,n),r}();n.default=e,n.default=e=(0,o.muiThemeable)()(e),t.exports=n.default},{"./Transfer":5,"material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],7:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("react")),a=o(e("pydio")),l=e("material-ui");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return e=o?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,i["default"].Component);var e,t,n,o=c(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return e=r,(t=[{key:"updateField",value:function(e,t){var n,o=this.props.configs;"autostart"===e?(n=o.getOptionAsBool("DEFAULT_AUTO_START","upload_auto_send",!0),o.updateOption("upload_auto_send",n=!n,!0)):"autoclose"===e?(n=o.getOptionAsBool("DEFAULT_AUTO_CLOSE","upload_auto_close",!0),o.updateOption("upload_auto_close",n=!n,!0)):"existing"===e?o.updateOption("upload_existing",t.target.getSelectedValue()):"show_processed"===e&&(e=o.getOptionAsBool("UPLOAD_SHOW_PROCESSED","upload_show_processed",!1),o.updateOption("upload_show_processed",e=!e,!0)),this.setState({random:Math.random()})}},{key:"radioChange",value:function(e,t){this.props.configs.updateOption("upload_existing",t),this.setState({random:Math.random()})}},{key:"render",value:function(){var t=this,e=this.props.configs,n=a.default.getInstance(),o=e.getOptionAsBool("DEFAULT_AUTO_START","upload_auto_send"),r=e.getOptionAsBool("DEFAULT_AUTO_CLOSE","upload_auto_close"),e=e.getOption("DEFAULT_EXISTING","upload_existing");return i.default.createElement(l.Popover,{open:this.props.open,anchorEl:this.props.anchorEl,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:function(e){t.props.onDismiss(e)}},i.default.createElement("div",{style:{width:320,paddingBottom:6}},i.default.createElement(l.Subheader,null,"Options"),i.default.createElement("div",{style:{padding:"0 16px",marginTop:-6}},i.default.createElement(l.Checkbox,{style:{margin:"8px 0"},checked:o,labelPosition:"right",onCheck:this.updateField.bind(this,"autostart"),label:n.MessageHash[337],labelStyle:{fontSize:14}}),i.default.createElement(l.Checkbox,{style:{margin:"8px 0"},checked:r,labelPosition:"right",onCheck:this.updateField.bind(this,"autoclose"),label:n.MessageHash[338],labelStyle:{fontSize:14}})),i.default.createElement(l.Subheader,null,n.MessageHash["html_uploader.options.existing"]),i.default.createElement("div",{style:{padding:16,fontSize:14,paddingTop:0}},i.default.createElement(l.RadioButtonGroup,{ref:"group",name:"shipSpeed",defaultSelected:e,onChange:this.radioChange.bind(this)},i.default.createElement(l.RadioButton,{value:"alert",label:n.MessageHash["html_uploader.options.existing.alert"],style:{paddingBottom:8}}),i.default.createElement(l.RadioButton,{value:"rename-folders",label:n.MessageHash["html_uploader.options.existing.folders"],style:{paddingBottom:8}}),i.default.createElement(l.RadioButton,{value:"rename",label:n.MessageHash["html_uploader.options.existing.merge"],style:{paddingBottom:8}}),i.default.createElement(l.RadioButton,{value:"overwrite",label:n.MessageHash["html_uploader.options.existing.overwrite"]})))))}}])&&u(e.prototype,t),n&&u(e,n),r}();n.default=e,t.exports=n.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DropUploader",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"TransfersList",{enumerable:!0,get:function(){return r.default}});var o=i(e("./DropUploader")),r=i(e("./TransfersList"));function i(e){return e&&e.__esModule?e:{default:e}}},{"./DropUploader":4,"./TransfersList":6}]},{},[8])(8)});