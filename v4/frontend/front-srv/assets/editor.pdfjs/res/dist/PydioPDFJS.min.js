!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioPDFJS=e()}(function(){var define,module,exports;return function n(a,i,s){function o(t,e){if(!i[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},a[t][0].call(r.exports,function(e){return o(a[t][1][e]||e)},r,r.exports,n,a,i,s)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)o(s[e]);return o}({1:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("react"),s=(n=e("pydio/http/resources-manager"))&&n.__esModule?n:{default:n};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(r);return e=n?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==a(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,i.Component);var e,t,r,n=u(a);function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=n.call(this,e,t),t=e.node,e=e.pydio;return r.state={hasImagePreview:!1},t.getMetadata().get("ImagePreview")&&e.Registry.findEditorById("editor.diaporama")&&s.default.loadClassesAndApply(["PydioDiaporama"],function(){r.setState({hasImagePreview:!0})}),r}return e=a,(t=[{key:"render",value:function(){return this.state.hasImagePreview?React.createElement(PydioDiaporama.Badge,this.props):React.createElement("div",{className:"mimefont mdi-file-pdf",style:this.props.mimeFontStyle})}}])&&o(e.prototype,t),r&&o(e,r),a}();r.default=h,t.exports=r.default},{"pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionControls=void 0;var n=PydioHOCs.SelectionControls;r.SelectionControls=n},{}],3:[function(e,t,r){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.Editor=r.Panel=void 0;var i=e("react-pdf"),n=h(e("pydio")),o=h(e("pydio/http/api")),l=h(e("pydio/util/dom")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var i;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=a?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("react")),a=e("react-redux");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=v(r);return e=n?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==s(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.pdfjs.GlobalWorkerOptions.workerSrc="plug/editor.pdfjs/pdfjs/build/min/pdf.worker.min.js";function _(e){return-1<w.mimes.indexOf(e.getAjxpMime())}var e=n.default.requireLib("hoc").EditorActions,A=function(){m(t,u["default"].Component);var e=y(t);function t(){return p(this,t),e.apply(this,arguments)}return g(t,[{key:"shouldComponentUpdate",value:function(e,t,r){return e.pdfUrl!==this.props.pdfUrl||e.pageNumber!==this.props.pageNumber}},{key:"render",value:function(){var e=this.props,t=e.pdfUrl,r=e.pageNumber,n=e.onNumPages,a=e.onKnownHeight,e=function(e){return u.default.createElement("div",{className:"inline-pdf-info-block",style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontWeight:500,color:"rgba(19, 78, 108, 0.4)"}},e)};return u.default.createElement(i.Document,{file:{url:t},onLoadError:function(e){return console.error(e)},onLoadSuccess:function(e){e=e.numPages;return n(e)},loading:e("Loading document..."),noData:e("No data loaded!"),error:e("Failed loading page")},u.default.createElement(i.Page,{pageNumber:r,width:250,loading:e("Loading page..."),onLoadSuccess:function(e){return a(Math.floor(e.height))}}))}}]),t}(),x=function(){m(t,u.Component);var e=y(t);function t(){return p(this,t),e.apply(this,arguments)}return g(t,[{key:"componentDidMount",value:function(){this.loadNode(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t,r=this,n=e.pydio,a=e.node,i=e.loadThumbnail,e=l.default.getUrlFromBase();e?(t=e).startsWith("http")||t.startsWith("https")||(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),t=document.location.origin+t):"/"===(t=document.location.href.split("#").shift().split("?").shift())[t.length-1]?t=t.substr(0,t.length-1):-1<t.lastIndexOf("/")&&(t=t.substr(0,t.lastIndexOf("/")));var s="viewer.html";i?s="viewer-thumb.html":n.Parameters.has("MINISITE")&&(s="viewer-minisite.html");n=null;a.getMetadata().get("PDFPreview")&&(n={Bucket:"io",Key:"pydio-thumbstore/"+a.getMetadata().get("PDFPreview")}),o.default.getClient().buildPresignedGetUrl(a,null,"",n).then(function(e){r.setState({pdfUrl:e,crtPage:1,lastKnownHeight:150,url:"plug/editor.pdfjs/pdfjs/web/"+s+"?file="+encodeURIComponent(e)})})}},{key:"makeCss",value:function(e){return"\n        #info_panel .mimefont-container.with-editor-badge{\n            position:relative;\n            min-height: ".concat(e,"px; \n            height:auto !important;\n            max-height:320px\n        }\n        #info_panel .inline-pdf-info-block{\n            min-height:").concat(e,"px;\n        }")}},{key:"render",value:function(){var e,t=this,r=this.props.loadThumbnail,n=this.state||{},a=n.url,i=n.pdfUrl,s=n.crtPage,o=void 0===s?1:s,l=n.numPages,s=n.showPaginator,n=n.lastKnownHeight;return a?r?u.default.createElement("div",{style:{flex:1,width:"100%",height:"100%",border:0},onMouseEnter:function(){t.setState({showPaginator:!0})},onMouseLeave:function(){t.setState({showPaginator:!1})}},u.default.createElement(A,{pdfUrl:i,pageNumber:o,onNumPages:function(e){return t.setState({numPages:e})},onKnownHeight:function(e){return t.setState({lastKnownHeight:e})}}),e=1<l&&s?u.default.createElement("div",{style:{position:"absolute",bottom:10,right:10,backgroundColor:"white",display:"flex",cursor:"pointer",fontSize:24,boxShadow:"rgba(0, 0, 0, .2) 0px 0px 12px",borderRadius:40}},u.default.createElement("div",{className:"mdi mdi-chevron-left",style:{opacity:1===o?.5:1},onClick:function(){t.setState({crtPage:Math.max(o-1,1)})}}),u.default.createElement("div",{className:"mdi mdi-chevron-right",style:{opacity:o===l?.5:1},onClick:function(){t.setState({crtPage:Math.min(o+1,l)})}})):e,u.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:this.makeCss(n)}})):u.default.createElement("iframe",d({},this.props,{style:{flex:1,width:"100%",height:"100%",border:0},src:a})):null}}]),t}(),w=pydio.Registry.getActiveExtensionByType("editor").filter(function(e){return"editor.pdfjs"===e.id})[0],n=PydioHOCs.withSelection;r.Panel=x;e=n(function(n){return new Promise(function(e,t){var r=[];n.getParent().getChildren().forEach(function(e){return r.push(e)}),e({selection:r=r.filter(_).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel(),void 0,{numeric:!0})}),currentIndex:r.reduce(function(e,t,r){return t===n&&r||e},0)})})})(e=(0,a.connect)(null,e)(e=function(){m(t,u["default"].Component);var e=y(t);function t(){return p(this,t),e.apply(this,arguments)}return g(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.editorModify;e.isActive&&t({fixedToolbar:!0})}},{key:"render",value:function(){return u.default.createElement(x,this.props)}}]),t}())||e)||e;r.Editor=e},{pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/dom":"pydio/util/dom",react:"react","react-pdf":57,"react-redux":"react-redux"}],4:[function(e,t,r){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Editor",{enumerable:!0,get:function(){return n.Editor}}),Object.defineProperty(r,"Panel",{enumerable:!0,get:function(){return n.Panel}}),Object.defineProperty(r,"Badge",{enumerable:!0,get:function(){return o.default}}),r.Controls=void 0;var n=e("./editor"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var i;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=a?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("./controls"));r.Controls=a;var i,o=(i=e("./badge"))&&i.__esModule?i:{default:i};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}},{"./badge":1,"./controls":2,"./editor":3}],5:[function(e,t,r){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},t.exports.default=t.exports,t.exports.__esModule=!0},{}],6:[function(e,t,r){t.exports=function(e){if(Array.isArray(e))return e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],7:[function(e,t,r){var n=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return n(e)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":5}],8:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],9:[function(e,t,r){function l(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}t.exports=function(o){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=o.apply(e,s);function a(e){l(n,t,r,a,i,"next",e)}function i(e){l(n,t,r,a,i,"throw",e)}a(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],10:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],11:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],12:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],13:[function(e,t,r){function n(){return t.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.exports.default=t.exports,t.exports.__esModule=!0,n.apply(this,arguments)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],14:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],15:[function(e,t,r){var n=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./setPrototypeOf.js":25}],16:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],17:[function(e,t,r){var s=e("@babel/runtime/helpers/typeof").default;function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}t.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};if((t=o(t))&&t.has(e))return t.get(e);var r,n,a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=i?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(a,r,n):a[r]=e[r]);return a.default=e,t&&t.set(e,a),a},t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime/helpers/typeof":28}],18:[function(e,t,r){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.default=t.exports,t.exports.__esModule=!0},{}],19:[function(e,t,r){t.exports=function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],20:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],21:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],22:[function(e,t,r){var s=e("./objectWithoutPropertiesLoose.js");t.exports=function(e,t){if(null==e)return{};var r,n=s(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n},t.exports.default=t.exports,t.exports.__esModule=!0},{"./objectWithoutPropertiesLoose.js":23}],23:[function(e,t,r){t.exports=function(e,t){if(null==e)return{};for(var r,n={},a=Object.keys(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||(n[r]=e[r]);return n},t.exports.default=t.exports,t.exports.__esModule=!0},{}],24:[function(e,t,r){var n=e("@babel/runtime/helpers/typeof").default,a=e("./assertThisInitialized.js");t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t},t.exports.default=t.exports,t.exports.__esModule=!0},{"./assertThisInitialized.js":8,"@babel/runtime/helpers/typeof":28}],25:[function(e,r,t){function n(e,t){return r.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r.exports.default=r.exports,r.exports.__esModule=!0,n(e,t)}r.exports=n,r.exports.default=r.exports,r.exports.__esModule=!0},{}],26:[function(e,t,r){var n=e("./arrayWithHoles.js"),a=e("./iterableToArrayLimit.js"),i=e("./unsupportedIterableToArray.js"),s=e("./nonIterableRest.js");t.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithHoles.js":6,"./iterableToArrayLimit.js":19,"./nonIterableRest.js":20,"./unsupportedIterableToArray.js":29}],27:[function(e,t,r){var n=e("./arrayWithoutHoles.js"),a=e("./iterableToArray.js"),i=e("./unsupportedIterableToArray.js"),s=e("./nonIterableSpread.js");t.exports=function(e){return n(e)||a(e)||i(e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithoutHoles.js":7,"./iterableToArray.js":18,"./nonIterableSpread.js":21,"./unsupportedIterableToArray.js":29}],28:[function(e,t,r){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],29:[function(e,t,r){var n=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":5}],30:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":60}],31:[function(e,t,r){"use strict";r.byteLength=function(e){var t=c(e),e=t[0],t=t[1];return 3*(e+t)/4-t},r.toByteArray=function(e){var t,r,n=c(e),a=n[0],n=n[1],i=new u(function(e,t){return 3*(e+t)/4-t}(a,n)),s=0,o=0<n?a-4:a;for(r=0;r<o;r+=4)t=l[e.charCodeAt(r)]<<18|l[e.charCodeAt(r+1)]<<12|l[e.charCodeAt(r+2)]<<6|l[e.charCodeAt(r+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=255&t;2===n&&(t=l[e.charCodeAt(r)]<<2|l[e.charCodeAt(r+1)]>>4,i[s++]=255&t);1===n&&(t=l[e.charCodeAt(r)]<<10|l[e.charCodeAt(r+1)]<<4|l[e.charCodeAt(r+2)]>>2,i[s++]=t>>8&255,i[s++]=255&t);return i},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],i=0,s=r-n;i<s;i+=16383)a.push(function(e,t,r){for(var n,a=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(function(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}(n));return a.join("")}(e,i,s<i+16383?s:i+16383));1==n?(t=e[r-1],a.push(o[t>>2]+o[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],a.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"="));return a.join("")};for(var o=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)o[a]=n[a],l[n.charCodeAt(a)]=a;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],32:[function(e,t,r){},{}],33:[function(O,e,L){!function(e){!function(){"use strict";var o=O("base64-js"),i=O("ieee754");L.Buffer=h,L.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},L.INSPECT_MAX_BYTES=50;var t=2147483647;function a(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=h.prototype,e}function h(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function n(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|d(e,t),n=a(r),t=n.write(e,t);t!==r&&(n=n.slice(0,t));return n}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(E(e,ArrayBuffer)||e&&E(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');r=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return r.__proto__=h.prototype,r}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return h.from(n,t,r);n=function(e){if(h.isBuffer(e)){var t=0|c(e.length),r=a(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(void 0!==e.length)return"number"!=typeof e.length||T(e.length)?a(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return s(e),a(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),r=a(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function d(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||E(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(a)return n?-1:P(e).length;t=(""+t).toLowerCase(),a=!0}}function r(e,t,r){var n,a,i,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||n<r)&&(r=n);for(var a="",i=t;i<r;++i)a+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[i]);return a}(this,t,r);case"utf8":case"utf-8":return y(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}(this,t,r);case"base64":return n=this,i=r,0===(a=t)&&i===n.length?o.fromByteArray(n):o.fromByteArray(n.slice(a,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function f(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=T(r=+r)?a?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(a?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):g(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,a){var i=1,s=e.length,o=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=i=2,o/=2,r/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a)for(var u=-1,c=r;c<s;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===o)return u*i}else-1!==u&&(c-=c-u),u=-1;else for(c=r=s<r+o?s-o:r;0<=c;c--){for(var h=!0,d=0;d<o;d++)if(l(e,c+d)!==l(t,d)){h=!1;break}if(h)return c}return-1}function m(e,t,r,n){return R(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return R(function(e,t){for(var r,n,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,n=n%256,a.push(n),a.push(r);return a}(t,e.length-r),e,r,n)}function y(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i,s,o,l,u=e[a],c=null,h=239<u?4:223<u?3:191<u?2:1;if(a+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[a+1]))&&127<(l=(31&u)<<6|63&i)&&(c=l);break;case 3:i=e[a+1],s=e[a+2],128==(192&i)&&128==(192&s)&&2047<(l=(15&u)<<12|(63&i)<<6|63&s)&&(l<55296||57343<l)&&(c=l);break;case 4:i=e[a+1],s=e[a+2],o=e[a+3],128==(192&i)&&128==(192&s)&&128==(192&o)&&65535<(l=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&o)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),a+=h}return function(e){var t=e.length;if(t<=v)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=v));return r}(n)}L.kMaxLength=t,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=n,h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,r){return t=t,r=r,s(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},h.allocUnsafe=l,h.allocUnsafeSlow=l,h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(E(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),E(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(a=t=0;a<e.length;++a)t+=e[a].length;for(var r=h.allocUnsafe(t),n=0,a=0;a<e.length;++a){var i=e[a];if(E(i,Uint8Array)&&(i=h.from(i)),!h.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?y(this,0,e):r.apply(this,arguments)},h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=L.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},h.prototype.compare=function(e,t,r,n,a){if(E(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(a<=n&&r<=t)return 0;if(a<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(i,s),l=this.slice(n,a),u=e.slice(t,r),c=0;c<o;++c)if(l[c]!==u[c]){i=l[c],s=u[c];break}return i<s?-1:s<i?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return f(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return f(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||a<r)&&(r=a),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,o,l=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var a=e.length-r;(!n||a<(n=Number(n)))&&(n=a),(a=t.length)/2<n&&(n=a/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(T(s))return i;e[r+i]=s}return i}(this,e,t,r);case"utf8":case"utf-8":return s=t,o=r,R(P(e,(i=this).length-s),i,s,o);case"ascii":return m(this,e,t,r);case"latin1":case"binary":return m(this,e,t,r);case"base64":return i=this,s=t,o=r,R(k(e),i,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),l=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function _(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,r,n,a,i){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function x(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function w(e,t,r,n,a){return t=+t,r>>>=0,a||x(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function S(e,t,r,n,a){return t=+t,r>>>=0,a||x(e,0,r,8),i.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e);t=this.subarray(e,t);return t.__proto__=h.prototype,t},h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=this[e+--t],a=1;0<t&&(a*=256);)n+=this[e+--t]*a;return n},h.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return(a*=128)<=n&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=t,a=1,i=this[e+--n];0<n&&(a*=256);)i+=this[e+--n]*a;return(a*=128)<=i&&(i-=Math.pow(2,8*t)),i},h.prototype.readInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),i.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),i.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),i.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),i.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||A(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},h.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||A(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=e/i&255;return t+r},h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||A(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var a=0,i=1,s=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||A(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var a=r-1,i=1,s=0;for(this[t+a]=255&e;0<=--a&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var a=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=a-1;0<=i;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return a},h.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var a;1===e.length&&(a=e.charCodeAt(0),("utf8"===n&&a<128||"latin1"===n)&&(e=a))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(i=t;i<r;++i)this[i]=e;else{var s=h.isBuffer(e)?e:h.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};var C=/[^+/0-9A-Za-z-_]/g;function P(e,t){var r;t=t||1/0;for(var n=e.length,a=null,i=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!a){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&i.push(239,191,189);continue}a=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&-1<(t-=3)&&i.push(239,191,189);if(a=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function k(e){return o.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function E(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function T(e){return e!=e}}.call(this)}.call(this,O("buffer").Buffer)},{"base64-js":31,buffer:33,ieee754:34}],34:[function(e,t,r){r.read=function(e,t,r,n,a){var i,s,o=8*a-n-1,l=(1<<o)-1,u=l>>1,c=-7,h=r?a-1:0,d=r?-1:1,r=e[t+h];for(h+=d,i=r&(1<<-c)-1,r>>=-c,c+=o;0<c;i=256*i+e[t+h],h+=d,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;0<c;s=256*s+e[t+h],h+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),i-=u}return(r?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,a,i){var s,o,l=8*i-a-1,u=(1<<l)-1,c=u>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+c?h/n:h*Math.pow(2,1-c))*n&&(s++,n/=2),u<=s+c?(o=0,s=u):1<=s+c?(o=(t*n-1)*Math.pow(2,a),s+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,a),s=0));8<=a;e[r+d]=255&o,d+=p,o/=256,a-=8);for(s=s<<a|o,l+=a;0<l;e[r+d]=255&s,d+=p,s/=256,l-=8);e[r+d-p]|=128*i}},{}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(r){var n=!1;return{promise:new Promise(function(e,t){r.then(function(){return!n&&e.apply(void 0,arguments)}).catch(function(e){return!n&&t(e)})}),cancel:function(){n=!0}}}},{}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.focusEvents=r.keyboardEvents=r.touchEvents=r.mouseEvents=void 0;var a=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"];r.mouseEvents=a;var i=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"];r.touchEvents=i;var s=["onKeyDown","onKeyPress","onKeyUp"];r.keyboardEvents=s;var o=["onFocus","onBlur"];r.focusEvents=o;r.default=function(r,n){var e={};return[].concat(a,i,s,o).forEach(function(t){r[t]&&(e[t]=function(e){return n?r[t](e,n(t)):r[t](e)})}),e}},{}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return Array.prototype.slice.call(arguments).reduce(function(e,t){return"string"==typeof t||Array.isArray(t)?e.concat(t):e},[]).filter(Boolean).join(" ")}},{}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(n.length<=1)return n[0];return function(t){n.forEach(function(e){"function"==typeof e?e(t):e.current=t})}}},{}],39:[function(require,module,exports){!function(process,Buffer){!function(){var jk,kk;jk=this,kk=function(){return lk=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function(){return n.addLinkAttributes}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return n.LinkTarget}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return a.build}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return a.getDocument}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return a.LoopbackPort}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return a.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return a.PDFWorker}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.version}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function(){return i.createObjectURL}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function(){return i.removeNullCharacters}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return s.AnnotationLayer}}),Object.defineProperty(t,"apiCompatibilityParams",{enumerable:!0,get:function(){return o.apiCompatibilityParams}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}});var n=r(1),a=r(5),i=r(2),s=r(19),o=r(9),l=r(12),u=r(20),c=r(21),{isNodeJS:t}=r(4);if(t){const h=r(22).PDFNodeStream;(0,a.setPDFNetworkStreamFactory)(e=>new h(e))}else{const d=r(25).PDFNetworkStream;let t;(0,n.isFetchSupported)()&&(t=r(26).PDFFetchStream),(0,a.setPDFNetworkStreamFactory)(e=>new(t&&(0,n.isValidFetchUrl)(e.url)?t:d)(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=function(e,{url:t,target:r,rel:n,enabled:a=!0}={}){(0,c.assert)(t&&"string"==typeof t,'addLinkAttributes: A valid "url" parameter must provided.');t=(0,c.removeNullCharacters)(t);a?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let i="";switch(r){case l.NONE:break;case l.SELF:i="_self";break;case l.BLANK:i="_blank";break;case l.PARENT:i="_parent";break;case l.TOP:i="_top"}e.target=i,e.rel="string"==typeof n?n:s},t.getFilenameFromUrl=function(e){var t=e.indexOf("#"),r=e.indexOf("?"),r=Math.min(0<t?t:e.length,0<r?r:e.length);return e.substring(e.lastIndexOf("/",r)+1,r)},t.isFetchSupported=u,t.isValidFetchUrl=h,t.loadScript=function(n){return new Promise((e,t)=>{const r=document.createElement("script");r.src=n,r.onload=e,r.onerror=function(){t(new Error(`Cannot load script at: ${r.src}`))},(document.head||document.documentElement).appendChild(r)})},t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.PDFDateString=t.StatTimer=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.BaseCMapReaderFactory=t.DOMCanvasFactory=t.BaseCanvasFactory=t.DEFAULT_LINK_REL=t.LinkTarget=t.RenderingCancelledException=t.PageViewport=void 0;var c=r(2);const s="noopener noreferrer nofollow";t.DEFAULT_LINK_REL=s;const n="http://www.w3.org/2000/svg";class a{constructor(){this.constructor===a&&(0,c.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){(0,c.unreachable)("Abstract method `create` called.")}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}}(class extends(t.BaseCanvasFactory=a){});t.DOMCanvasFactory=class extends a{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._document.createElement("canvas");var n=r.getContext("2d");return r.width=e,r.height=t,{canvas:r,context:n}}};class i{constructor({baseUrl:e=null,isCompressed:t=!1}){this.constructor===i&&(0,c.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");e=this.isCompressed?c.CMapCompressionType.BINARY:c.CMapCompressionType.NONE;return this._fetchData(t,e).catch(e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){(0,c.unreachable)("Abstract method `_fetchData` called.")}}(class extends(t.BaseCMapReaderFactory=i){});t.DOMCMapReaderFactory=class extends i{_fetchData(n,a){return u()&&h(n,document.baseURI)?fetch(n).then(async e=>{if(!e.ok)throw new Error(e.statusText);let t;return t=this.isCompressed?new Uint8Array(await e.arrayBuffer()):(0,c.stringToBytes)(await e.text()),{cMapData:t,compressionType:a}}):new Promise((t,e)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),this.isCompressed&&(r.responseType="arraybuffer"),r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){let e;if(this.isCompressed&&r.response?e=new Uint8Array(r.response):!this.isCompressed&&r.responseText&&(e=(0,c.stringToBytes)(r.responseText)),e)return void t({cMapData:e,compressionType:a})}e(new Error(r.statusText))}},r.send(null)})}};t.DOMSVGFactory=class{create(e,t){(0,c.assert)(0<e&&0<t,"Invalid SVG dimensions");const r=document.createElementNS(n,"svg:svg");return r.setAttribute("version","1.1"),r.setAttribute("width",e+"px"),r.setAttribute("height",t+"px"),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 "+e+" "+t),r}createElement(e){return(0,c.assert)("string"==typeof e,"Invalid SVG element type"),document.createElementNS(n,e)}};t.PageViewport=class i{constructor({viewBox:e,scale:t,rotation:r,offsetX:n=0,offsetY:a=0,dontFlip:i=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=n,this.offsetY=a;var s=(e[2]+e[0])/2,o=(e[3]+e[1])/2;let l,u,c,h;switch(r=(r%=360)<0?r+360:r){case 180:l=-1,u=0,c=0,h=1;break;case 90:l=0,u=1,c=1,h=0;break;case 270:l=0,u=-1,c=-1,h=0;break;case 0:l=1,u=0,c=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}i&&(c=-c,h=-h);let d,p,f,g;g=0===l?(d=Math.abs(o-e[1])*t+n,p=Math.abs(s-e[0])*t+a,f=Math.abs(e[3]-e[1])*t,Math.abs(e[2]-e[0])*t):(d=Math.abs(s-e[0])*t+n,p=Math.abs(o-e[1])*t+a,f=Math.abs(e[2]-e[0])*t,Math.abs(e[3]-e[1])*t),this.transform=[l*t,u*t,c*t,h*t,d-l*t*s-c*t*o,p-u*t*s-h*t*o],this.width=f,this.height=g}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:n=this.offsetY,dontFlip:a=!1}={}){return new i({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:n,dontFlip:a})}convertToViewportPoint(e,t){return c.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){var t=c.Util.applyTransform([e[0],e[1]],this.transform),e=c.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],e[0],e[1]]}convertToPdfPoint(e,t){return c.Util.applyInverseTransform([e,t],this.transform)}};class o extends c.BaseException{constructor(e,t){super(e),this.type=t}}t.RenderingCancelledException=o;const l={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};t.LinkTarget=l;function u(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function h(e,t){try{var{protocol:r}=t?new URL(e,t):new URL(e);return"http:"===r||"https:"===r}catch(e){return!1}}t.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(e){e in this.started&&(0,c.warn)(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,c.warn)(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const a of this.times){var r=a.name;r.length>t&&(t=r.length)}for(const i of this.times){var n=i.end-i.start;e.push(`${i.name.padEnd(t)} ${n}ms\n`)}return e.join("")}};let d;t.PDFDateString=class{static toDateObject(e){if(!e||!(0,c.isString)(e))return null;d=d||new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");var t=d.exec(e);if(!t)return null;var r=parseInt(t[1],10);let n=parseInt(t[2],10);n=1<=n&&n<=12?n-1:0;let a=parseInt(t[3],10);a=1<=a&&a<=31?a:1;let i=parseInt(t[4],10);i=0<=i&&i<=23?i:0;let s=parseInt(t[5],10);s=0<=s&&s<=59?s:0;let o=parseInt(t[6],10);o=0<=o&&o<=59?o:0;e=t[7]||"Z";let l=parseInt(t[8],10);l=0<=l&&l<=23?l:0;let u=parseInt(t[9],10)||0;return u=0<=u&&u<=59?u:0,"-"===e?(i+=l,s+=u):"+"===e&&(i-=l,s-=u),new Date(Date.UTC(r,n,a,i,s,o))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=v,t.arraysToBytes=function(r){var n=r.length;if(1===n&&r[0]instanceof Uint8Array)return r[0];let t=0;for(let e=0;e<n;e++)t+=v(r[e]);let a=0;const i=new Uint8Array(t);for(let t=0;t<n;t++){let e=r[t];e instanceof Uint8Array||(e="string"==typeof e?y(e):new Uint8Array(e));var s=e.byteLength;i.set(e,a),a+=s}return i},t.assert=o,t.bytesToString=function(t){o(null!==t&&"object"==typeof t&&void 0!==t.length,"Invalid argument for bytesToString");var r=t.length;if(r<8192)return String.fromCharCode.apply(null,t);const n=[];for(let e=0;e<r;e+=8192){var a=Math.min(e+8192,r),a=t.subarray(e,a);n.push(String.fromCharCode.apply(null,a))}return n.join("")},t.createPromiseCapability=function(){const e=Object.create(null);let n=!1;return Object.defineProperty(e,"settled",{get(){return n}}),e.promise=new Promise(function(t,r){e.resolve=function(e){n=!0,t(e)},e.reject=function(e){n=!0,r(e)}}),e},t.escapeString=function(e){return e.replace(/([\(\)\\])/g,"\\$1")},t.getModificationDate=function(e=new Date(Date.now())){const t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),(e.getUTCDate()+1).toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")},t.getVerbosityLevel=function(){return a},t.info=function(e){a>=n.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,r){return e.length===r.length&&e.every(function(e,t){return e===r[t]})},t.isBool=function(e){return"boolean"==typeof e},t.isNum=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSameOrigin=function(e,t){let r;try{if(r=new URL(e),!r.origin||"null"===r.origin)return!1}catch(e){return!1}t=new URL(t,r);return r.origin===t.origin},t.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{var r=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(e){}return null},t.removeNullCharacters=function(e){return"string"==typeof e?e.replace(b,""):(i("The argument for removeNullCharacters must be a string."),e)},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(a=e)},t.shadow=l,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=y,t.stringToPDFString=function(t){const r=t.length,n=[];if("þ"===t[0]&&"ÿ"===t[1])for(let e=2;e<r;e+=2)n.push(String.fromCharCode(t.charCodeAt(e)<<8|t.charCodeAt(e+1)));else if("ÿ"===t[0]&&"þ"===t[1])for(let e=2;e<r;e+=2)n.push(String.fromCharCode(t.charCodeAt(e+1)<<8|t.charCodeAt(e)));else for(let e=0;e<r;++e){var a=x[t.charCodeAt(e)];n.push(a?String.fromCharCode(a):t.charAt(e))}return n.join("")},t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))},t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=i,t.unreachable=s,t.IsEvalSupportedCached=t.IsLittleEndianCached=t.createObjectURL=t.FormatError=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.MissingPDFException=t.InvalidPDFException=t.AbortException=t.CMapCompressionType=t.ImageKind=t.FontType=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.UNSUPPORTED_FEATURES=t.VerbosityLevel=t.OPS=t.IDENTITY_MATRIX=t.FONT_IDENTITY_MATRIX=t.BaseException=void 0,r(3);t.IDENTITY_MATRIX=[1,0,0,1,0,0];t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReplyType={GROUP:"Group",REPLY:"R"};t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const n={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=n;t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"};t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let a=n.WARNINGS;function i(e){a>=n.WARNINGS&&console.log(`Warning: ${e}`)}function s(e){throw new Error(e)}function o(e,t){e||s(t)}function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}u.prototype=new Error,r=u.constructor=u;function u(e){this.constructor===u&&s("Cannot initialize BaseException."),this.message=e,this.name=this.constructor.name}class c extends(t.BaseException=r){constructor(e,t){super(e),this.code=t}}t.PasswordException=c;class h extends r{constructor(e,t){super(e),this.details=t}}t.UnknownErrorException=h;class d extends r{}t.InvalidPDFException=d;class p extends r{}t.MissingPDFException=p;class f extends r{constructor(e,t){super(e),this.status=t}}t.UnexpectedResponseException=f;class g extends r{}t.FormatError=g;class m extends r{}t.AbortException=m;const b=/\x00/g;function y(t){o("string"==typeof t,"Invalid argument for stringToBytes");var r=t.length;const n=new Uint8Array(r);for(let e=0;e<r;++e)n[e]=255&t.charCodeAt(e);return n}function v(e){return void 0!==e.length?e.length:(o(void 0!==e.byteLength,"arrayByteLength - invalid argument."),e.byteLength)}t.IsLittleEndianCached={get value(){return l(this,"value",function(){const e=new Uint8Array(4);return(e[0]=1)===new Uint32Array(e.buffer,0,1)[0]}())}},t.IsEvalSupportedCached={get value(){return l(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};const _=["rgb(",0,",",0,",",0,")"];class A{static makeCssRgb(e,t,r){return _[1]=e,_[3]=t,_[5]=r,_.join("")}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){var r=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r]}static getAxialAlignedBoundingBox(e,t){var r=A.applyTransform(e,t),n=A.applyTransform(e.slice(2,4),t),a=A.applyTransform([e[0],e[3]],t),t=A.applyTransform([e[2],e[1]],t);return[Math.min(r[0],n[0],a[0],t[0]),Math.min(r[1],n[1],a[1],t[1]),Math.max(r[0],n[0],a[0],t[0]),Math.max(r[1],n[1],a[1],t[1])]}static inverseTransform(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){var t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],e=e[2]*t[1]+e[3]*t[3],t=(r+e)/2,a=Math.sqrt((r+e)*(r+e)-4*(r*e-a*n))/2,n=t-a||1;return[Math.sqrt(t+a||1),Math.sqrt(n)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){function r(e,t){return e-t}var n=[e[0],e[2],t[0],t[2]].sort(r),a=[e[1],e[3],t[1],t[3]].sort(r);const i=[];return e=A.normalizeRect(e),t=A.normalizeRect(t),n[0]===e[0]&&n[1]===t[0]||n[0]===t[0]&&n[1]===e[0]?(i[0]=n[1],i[2]=n[2],a[0]===e[1]&&a[1]===t[1]||a[0]===t[1]&&a[1]===e[1]?(i[1]=a[1],i[3]=a[2],i):null):null}}t.Util=A;const x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];r=function(){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(r,e,t=!1){if(!t&&URL.createObjectURL){t=new Blob([r],{type:e});return URL.createObjectURL(t)}let n=`data:${e};base64,`;for(let e=0,t=r.length;e<t;e+=3){var a=255&r[e],i=255&r[e+1],s=255&r[e+2],o=a>>2,a=(3&a)<<4|i>>4,i=e+1<t?(15&i)<<2|s>>6:64,s=e+2<t?63&s:64;n+=l[o]+l[a]+l[i]+l[s]}return n}}();t.createObjectURL=r},function(e,t,r){"use strict";r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;var n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_webgl=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory,DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){const n=new PDFDocumentLoadingTask;let t;if("string"==typeof e)t={url:e};else if((0,_util.isArrayBuffer)(e))t={data:e};else if(e instanceof PDFDataRangeTransport)t={range:e};else{if("object"!=typeof e)throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=e}const a=Object.create(null);let r=null,i=null;for(const l in t)if("url"!==l||"undefined"==typeof window)if("range"!==l)if("worker"!==l)if("data"!==l||t[l]instanceof Uint8Array)a[l]=t[l];else{var s=t[l];if("string"==typeof s)a[l]=(0,_util.stringToBytes)(s);else if("object"!=typeof s||null===s||isNaN(s.length)){if(!(0,_util.isArrayBuffer)(s))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");a[l]=new Uint8Array(s)}else a[l]=new Uint8Array(s)}else i=t[l];else r=t[l];else a[l]=new URL(t[l],window.location).href;a.rangeChunkSize=a.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,a.CMapReaderFactory=a.CMapReaderFactory||DefaultCMapReaderFactory,a.ignoreErrors=!0!==a.stopAtErrors,a.fontExtraProperties=!0===a.fontExtraProperties,a.pdfBug=!0===a.pdfBug,Number.isInteger(a.maxImageSize)||(a.maxImageSize=-1),"boolean"!=typeof a.isEvalSupported&&(a.isEvalSupported=!0),"boolean"!=typeof a.disableFontFace&&(a.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),void 0===a.ownerDocument&&(a.ownerDocument=globalThis.document),"boolean"!=typeof a.disableRange&&(a.disableRange=!1),"boolean"!=typeof a.disableStream&&(a.disableStream=!1),"boolean"!=typeof a.disableAutoFetch&&(a.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(a.verbosity),i||(e={verbosity:a.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort},i=e.port?PDFWorker.fromPort(e):new PDFWorker(e),n._worker=i);const o=n.docId;return i.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");var e=_fetchDocument(i,a,r,o),t=new Promise(function(e){let t;r?t=new _transport_stream.PDFDataTransportStream({length:a.length,initialData:a.initialData,progressiveDone:a.progressiveDone,disableRange:a.disableRange,disableStream:a.disableStream},r):a.data||(t=createPDFNetworkStream({url:a.url,length:a.length,httpHeaders:a.httpHeaders,withCredentials:a.withCredentials,rangeChunkSize:a.rangeChunkSize,disableRange:a.disableRange,disableStream:a.disableStream})),e(t)});return Promise.all([e,t]).then(function([e,t]){if(n.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(o,e,i.port);r.postMessageTransfers=i.postMessageTransfers;t=new WorkerTransport(r,n,t,a);n._transport=t,r.send("Ready",null)})}).catch(n._capability.reject),n}function _fetchDocument(t,e,r,n){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone),t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.6.347",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,postMessageTransfers:t.postMessageTransfers,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties}).then(function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e}))}const PDFDocumentLoadingTask=function(){let e=0;return class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){this.destroyed=!0;const e=this._transport?this._transport.destroy():Promise.resolve();return e.then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}}();class PDFDataRangeTransport{constructor(e,t,r=!1){this.length=e,this.initialData=t,this.progressiveDone=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(t,r){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(t,r)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(e){return this._transport.saveDocument(e)}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,r,n,a=!1){this._pageIndex=e,this._pageInfo=t,this._ownerDocument=n,this._transport=r,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:n=0,dontFlip:a=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:n,dontFlip:a})}getAnnotations({intent:e=null}={}){return this.annotationsPromise&&this.annotationsIntent===e||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,e),this.annotationsIntent=e),this.annotationsPromise}render({canvasContext:e,viewport:t,intent:r="display",enableWebGL:n=!1,renderInteractiveForms:a=!1,transform:i=null,imageLayer:s=null,canvasFactory:o=null,background:l=null,annotationStorage:u=null,optionalContentConfigPromise:c=null}){this._stats&&this._stats.time("Overall");const h="print"===r?"print":"display";this.pendingCleanup=!1,c=c||this._transport.getOptionalContentConfig();let d=this._intentStates.get(h);d||(d=Object.create(null),this._intentStates.set(h,d)),d.streamReaderCancelTimeout&&(clearTimeout(d.streamReaderCancelTimeout),d.streamReaderCancelTimeout=null);o=o||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),n=new _webgl.WebGLContext({enable:n});d.displayReadyCapability||(d.displayReadyCapability=(0,_util.createPromiseCapability)(),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:h,renderInteractiveForms:!0===a,annotationStorage:u&&u.getAll()||null}));const p=e=>{var t=d.renderTasks.indexOf(f);0<=t&&d.renderTasks.splice(t,1),!this.cleanupAfterRender&&"print"!=h||(this.pendingCleanup=!0),this._tryCleanup(),e?(f.capability.reject(e),this._abortOperatorList({intentState:d,reason:e})):f.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},f=new InternalRenderTask({callback:p,params:{canvasContext:e,viewport:t,transform:i,imageLayer:s,background:l},objs:this.objs,commonObjs:this.commonObjs,operatorList:d.operatorList,pageIndex:this._pageIndex,canvasFactory:o,webGLContext:n,useRequestAnimationFrame:"print"!=h,pdfBug:this._pdfBug});d.renderTasks||(d.renderTasks=[]),d.renderTasks.push(f);n=f.task;return Promise.all([d.displayReadyCapability.promise,c]).then(([e,t])=>{this.pendingCleanup?p():(this._stats&&this._stats.time("Rendering"),f.initializeGraphics({transparency:e,optionalContentConfig:t}),f.operatorListChanged())}).catch(p),n}getOperatorList(){var e="oplist";let t=this._intentStates.get(e);t||(t=Object.create(null),this._intentStates.set(e,t));let r;return t.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function(){var e;t.operatorList.lastChunk&&(t.opListReadCapability.resolve(t.operatorList),0<=(e=t.renderTasks.indexOf(r))&&t.renderTasks.splice(e,1))},t.opListReadCapability=(0,_util.createPromiseCapability)(),t.renderTasks=[],t.renderTasks.push(r),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:e})),t.opListReadCapability.promise}streamTextContent({normalizeWhitespace:e=!1,disableCombineTextItems:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===e,combineTextItems:!0!==t},{highWaterMark:100,size(e){return e.items.length}})}getTextContent(e={}){const r=this.streamTextContent(e);return new Promise(function(n,e){const t=r.getReader(),a={items:[],styles:Object.create(null)};!function r(){t.read().then(function({value:e,done:t}){t?n(a):(Object.assign(a.styles,e.styles),a.items.push(...e.items),r())},e)}()})}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const e=[];for(var[t,r]of this._intentStates)if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==t)for(const n of r.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(var{renderTasks:t,operatorList:r}of this._intentStates.values())if(0!==t.length||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.annotationsPromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),!(this.pendingCleanup=!1)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(e))}_renderPageChunk(r,n){for(let e=0,t=r.length;e<t;e++)n.operatorList.fnArray.push(r.fnArray[e]),n.operatorList.argsArray.push(r.argsArray[e]);n.operatorList.lastChunk=r.lastChunk;for(let e=0;e<n.renderTasks.length;e++)n.renderTasks[e].operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList(e){(0,_util.assert)(e.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const t=this._transport.messageHandler.sendWithStream("GetOperatorList",e),r=t.getReader(),n=this._intentStates.get(e.intent);n.streamReader=r;const a=()=>{r.read().then(({value:e,done:t})=>{t?n.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,n),a())},e=>{if(n.streamReader=null,!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(let e=0;e<n.renderTasks.length;e++)n.renderTasks[e].operatorListChanged();this._tryCleanup()}if(n.displayReadyCapability)n.displayReadyCapability.reject(e);else{if(!n.opListReadCapability)throw e;n.opListReadCapability.reject(e)}}})};a()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if((0,_util.assert)(t instanceof Error||"object"==typeof t&&null!==t,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),e.streamReader){if(!r){if(0!==e.renderTasks.length)return;if(t instanceof _display_utils.RenderingCancelledException)return void(e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:t,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(e.streamReader.cancel(new _util.AbortException(t&&t.message)),e.streamReader=null,!this._transport.destroyed){for(var[n,a]of this._intentStates)if(a===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(e=!0){this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}postMessage(t,s){if(!this._defer)return void this._listeners.forEach(e=>{e.call(this,{data:t})});const o=new WeakMap,r={data:function r(n){if("object"!=typeof n||null===n)return n;if(o.has(n))return o.get(n);let e,a;if((e=n.buffer)&&(0,_util.isArrayBuffer)(e)){var t=s&&s.includes(e);return a=t?new n.constructor(e,n.byteOffset,n.byteLength):new n.constructor(n),o.set(n,a),a}a=Array.isArray(n)?[]:{},o.set(n,a);for(const i in n){let e,t=n;for(;!(e=Object.getOwnPropertyDescriptor(t,i));)t=Object.getPrototypeOf(t);if(void 0!==e.value)if("function"!=typeof e.value)a[i]=r(e.value);else if(n.hasOwnProperty&&n.hasOwnProperty(i))throw new Error(`LoopbackPort.postMessage - cannot clone: ${n[i]}`)}return a}(t)};this._deferred.then(()=>{this._listeners.forEach(e=>{e.call(this,r)})})}addEventListener(e,t){this._listeners.push(t)}removeEventListener(e,t){t=this._listeners.indexOf(t);this._listeners.splice(t,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&"function"==typeof require)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const pdfjsFilePath=document.currentScript&&document.currentScript.src;pdfjsFilePath&&(fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let e;try{e=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(e){}return e||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&"function"==typeof require){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(e){return URL.createObjectURL(new Blob(["importScripts('"+e+"');"]))}class PDFWorker{constructor({name:e=null,port:t=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(t&&pdfWorkerPorts.has(t))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=e,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t)return pdfWorkerPorts.set(t,this),void this._initializeFromPort(t);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let e=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,e)||(e=createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),r=new _message_handler.MessageHandler("main","worker",t),n=()=>{t.removeEventListener("error",a),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||n()};t.addEventListener("error",a),r.on("test",e=>{t.removeEventListener("error",a),this.destroyed?n():e?(this._messageHandler=r,this._port=t,this._webWorker=t,e.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),t.terminate())}),r.on("ready",e=>{if(t.removeEventListener("error",a),this.destroyed)n();else try{i()}catch(e){this._setupFakeWorker()}});const i=()=>{const t=new Uint8Array([this.postMessageTransfers?255:0]);try{r.send("test",t,[t.buffer])}catch(e){(0,_util.warn)("Cannot use postMessage transfers."),t[0]=0,r.send("test",t)}};return void i()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(e=>{if(this.destroyed)this._readyCapability.reject(new Error("Worker was destroyed"));else{var t=new LoopbackPort;this._port=t;var r="fake"+nextFakeWorkerId++,n=new _message_handler.MessageHandler(r+"_worker",r,t);e.setup(n,t);const a=new _message_handler.MessageHandler(r,r+"_worker",t);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(e.port)?pdfWorkerPorts.get(e.port):new PDFWorker(e)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,t,r,n){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:n.ownerDocument}),this._params=n,this.CMapReaderFactory=new n.CMapReaderFactory({baseUrl:n.cMapUrl,isCompressed:n.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];this.pageCache.forEach(function(e){e&&t.push(e._destroy())}),this.pageCache.length=0,this.pagePromises.length=0;var e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:n}=this;o.on("GetReader",(e,r)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},r.onPull=()=>{this._fullReader.read().then(function({value:e,done:t}){t?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{r.error(e)})},r.onCancel=e=>{this._fullReader.cancel(e),r.ready.catch(e=>{if(!this.destroyed)throw e})}}),o.on("ReaderHeadersReady",e=>{const t=(0,_util.createPromiseCapability)(),r=this._fullReader;return r.headersReady.then(()=>{r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&n.onProgress&&n.onProgress(this._lastProgress),r.onProgress=e=>{n.onProgress&&n.onProgress({loaded:e.loaded,total:e.total})}),t.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},t.reject),t.promise}),o.on("GetRangeReader",(e,r)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const t=this._networkStream.getRangeReader(e.begin,e.end);t?(r.onPull=()=>{t.read().then(function({value:e,done:t}){t?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{r.error(e)})},r.onCancel=e=>{t.cancel(e),r.ready.catch(e=>{if(!this.destroyed)throw e})}):r.close()}),o.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,n._capability.resolve(new PDFDocumentProxy(e,this))}),o.on("DocException",function(e){let t;switch(e.name){case"PasswordException":t=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":t=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":t=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":t=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":t=new _util.UnknownErrorException(e.message,e.details)}t instanceof Error||(0,_util.warn)("DocException - expected a valid Error."),n._capability.reject(t)}),o.on("PasswordRequest",e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),n.onPassword){var t=e=>{this._passwordCapability.resolve({password:e})};try{n.onPassword(t,e.code)}catch(e){this._passwordCapability.reject(e)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise}),o.on("DataLoaded",e=>{n.onProgress&&n.onProgress({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),o.on("StartRenderPage",e=>{if(!this.destroyed){const t=this.pageCache[e.pageIndex];t._startRenderPage(e.transparency,e.intent)}}),o.on("commonobj",e=>{if(!this.destroyed){const[r,n,a]=e;if(!this.commonObjs.has(r))switch(n){case"Font":const i=this._params;if("error"in a){var t=a.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(r,t);break}let e=null;i.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(e={registerFont(e,t){globalThis.FontInspector.fontAdded(e,t)}});const s=new _font_loader.FontFaceObject(a,{isEvalSupported:i.isEvalSupported,disableFontFace:i.disableFontFace,ignoreErrors:i.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:e});this.fontLoader.bind(s).catch(e=>o.sendWithPromise("FontFallback",{id:r})).finally(()=>{!i.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(r,s)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${n}`)}}}),o.on("obj",e=>{if(!this.destroyed){var[t,r,n,e]=e;const a=this.pageCache[r];if(!a.objs.has(t)){if("Image"!==n)throw new Error(`Got unknown object type ${n}`);a.objs.resolve(t,e);e&&"data"in e&&8e6<e.data.length&&(a.cleanupAfterRender=!0)}}}),o.on("DocProgress",e=>{this.destroyed||n.onProgress&&n.onProgress({loaded:e.loaded,total:e.total})}),o.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),o.on("FetchBuiltInCMap",(t,r)=>{if(this.destroyed)r.error(new Error("Worker was destroyed"));else{let e=!1;r.onPull=()=>{e?r.close():(e=!0,this.CMapReaderFactory.fetch(t).then(function(e){r.enqueue(e,1,[e.cMapData.buffer])}).catch(function(e){r.error(e)}))}}})}_onUnsupportedFeature({featureId:e}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));const t=e-1;if(t in this.pagePromises)return this.pagePromises[t];e=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(e=>{if(this.destroyed)throw new Error("Transport destroyed");e=new PDFPageProxy(t,e,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[t]=e});return this.pagePromises[t]=e}getPageIndex(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch(function(e){return Promise.reject(new Error(e))})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}saveDocument(e){return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:e&&e.getAll()||null,filename:this._fullReader?this._fullReader.filename:null}).finally(()=>{e&&e.resetModified()})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let e=0,t=this.pageCache.length;e<t;e++){const r=this.pageCache[e];if(r)if(!r.cleanup())throw new Error(`startCleanup: Page ${e+1} is currently rendering.`)}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){var e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableFontFace:e.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(e){return this._objs[e]||(this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1})}get(e,t=null){if(t)return this._ensureObj(e).capability.promise.then(t),null;t=this._objs[e];if(!t||!t.resolved)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return t.data}has(e){e=this._objs[e];return!!e&&e.resolved}resolve(e,t){const r=this._ensureObj(e);r.resolved=!0,r.data=t,r.capability.resolve(t)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function(){const o=new WeakSet;return class{constructor({callback:e,params:t,objs:r,commonObjs:n,operatorList:a,pageIndex:i,canvasFactory:s,webGLContext:o,useRequestAnimationFrame:l=!1,pdfBug:u=!1}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=n,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=i,this.canvasFactory=s,this.webGLContext=o,this._pdfBug=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(!this.cancelled){if(this._canvas){if(o.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var{canvasContext:r,viewport:n,transform:a,imageLayer:i,background:s}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,i,t),this.gfx.beginDrawing({transform:a,viewport:n,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&o.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&o.delete(this._canvas),this.callback())))}}}(),version="2.6.347";exports.version=version;const build="3be9c65f";exports.build=build},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var y=r(2);t.FontLoader=void 0,t.FontLoader=class extends class n{constructor({docId:e,onUnsupportedFeature:t,ownerDocument:r=globalThis.document}){this.constructor===n&&(0,y.unreachable)("Cannot initialize BaseFontLoader."),this.docId=e,this._onUnsupportedFeature=t,this._document=r,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(e){this.nativeFontFaces.push(e),this._document.fonts.add(e)}insertRule(e){let t=this.styleElement;t||(t=this.styleElement=this._document.createElement("style"),t.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));const r=t.sheet;r.insertRule(e,r.cssRules.length)}clear(){this.nativeFontFaces.forEach(e=>{this._document.fonts.delete(e)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(t){if(!t.attached&&!t.missingFile)if(t.attached=!0,this.isFontLoadingAPISupported){var r=t.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(e){throw this._onUnsupportedFeature({featureId:y.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,y.warn)(`Failed to load font '${r.family}': '${e}'.`),t.disableFontFace=!0,e}}}else{const n=t.createFontFaceRule();n&&(this.insertRule(n),this.isSyncFontLoadingSupported||await new Promise(e=>{e=this._queueLoadingCallback(e),this._prepareFontLoadEvent([n],[t],e)}))}}_queueLoadingCallback(e){(0,y.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var e=void 0!==this._document&&!!this._document.fonts;return(0,y.shadow)(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){(0,y.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,y.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(e,t,r){(0,y.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}{constructor(e){super(e),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let e=!1;var t;return("undefined"==typeof navigator||(t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent))&&14<=t[1])&&(e=!0),(0,y.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const t=this.loadingContext,r={id:`pdfjs-font-loading-${t.nextRequestId++}`,done:!1,complete:function(){for((0,y.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;0<t.requests.length&&t.requests[0].done;){var e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};return t.requests.push(r),r}get _loadTestFont(){return(0,y.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t,r){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function a(e,t,r,n){return e.substring(0,t)+n+e.substring(t+r)}let i,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(e,t){if(u++,30<u)return(0,y.warn)("Load test font never loaded."),void t();l.font="30px "+e,l.fillText(".",0,20),0<l.getImageData(0,0,1,1).data[3]?t():setTimeout(c.bind(null,e,t))}var h=`lt${Date.now()}${this.loadTestFontId++}`,d=1482184792;let p=n(f=a(f=this._loadTestFont,976,h.length,h),16);for(i=0,s=h.length-3;i<s;i+=4)p=p-d+n(h,i)|0;i<h.length&&(p=p-d+n(h+"XXX",i)|0),f=a(f,16,4,(0,y.string32)(p));var f=`url(data:font/opentype;base64,${btoa(f)});`;this.insertRule(`@font-face {font-family:"${h}";src:${f}}`);const g=[];for(i=0,s=t.length;i<s;i++)g.push(t[i].loadedName);g.push(h);const m=this._document.createElement("div");for(m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px",i=0,s=g.length;i<s;++i){const b=this._document.createElement("span");b.textContent="Hi",b.style.fontFamily=g[i],m.appendChild(b)}this._document.body.appendChild(m),c(h,()=>{this._document.body.removeChild(m),r.complete()})}};t.FontFaceObject=class{constructor(e,{isEvalSupported:t=!0,disableFontFace:r=!1,ignoreErrors:n=!1,onUnsupportedFeature:a=null,fontRegistry:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.isEvalSupported=!1!==t,this.disableFontFace=!0===r,this.ignoreErrors=!0===n,this._onUnsupportedFeature=a,this.fontRegistry=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;var e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var e=(0,y.bytesToString)(new Uint8Array(this.data)),t=`url(data:${this.mimetype};base64,${btoa(e)});`,e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,t),e}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let a,i;try{a=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors)throw e;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:y.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,y.warn)(`getPathGenerator - ignoring character: "${e}".`),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&y.IsEvalSupportedCached.value){let r,n="";for(let e=0,t=a.length;e<t;e++)i=a[e],r=void 0!==i.args?i.args.join(","):"",n+="c."+i.cmd+"("+r+");\n";return this.compiledGlyphs[t]=new Function("c","size",n)}return this.compiledGlyphs[t]=function(r,n){for(let e=0,t=a.length;e<t;e++)i=a[e],"scale"===i.cmd&&(i.args=[n,-n]),r[i.cmd].apply(r,i.args)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeCMapReaderFactory=t.NodeCanvasFactory=void 0;var n=r(1),a=r(4),i=r(2);t.NodeCanvasFactory=class{constructor(){(0,i.unreachable)("Not implemented: NodeCanvasFactory")}};t.NodeCMapReaderFactory=class{constructor(){(0,i.unreachable)("Not implemented: NodeCMapReaderFactory")}},a.isNodeJS&&(t.NodeCanvasFactory=class extends n.BaseCanvasFactory{create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=require("canvas"),n=r.createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}},t.NodeCMapReaderFactory=class extends n.BaseCMapReaderFactory{_fetchData(t,a){return new Promise((r,n)=>{const e=require("fs");e.readFile(t,(e,t)=>{!e&&t?r({cMapData:new Uint8Array(t),compressionType:a}):n(new Error(e))})})}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationStorage=void 0;t.AnnotationStorage=class{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getOrCreateValue(e,t){return this._storage.has(e)?this._storage.get(e):(this._storage.set(e,t),t)}setValue(e,t){this._storage.get(e)!==t&&this._setModified(),this._storage.set(e,t)}getAll(){return 0===this._storage.size?null:Object.fromEntries(this._storage)}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiCompatibilityParams=void 0;r=r(4);const n=Object.create(null);r.isNodeJS&&(n.disableFontFace=!0);r=Object.freeze(n);t.apiCompatibilityParams=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var D=r(2),u=r(11),h=4096;function d(o){o.mozCurrentTransform||(o._originalSave=o.save,o._originalRestore=o.restore,o._originalRotate=o.rotate,o._originalScale=o.scale,o._originalTranslate=o.translate,o._originalTransform=o.transform,o._originalSetTransform=o.setTransform,o._transformMatrix=o._transformMatrix||[1,0,0,1,0,0],o._transformStack=[],Object.defineProperty(o,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(o,"mozCurrentTransformInverse",{get:function(){var e=this._transformMatrix,t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],s=e[5],o=t*a-r*n,e=r*n-t*a;return[a/o,r/e,n/e,t/o,(a*i-n*s)/e,(r*i-t*s)/o]}}),o.save=function(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},o.restore=function(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},o.translate=function(e,t){var r=this._transformMatrix;r[4]=r[0]*e+r[2]*t+r[4],r[5]=r[1]*e+r[3]*t+r[5],this._originalTranslate(e,t)},o.scale=function(e,t){var r=this._transformMatrix;r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*t,r[3]=r[3]*t,this._originalScale(e,t)},o.transform=function(e,t,r,n,a,i){var s=this._transformMatrix;this._transformMatrix=[s[0]*e+s[2]*t,s[1]*e+s[3]*t,s[0]*r+s[2]*n,s[1]*r+s[3]*n,s[0]*a+s[2]*i+s[4],s[1]*a+s[3]*i+s[5]],o._originalTransform(e,t,r,n,a,i)},o.setTransform=function(e,t,r,n,a,i){this._transformMatrix=[e,t,r,n,a,i],o._originalSetTransform(e,t,r,n,a,i)},o.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this._transformMatrix;this._transformMatrix=[n[0]*t+n[2]*r,n[1]*t+n[3]*r,n[0]*-r+n[2]*t,n[1]*-r+n[3]*t,n[4],n[5]],this._originalRotate(e)})}var p=(n.prototype={getCanvas:function(e,t,r,n){var a;return void 0!==this.cache[e]?(a=this.cache[e],this.canvasFactory.reset(a,t,r),a.context.setTransform(1,0,0,1,0,0)):(a=this.canvasFactory.create(t,r),this.cache[e]=a),n&&d(a.context),a},clear(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}},n);function n(e){this.canvasFactory=e,this.cache=Object.create(null)}var f=(a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},a);function a(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=D.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=D.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=D.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}r=function(){function n(e,t,r,n,a,i,s){this.ctx=e,this.current=new f,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=n,this.webGLContext=a,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=s,this.cachedCanvases=new p(this.canvasFactory),e&&d(e),this._cachedGetSinglePixelWidth=null}function b(a,i,s=null){if("undefined"!=typeof ImageData&&i instanceof ImageData)a.putImageData(i,0,0);else{var o,l=i.height,u=i.width,c=l%16,h=(l-c)/16,d=0==c?h:1+h,p=a.createImageData(u,16),f=0,g=i.data,m=p.data;let t,r,n,e;if(s)switch(s.length){case 1:t=s[0],r=s[0],n=s[0],e=s[0];break;case 4:t=s[0],r=s[1],n=s[2],e=s[3]}if(i.kind===D.ImageKind.GRAYSCALE_1BPP){var b=g.byteLength,y=new Uint32Array(m.buffer,0,m.byteLength>>2),v=y.length,_=u+7>>3,A=4294967295,x=D.IsLittleEndianCached.value?4278190080:255;for(e&&255===e[0]&&0===e[255]&&([A,x]=[x,A]),O=0;O<d;O++){for(L=O<h?16:c,E=o=0;E<L;E++){var w=b-f;let e=0;for(var S=_<w?u:8*w-7,C=-8&S,P=0,k=0;e<C;e+=8)k=g[f++],y[o++]=128&k?A:x,y[o++]=64&k?A:x,y[o++]=32&k?A:x,y[o++]=16&k?A:x,y[o++]=8&k?A:x,y[o++]=4&k?A:x,y[o++]=2&k?A:x,y[o++]=1&k?A:x;for(;e<S;e++)0===P&&(k=g[f++],P=128),y[o++]=k&P?A:x,P>>=1}for(;o<v;)y[o++]=0;a.putImageData(p,0,16*O)}}else if(i.kind===D.ImageKind.RGBA_32BPP){for(var R=!!(t||r||n),E=0,T=16*u*4,O=0;O<h;O++){if(m.set(g.subarray(f,f+T)),f+=T,R)for(let e=0;e<T;e+=4)t&&(m[e+0]=t[m[e+0]]),r&&(m[e+1]=r[m[e+1]]),n&&(m[e+2]=n[m[e+2]]);a.putImageData(p,0,E),E+=16}if(O<d){if(m.set(g.subarray(f,f+(T=u*c*4))),R)for(let e=0;e<T;e+=4)t&&(m[e+0]=t[m[e+0]]),r&&(m[e+1]=r[m[e+1]]),n&&(m[e+2]=n[m[e+2]]);a.putImageData(p,0,E)}}else{if(i.kind!==D.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${i.kind}`);var L,F=!!(t||r||n);for(T=u*(L=16),O=0;O<d;O++){for(o=0,E=T=h<=O?u*(L=c):T;E--;)m[o++]=g[f++],m[o++]=g[f++],m[o++]=g[f++],m[o++]=255;if(F)for(let e=0;e<o;e+=4)t&&(m[e+0]=t[m[e+0]]),r&&(m[e+1]=r[m[e+1]]),n&&(m[e+2]=n[m[e+2]]);a.putImageData(p,0,16*O)}}}}function g(e,t){for(var r=t.height,n=t.width,a=r%16,i=(r-a)/16,s=0==a?i:1+i,o=e.createImageData(n,16),l=0,u=t.data,c=o.data,h=0;h<s;h++){for(var d=h<i?16:a,p=3,f=0;f<d;f++)for(var g,m=0,b=0;b<n;b++)m||(g=u[l++],m=128),c[p]=g&m?0:255,p+=4,m>>=1;e.putImageData(o,0,16*h)}}function c(e,t){for(var r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],n=0,a=r.length;n<a;n++){var i=r[n];void 0!==e[i]&&(t[i]=e[i])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function s(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function m(e,t,r){for(var n=e.length,a=3;a<n;a+=4){var i=r?r[e[a]]:e[a];t[a]=t[a]*i*(1/255)|0}}function y(e,t,r){for(var n=e.length,a=3;a<n;a+=4){var i=77*e[a-3]+152*e[a-2]+28*e[a-1];t[a]=r?t[a]*r[i>>8]>>8:t[a]*i>>16}}function o(e,t,r,n,a,i,s){for(var o=!!i,l=o?i[0]:0,u=o?i[1]:0,c=o?i[2]:0,h="Luminosity"===a?y:m,d=Math.min(n,Math.ceil(1048576/r)),p=0;p<n;p+=d){var f=Math.min(d,n-p),g=e.getImageData(0,p,r,f),f=t.getImageData(0,p,r,f);o&&function(e,t,r,n){for(var a=e.length,i=3;i<a;i+=4){var s,o=e[i];0===o?(e[i-3]=t,e[i-2]=r,e[i-1]=n):o<255&&(e[i-3]=e[i-3]*o+t*(s=255-o)>>8,e[i-2]=e[i-2]*o+r*s>>8,e[i-1]=e[i-1]*o+n*s>>8)}}(g.data,l,u,c),h(g.data,f.data,s),e.putImageData(f,0,p)}}function r(e,t,r,n){var a=t.canvas,i=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY);var s=t.backdrop||null;if(!t.transferMap&&n.isEnabled){n=n.composeSMask({layer:r.canvas,mask:a,properties:{subtype:t.subtype,backdrop:s}});return e.setTransform(1,0,0,1,0,0),void e.drawImage(n,t.offsetX,t.offsetY)}o(i,r,a.width,a.height,t.subtype,s,t.transferMap),e.drawImage(a,0,0)}var e,t=["butt","round","square"],a=["miter","round","bevel"],i={},l={};for(e in n.prototype={beginDrawing({transform:e,viewport:t,transparency:r=!1,background:n=null}){var a=this.ctx.canvas.width,i=this.ctx.canvas.height;this.ctx.save(),this.ctx.fillStyle=n||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,a,i),this.ctx.restore(),r&&(i=this.cachedCanvases.getCanvas("transparent",a,i,!0),this.compositeCtx=this.ctx,this.transparentCanvas=i.canvas,this.ctx=i.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)),this.ctx.save(),s(this.ctx),e&&this.ctx.transform.apply(this.ctx,e),this.ctx.transform.apply(this.ctx,t.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(e,t,r,n){var a=e.argsArray,i=e.fnArray,s=t||0,o=a.length;if(o===s)return s;for(var l,u=10<o-s&&"function"==typeof r,c=u?Date.now()+15:0,h=0,d=this.commonObjs,p=this.objs;;){if(void 0!==n&&s===n.nextBreakPoint)return n.breakIt(s,r),s;if((l=i[s])!==D.OPS.dependency)this[l].apply(this,a[s]);else for(const f of a[s]){const g=f.startsWith("g_")?d:p;if(!g.has(f))return g.get(f,r),s}if(++s===o)return s;if(u&&10<++h){if(Date.now()>c)return r(),s;h=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e},setLineCap:function(e){this.ctx.lineCap=t[e]},setLineJoin:function(e){this.ctx.lineJoin=a[e]},setMiterLimit:function(e){this.ctx.miterLimit=e},setDash:function(e,t){var r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(e),r.lineDashOffset=t)},setRenderingIntent(e){},setFlatness(e){},setGState:function(e){for(var t=0,r=e.length;t<r;t++){var n=e[t],a=n[0],i=n[1];switch(a){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask&&(0<this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=i?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=i}}},beginSMaskGroup:function(){var e=this.current.activeSMask,t=e.canvas.width,r=e.canvas.height,n="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(n,t,r,!0),t=this.ctx,r=t.mozCurrentTransform;this.ctx.save();n=n.context;n.scale(1/e.scaleX,1/e.scaleY),n.translate(-e.offsetX,-e.offsetY),n.transform.apply(n,r),e.startTransformInverse=n.mozCurrentTransformInverse,c(t,n),this.ctx=n,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++},suspendSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),r(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),this.ctx.save(),c(e,this.ctx),this.current.resumeSMaskCtx=e;var t=D.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},resumeSMaskGroup:function(){var e=this.current.resumeSMaskCtx,t=this.ctx;this.ctx=e,this.groupStack.push(t),this.groupLevel++},endSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),r(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),c(e,this.ctx);e=D.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)},save:function(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(e,t,r,n,a,i){this.ctx.transform(e,t,r,n,a,i),this._cachedGetSinglePixelWidth=null},constructPath:function(e,t){for(var r=this.ctx,n=this.current,a=n.x,i=n.y,s=0,o=0,l=e.length;s<l;s++)switch(0|e[s]){case D.OPS.rectangle:var a=t[o++],i=t[o++],u=t[o++],c=t[o++],u=a+(u=0===u&&r.lineWidth<this.getSinglePixelWidth()?this.getSinglePixelWidth():u),c=i+(c=0===c&&r.lineWidth<this.getSinglePixelWidth()?this.getSinglePixelWidth():c);r.moveTo(a,i),r.lineTo(u,i),r.lineTo(u,c),r.lineTo(a,c),r.lineTo(a,i),r.closePath();break;case D.OPS.moveTo:a=t[o++],i=t[o++],r.moveTo(a,i);break;case D.OPS.lineTo:a=t[o++],i=t[o++],r.lineTo(a,i);break;case D.OPS.curveTo:a=t[o+4],i=t[o+5],r.bezierCurveTo(t[o],t[o+1],t[o+2],t[o+3],a,i),o+=6;break;case D.OPS.curveTo2:r.bezierCurveTo(a,i,t[o],t[o+1],t[o+2],t[o+3]),a=t[o+2],i=t[o+3],o+=4;break;case D.OPS.curveTo3:a=t[o+2],i=t[o+3],r.bezierCurveTo(t[o],t[o+1],a,i,a,i),o+=4;break;case D.OPS.closePath:r.closePath()}n.setCurrentPoint(a,i)},closePath:function(){this.ctx.closePath()},stroke:function(e){e=void 0===e||e;var t,r=this.ctx,n=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(n&&n.hasOwnProperty("type")&&"Pattern"===n.type?(r.save(),t=r.mozCurrentTransform,t=D.Util.singularValueDecompose2dScale(t)[0],r.strokeStyle=n.getPattern(r,this),r.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth*t),r.stroke(),r.restore()):(r.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),r.stroke())),e&&this.consumePath(),r.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(e){e=void 0===e||e;var t=this.ctx,r=this.current.fillColor,n=!1;this.current.patternFill&&(t.save(),this.baseTransform&&t.setTransform.apply(t,this.baseTransform),t.fillStyle=r.getPattern(t,this),n=!0),this.contentVisible&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),n&&t.restore(),e&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=i},eoClip:function(){this.pendingClip=l},beginText:function(){this.current.textMatrix=D.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(var r=0;r<e.length;r++){var n=e[r];t.setTransform.apply(t,n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()},setCharSpacing:function(e){this.current.charSpacing=e},setWordSpacing:function(e){this.current.wordSpacing=e},setHScale:function(e){this.current.textHScale=e/100},setLeading:function(e){this.current.leading=-e},setFont:function(r,n){var a=this.commonObjs.get(r),i=this.current;if(!a)throw new Error(`Can't find font for ${r}`);if(i.fontMatrix=a.fontMatrix||D.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,D.warn)("Invalid font matrix for font "+r),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=a,this.current.fontSize=n,!a.isType3Font){r=a.loadedName||"sans-serif";let e="normal";a.black?e="900":a.bold&&(e="bold");i=a.italic?"italic":"normal",a=`"${r}", ${a.fallbackName}`;let t=n;n<16?t=16:100<n&&(t=100),this.current.fontSizeScale=n/t,this.ctx.font=`${i} ${e} ${t}px ${a}`}},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setTextRise:function(e){this.current.textRise=e},moveText:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},setTextMatrix:function(e,t,r,n,a,i){this.current.textMatrix=[e,t,r,n,a,i],this.current.textMatrixScale=Math.sqrt(e*e+t*t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(e,t,r,n){var a,i=this.ctx,s=this.current,o=s.font,l=s.textRenderingMode,u=s.fontSize/s.fontSizeScale,c=l&D.TextRenderingMode.FILL_STROKE_MASK,l=!!(l&D.TextRenderingMode.ADD_TO_PATH_FLAG),s=s.patternFill&&!o.missingFile;(o.disableFontFace||l||s)&&(a=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||s?(i.save(),i.translate(t,r),i.beginPath(),a(i,u),n&&i.setTransform.apply(i,n),c!==D.TextRenderingMode.FILL&&c!==D.TextRenderingMode.FILL_STROKE||i.fill(),c!==D.TextRenderingMode.STROKE&&c!==D.TextRenderingMode.FILL_STROKE||i.stroke(),i.restore()):(c!==D.TextRenderingMode.FILL&&c!==D.TextRenderingMode.FILL_STROKE||i.fillText(e,t,r),c!==D.TextRenderingMode.STROKE&&c!==D.TextRenderingMode.FILL_STROKE||i.strokeText(e,t,r)),l&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:i.mozCurrentTransform,x:t,y:r,fontSize:u,addToPath:a})},get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);for(var t=e.getImageData(0,0,10,10).data,r=!1,n=3;n<t.length;n+=4)if(0<t[n]&&t[n]<255){r=!0;break}return(0,D.shadow)(this,"isFontSubpixelAAEnabled",r)},showText:function(t){var r=this.current,n=r.font;if(n.isType3Font)return this.showType3Text(t);var a=r.fontSize;if(0!==a){var i=this.ctx,s=r.fontSizeScale,o=r.charSpacing,l=r.wordSpacing,u=r.fontDirection,c=r.textHScale*u,h=t.length,d=n.vertical,p=d?1:-1,f=n.defaultVMetrics,g=a*r.fontMatrix[0],m=r.textRenderingMode===D.TextRenderingMode.FILL&&!n.disableFontFace&&!r.patternFill;i.save();let e;r.patternFill&&(i.save(),b=r.fillColor.getPattern(i,this),e=i.mozCurrentTransform,i.restore(),i.fillStyle=b),i.transform.apply(i,r.textMatrix),i.translate(r.x,r.y+r.textRise),0<u?i.scale(c,-1):i.scale(c,1);var b,y=r.lineWidth,v=r.textMatrixScale;0===v||0===y?(b=r.textRenderingMode&D.TextRenderingMode.FILL_STROKE_MASK)!==D.TextRenderingMode.STROKE&&b!==D.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,y=.65*this.getSinglePixelWidth()):y/=v,1!==s&&(i.scale(s,s),y/=s),i.lineWidth=y;for(var _=0,A=0;A<h;++A){var x,w,S,C,P,k,R,E,T,O=t[A];(0,D.isNum)(O)?_+=p*O*a/1e3:(T=!1,x=(O.isSpace?l:0)+o,S=O.fontChar,w=O.accent,C=O.width,k=d?(k=O.vmetric||f,R=O.vmetric?k[1]:.5*C,E=k[2]*g,C=k?-k[0]:C,P=(R=-R*g)/s,(_+E)/s):(P=_/s,0),n.remeasure&&0<C&&(C<(R=1e3*i.measureText(S).width/a*s)&&this.isFontSubpixelAAEnabled?(E=C/R,T=!0,i.save(),i.scale(E,1),P/=E):C!==R&&(P+=(C-R)/2e3*a/s)),this.contentVisible&&(O.isInFont||n.missingFile)&&(m&&!w?i.fillText(S,P,k):(this.paintChar(S,P,k,e),w&&(S=P+a*w.offset.x/s,k=k-a*w.offset.y/s,this.paintChar(w.fontChar,S,k,e)))),_+=d?C*g-x*u:C*g+x*u,T&&i.restore())}d?r.y-=_:r.x+=_*c,i.restore()}},showType3Text:function(e){var t,r=this.ctx,n=this.current,a=n.font,i=n.fontSize,s=n.fontDirection,o=a.vertical?1:-1,l=n.charSpacing,u=n.wordSpacing,c=n.textHScale*s,h=n.fontMatrix||D.FONT_IDENTITY_MATRIX,d=e.length;if(!(n.textRenderingMode===D.TextRenderingMode.INVISIBLE)&&0!==i){for(this._cachedGetSinglePixelWidth=null,r.save(),r.transform.apply(r,n.textMatrix),r.translate(n.x,n.y),r.scale(c,s),t=0;t<d;++t){var p,f,g=e[t];(0,D.isNum)(g)?(this.ctx.translate(p=o*g*i/1e3,0),n.x+=p*c):(f=(g.isSpace?u:0)+l,(p=a.charProcOperatorList[g.operatorListId])?(this.contentVisible&&(this.processingType3=g,this.save(),r.scale(i,i),r.transform.apply(r,h),this.executeOperatorList(p),this.restore()),f=D.Util.applyTransform([g.width,0],h)[0]*i+f,r.translate(f,0),n.x+=f*c):(0,D.warn)(`Type3 character "${g.operatorListId}" is not available.`))}r.restore(),this.processingType3=null}},setCharWidth:function(e,t){},setCharWidthAndBounds:function(e,t,r,n,a,i){this.ctx.rect(r,n,a-r,i-n),this.clip(),this.endPath()},getColorN_Pattern:function(e){var t,r;return"TilingPattern"===e[0]?(t=e[1],r=this.baseTransform||this.ctx.mozCurrentTransform.slice(),new u.TilingPattern(e,t,this.ctx,{createCanvasGraphics:e=>new n(e,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)},r)):(0,u.getShadingPatternFromIR)(e)},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(e,t,r){r=D.Util.makeCssRgb(e,t,r);this.ctx.strokeStyle=r,this.current.strokeColor=r},setFillRGBColor:function(e,t,r){r=D.Util.makeCssRgb(e,t,r);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1},shadingFill:function(e){var t,r,n,a,i,s;this.contentVisible&&(r=this.ctx,this.save(),t=(0,u.getShadingPatternFromIR)(e),r.fillStyle=t.getPattern(r,this,!0),(i=r.mozCurrentTransformInverse)?(n=(s=r.canvas).width,a=s.height,e=D.Util.applyTransform([0,0],i),t=D.Util.applyTransform([0,a],i),r=D.Util.applyTransform([n,0],i),s=D.Util.applyTransform([n,a],i),n=Math.min(e[0],t[0],r[0],s[0]),a=Math.min(e[1],t[1],r[1],s[1]),i=Math.max(e[0],t[0],r[0],s[0]),s=Math.max(e[1],t[1],r[1],s[1]),this.ctx.fillRect(n,a,i-n,s-a)):this.ctx.fillRect(-1e10,-1e10,2e10,2e10),this.restore())},beginInlineImage:function(){(0,D.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,D.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(e,t){var r;this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t&&(r=t[2]-t[0],e=t[3]-t[1],this.ctx.rect(t[0],t[1],r,e),this.clip(),this.endPath()))},paintFormXObjectEnd:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())},beginGroup:function(e){if(this.contentVisible){this.save();var t=this.ctx;e.isolated||(0,D.info)("TODO: Support non-isolated groups."),e.knockout&&(0,D.warn)("Knockout groups not supported.");var r=t.mozCurrentTransform;if(e.matrix&&t.transform.apply(t,e.matrix),!e.bbox)throw new Error("Bounding box is required.");var n=D.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform),a=[0,0,t.canvas.width,t.canvas.height],n=D.Util.intersect(n,a)||[0,0,0,0],i=Math.floor(n[0]),s=Math.floor(n[1]),o=Math.max(Math.ceil(n[2])-i,1),l=Math.max(Math.ceil(n[3])-s,1),u=1,a=1;h<o&&(u=o/h,o=h),h<l&&(a=l/h,l=h);n="groupAt"+this.groupLevel;e.smask&&(n+="_smask_"+this.smaskCounter++%2);o=this.cachedCanvases.getCanvas(n,o,l,!0),l=o.context;l.scale(1/u,1/a),l.translate(-i,-s),l.transform.apply(l,r),e.smask?this.smaskStack.push({canvas:o.canvas,context:l,offsetX:i,offsetY:s,scaleX:u,scaleY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(i,s),t.scale(u,a)),c(t,l),this.ctx=l,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++,this.current.activeSMask=null}},endGroup:function(e){var t;this.contentVisible&&(this.groupLevel--,t=this.ctx,this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(t.canvas,0,0),this.restore())},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(e,t,r){var n,a;this.save(),s(this.ctx),this.current=new f,Array.isArray(e)&&4===e.length&&(n=e[2]-e[0],a=e[3]-e[1],this.ctx.rect(e[0],e[1],n,a),this.clip(),this.endPath()),this.transform.apply(this,t),this.transform.apply(this,r)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(e){var t,r,n,a,i,s;this.contentVisible&&(s=this.ctx,t=e.width,r=e.height,n=this.current.fillColor,a=this.current.patternFill,(i=this.processingType3)&&void 0===i.compiled&&(i.compiled=t<=1e3&&r<=1e3?function(e){for(var t,a=e.width,i=e.height,r=a+1,n=new Uint8Array(r*(i+1)),s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=a+7&-8,l=e.data,u=new Uint8Array(o*i),c=0,h=0,d=l.length;h<d;h++)for(var p=128,f=l[h];0<p;)u[c++]=f&p?0:255,p>>=1;var g=0;for(0!==u[c=0]&&(n[0]=1,++g),b=1;b<a;b++)u[c]!==u[c+1]&&(n[b]=u[c]?2:1,++g),c++;for(0!==u[c]&&(n[b]=2,++g),h=1;h<i;h++){t=h*r,u[(c=h*o)-o]!==u[c]&&(n[t]=u[c]?1:8,++g);for(var m=(u[c]?4:0)+(u[c-o]?8:0),b=1;b<a;b++)s[m=(m>>2)+(u[c+1]?4:0)+(u[c-o+1]?8:0)]&&(n[t+b]=s[m],++g),c++;if(u[c-o]!==u[c]&&(n[t+b]=u[c]?2:4,++g),1e3<g)return null}for(t=h*r,0!==u[c=o*(i-1)]&&(n[t]=8,++g),b=1;b<a;b++)u[c]!==u[c+1]&&(n[t+b]=u[c]?4:8,++g),c++;if(0!==u[c]&&(n[t+b]=4,++g),1e3<g)return null;var y=new Int32Array([0,r,-1,0,-r,0,0,0,1]),v=[];for(h=0;g&&h<=i;h++){for(var _=h*r,A=_+a;_<A&&!n[_];)_++;if(_!==A){var x,w=[_%r,h],S=n[_],C=_;do{for(var P=y[S];!n[_+=P];);}while(5!==(x=n[_])&&10!==x?(S=x,n[_]=0):n[_]&=(S=x&51*S>>4)>>2|S<<2,w.push(_%r),w.push(_/r|0),n[_]||--g,C!==_);v.push(w),--h}}return function(r){r.save(),r.scale(1/a,-1/i),r.translate(0,-i),r.beginPath();for(let e=0,t=v.length;e<t;e++){var n=v[e];r.moveTo(n[0],n[1]);for(let e=2,t=n.length;e<t;e+=2)r.lineTo(n[e],n[e+1])}r.fill(),r.beginPath(),r.restore()}}({data:e.data,width:t,height:r}):null),i&&i.compiled?i.compiled(s):((s=(i=this.cachedCanvases.getCanvas("maskCanvas",t,r)).context).save(),g(s,e),s.globalCompositeOperation="source-in",s.fillStyle=a?n.getPattern(s,this):n,s.fillRect(0,0,t,r),s.restore(),this.paintInlineImageXObject(i.canvas)))},paintImageMaskXObjectRepeat(e,t,r=0,n=0,a,i){if(this.contentVisible){var s=e.width,o=e.height,l=this.current.fillColor,u=this.current.patternFill,c=this.cachedCanvases.getCanvas("maskCanvas",s,o),h=c.context;h.save(),g(h,e),h.globalCompositeOperation="source-in",h.fillStyle=u?l.getPattern(h,this):l,h.fillRect(0,0,s,o),h.restore();for(var d=this.ctx,p=0,f=i.length;p<f;p+=2)d.save(),d.transform(t,r,n,a,i[p],i[p+1]),d.scale(1,-1),d.drawImage(c.canvas,0,0,s,o,0,-1,1,1),d.restore()}},paintImageMaskXObjectGroup:function(e){if(this.contentVisible)for(var t=this.ctx,r=this.current.fillColor,n=this.current.patternFill,a=0,i=e.length;a<i;a++){var s=e[a],o=s.width,l=s.height,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),c=u.context;c.save(),g(c,s),c.globalCompositeOperation="source-in",c.fillStyle=n?r.getPattern(c,this):r,c.fillRect(0,0,o,l),c.restore(),t.save(),t.transform.apply(t,s.transform),t.scale(1,-1),t.drawImage(u.canvas,0,0,o,l,0,-1,1,1),t.restore()}},paintImageXObject:function(e){this.contentVisible&&((e=(e.startsWith("g_")?this.commonObjs:this.objs).get(e))?this.paintInlineImageXObject(e):(0,D.warn)("Dependent image isn't ready yet"))},paintImageXObjectRepeat:function(e,t,r,n){if(this.contentVisible){e=(e.startsWith("g_")?this.commonObjs:this.objs).get(e);if(e){for(var a=e.width,i=e.height,s=[],o=0,l=n.length;o<l;o+=2)s.push({transform:[t,0,0,r,n[o],n[o+1]],x:0,y:0,w:a,h:i});this.paintInlineImageXObjectGroup(e,s)}else(0,D.warn)("Dependent image isn't ready yet")}},paintInlineImageXObject:function(e){if(this.contentVisible){var t=e.width,r=e.height,n=this.ctx;this.save(),n.scale(1/t,-1/r);for(var a,i,s=n.mozCurrentTransformInverse,o=s[0],l=s[1],u=Math.max(Math.sqrt(o*o+l*l),1),o=s[2],l=s[3],c=Math.max(Math.sqrt(o*o+l*l),1),h="function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data?e:(b(i=(a=this.cachedCanvases.getCanvas("inlineImage",t,r)).context,e,this.current.transferMaps),a.canvas),d=t,p=r,f="prescale1";2<u&&1<d||2<c&&1<p;){var g=d,m=p;2<u&&1<d&&(u/=d/(g=Math.ceil(d/2))),2<c&&1<p&&(c/=p/(m=Math.ceil(p/2))),(i=(a=this.cachedCanvases.getCanvas(f,g,m)).context).clearRect(0,0,g,m),i.drawImage(h,0,0,d,p,0,0,g,m),h=a.canvas,d=g,p=m,f="prescale1"===f?"prescale2":"prescale1"}n.drawImage(h,0,0,d,p,0,-r,t,r),this.imageLayer&&(n=this.getCanvasPosition(0,-r),this.imageLayer.appendImage({imgData:e,left:n[0],top:n[1],width:t/s[0],height:r/s[3]})),this.restore()}},paintInlineImageXObjectGroup:function(e,t){if(this.contentVisible){var r=this.ctx,n=e.width,a=e.height,i=this.cachedCanvases.getCanvas("inlineImage",n,a);b(i.context,e,this.current.transferMaps);for(var s=0,o=t.length;s<o;s++){var l=t[s];r.save(),r.transform.apply(r,l.transform),r.scale(1,-1),r.drawImage(i.canvas,l.x,l.y,l.w,l.h,0,-1,1,1),this.imageLayer&&(l=this.getCanvasPosition(l.x,l.y),this.imageLayer.appendImage({imgData:e,left:l[0],top:l[1],width:n,height:a})),r.restore()}}},paintSolidColorImageMask:function(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function(e){},markPointProps:function(e,t){},beginMarkedContent:function(e){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()},endMarkedContent:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()},beginCompat:function(){},endCompat:function(){},consumePath:function(){var e=this.ctx;this.pendingClip&&(this.pendingClip===l?e.clip("evenodd"):e.clip(),this.pendingClip=null),e.beginPath()},getSinglePixelWidth(e){var t;return null===this._cachedGetSinglePixelWidth&&(t=this.ctx.mozCurrentTransformInverse,this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1],t[2]*t[2]+t[3]*t[3]))),this._cachedGetSinglePixelWidth},getCanvasPosition:function(e,t){var r=this.ctx.mozCurrentTransform;return[r[0]*e+r[2]*t+r[4],r[1]*e+r[3]*t+r[5]]},isContentVisible:function(){for(let e=this.markedContentStack.length-1;0<=e;e--)if(!this.markedContentStack[e].visible)return!1;return!0}},D.OPS)n.prototype[D.OPS[e]]=n.prototype[e];return n}();t.CanvasGraphics=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPatternFromIR=function(e){var t=n[e[0]];if(t)return t.fromIR(e);throw new Error(`Unknown IR type: ${e[0]}`)},t.TilingPattern=void 0;var f=r(2),n={};function d(e,t){if(t&&"undefined"!=typeof Path2D){var r=t[2]-t[0],n=t[3]-t[1];const a=new Path2D;a.rect(t[0],t[1],r,n),e.clip(a)}}n.RadialAxial={fromIR:function(e){var i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7];return{type:"Pattern",getPattern:function(e){var t;d(e,s),"axial"===i?t=e.createLinearGradient(l[0],l[1],u[0],u[1]):"radial"===i&&(t=e.createRadialGradient(l[0],l[1],c,u[0],u[1],h));for(var r=0,n=o.length;r<n;++r){var a=o[r];t.addColorStop(a[0],a[1])}return t}}}};var p=function(e,t,r,n,a,i,s,o){var l,u=Math.floor(e[0]),c=Math.floor(e[1]),h=Math.ceil(e[2])-u,d=Math.ceil(e[3])-c,e=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),t=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),p={coords:r,colors:n,offsetX:-u,offsetY:-c,scaleX:1/(h=h/e),scaleY:1/(d=d/t)},r=e+4,n=t+4;if(o.isEnabled)l=o.drawFigures({width:e,height:t,backgroundColor:i,figures:a,context:p}),(f=s.getCanvas("mesh",r,n,!1)).context.drawImage(l,2,2),l=f.canvas;else{var f,n=(f=s.getCanvas("mesh",r,n,!1)).context,g=n.createImageData(e,t);if(i)for(var m=g.data,b=0,y=m.length;b<y;b+=4)m[b]=i[0],m[b+1]=i[1],m[b+2]=i[2],m[b+3]=255;for(b=0;b<a.length;b++)!function(e,t,r){var n,a=t.coords,i=t.colors;switch(t.type){case"lattice":for(var s=t.verticesPerRow,o=Math.floor(a.length/s)-1,l=s-1,u=0;u<o;u++)for(var c=u*s,h=0;h<l;h++,c++)v(e,r,a[c],a[c+1],a[c+s],i[c],i[c+1],i[c+s]),v(e,r,a[c+s+1],a[c+1],a[c+s],i[c+s+1],i[c+1],i[c+s]);break;case"triangles":for(u=0,n=a.length;u<n;u+=3)v(e,r,a[u],a[u+1],a[u+2],i[u],i[u+1],i[u+2]);break;default:throw new Error("illegal figure")}}(g,a[b],p);n.putImageData(g,2,2),l=f.canvas}return{canvas:l,offsetX:u-2*h,offsetY:c-2*d,scaleX:h,scaleY:d}};function v(e,t,r,n,a,i,s,o){var l,u=t.coords,c=t.colors,h=e.data,d=4*e.width;u[r+1]>u[n+1]&&(l=r,r=n,n=l,l=i,i=s,s=l),u[n+1]>u[a+1]&&(l=n,n=a,a=l,l=s,s=o,o=l),u[r+1]>u[n+1]&&(l=r,r=n,n=l,l=i,i=s,s=l);var p=(u[r]+t.offsetX)*t.scaleX,f=(u[r+1]+t.offsetY)*t.scaleY,g=(u[n]+t.offsetX)*t.scaleX,m=(u[n+1]+t.offsetY)*t.scaleY,b=(u[a]+t.offsetX)*t.scaleX,y=(u[a+1]+t.offsetY)*t.scaleY;if(!(y<=f))for(var v,_,A,x,w=c[i],S=c[i+1],C=c[i+2],P=c[s],k=c[s+1],R=c[s+2],E=c[o],T=c[o+1],O=c[o+2],o=Math.round(f),L=Math.round(y),F=o;F<=L;F++){if(F<m){let e;e=F<f?0:f==m?1:(f-F)/(f-m),v=p-(p-g)*e,_=w-(w-P)*e,A=S-(S-k)*e,x=C-(C-R)*e}else{let e;e=y<F?1:m==y?0:(m-F)/(m-y),v=g-(g-b)*e,_=P-(P-E)*e,A=k-(k-T)*e,x=R-(R-O)*e}let e;e=F<f?0:y<F?1:(f-F)/(f-y);for(var D=p-(p-b)*e,I=w-(w-E)*e,M=S-(S-T)*e,N=C-(C-O)*e,j=Math.round(Math.min(v,D)),U=Math.round(Math.max(v,D)),q=d*F+4*j,B=j;B<=U;B++)e=(v-B)/(v-D),e<0?e=0:1<e&&(e=1),h[q++]=_-(_-I)*e|0,h[q++]=A-(A-M)*e|0,h[q++]=x-(x-N)*e|0,h[q++]=255}}n.Mesh={fromIR:function(e){var i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8];return{type:"Pattern",getPattern:function(e,t,r){var n;d(e,c),r?a=f.Util.singularValueDecompose2dScale(e.mozCurrentTransform):(a=f.Util.singularValueDecompose2dScale(t.baseTransform),u&&(n=f.Util.singularValueDecompose2dScale(u),a=[a[0]*n[0],a[1]*n[1]]));var a=p(l,a,i,s,o,r?null:h,t.cachedCanvases,t.webGLContext);return r||(e.setTransform.apply(e,t.baseTransform),u&&e.transform.apply(e,u)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}}},n.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};r=function(){var s=1,o=2;function e(e,t,r,n,a){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.canvasGraphicsFactory=n,this.baseTransform=a,this.type="Pattern",this.ctx=r}return e.prototype={createPatternCanvas:function(e){var t=this.operatorList,r=this.bbox,n=this.xstep,a=this.ystep,i=this.paintType,s=this.tilingType,o=this.color,l=this.canvasGraphicsFactory;(0,f.info)("TilingType: "+s);var u=r[0],c=r[1],h=r[2],d=r[3],p=f.Util.singularValueDecompose2dScale(this.matrix),s=f.Util.singularValueDecompose2dScale(this.baseTransform),p=[p[0]*s[0],p[1]*s[1]],s=this.getSizeAndScale(n,this.ctx.canvas.width,p[0]),n=this.getSizeAndScale(a,this.ctx.canvas.height,p[1]),a=e.cachedCanvases.getCanvas("pattern",s.size,n.size,!0),p=a.context,p=l.createCanvasGraphics(p);return p.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(p,i,o),p.transform(s.scale,0,0,n.scale,0,0),p.transform(1,0,0,1,-u,-c),this.clipBbox(p,r,u,c,h,d),p.executeOperatorList(t),this.ctx.transform(1,0,0,1,u,c),this.ctx.scale(1/s.scale,1/n.scale),a.canvas},getSizeAndScale:function(e,t,r){e=Math.abs(e);var n=Math.max(3e3,t),t=Math.ceil(e*r);return n<=t?t=n:r=t/e,{scale:r,size:t}},clipBbox:function(e,t,r,n,a,i){Array.isArray(t)&&4===t.length&&(e.ctx.rect(r,n,a-r,i-n),e.clip(),e.endPath())},setFillAndStrokeStyleToContext:function(e,t,r){const n=e.ctx,a=e.current;switch(t){case s:var i=this.ctx;n.fillStyle=i.fillStyle,n.strokeStyle=i.strokeStyle,a.fillColor=i.fillStyle,a.strokeColor=i.strokeStyle;break;case o:i=f.Util.makeCssRgb(r[0],r[1],r[2]);n.fillStyle=i,n.strokeStyle=i,a.fillColor=i,a.strokeColor=i;break;default:throw new f.FormatError(`Unsupported paint type: ${t}`)}},getPattern:function(e,t){(e=this.ctx).setTransform.apply(e,this.baseTransform),e.transform.apply(e,this.matrix);t=this.createPatternCanvas(t);return e.createPattern(t,"repeat")}},e}();t.TilingPattern=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=void 0===n.workerPort?null:n.workerPort,n.workerSrc=void 0===n.workerSrc?"":n.workerSrc},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var u=r(2);const o={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function h(e){if("object"!=typeof e||null===e)return e;switch(e.name){case"AbortException":return new u.AbortException(e.message);case"MissingPDFException":return new u.MissingPDFException(e.message);case"UnexpectedResponseException":return new u.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new u.UnknownErrorException(e.message,e.details);default:return new u.UnknownErrorException(e.message,e.toString())}}t.MessageHandler=class{constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName===this.sourceName)if(t.stream)this._processStreamMessage(t);else if(t.callback){e=t.callbackId;const r=this.callbackCapabilities[e];if(!r)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],t.callback===o.DATA)r.resolve(t.data);else{if(t.callback!==o.ERROR)throw new Error("Unexpected callback case");r.reject(h(t.reason))}}else{const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const a=this.sourceName,i=t.sourceName;new Promise(function(e){e(n(t.data))}).then(function(e){s.postMessage({sourceName:a,targetName:i,callback:o.DATA,callbackId:t.callbackId,data:e})},function(e){s.postMessage({sourceName:a,targetName:i,callback:o.ERROR,callbackId:t.callbackId,reason:h(e)})})}else t.streamId?this._createStreamSink(t):n(t.data)}},s.addEventListener("message",this._onComObjOnMessage)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){var n=this.callbackId++;const a=(0,u.createPromiseCapability)();this.callbackCapabilities[n]=a;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},r)}catch(e){a.reject(e)}return a.promise}sendWithStream(r,n,e,a){const i=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:e=>{var t=(0,u.createPromiseCapability)();return this.streamControllers[i]={controller:e,startCall:t,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:s,targetName:o,action:r,streamId:i,data:n,desiredSize:e.desiredSize},a),t.promise},pull:e=>{var t=(0,u.createPromiseCapability)();return this.streamControllers[i].pullCall=t,l.postMessage({sourceName:s,targetName:o,stream:c.PULL,streamId:i,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,u.assert)(e instanceof Error,"cancel must have a valid reason");var t=(0,u.createPromiseCapability)();return this.streamControllers[i].cancelCall=t,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:c.CANCEL,streamId:i,reason:h(e)}),t.promise}},e)}_createStreamSink(t){const a=this,r=this.actionHandler[t.action],i=t.streamId,s=this.sourceName,o=t.sourceName,n=this.comObj,l={enqueue(e,t=1,r){var n;this.isCancelled||(n=this.desiredSize,this.desiredSize-=t,0<n&&this.desiredSize<=0&&(this.sinkCapability=(0,u.createPromiseCapability)(),this.ready=this.sinkCapability.promise),a._postMessage({sourceName:s,targetName:o,stream:c.ENQUEUE,streamId:i,chunk:e},r))},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:s,targetName:o,stream:c.CLOSE,streamId:i}),delete a.streamSinks[i])},error(e){(0,u.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:s,targetName:o,stream:c.ERROR,streamId:i,reason:h(e)}))},sinkCapability:(0,u.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[i]=l,new Promise(function(e){e(r(t.data,l))}).then(function(){n.postMessage({sourceName:s,targetName:o,stream:c.START_COMPLETE,streamId:i,success:!0})},function(e){n.postMessage({sourceName:s,targetName:o,stream:c.START_COMPLETE,streamId:i,reason:h(e)})})}_processStreamMessage(t){const r=t.streamId,n=this.sourceName,a=t.sourceName,i=this.comObj;switch(t.stream){case c.START_COMPLETE:t.success?this.streamControllers[r].startCall.resolve():this.streamControllers[r].startCall.reject(h(t.reason));break;case c.PULL_COMPLETE:t.success?this.streamControllers[r].pullCall.resolve():this.streamControllers[r].pullCall.reject(h(t.reason));break;case c.PULL:if(!this.streamSinks[r]){i.postMessage({sourceName:n,targetName:a,stream:c.PULL_COMPLETE,streamId:r,success:!0});break}this.streamSinks[r].desiredSize<=0&&0<t.desiredSize&&this.streamSinks[r].sinkCapability.resolve(),this.streamSinks[r].desiredSize=t.desiredSize;const{onPull:s}=this.streamSinks[t.streamId];new Promise(function(e){e(s&&s())}).then(function(){i.postMessage({sourceName:n,targetName:a,stream:c.PULL_COMPLETE,streamId:r,success:!0})},function(e){i.postMessage({sourceName:n,targetName:a,stream:c.PULL_COMPLETE,streamId:r,reason:h(e)})});break;case c.ENQUEUE:if((0,u.assert)(this.streamControllers[r],"enqueue should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].controller.enqueue(t.chunk);break;case c.CLOSE:if((0,u.assert)(this.streamControllers[r],"close should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].isClosed=!0,this.streamControllers[r].controller.close(),this._deleteStreamController(r);break;case c.ERROR:(0,u.assert)(this.streamControllers[r],"error should have stream controller"),this.streamControllers[r].controller.error(h(t.reason)),this._deleteStreamController(r);break;case c.CANCEL_COMPLETE:t.success?this.streamControllers[r].cancelCall.resolve():this.streamControllers[r].cancelCall.reject(h(t.reason)),this._deleteStreamController(r);break;case c.CANCEL:if(!this.streamSinks[r])break;const{onCancel:o}=this.streamSinks[t.streamId];new Promise(function(e){e(o&&o(h(t.reason)))}).then(function(){i.postMessage({sourceName:n,targetName:a,stream:c.CANCEL_COMPLETE,streamId:r,success:!0})},function(e){i.postMessage({sourceName:n,targetName:a,stream:c.CANCEL_COMPLETE,streamId:r,reason:h(e)})}),this.streamSinks[r].sinkCapability.reject(h(t.reason)),this.streamSinks[r].isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e){await Promise.allSettled([this.streamControllers[e].startCall,this.streamControllers[e].pullCall,this.streamControllers[e].cancelCall].map(function(e){return e&&e.promise})),delete this.streamControllers[e]}_postMessage(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=r(2),a=r(15);t.Metadata=class{constructor(e){(0,n.assert)("string"==typeof e,"Metadata: input is not a string"),e=this._repair(e);const t=new a.SimpleXMLParser;e=t.parseFromString(e);this._metadataMap=new Map,e&&this._parse(e)}_repair(e){return e.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(e,t){const r=t.replace(/\\([0-3])([0-7])([0-7])/g,function(e,t,r,n){return String.fromCharCode(64*t+8*r+ +n)}).replace(/&(amp|apos|gt|lt|quot);/g,function(e,t){switch(t){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${t} isn't defined.`)});let n="";for(let e=0,t=r.length;e<t;e+=2){var a=256*r.charCodeAt(e)+r.charCodeAt(e+1);n+=32<=a&&a<127&&60!==a&&62!==a&&38!==a?String.fromCharCode(a):"&#x"+(65536+a).toString(16).substring(1)+";"}return">"+n})}_parse(e){let t=e.documentElement;if("rdf:rdf"!==t.nodeName.toLowerCase())for(t=t.firstChild;t&&"rdf:rdf"!==t.nodeName.toLowerCase();)t=t.nextSibling;e=t?t.nodeName.toLowerCase():null;if(t&&"rdf:rdf"===e&&t.hasChildNodes()){var r=t.childNodes;for(let e=0,t=r.length;e<t;e++){const a=r[e];if("rdf:description"===a.nodeName.toLowerCase())for(let e=0,t=a.childNodes.length;e<t;e++)if("#text"!==a.childNodes[e].nodeName.toLowerCase()){const i=a.childNodes[e];var n=i.nodeName.toLowerCase();this._metadataMap.set(n,i.textContent.trim())}}}}get(e){return this._metadataMap.has(e)?this._metadataMap.get(e):null}getAll(){return Object.fromEntries(this._metadataMap)}has(e){return this._metadataMap.has(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=void 0;const s={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function o(e,t){t=e[t];return" "===t||"\n"===t||"\r"===t||"\t"===t}class a{constructor(e,t){this.nodeName=e,this.nodeValue=t,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const e=this.parentNode.childNodes;if(e){var t=e.indexOf(this);if(-1!==t)return e[t+1]}}get textContent(){return this.childNodes?this.childNodes.map(function(e){return e.textContent}).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&0<this.childNodes.length}}t.SimpleXMLParser=class extends class{_resolveEntities(e){return e.replace(/&([^;]+);/g,(e,t)=>{if("#x"===t.substring(0,2))return String.fromCharCode(parseInt(t.substring(2),16));if("#"===t.substring(0,1))return String.fromCharCode(parseInt(t.substring(1),10));switch(t){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(t)})}_parseContent(r,e){const n=[];let a=e;function i(){for(;a<r.length&&o(r,a);)++a}for(;a<r.length&&!o(r,a)&&">"!==r[a]&&"/"!==r[a];)++a;var t=r.substring(e,a);for(i();a<r.length&&">"!==r[a]&&"/"!==r[a]&&"?"!==r[a];){i();let e="",t;for(;a<r.length&&!o(r,a)&&"="!==r[a];)e+=r[a],++a;if(i(),"="!==r[a])return null;++a,i();var s=r[a];if('"'!==s&&"'"!==s)return null;s=r.indexOf(s,++a);if(s<0)return null;t=r.substring(a,s),n.push({name:e,value:this._resolveEntities(t)}),a=s+1,i()}return{name:t,attributes:n,parsed:a-e}}_parseProcessingInstruction(e,t){let r=t;for(;r<e.length&&!o(e,r)&&">"!==e[r]&&"/"!==e[r];)++r;var n=e.substring(t,r);!function(){for(;r<e.length&&o(e,r);)++r}();for(var a=r;r<e.length&&("?"!==e[r]||">"!==e[r+1]);)++r;return{name:n,value:e.substring(a,r),parsed:r-t}}parseXml(n){let e=0;for(;e<n.length;){var t=n[e];let r=e;if("<"===t){++r;let t;switch(n[r]){case"/":if(++r,t=n.indexOf(">",r),t<0)return void this.onError(s.UnterminatedElement);this.onEndElement(n.substring(r,t)),r=t+1;break;case"?":++r;var a=this._parseProcessingInstruction(n,r);if("?>"!==n.substring(r+a.parsed,r+a.parsed+2))return void this.onError(s.UnterminatedXmlDeclaration);this.onPi(a.name,a.value),r+=a.parsed+2;break;case"!":if("--"===n.substring(r+1,r+3)){if(t=n.indexOf("--\x3e",r+3),t<0)return void this.onError(s.UnterminatedComment);this.onComment(n.substring(r+3,t)),r=t+3}else if("[CDATA["===n.substring(r+1,r+8)){if(t=n.indexOf("]]>",r+8),t<0)return void this.onError(s.UnterminatedCdat);this.onCdata(n.substring(r+8,t)),r=t+3}else{if("DOCTYPE"!==n.substring(r+1,r+8))return void this.onError(s.MalformedElement);{var i=n.indexOf("[",r+8);let e=!1;if(t=n.indexOf(">",r+8),t<0)return void this.onError(s.UnterminatedDoctypeDeclaration);if(0<i&&t>i){if(t=n.indexOf("]>",r+8),t<0)return void this.onError(s.UnterminatedDoctypeDeclaration);e=!0}i=n.substring(r+8,t+(e?1:0));this.onDoctype(i),r=t+(e?2:1)}}break;default:i=this._parseContent(n,r);if(null===i)return void this.onError(s.MalformedElement);let e=!1;if("/>"===n.substring(r+i.parsed,r+i.parsed+2))e=!0;else if(">"!==n.substring(r+i.parsed,r+i.parsed+1))return void this.onError(s.UnterminatedElement);this.onBeginElement(i.name,i.attributes,e),r+=i.parsed+(e?2:1)}}else{for(;r<n.length&&"<"!==n[r];)r++;t=n.substring(e,r);this.onText(this._resolveEntities(t))}e=r}}onResolveEntity(e){return`&${e};`}onPi(e,t){}onComment(e){}onCdata(e){}onDoctype(e){}onText(e){}onBeginElement(e,t,r){}onEndElement(e){}onError(e){}}{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=s.NoError}parseFromString(e){if(this._currentFragment=[],this._stack=[],this._errorCode=s.NoError,this.parseXml(e),this._errorCode===s.NoError){var[e]=this._currentFragment;if(e)return{documentElement:e}}}onResolveEntity(e){return"apos"===e?"'":super.onResolveEntity(e)}onText(e){!function(r){for(let e=0,t=r.length;e<t;e++)if(!o(r,e))return;return 1}(e)&&(e=new a("#text",e),this._currentFragment.push(e))}onCdata(e){e=new a("#text",e);this._currentFragment.push(e)}onBeginElement(e,t,r){const n=new a(e);n.childNodes=[],this._currentFragment.push(n),r||(this._stack.push(this._currentFragment),this._currentFragment=n.childNodes)}onEndElement(e){this._currentFragment=this._stack.pop()||[];const r=this._currentFragment[this._currentFragment.length-1];if(r)for(let e=0,t=r.childNodes.length;e<t;e++)r.childNodes[e].parentNode=r}onError(e){this._errorCode=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=r(2);class s{constructor(e,t){this.visible=!0,this.name=e,this.intent=t}}t.OptionalContentConfig=class{constructor(e){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==e){this.name=e.name,this.creator=e.creator,this._order=e.order;for(const t of e.groups)this._groups.set(t.id,new s(t.name,t.intent));if("OFF"===e.baseState)for(const r of this._groups)r.visible=!1;for(const n of e.on)this._groups.get(n).visible=!0;for(const a of e.off)this._groups.get(a).visible=!1}}isVisible(e){if("OCG"===e.type)return this._groups.has(e.id)?this._groups.get(e.id).visible:((0,i.warn)(`Optional content group not found: ${e.id}`),!0);if("OCMD"!==e.type)return(0,i.warn)(`Unknown group type ${e.type}.`),!0;if(e.expression&&(0,i.warn)("Visibility expression not supported yet."),!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(this._groups.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const r of e.ids){if(!this._groups.has(r))return(0,i.warn)(`Optional content group not found: ${r}`),!0;if(!this._groups.get(r).visible)return!1}return!0}if("AnyOff"===e.policy){for(const n of e.ids){if(!this._groups.has(n))return(0,i.warn)(`Optional content group not found: ${n}`),!0;if(!this._groups.get(n).visible)return!0}return!1}if("AllOff"!==e.policy)return(0,i.warn)(`Unknown optional content policy ${e.policy}.`),!0;for(const a of e.ids){if(!this._groups.has(a))return(0,i.warn)(`Optional content group not found: ${a}`),!0;if(this._groups.get(a).visible)return!1}return!0}setVisibility(e,t=!0){this._groups.has(e)?this._groups.get(e).visible=!!t:(0,i.warn)(`Optional content group not found: ${e}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size?Object.fromEntries(this._groups):null}getGroup(e){return this._groups.get(e)||null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=r(2);t.PDFDataTransportStream=class{constructor(e,t){(0,n.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1;var r=e.initialData;r&&0<r.length&&(r=new Uint8Array(r).buffer,this._queuedChunks.push(r)),this._pdfDataRangeTransport=t,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),this._pdfDataRangeTransport.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),this._pdfDataRangeTransport.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const r=new Uint8Array(t.chunk).buffer;var e;void 0===t.begin?this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r):(e=this._rangeReaders.some(function(e){return e._begin===t.begin&&(e._enqueue(r),!0)}),(0,n.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."))}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(e){if(void 0===e.total){const t=this._rangeReaders[0];t&&t.onProgress&&t.onProgress({loaded:e.loaded})}else{const r=this._fullRequestReader;r&&r.onProgress&&r.onProgress({loaded:e.loaded,total:e.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){e=this._rangeReaders.indexOf(e);0<=e&&this._rangeReaders.splice(e,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var e=this._queuedChunks;return this._queuedChunks=null,new a(this,e,this._progressiveDone)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;var r=new i(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);const e=this._rangeReaders.slice(0);e.forEach(function(e){e.cancel(t)}),this._pdfDataRangeTransport.abort()}};class a{constructor(e,t,r=!1){this._stream=e,this._done=r||!1,this._filename=null,this._queuedChunks=t||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),(e._fullRequestReader=this).onProgress=null}_enqueue(e){if(!this._done){if(0<this._requests.length){const t=this._requests.shift();t.resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(0<this._queuedChunks.length)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};var e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class i{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{const t=this._requests.shift();t.resolve({value:e,done:!1}),this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[]}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){var e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var n=r(2);t.WebGLContext=class{constructor({enable:e=!1}){this._enabled=!0===e}get isEnabled(){let e=this._enabled;return e=e&&i.tryInitGL(),(0,n.shadow)(this,"isEnabled",e)}composeSMask({layer:e,mask:t,properties:r}){return i.composeSMask(e,t,r)}drawFigures({width:e,height:t,backgroundColor:r,figures:n,context:a}){return i.drawFigures(e,t,r,n,a)}clear(){i.cleanup()}};var k,R,l,u,c,E,T,O,i=(l="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",u="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",E="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",T="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",O=c=null,{tryInitGL(){try{return I(),!!k}catch(e){}return!1},composeSMask:function(e,t,r){var n=e.width,a=e.height;c||function(){var e;I(),i=R,e=k,k=R=null;var t=D(e,[L(e,l),F(e,u)]);e.useProgram(t);var r={};r.gl=e,r.canvas=i,r.resolutionLocation=e.getUniformLocation(t,"u_resolution"),r.positionLocation=e.getAttribLocation(t,"a_position"),r.backdropLocation=e.getUniformLocation(t,"u_backdrop"),r.subtypeLocation=e.getUniformLocation(t,"u_subtype");var n=e.getAttribLocation(t,"a_texCoord"),a=e.getUniformLocation(t,"u_image"),i=e.getUniformLocation(t,"u_mask"),t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.uniform1i(a,0),e.uniform1i(i,1),c=r}();var i=c,s=i.canvas,o=i.gl;return s.width=n,s.height=a,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.uniform2f(i.resolutionLocation,n,a),r.backdrop?o.uniform4f(i.resolutionLocation,r.backdrop[0],r.backdrop[1],r.backdrop[2],1):o.uniform4f(i.resolutionLocation,0,0,0,0),o.uniform1i(i.subtypeLocation,"Luminosity"===r.subtype?1:0),r=h(o,e,o.TEXTURE0),e=h(o,t,o.TEXTURE1),t=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,t),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,n,0,0,a,0,a,n,0,n,a]),o.STATIC_DRAW),o.enableVertexAttribArray(i.positionLocation),o.vertexAttribPointer(i.positionLocation,2,o.FLOAT,!1,0,0),o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.clear(o.COLOR_BUFFER_BIT),o.drawArrays(o.TRIANGLES,0,6),o.flush(),o.deleteTexture(r),o.deleteTexture(e),o.deleteBuffer(t),s},drawFigures:function(e,t,r,n,a){O||function(){var e,t;I(),e=R,t=k,k=R=null;var r=D(t,[L(t,E),F(t,T)]);t.useProgram(r);var n={};n.gl=t,n.canvas=e,n.resolutionLocation=t.getUniformLocation(r,"u_resolution"),n.scaleLocation=t.getUniformLocation(r,"u_scale"),n.offsetLocation=t.getUniformLocation(r,"u_offset"),n.positionLocation=t.getAttribLocation(r,"a_position"),n.colorLocation=t.getAttribLocation(r,"a_color"),O=n}();var i=O,s=i.canvas,o=i.gl;s.width=e,s.height=t,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.uniform2f(i.resolutionLocation,e,t);for(var l=0,u=0,c=n.length;u<c;u++)switch(n[u].type){case"lattice":l+=((A=n[u].coords.length/n[u].verticesPerRow|0)-1)*(n[u].verticesPerRow-1)*6;break;case"triangles":l+=n[u].coords.length}var h=new Float32Array(2*l),d=new Uint8Array(3*l),p=a.coords,f=a.colors,g=0,m=0;for(u=0,c=n.length;u<c;u++){var b=n[u],y=b.coords,v=b.colors;switch(b.type){case"lattice":for(var _=b.verticesPerRow,A=y.length/_|0,x=1;x<A;x++)for(var w=x*_+1,S=1;S<_;S++,w++)h[g]=p[y[w-_-1]],h[g+1]=p[y[w-_-1]+1],h[g+2]=p[y[w-_]],h[g+3]=p[y[w-_]+1],h[g+4]=p[y[w-1]],h[g+5]=p[y[w-1]+1],d[m]=f[v[w-_-1]],d[m+1]=f[v[w-_-1]+1],d[m+2]=f[v[w-_-1]+2],d[m+3]=f[v[w-_]],d[m+4]=f[v[w-_]+1],d[m+5]=f[v[w-_]+2],d[m+6]=f[v[w-1]],d[m+7]=f[v[w-1]+1],d[m+8]=f[v[w-1]+2],h[g+6]=h[g+2],h[g+7]=h[g+3],h[g+8]=h[g+4],h[g+9]=h[g+5],h[g+10]=p[y[w]],h[g+11]=p[y[w]+1],d[m+9]=d[m+3],d[m+10]=d[m+4],d[m+11]=d[m+5],d[m+12]=d[m+6],d[m+13]=d[m+7],d[m+14]=d[m+8],d[m+15]=f[v[w]],d[m+16]=f[v[w]+1],d[m+17]=f[v[w]+2],g+=12,m+=18;break;case"triangles":for(var C=0,P=y.length;C<P;C++)h[g]=p[y[C]],h[g+1]=p[y[C]+1],d[m]=f[v[C]],d[m+1]=f[v[C]+1],d[m+2]=f[v[C]+2],g+=2,m+=3}}return r?o.clearColor(r[0]/255,r[1]/255,r[2]/255,1):o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),t=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,t),o.bufferData(o.ARRAY_BUFFER,h,o.STATIC_DRAW),o.enableVertexAttribArray(i.positionLocation),o.vertexAttribPointer(i.positionLocation,2,o.FLOAT,!1,0,0),r=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,r),o.bufferData(o.ARRAY_BUFFER,d,o.STATIC_DRAW),o.enableVertexAttribArray(i.colorLocation),o.vertexAttribPointer(i.colorLocation,3,o.UNSIGNED_BYTE,!1,0,0),o.uniform2f(i.scaleLocation,a.scaleX,a.scaleY),o.uniform2f(i.offsetLocation,a.offsetX,a.offsetY),o.drawArrays(o.TRIANGLES,0,l),o.flush(),o.deleteBuffer(t),o.deleteBuffer(r),s},cleanup(){c&&c.canvas&&(c.canvas.width=0,c.canvas.height=0),O&&O.canvas&&(O.canvas.width=0,O.canvas.height=0),O=c=null}});function a(e,t,r){r=e.createShader(r);if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;r=e.getShaderInfoLog(r);throw new Error("Error during shader compilation: "+r)}function L(e,t){return a(e,t,e.VERTEX_SHADER)}function F(e,t){return a(e,t,e.FRAGMENT_SHADER)}function D(e,t){for(var r=e.createProgram(),n=0,a=t.length;n<a;++n)e.attachShader(r,t[n]);if(e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;var i=e.getProgramInfoLog(r);throw new Error("Error during program linking: "+i)}function h(e,t,r){e.activeTexture(r);r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),r}function I(){k||(R=document.createElement("canvas"),k=R.getContext("webgl",{premultipliedalpha:!1}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var u=r(1),c=r(2),s=r(8);class o{static create(e){switch(e.data.annotationType){case c.AnnotationType.LINK:return new a(e);case c.AnnotationType.TEXT:return new i(e);case c.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new h(e);case"Btn":return e.data.radioButton?new p(e):new(e.data.checkBox?d:f)(e);case"Ch":return new g(e)}return new l(e);case c.AnnotationType.POPUP:return new m(e);case c.AnnotationType.FREETEXT:return new y(e);case c.AnnotationType.LINE:return new v(e);case c.AnnotationType.SQUARE:return new _(e);case c.AnnotationType.CIRCLE:return new A(e);case c.AnnotationType.POLYLINE:return new x(e);case c.AnnotationType.CARET:return new S(e);case c.AnnotationType.INK:return new C(e);case c.AnnotationType.POLYGON:return new w(e);case c.AnnotationType.HIGHLIGHT:return new P(e);case c.AnnotationType.UNDERLINE:return new k(e);case c.AnnotationType.SQUIGGLY:return new R(e);case c.AnnotationType.STRIKEOUT:return new E(e);case c.AnnotationType.STAMP:return new T(e);case c.AnnotationType.FILEATTACHMENT:return new O(e);default:return new n(e)}}}class n{constructor(e,t=!1,r=!1){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderInteractiveForms=e.renderInteractiveForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,t&&(this.container=this._createContainer(r))}_createContainer(e=!1){const t=this.data,r=this.page,n=this.viewport,a=document.createElement("section");let i=t.rect[2]-t.rect[0],s=t.rect[3]-t.rect[1];a.setAttribute("data-annotation-id",t.id);var o=c.Util.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]);if(a.style.transform=`matrix(${n.transform.join(",")})`,a.style.transformOrigin=`-${o[0]}px -${o[1]}px`,!e&&0<t.borderStyle.width){a.style.borderWidth=`${t.borderStyle.width}px`,t.borderStyle.style!==c.AnnotationBorderStyleType.UNDERLINE&&(i-=2*t.borderStyle.width,s-=2*t.borderStyle.width);var l=t.borderStyle.horizontalCornerRadius,e=t.borderStyle.verticalCornerRadius;switch((0<l||0<e)&&(a.style.borderRadius=`${l}px / ${e}px`),t.borderStyle.style){case c.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case c.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case c.AnnotationBorderStyleType.BEVELED:(0,c.warn)("Unimplemented border style: beveled");break;case c.AnnotationBorderStyleType.INSET:(0,c.warn)("Unimplemented border style: inset");break;case c.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid"}t.color?a.style.borderColor=c.Util.makeCssRgb(0|t.color[0],0|t.color[1],0|t.color[2]):a.style.borderWidth=0}return a.style.left=`${o[0]}px`,a.style.top=`${o[1]}px`,a.style.width=`${i}px`,a.style.height=`${s}px`,a}_createPopup(e,t,r){t||((t=document.createElement("div")).style.height=e.style.height,t.style.width=e.style.width,e.appendChild(t));const n=new b({container:e,trigger:t,color:r.color,title:r.title,modificationDate:r.modificationDate,contents:r.contents,hideWrapper:!0}),a=n.render();a.style.left=e.style.width,e.appendChild(a)}render(){(0,c.unreachable)("Abstract method `AnnotationElement.render` called")}}class a extends n{constructor(e){super(e,!!(e.data.url||e.data.dest||e.data.action))}render(){this.container.className="linkAnnotation";var{data:e,linkService:t}=this,r=document.createElement("a");return e.url?(0,u.addLinkAttributes)(r,{url:e.url,target:e.newWindow?u.LinkTarget.BLANK:t.externalLinkTarget,rel:t.externalLinkRel,enabled:t.externalLinkEnabled}):e.action?this._bindNamedAction(r,e.action):this._bindLink(r,e.dest),this.container.appendChild(r),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.navigateTo(t),!1),t&&(e.className="internalLink")}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),e.className="internalLink"}}class i extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents))}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}}class l extends n{render(){return this.container}}class h extends l{constructor(e){super(e,e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue)}render(){const t=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";let n=null;if(this.renderInteractiveForms){var e=t.getOrCreateValue(r,this.data.fieldValue);this.data.multiLine?(n=document.createElement("textarea"),n.textContent=e):(n=document.createElement("input"),n.type="text",n.setAttribute("value",e)),n.addEventListener("input",function(e){t.setValue(r,e.target.value)}),n.disabled=this.data.readOnly,n.name=this.data.fieldName,null!==this.data.maxLen&&(n.maxLength=this.data.maxLen),this.data.comb&&(e=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen,n.classList.add("comb"),n.style.letterSpacing=`calc(${e}px - 1ch)`)}else{n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";let e=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(e=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(n,e)}return null!==this.data.textAlignment&&(n.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(n),this.container}_setTextStyle(t,r){const n=t.style;if(n.fontSize=`${this.data.fontSize}px`,n.direction=this.data.fontDirection<0?"rtl":"ltr",r){let e="normal";r.black?e="900":r.bold&&(e="bold"),n.fontWeight=e,n.fontStyle=r.italic?"italic":"normal";t=r.loadedName?`"${r.loadedName}", `:"",r=r.fallbackName||"Helvetica, sans-serif";n.fontFamily=t+r}}}class d extends l{constructor(e){super(e,e.renderInteractiveForms)}render(){const t=this.annotationStorage;var e=this.data;const r=e.id;var n=t.getOrCreateValue(r,e.fieldValue&&"Off"!==e.fieldValue);this.container.className="buttonWidgetAnnotation checkBox";const a=document.createElement("input");return a.disabled=e.readOnly,a.type="checkbox",a.name=this.data.fieldName,n&&a.setAttribute("checked",!0),a.addEventListener("change",function(e){t.setValue(r,e.target.checked)}),this.container.appendChild(a),this.container}}class p extends l{constructor(e){super(e,e.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const n=this.annotationStorage;var e=this.data;const a=e.id;var t=n.getOrCreateValue(a,e.fieldValue===e.buttonValue);const r=document.createElement("input");return r.disabled=e.readOnly,r.type="radio",r.name=e.fieldName,t&&r.setAttribute("checked",!0),r.addEventListener("change",function(e){var t=e.target.name;for(const r of document.getElementsByName(t))r!==e.target&&n.setValue(r.parentNode.getAttribute("data-annotation-id"),!1);n.setValue(a,e.target.checked)}),this.container.appendChild(r),this.container}}class f extends a{render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",e}}class g extends l{constructor(e){super(e,e.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,r=this.data.id;t.getOrCreateValue(r,0<this.data.fieldValue.length?this.data.fieldValue[0]:null);const e=document.createElement("select");e.disabled=this.data.readOnly,e.name=this.data.fieldName,this.data.combo||(e.size=this.data.options.length,this.data.multiSelect&&(e.multiple=!0));for(const n of this.data.options){const a=document.createElement("option");a.textContent=n.displayValue,a.value=n.exportValue,this.data.fieldValue.includes(n.exportValue)&&a.setAttribute("selected",!0),e.appendChild(a)}return e.addEventListener("input",function(e){e=e.target.options,e=e[e.selectedIndex].value;t.setValue(r,e)}),this.container.appendChild(e),this.container}}class m extends n{constructor(e){super(e,!(!e.data.title&&!e.data.contents))}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var e=`[data-annotation-id="${this.data.parentId}"]`,t=this.layer.querySelector(e);if(!t)return this.container;const r=new b({container:this.container,trigger:t,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents});var n=parseFloat(t.style.left),e=parseFloat(t.style.width);return this.container.style.transformOrigin=`-${n+e}px -${t.style.top}`,this.container.style.left=`${n+e}px`,this.container.appendChild(r.render()),this.container}}class b{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.title=e.title,this.modificationDate=e.modificationDate,this.contents=e.contents,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const e=document.createElement("div");e.className="popupWrapper",this.hideElement=this.hideWrapper?e:this.container,this.hideElement.setAttribute("hidden",!0);const t=document.createElement("div");t.className="popup";var r,n,a=this.color;a&&(r=.7*(255-a[0])+a[0],n=.7*(255-a[1])+a[1],o=.7*(255-a[2])+a[2],t.style.backgroundColor=c.Util.makeCssRgb(0|r,0|n,0|o));const i=document.createElement("h1");i.textContent=this.title,t.appendChild(i);const s=u.PDFDateString.toDateObject(this.modificationDate);if(s){const l=document.createElement("span");l.textContent="{{date}}, {{time}}",l.dataset.l10nId="annotation_date_string",l.dataset.l10nArgs=JSON.stringify({date:s.toLocaleDateString(),time:s.toLocaleTimeString()}),t.appendChild(l)}var o=this._formatContents(this.contents);return t.appendChild(o),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),t.addEventListener("click",this._hide.bind(this,!0)),e.appendChild(t),e}_formatContents(e){const r=document.createElement("p");var n=e.split(/(?:\r\n?|\n)/);for(let e=0,t=n.length;e<t;++e){var a=n[e];r.appendChild(document.createTextNode(a)),e<t-1&&r.appendChild(document.createElement("br"))}return r}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),--this.container.style.zIndex)}}class y extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class v extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){this.container.className="lineAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1];const n=this.svgFactory.create(t,r),a=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),n.appendChild(a),this.container.append(n),this._createPopup(this.container,a,e),this.container}}class _ extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){this.container.className="squareAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1];const n=this.svgFactory.create(t,r);var a=e.borderStyle.width;const i=this.svgFactory.createElement("svg:rect");return i.setAttribute("x",a/2),i.setAttribute("y",a/2),i.setAttribute("width",t-a),i.setAttribute("height",r-a),i.setAttribute("stroke-width",a||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),n.appendChild(i),this.container.append(n),this._createPopup(this.container,i,e),this.container}}class A extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){this.container.className="circleAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1];const n=this.svgFactory.create(t,r);var a=e.borderStyle.width;const i=this.svgFactory.createElement("svg:ellipse");return i.setAttribute("cx",t/2),i.setAttribute("cy",r/2),i.setAttribute("rx",t/2-a/2),i.setAttribute("ry",r/2-a/2),i.setAttribute("stroke-width",a||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),n.appendChild(i),this.container.append(n),this._createPopup(this.container,i,e),this.container}}class x extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;var e=this.data,t=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1];const n=this.svgFactory.create(t,r);let a=[];for(const l of e.vertices){var i=l.x-e.rect[0],s=e.rect[3]-l.y;a.push(i+","+s)}a=a.join(" ");const o=this.svgFactory.createElement(this.svgElementName);return o.setAttribute("points",a),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),n.appendChild(o),this.container.append(n),this._createPopup(this.container,o,e),this.container}}class w extends x{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class S extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class C extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;var t=this.data,e=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1];const n=this.svgFactory.create(e,r);for(const s of t.inkLists){let e=[];for(const l of s){var a=l.x-t.rect[0],i=t.rect[3]-l.y;e.push(`${a},${i}`)}e=e.join(" ");const o=this.svgFactory.createElement(this.svgElementName);o.setAttribute("points",e),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),this._createPopup(this.container,o,t),n.appendChild(o)}return this.container.append(n),this.container}}class P extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class k extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class R extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class E extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class T extends n{constructor(e){super(e,!!(e.data.hasPopup||e.data.title||e.data.contents),!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class O extends n{constructor(e){super(e,!0);var{filename:t,content:e}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(t),this.content=e,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,c.stringToPDFString)(t),filename:t,content:e})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,c.warn)("Download cannot be started due to unavailable download manager")}}t.AnnotationLayer=class{static render(e){const t=[],r=[];for(const n of e.annotations)n&&(n.annotationType!==c.AnnotationType.POPUP?t:r).push(n);r.length&&t.push(...r);for(const a of t){const i=o.create({data:a,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:"boolean"!=typeof e.renderInteractiveForms||e.renderInteractiveForms,svgFactory:new u.DOMSVGFactory,annotationStorage:e.annotationStorage||new s.AnnotationStorage});i.isRenderable&&e.div.appendChild(i.render())}}static update(e){for(const t of e.annotations){const r=e.div.querySelector(`[data-annotation-id="${t.id}"]`);r&&(r.style.transform=`matrix(${e.viewport.transform.join(",")})`)}e.div.removeAttribute("hidden")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=void 0;var f,g=r(2),r=(f=/\S/,n.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new g.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(r,n){for(let e=0,t=r.length;e<t;e++)this._textContentItemsStr.push(r[e].str),a(this,r[e],n)},_layoutText(t){const r=this._textDivProperties.get(t);if(!r.isWhitespace){let e="";var n,a;0!==r.canvasWidth&&({fontSize:n,fontFamily:a}=t.style,n===this._layoutTextLastFontSize&&a===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${n} ${a}`,this._layoutTextLastFontSize=n,this._layoutTextLastFontFamily=a),{width:a}=this._layoutTextCtx.measureText(t.textContent),0<a&&(r.scale=r.canvasWidth/a,e=`scaleX(${r.scale})`)),0!==r.angle&&(e=`rotate(${r.angle}deg) ${e}`),0<e.length&&(this._enhanceTextSelection&&(r.originalTransform=e),t.style.transform=e),this._textDivProperties.set(t,r),this._container.appendChild(t)}},_render:function(e){const r=(0,g.createPromiseCapability)();let n=Object.create(null);const t=this._document.createElement("canvas");if(t.mozOpaque=!0,this._layoutTextCtx=t.getContext("2d",{alpha:!1}),this._textContent){var a=this._textContent.items,i=this._textContent.styles;this._processItems(a,i),r.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const s=()=>{this._reader.read().then(({value:e,done:t})=>{t?r.resolve():(Object.assign(n,e.styles),this._processItems(e.items,n),s())},r.reject)};this._reader=this._textContentStream.getReader(),s()}}r.promise.then(()=>{n=null,e?this._renderTimer=setTimeout(()=>{o(this),this._renderTimer=null},e):o(this)},this._capability.reject)},expandTextDivs:function(e){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(l(this),this._bounds=null);const a=[],i=[];for(var t=0,r=this._textDivs.length;t<r;t++){const s=this._textDivs[t];var n=this._textDivProperties.get(s);n.isWhitespace||(e?(a.length=0,i.length=0,n.originalTransform&&a.push(n.originalTransform),0<n.paddingTop?(i.push(`${n.paddingTop}px`),a.push(`translateY(${-n.paddingTop}px)`)):i.push(0),0<n.paddingRight?i.push(`${n.paddingRight/n.scale}px`):i.push(0),0<n.paddingBottom?i.push(`${n.paddingBottom}px`):i.push(0),0<n.paddingLeft?(i.push(`${n.paddingLeft/n.scale}px`),a.push(`translateX(${-n.paddingLeft/n.scale}px)`)):i.push(0),s.style.padding=i.join(" "),a.length&&(s.style.transform=a.join(" "))):(s.style.padding=null,s.style.transform=n.originalTransform))}}}},function(e){var t=new n({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t});function a(e,t,r){var n=document.createElement("span"),a={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(e._textDivs.push(n),c=t.str,!f.test(c))return a.isWhitespace=!0,void e._textDivProperties.set(n,a);var i=g.Util.transform(e._viewport.transform,t.transform),s=Math.atan2(i[1],i[0]),o=r[t.fontName];o.vertical&&(s+=Math.PI/2);var l,u,c=Math.sqrt(i[2]*i[2]+i[3]*i[3]),r=c;o.ascent?r=o.ascent*r:o.descent&&(r=(1+o.descent)*r);let h,d;d=0===s?(h=i[4],i[5]-r):(h=i[4]+r*Math.sin(s),i[5]-r*Math.cos(s)),n.style.left=`${h}px`,n.style.top=`${d}px`,n.style.fontSize=`${c}px`,n.style.fontFamily=o.fontFamily,n.textContent=t.str,e._fontInspectorEnabled&&(n.dataset.fontName=t.fontName),0!==s&&(a.angle=s*(180/Math.PI));let p=!1;1<t.str.length?p=!0:t.transform[0]===t.transform[3]||(r=Math.abs(t.transform[0]))!==(u=Math.abs(t.transform[3]))&&1.5<Math.max(r,u)/Math.min(r,u)&&(p=!0),p&&(o.vertical?a.canvasWidth=t.height*e._viewport.scale:a.canvasWidth=t.width*e._viewport.scale),e._textDivProperties.set(n,a),e._textContentStream&&e._layoutText(n),e._enhanceTextSelection&&(u=1,(a=0)!==s&&(u=Math.cos(s),a=Math.sin(s)),t=(o.vertical?t.height:t.width)*e._viewport.scale,c=c,u=0!==s?(l=[u,a,-a,u,h,d],g.Util.getAxialAlignedBoundingBox([0,0,t,c],l)):[h,d,h+t,d+c],e._bounds.push({left:u[0],top:u[1],right:u[2],bottom:u[3],div:n,size:[t,c],m:l}))}function o(e){if(!e._canceled){var t=e._textDivs,r=e._capability,n=t.length;if(1e5<n)return e._renderingDone=!0,void r.resolve();if(!e._textContentStream)for(var a=0;a<n;a++)e._layoutText(t[a]);e._renderingDone=!0,r.resolve()}}function p(t,r,n){let a=0;for(let e=0;e<n;e++){var i=t[r++];0<i&&(a=a?Math.min(i,a):i)}return a}function l(e){for(var t=e._bounds,r=e._viewport,n=function(a,e,t){var i=t.map(function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}});m(a,i);var s=new Array(t.length);return i.forEach(function(e){var t=e.index;s[t]={left:e.x1New,top:0,right:e.x2New,bottom:0}}),t.map(function(e,t){var r=s[t],n=i[t];n.x1=e.top,n.y1=a-r.right,n.x2=e.bottom,n.y2=a-r.left,n.index=t,n.x1New=void 0,n.x2New=void 0}),m(e,i),i.forEach(function(e){var t=e.index;s[t].top=e.x1New,s[t].bottom=e.x2New}),s}(r.width,r.height,t),a=0;a<n.length;a++){var i,s,o,l,u,c,h=t[a].div,d=e._textDivProperties.get(h);0!==d.angle?(i=n[a],c=t[a],s=c.m,o=s[0],l=s[1],c=[[0,0],[0,c.size[1]],[c.size[0],0],c.size],u=new Float64Array(64),c.forEach(function(e,t){e=g.Util.applyTransform(e,s);u[t+0]=o&&(i.left-e[0])/o,u[t+4]=l&&(i.top-e[1])/l,u[t+8]=o&&(i.right-e[0])/o,u[t+12]=l&&(i.bottom-e[1])/l,u[t+16]=l&&(i.left-e[0])/-l,u[t+20]=o&&(i.top-e[1])/o,u[t+24]=l&&(i.right-e[0])/-l,u[t+28]=o&&(i.bottom-e[1])/o,u[t+32]=o&&(i.left-e[0])/-o,u[t+36]=l&&(i.top-e[1])/-l,u[t+40]=o&&(i.right-e[0])/-o,u[t+44]=l&&(i.bottom-e[1])/-l,u[t+48]=l&&(i.left-e[0])/l,u[t+52]=o&&(i.top-e[1])/-o,u[t+56]=l&&(i.right-e[0])/l,u[t+60]=o&&(i.bottom-e[1])/-o}),c=1+Math.min(Math.abs(o),Math.abs(l)),d.paddingLeft=p(u,32,16)/c,d.paddingTop=p(u,48,16)/c,d.paddingRight=p(u,0,16)/c,d.paddingBottom=p(u,16,16)/c,e._textDivProperties.set(h,d)):(d.paddingLeft=t[a].left-n[a].left,d.paddingTop=t[a].top-n[a].top,d.paddingRight=n[a].right-t[a].right,d.paddingBottom=n[a].bottom-t[a].bottom,e._textDivProperties.set(h,d))}}function m(t,e){e.sort(function(e,t){return e.x1-t.x1||e.index-t.index});var p=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];e.forEach(function(e){for(var t=0;t<p.length&&p[t].end<=e.y1;)t++;for(var r=p.length-1;0<=r&&p[r].start>=e.y2;)r--;for(var n=-1/0,a=t;a<=r;a++){var i,s,o=(s=(i=p[a]).boundary).x2>e.x1?s.index>e.index?s.x1New:e.x1:void 0===s.x2New?(s.x2+e.x1)/2:s.x2New;n<o&&(n=o)}for(e.x1New=n,a=t;a<=r;a++)void 0===(s=(i=p[a]).boundary).x2New?s.x2>e.x1?s.index>e.index&&(s.x2New=s.x2):s.x2New=n:s.x2New>n&&(s.x2New=Math.max(n,s.x2));var l=[],u=null;for(a=t;a<=r;a++){var c=(s=(i=p[a]).boundary).x2>e.x2?s:e;u===c?l[l.length-1].end=i.end:(l.push({start:i.start,end:i.end,boundary:c}),u=c)}for(p[t].start<e.y1&&(l[0].start=e.y1,l.unshift({start:p[t].start,end:e.y1,boundary:p[t].boundary})),e.y2<p[r].end&&(l[l.length-1].end=e.y2,l.push({start:e.y2,end:p[r].end,boundary:p[r].boundary})),a=t;a<=r;a++)if(void 0===(s=(i=p[a]).boundary).x2New){for(var h=!1,d=t-1;!h&&0<=d&&p[d].start>=s.y1;d--)h=p[d].boundary===s;for(d=r+1;!h&&d<p.length&&p[d].end<=s.y2;d++)h=p[d].boundary===s;for(d=0;!h&&d<l.length;d++)h=l[d].boundary===s;h||(s.x2New=n)}Array.prototype.splice.apply(p,[t,r-t+1].concat(l))}),p.forEach(function(e){e=e.boundary;void 0===e.x2New&&(e.x2New=Math.max(t,e.x2))})}function n({textContent:e,textContentStream:t,container:r,viewport:n,textDivs:a,textContentItemsStr:i,enhanceTextSelection:s}){this._textContent=e,this._textContentStream=t,this._container=r,this._document=r.ownerDocument,this._viewport=n,this._textDivs=a||[],this._textContentItemsStr=i||[],this._enhanceTextSelection=!!s,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,g.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}t.renderTextLayer=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var A=r(2),s=r(1),b=r(4);t.SVGGraphics=function(){throw new Error("Not implemented: SVGGraphics")};{const S={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},n=["butt","round","square"],l=["miter","round","bevel"],u=function(){const f=new Uint8Array([137,80,78,71,13,10,26,10]),s=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>1&2147483647:t>>1&2147483647;s[e]=t}function g(e,t,r,n){var a=n,i=t.length;r[a]=i>>24&255,r[a+1]=i>>16&255,r[a+2]=i>>8&255,r[a+3]=255&i,r[a+=4]=255&e.charCodeAt(0),r[a+1]=255&e.charCodeAt(1),r[a+2]=255&e.charCodeAt(2),r[a+3]=255&e.charCodeAt(3),r.set(t,a+=4);t=function(t,r,n){let a=-1;for(let e=r;e<n;e++){var i=255&(a^t[e]),i=s[i];a=a>>>8^i}return-1^a}(r,n+4,a+=t.length);r[a]=t>>24&255,r[a+1]=t>>16&255,r[a+2]=t>>8&255,r[a+3]=255&t}function m(e){let t=e.length;var r=65535,n=Math.ceil(t/r);const a=new Uint8Array(2+t+5*n+4);let i=0;a[i++]=120,a[i++]=156;let s=0;for(;t>r;)a[i++]=0,a[i++]=255,a[i++]=255,a[i++]=0,a[i++]=0,a.set(e.subarray(s,s+r),i),i+=r,s+=r,t-=r;a[i++]=1,a[i++]=255&t,a[i++]=t>>8&255,a[i++]=255&~t,a[i++]=(65535&~t)>>8&255,a.set(e.subarray(s),i),i+=e.length-s;n=function(t,r,n){let a=1,i=0;for(let e=r;e<n;++e)a=(a+(255&t[e]))%65521,i=(i+a)%65521;return i<<16|a}(e,0,e.length);return a[i++]=n>>24&255,a[i++]=n>>16&255,a[i++]=n>>8&255,a[i++]=255&n,a}function n(e,t,r,n){var a=e.width,i=e.height;let s,o,l;const u=e.data;switch(t){case A.ImageKind.GRAYSCALE_1BPP:o=0,s=1,l=a+7>>3;break;case A.ImageKind.RGB_24BPP:o=2,s=8,l=3*a;break;case A.ImageKind.RGBA_32BPP:o=6,s=8,l=4*a;break;default:throw new Error("invalid format")}const c=new Uint8Array((1+l)*i);let h=0,d=0;for(let e=0;e<i;++e)c[h++]=0,c.set(u.subarray(d,d+l),h),d+=l,h+=l;if(t===A.ImageKind.GRAYSCALE_1BPP&&n)for(let e=h=0;e<i;e++){h++;for(let e=0;e<l;e++)c[h++]^=255}e=new Uint8Array([a>>24&255,a>>16&255,a>>8&255,255&a,i>>24&255,i>>16&255,i>>8&255,255&i,s,o,0,0,0]),t=function(t){if(!b.isNodeJS)return m(t);try{let e;e=8<=parseInt(process.versions.node)?t:Buffer.from(t);var r=require("zlib").deflateSync(e,{level:9});return r instanceof Uint8Array?r:new Uint8Array(r)}catch(e){(0,A.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return m(t)}(c),n=f.length+36+e.length+t.length;const p=new Uint8Array(n);n=0;return p.set(f,0),n+=f.length,g("IHDR",e,p,n),n+=12+e.length,g("IDATA",t,p,n),n+=12+t.length,g("IEND",new Uint8Array(0),p,n),(0,A.createObjectURL)(p,"image/png",r)}return function(e,t,r){return n(e,void 0===e.kind?A.ImageKind.GRAYSCALE_1BPP:e.kind,t,r)}}();class a{constructor(){this.fontSizeScale=1,this.fontWeight=S.fontWeight,this.fontSize=0,this.textMatrix=A.IDENTITY_MATRIX,this.fontMatrix=A.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=A.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=S.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function x(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let r=t.length-1;if("0"!==t[r])return t;for(;r--,"0"===t[r];);return t.substring(0,"."===t[r]?r:r+1)}function w(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${x(e[0])} ${x(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2])return`rotate(${x(180*Math.acos(e[0])/Math.PI)})`}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${x(e[4])} ${x(e[5])})`;return`matrix(${x(e[0])} ${x(e[1])} ${x(e[2])} ${x(e[3])} ${x(e[4])} `+`${x(e[5])})`}let i=0,o=0,f=0;t.SVGGraphics=class{constructor(e,t,r=!1){this.svgFactory=new s.DOMSVGFactory,this.current=new a,this.transformMatrix=A.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r,this._operatorIdMapping=[];for(const n in A.OPS)this._operatorIdMapping[A.OPS[n]]=n}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){var r=e.fnArray,n=e.argsArray;for(let e=0,t=r.length;e<t;e++)if(r[e]===A.OPS.dependency)for(const i of n[e]){const s=i.startsWith("g_")?this.commonObjs:this.objs;var a=new Promise(e=>{s.get(i,e)});this.current.dependencies.push(a)}return Promise.all(this.current.dependencies)}transform(e,t,r,n,a,i){this.transformMatrix=A.Util.transform(this.transformMatrix,[e,t,r,n,a,i]),this.tgrp=null}getSVG(e,t){this.viewport=t;const r=this._initialize(t);return this.loadDependencies(e).then(()=>(this.transformMatrix=A.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),r))}convertOpList(e){var r=this._operatorIdMapping,n=e.argsArray,a=e.fnArray;const i=[];for(let e=0,t=a.length;e<t;e++){var s=a[e];i.push({fnId:s,fn:r[s],args:n[e]})}return function(e){let t=[];const r=[];for(const n of e)"save"!==n.fn?"restore"===n.fn?t=r.pop():t.push(n):(t.push({fnId:92,fn:"group",items:[]}),r.push(t),t=t[t.length-1].items);return t}(i)}executeOpTree(e){for(const a of e){var t=a.fn,r=a.fnId,n=a.args;switch(0|r){case A.OPS.beginText:this.beginText();break;case A.OPS.dependency:break;case A.OPS.setLeading:this.setLeading(n);break;case A.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case A.OPS.setFont:this.setFont(n);break;case A.OPS.showText:case A.OPS.showSpacedText:this.showText(n[0]);break;case A.OPS.endText:this.endText();break;case A.OPS.moveText:this.moveText(n[0],n[1]);break;case A.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case A.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case A.OPS.setHScale:this.setHScale(n[0]);break;case A.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case A.OPS.setTextRise:this.setTextRise(n[0]);break;case A.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case A.OPS.setLineWidth:this.setLineWidth(n[0]);break;case A.OPS.setLineJoin:this.setLineJoin(n[0]);break;case A.OPS.setLineCap:this.setLineCap(n[0]);break;case A.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case A.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case A.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case A.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case A.OPS.setFillColorN:this.setFillColorN(n);break;case A.OPS.shadingFill:this.shadingFill(n[0]);break;case A.OPS.setDash:this.setDash(n[0],n[1]);break;case A.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case A.OPS.setFlatness:this.setFlatness(n[0]);break;case A.OPS.setGState:this.setGState(n[0]);break;case A.OPS.fill:this.fill();break;case A.OPS.eoFill:this.eoFill();break;case A.OPS.stroke:this.stroke();break;case A.OPS.fillStroke:this.fillStroke();break;case A.OPS.eoFillStroke:this.eoFillStroke();break;case A.OPS.clip:this.clip("nonzero");break;case A.OPS.eoClip:this.clip("evenodd");break;case A.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case A.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case A.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case A.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case A.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]);break;case A.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case A.OPS.closePath:this.closePath();break;case A.OPS.closeStroke:this.closeStroke();break;case A.OPS.closeFillStroke:this.closeFillStroke();break;case A.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case A.OPS.nextLine:this.nextLine();break;case A.OPS.transform:this.transform(n[0],n[1],n[2],n[3],n[4],n[5]);break;case A.OPS.constructPath:this.constructPath(n[0],n[1]);break;case A.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,A.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,r,n,a,i){const s=this.current;s.textMatrix=s.lineMatrix=[e,t,r,n,a,i],s.textMatrixScale=Math.sqrt(e*e+t*t),s.x=s.lineX=0,s.y=s.lineY=0,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${x(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",x(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.appendChild(s.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=A.IDENTITY_MATRIX,e.lineMatrix=A.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const r=this.current;r.x=r.lineX+=e,r.y=r.lineY+=t,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${x(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",x(-r.y))}showText(t){const i=this.current;var s=i.font,r=i.fontSize;if(0!==r){var o=i.fontSizeScale,l=i.charSpacing,u=i.wordSpacing,c=i.fontDirection,n=i.textHScale*c,h=s.vertical,d=h?1:-1,p=s.defaultVMetrics,f=r*i.fontMatrix[0];let a=0;for(const _ of t)if(null!==_)if((0,A.isNum)(_))a+=d*_*r/1e3;else{var g,m,b,y=(_.isSpace?u:0)+l,v=_.fontChar;let e,t,r=_.width;t=h?(g=_.vmetric||p,m=-(m=_.vmetric?g[1]:.5*r)*f,b=g[2]*f,r=g?-g[0]:r,e=m/o,(a+b)/o):(e=a/o,0),(_.isInFont||s.missingFile)&&(i.xcoords.push(i.x+e),h&&i.ycoords.push(-i.y+t),i.tspan.textContent+=v);let n;n=h?r*f-y*c:r*f+y*c,a+=n}else a+=c*u;i.tspan.setAttributeNS(null,"x",i.xcoords.map(x).join(" ")),h?i.tspan.setAttributeNS(null,"y",i.ycoords.map(x).join(" ")):i.tspan.setAttributeNS(null,"y",x(-i.y)),h?i.y-=a:i.x+=a*n,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${x(i.fontSize)}px`),i.fontStyle!==S.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==S.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);t=i.textRenderingMode&A.TextRenderingMode.FILL_STROKE_MASK;t===A.TextRenderingMode.FILL||t===A.TextRenderingMode.FILL_STROKE?(i.fillColor!==S.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.textRenderingMode===A.TextRenderingMode.ADD_TO_PATH?i.tspan.setAttributeNS(null,"fill","transparent"):i.tspan.setAttributeNS(null,"fill","none"),t!==A.TextRenderingMode.STROKE&&t!==A.TextRenderingMode.FILL_STROKE||(t=1/(i.textMatrixScale||1),this._setStrokeAttributes(i.tspan,t));let e=i.textMatrix;0!==i.textRise&&(e=e.slice(),e[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${w(e)} scale(${x(n)}, -1)`),i.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var t=(0,A.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}";`+` src: url(${t}); }\n`}setFont(e){const t=this.current;var r=this.commonObjs.get(e[0]);let n=e[1];t.font=r,!this.embedFonts||r.missingFile||this.embeddedFonts[r.loadedName]||(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),t.fontMatrix=r.fontMatrix||A.FONT_IDENTITY_MATRIX;let a="normal";r.black?a="900":r.bold&&(a="bold");e=r.italic?"italic":"normal";n<0?(n=-n,t.fontDirection=-1):t.fontDirection=1,t.fontSize=n,t.fontFamily=r.loadedName,t.fontWeight=a,t.fontStyle=e,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",x(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){const e=this.current;e.textRenderingMode&A.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement&&e.txtElement.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){0<e&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=n[e]}setLineJoin(e){this.current.lineJoin=l[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,r){this.current.strokeColor=A.Util.makeCssRgb(e,t,r)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,r){this.current.fillColor=A.Util.makeCssRgb(e,t,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){var t=this.viewport.width,r=this.viewport.height,n=A.Util.inverseTransform(this.transformMatrix),a=A.Util.applyTransform([0,0],n),i=A.Util.applyTransform([0,r],n),s=A.Util.applyTransform([t,0],n),o=A.Util.applyTransform([t,r],n),t=Math.min(a[0],i[0],s[0],o[0]),r=Math.min(a[1],i[1],s[1],o[1]),n=Math.max(a[0],i[0],s[0],o[0]),o=Math.max(a[1],i[1],s[1],o[1]);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",r),l.setAttributeNS(null,"width",n-t),l.setAttributeNS(null,"height",o-r),l.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&l.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(l)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){var t=e[1],r=e[2],n=e[3]||A.IDENTITY_MATRIX,[a,i,s,o]=e[4],l=e[5],u=e[6],c=e[7],h=`shading${f++}`,[d,e]=A.Util.applyTransform([a,i],n),[a,i]=A.Util.applyTransform([s,o],n),[s,o]=A.Util.singularValueDecompose2dScale(n),l=l*s,s=u*o;const p=this.svgFactory.createElement("svg:pattern");p.setAttributeNS(null,"id",h),p.setAttributeNS(null,"patternUnits","userSpaceOnUse"),p.setAttributeNS(null,"width",l),p.setAttributeNS(null,"height",s),p.setAttributeNS(null,"x",`${d}`),p.setAttributeNS(null,"y",`${e}`);u=this.svg,o=this.transformMatrix,l=this.current.fillColor,s=this.current.strokeColor,e=this.svgFactory.create(a-d,i-e);return this.svg=e,this.transformMatrix=n,2===c&&(t=A.Util.makeCssRgb(...t),this.current.fillColor=t,this.current.strokeColor=t),this.executeOpTree(this.convertOpList(r)),this.svg=u,this.transformMatrix=o,this.current.fillColor=l,this.current.strokeColor=s,p.appendChild(e.childNodes[0]),this.defs.appendChild(p),`url(#${h})`}_makeShadingPattern(t){switch(t[0]){case"RadialAxial":var r=`shading${f++}`,n=t[3];let e;switch(t[1]){case"axial":var a=t[4],i=t[5];e=this.svgFactory.createElement("svg:linearGradient"),e.setAttributeNS(null,"id",r),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",a[0]),e.setAttributeNS(null,"y1",a[1]),e.setAttributeNS(null,"x2",i[0]),e.setAttributeNS(null,"y2",i[1]);break;case"radial":var s=t[4],o=t[5],a=t[6],i=t[7];e=this.svgFactory.createElement("svg:radialGradient"),e.setAttributeNS(null,"id",r),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"cx",o[0]),e.setAttributeNS(null,"cy",o[1]),e.setAttributeNS(null,"r",i),e.setAttributeNS(null,"fx",s[0]),e.setAttributeNS(null,"fy",s[1]),e.setAttributeNS(null,"fr",a);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const l of n){const u=this.svgFactory.createElement("svg:stop");u.setAttributeNS(null,"offset",l[0]),u.setAttributeNS(null,"stop-color",l[1]),e.appendChild(u)}return this.defs.appendChild(e),`url(#${r})`;case"Mesh":return(0,A.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const r=this.current;let n=r.x,a=r.y,i=[],s=0;for(const u of e)switch(0|u){case A.OPS.rectangle:n=t[s++],a=t[s++];var o=t[s++],l=t[s++],o=n+o,l=a+l;i.push("M",x(n),x(a),"L",x(o),x(a),"L",x(o),x(l),"L",x(n),x(l),"Z");break;case A.OPS.moveTo:n=t[s++],a=t[s++],i.push("M",x(n),x(a));break;case A.OPS.lineTo:n=t[s++],a=t[s++],i.push("L",x(n),x(a));break;case A.OPS.curveTo:n=t[s+4],a=t[s+5],i.push("C",x(t[s]),x(t[s+1]),x(t[s+2]),x(t[s+3]),x(n),x(a)),s+=6;break;case A.OPS.curveTo2:i.push("C",x(n),x(a),x(t[s]),x(t[s+1]),x(t[s+2]),x(t[s+3])),n=t[s+2],a=t[s+3],s+=4;break;case A.OPS.curveTo3:n=t[s+2],a=t[s+3],i.push("C",x(t[s]),x(t[s+1]),x(n),x(a),x(n),x(a)),s+=4;break;case A.OPS.closePath:i.push("Z")}i=i.join(" "),r.path&&0<e.length&&e[0]!==A.OPS.rectangle&&e[0]!==A.OPS.moveTo?i=r.path.getAttributeNS(null,"d")+i:(r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(r.path)),r.path.setAttributeNS(null,"d",i),r.path.setAttributeNS(null,"fill","none"),r.element=r.path,r.setCurrentPoint(n,a)}endPath(){const e=this.current;if(e.path=null,this.pendingClip)if(e.element){var t=`clippath${i++}`;const r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"transform",w(this.transformMatrix));const n=e.element.cloneNode(!0);"evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.appendChild(n),this.defs.appendChild(r),e.activeClipUrl&&(e.clipGroup=null,this.extraStack.forEach(function(e){e.clipGroup=null}),r.setAttributeNS(null,"clip-path",e.activeClipUrl)),e.activeClipUrl=`url(#${t})`,this.tgrp=null}else this.pendingClip=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;var t;e.path&&(t=`${e.path.getAttributeNS(null,"d")}Z`,e.path.setAttributeNS(null,"d",t))}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(var[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,A.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,t=1){var r=this.current;let n=r.dashArray;1!==t&&0<n.length&&(n=n.map(function(e){return t*e})),e.setAttributeNS(null,"stroke",r.strokeColor),e.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",x(r.miterLimit)),e.setAttributeNS(null,"stroke-linecap",r.lineCap),e.setAttributeNS(null,"stroke-linejoin",r.lineJoin),e.setAttributeNS(null,"stroke-width",x(t*r.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",n.map(x).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",x(t*r.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}paintImageXObject(e){var t=(e.startsWith("g_")?this.commonObjs:this.objs).get(e);t?this.paintInlineImageXObject(t):(0,A.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,t){var r=e.width,n=e.height,e=u(e,this.forceDataSchema,!!t);const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",x(r)),a.setAttributeNS(null,"height",x(n)),this.current.element=a,this.clip("nonzero");const i=this.svgFactory.createElement("svg:image");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y",x(-n)),i.setAttributeNS(null,"width",x(r)+"px"),i.setAttributeNS(null,"height",x(n)+"px"),i.setAttributeNS(null,"transform",`scale(${x(1/r)} ${x(-1/n)})`),(t||this._ensureTransformGroup()).appendChild(i)}paintImageMaskXObject(e){const t=this.current;var r=e.width,n=e.height,a=t.fillColor;t.maskId=`mask${o++}`;const i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",t.maskId);const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",x(r)),s.setAttributeNS(null,"height",x(n)),s.setAttributeNS(null,"fill",a),s.setAttributeNS(null,"mask",`url(#${t.maskId})`),this.defs.appendChild(i),this._ensureTransformGroup().appendChild(s),this.paintInlineImageXObject(e,i)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){var r=t[2]-t[0],e=t[3]-t[1];const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",t[0]),n.setAttributeNS(null,"y",t[1]),n.setAttributeNS(null,"width",x(r)),n.setAttributeNS(null,"height",x(e)),this.current.element=n,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height);var r=this.svgFactory.createElement("svg:defs");t.appendChild(r),this.defs=r;const n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",w(e.transform)),t.appendChild(n),this.svg=n,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",w(this.transformMatrix)),(this.current.activeClipUrl?this._ensureClipGroup():this.svg).appendChild(this.tgrp)),this.tgrp}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=r(2),a=r(23);const s=require("fs"),o=require("http"),l=require("https"),n=require("url"),u=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=n.parse(e);return"file:"===t.protocol||t.host?t:/^[a-z]:[/\\]/i.test(e)?n.parse(`file:///${e}`):(t.host||(t.protocol="file:"),t)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new(this.isFsUrl?g:p)(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;t=new(this.isFsUrl?m:f)(this,e,t);return this._rangeRequestReaders.push(t),t}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);const e=this._rangeRequestReaders.slice(0);e.forEach(function(e){e.cancel(t)})}};class c{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;e=e.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var e=this._readableStream.read();return null===e?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){(this._readableStream=e).on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)();e=e.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var e=this._readableStream.read();return null===e?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){(this._readableStream=e).on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class p extends c{constructor(n){super(n);var e=e=>{if(404===e.statusCode){var t=new i.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);var r=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:t,suggestedLength:e}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:n.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=t,this._contentLength=e||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(r)};this._request=null,"http:"===this._url.protocol?this._request=o.request(d(this._url,n.httpHeaders),e):this._request=l.request(d(this._url,n.httpHeaders),e),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class f extends h{constructor(e,t,r){super(e),this._httpHeaders={};for(const a in e.httpHeaders){var n=e.httpHeaders[a];void 0!==n&&(this._httpHeaders[a]=n)}this._httpHeaders.Range=`bytes=${t}-${r-1}`;r=e=>{404!==e.statusCode?this._setReadableStream(e):(e=new i.MissingPDFException(`Missing PDF "${this._url}".`),this._storedError=e)};this._request=null,"http:"===this._url.protocol?this._request=o.request(d(this._url,this._httpHeaders),r):this._request=l.request(d(this._url,this._httpHeaders),r),this._request.on("error",e=>{this._storedError=e}),this._request.end()}}class g extends c{constructor(e){super(e);let r=decodeURIComponent(this._url.path);u.test(this._url.href)&&(r=r.replace(/^\//,"")),s.lstat(r,(e,t)=>e?("ENOENT"===e.code&&(e=new i.MissingPDFException(`Missing PDF "${r}".`)),this._storedError=e,void this._headersCapability.reject(e)):(this._contentLength=t.size,this._setReadableStream(s.createReadStream(r)),void this._headersCapability.resolve()))}}class m extends h{constructor(e,t,r){super(e);let n=decodeURIComponent(this._url.path);u.test(this._url.href)&&(n=n.replace(/^\//,"")),this._setReadableStream(s.createReadStream(n,{start:t,end:r-1}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){if(404===e||0===e&&t.startsWith("file:"))return new s.MissingPDFException('Missing PDF "'+t+'".');return new s.UnexpectedResponseException("Unexpected server response ("+e+') while retrieving PDF "'+t+'".',e)},t.extractFilenameFromHeader=function(t){t=t("Content-Disposition");if(t){let e=(0,n.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if(/\.pdf$/i.test(e))return e}return null},t.validateRangeRequestCapabilities=function({getResponseHeader:e,isHttp:t,rangeChunkSize:r,disableRange:n}){(0,s.assert)(0<r,"Range chunk size must be larger than zero");const a={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(e("Content-Length"),10);if(!Number.isInteger(i))return a;if((a.suggestedLength=i)<=2*r)return a;if(n||!t)return a;if("bytes"!==e("Accept-Ranges"))return a;e=e("Content-Encoding")||"identity";return"identity"===e&&(a.allowRangeRequests=!0),a},t.validateResponseStatus=function(e){return 200===e||206===e};var s=r(2),n=r(24)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let a=!0,t=o("filename\\*","i").exec(e);if(t){t=t[1];var r=l(t);return n(r=s(r=u(r=unescape(r))))}if(t=function(e){const n=[];const t=o("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=t.exec(e));){var[,r,a,i]=i;if((r=parseInt(r,10))in n){if(0===r)break}else n[r]=[a,i]}const s=[];for(let r=0;r<n.length&&r in n;++r){let[e,t]=n[r];t=l(t),e&&(t=unescape(t),0===r&&(t=u(t))),s.push(t)}return s.join("")}(e),t)return n(s(t));if(t=o("filename","i").exec(e),t)return t=t[1],n(s(l(t)));function o(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function i(t,r){if(t){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const n=new TextDecoder(t,{fatal:!0});var e=Array.from(r,function(e){return 255&e.charCodeAt(0)});r=n.decode(new Uint8Array(e)),a=!1}catch(e){if(/^utf-?8$/i.test(t))try{r=decodeURIComponent(escape(r)),a=!1}catch(e){}}}return r}function n(e){return a&&/[\x80-\xff]/.test(e)&&(e=i("utf-8",e),a&&(e=i("iso-8859-1",e))),e}function l(e){if(e.startsWith('"')){const r=e.slice(1).split('\\"');for(let e=0;e<r.length;++e){var t=r[e].indexOf('"');-1!==t&&(r[e]=r[e].slice(0,t),r.length=e+1),r[e]=r[e].replace(/\\(.)/g,"$1")}e=r.join('"')}return e}function u(e){var t=e.indexOf("'");if(-1===t)return e;var r=e.slice(0,t);const n=e.slice(t+1);return i(r,n.replace(/^[^']*'/,""))}function s(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,r,n){if("q"===r||"Q"===r)return i(t,n=(n=n.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{n=atob(n)}catch(e){}return i(t,n)})}return""}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=r(2),s=r(23);class n{constructor(e,t){this.url=e,t=t||{},this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this.withCredentials=t.withCredentials||!1,this.getXhr=t.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const n={begin:e,end:t};for(const a in r)n[a]=r[a];return this.request(n)}requestFull(e){return this.request(e)}request(t){const r=this.getXhr();var e=this.currXhrId++;const n=this.pendingRequests[e]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const i in this.httpHeaders){var a=this.httpHeaders[i];void 0!==a&&r.setRequestHeader(i,a)}return this.isHttp&&"begin"in t&&"end"in t?(r.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=206):n.expectedStatus=200,r.responseType="arraybuffer",t.onError&&(r.onerror=function(e){t.onError(r.status)}),r.onreadystatechange=this.onStateChange.bind(this,e),r.onprogress=this.onProgress.bind(this,e),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,r.send(null),e}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress&&r.onProgress(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(r){const a=r.xhr;var n;2<=a.readyState&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4===a.readyState&&e in this.pendingRequests&&(delete this.pendingRequests[e],(0!==a.status||!this.isHttp)&&(200===(n=a.status||200)&&206===r.expectedStatus||n===r.expectedStatus)?(e="string"!=typeof(e=(e=a).response)?e:(0,i.stringToBytes)(e).buffer,206===n?(n=a.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(n),r.onDone({begin:parseInt(n[1],10),chunk:e})):e?r.onDone({begin:0,chunk:e}):r.onError&&r.onError(a.status)):r.onError&&r.onError(a.status))}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new n(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){e=this._rangeRequestReaders.indexOf(e);0<=e&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new o(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);const e=this._rangeRequestReaders.slice(0);e.forEach(function(e){e.cancel(t)})}};class a{constructor(e,t){this._manager=e;var r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){var e=this._fullRequestId;const t=this._manager.getRequestXhr(e);var r=e=>t.getResponseHeader(e),{allowRangeRequests:n,suggestedLength:a}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e)if(0<this._requests.length){const t=this._requests.shift();t.resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);this._done=!0,0<this._cachedChunks.length||(this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[])}_onError(e){var t=this._url;const r=(0,s.createResponseStatusError)(e,t);this._storedError=r,this._headersReceivedCapability.reject(r),this._requests.forEach(function(e){e.reject(r)}),this._requests=[],this._cachedChunks=[]}_onProgress(e){this.onProgress&&this.onProgress({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(0<this._cachedChunks.length)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};var e=(0,i.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e),this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class o{constructor(e,t,r){this._manager=e;var n={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=e.requestRange(t,r,n),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(e){e=e.chunk;if(0<this._requests.length){const t=this._requests.shift();t.resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0,this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[],this._close()}_onProgress(e){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(null!==this._queuedChunk){var e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};e=(0,i.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._requests.forEach(function(e){e.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=r(2),s=r(23);function o(e,t,r){return{method:"GET",headers:e,signal:r&&r.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function l(e){const t=new Headers;for(const n in e){var r=e[n];void 0!==r&&t.append(n,r)}return t}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new n(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;t=new a(this,e,t);return this._rangeRequestReaders.push(t),t}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);const e=this._rangeRequestReaders.slice(0);e.forEach(function(e){e.cancel(t)})}};class n{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;e=e.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=l(this._stream.httpHeaders);const a=e.url;fetch(a,o(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,s.validateResponseStatus)(t.status))throw(0,s.createResponseStatusError)(t.status,a);this._reader=t.body.getReader(),this._headersCapability.resolve();var e=e=>t.headers.get(e),{allowRangeRequests:r,suggestedLength:n}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=n||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;var{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}class a{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;e=e.source;this._withCredentials=e.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!e.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=l(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${r-1}`);const n=e.url;fetch(n,o(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,s.validateResponseStatus)(e.status))throw(0,s.createResponseStatusError)(e.status,n);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(e=>{if(!e||"AbortError"!==e.name)throw e}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;var{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}}],mk={},nk.m=lk,nk.c=mk,nk.d=function(e,t,r){nk.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},nk.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},nk.t=function(t,e){if(1&e&&(t=nk(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(nk.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)nk.d(r,n,function(e){return t[e]}.bind(null,n));return r},nk.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return nk.d(t,"a",t),t},nk.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},nk.p="",nk(nk.s=0);function nk(e){if(mk[e])return mk[e].exports;var t=mk[e]={i:e,l:!1,exports:{}};return lk[e].call(t.exports,t,t.exports,nk),t.l=!0,t.exports}var lk,mk},"object"==typeof exports&&"object"==typeof module?module.exports=kk():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],kk):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=kk():jk["pdfjs-dist/build/pdf"]=jk.pdfjsLib=kk()}.call(this)}.call(this,require("_process"),require("buffer").Buffer)},{_process:40,buffer:33,canvas:32,fs:32,http:32,https:32,url:32,zlib:32}],40:[function(e,t,r){var n,a,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=o(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||c||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],41:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=a(e("@babel/runtime/helpers/extends")),o=a(e("@babel/runtime/helpers/objectWithoutProperties")),l=a(e("@babel/runtime/helpers/typeof")),u=a(e("@babel/runtime/regenerator")),c=a(e("@babel/runtime/helpers/asyncToGenerator")),h=a(e("@babel/runtime/helpers/classCallCheck")),s=a(e("@babel/runtime/helpers/createClass")),d=a(e("@babel/runtime/helpers/assertThisInitialized")),p=a(e("@babel/runtime/helpers/inherits")),f=a(e("@babel/runtime/helpers/possibleConstructorReturn")),g=a(e("@babel/runtime/helpers/getPrototypeOf")),m=a(e("@babel/runtime/helpers/defineProperty")),b=n(e("react")),y=a(e("prop-types")),v=a(e("make-event-props")),_=a(e("make-cancellable-promise")),A=a(e("merge-class-names")),x=n(e("pdfjs-dist")),w=a(e("./DocumentContext")),S=a(e("./Message")),C=a(e("./LinkService")),P=a(e("./PasswordResponses")),k=e("./shared/utils"),a=e("./shared/propTypes");function R(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach(function(e){(0,m.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function T(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,g.default)(r);return t=n?(e=(0,g.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,f.default)(this,t)}}var O=x.PDFDataRangeTransport,e=function(e){(0,p.default)(a,e);var n=T(a);function a(){var s;(0,h.default)(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s=n.call.apply(n,[this].concat(t)),(0,m.default)((0,d.default)(s),"state",{pdf:null}),(0,m.default)((0,d.default)(s),"viewer",{scrollPageIntoView:function(e){var t=e.pageNumber,e=s.props.onItemClick;e?e({pageNumber:t}):(e=s.pages[t-1])?e.scrollIntoView():(0,k.warnOnDev)("Warning: An internal link leading to page ".concat(t," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}),(0,m.default)((0,d.default)(s),"linkService",new C.default),(0,m.default)((0,d.default)(s),"loadDocument",(0,c.default)(u.default.mark(function e(){var t,r,n,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,s.findDocumentSource();case 4:t=e.sent,s.onSourceSuccess(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s.onSourceError(e.t0);case 11:if(t){e.next=13;break}return e.abrupt("return");case 13:return s.setState(function(e){return e.pdf?{pdf:null}:null}),n=s.props,r=n.options,a=n.onLoadProgress,n=n.onPassword,e.prev=15,(0,k.cancelRunningTask)(s.runningTask),s.loadingTask&&s.loadingTask.destroy(),s.loadingTask=x.getDocument(E(E({},t),r)),s.loadingTask.onPassword=n,a&&(s.loadingTask.onProgress=a),a=(0,_.default)(s.loadingTask.promise),s.runningTask=a,e.next=25,a.promise;case 25:i=e.sent,s.setState(function(e){return e.pdf&&e.pdf.fingerprint===i.fingerprint?null:{pdf:i}},s.onLoadSuccess),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(15),s.onLoadError(e.t1);case 32:case"end":return e.stop()}},e,null,[[1,8],[15,29]])}))),(0,m.default)((0,d.default)(s),"setupLinkService",function(){s.linkService.setViewer(s.viewer);var e=(0,d.default)(s);Object.defineProperty(s.linkService,"externalLinkTarget",{get:function(){switch(e.props.externalLinkTarget){case"_self":return 1;case"_blank":return 2;case"_parent":return 3;case"_top":return 4;default:return 0}}})}),(0,m.default)((0,d.default)(s),"onSourceSuccess",function(){var e=s.props.onSourceSuccess;e&&e()}),(0,m.default)((0,d.default)(s),"onSourceError",function(e){(0,k.errorOnDev)(e);var t=s.props.onSourceError;t&&t(e)}),(0,m.default)((0,d.default)(s),"onLoadSuccess",function(){var e=s.props.onLoadSuccess,t=s.state.pdf;e&&e(t),s.pages=new Array(t.numPages),s.linkService.setDocument(t)}),(0,m.default)((0,d.default)(s),"onLoadError",function(e){s.setState({pdf:!1}),(0,k.errorOnDev)(e);var t=s.props.onLoadError;t&&t(e)}),(0,m.default)((0,d.default)(s),"findDocumentSource",(0,c.default)(u.default.mark(function e(){var t,r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.props.file){e.next=3;break}return e.abrupt("return",null);case 3:if("string"!=typeof t){e.next=9;break}if((0,k.isDataURI)(t))return r=(0,k.dataURItoByteString)(t),e.abrupt("return",{data:r});e.next=7;break;case 7:return(0,k.displayCORSWarning)(),e.abrupt("return",{url:t});case 9:if(t instanceof O)return e.abrupt("return",{range:t});e.next=11;break;case 11:if((0,k.isArrayBuffer)(t))return e.abrupt("return",{data:t});e.next=13;break;case 13:if(!k.isBrowser){e.next=19;break}if((0,k.isBlob)(t)||(0,k.isFile)(t))return e.next=17,(0,k.loadFromFile)(t);e.next=19;break;case 17:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 19:if("object"!==(0,l.default)(t))throw new Error("Invalid parameter in file, need either Uint8Array, string or a parameter object");e.next=21;break;case 21:if(t.url||t.data||t.range){e.next=23;break}throw new Error("Invalid parameter object: need either .data, .range or .url");case 23:if("string"!=typeof t.url){e.next=29;break}if((0,k.isDataURI)(t.url))return n=t.url,r=(0,o.default)(t,["url"]),n=(0,k.dataURItoByteString)(n),e.abrupt("return",E({data:n},r));e.next=28;break;case 28:(0,k.displayCORSWarning)();case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(s),"registerPage",function(e,t){s.pages[e]=t}),(0,m.default)((0,d.default)(s),"unregisterPage",function(e){delete s.pages[e]}),s}return(0,s.default)(a,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(e){this.props.file!==e.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){(0,k.cancelRunningTask)(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"renderChildren",value:function(){var e=this.props.children;return b.default.createElement(w.default.Provider,{value:this.childContext},e)}},{key:"renderContent",value:function(){var e=this.props.file,t=this.state.pdf;if(!e){var r=this.props.noData;return b.default.createElement(S.default,{type:"no-data"},"function"==typeof r?r():r)}if(null===t){r=this.props.loading;return b.default.createElement(S.default,{type:"loading"},"function"==typeof r?r():r)}if(!1!==t)return this.renderChildren();t=this.props.error;return b.default.createElement(S.default,{type:"error"},"function"==typeof t?t():t)}},{key:"render",value:function(){var e=this.props,t=e.className,e=e.inputRef;return b.default.createElement("div",(0,i.default)({className:(0,A.default)("react-pdf__Document",t),ref:e},this.eventProps),this.renderContent())}},{key:"childContext",get:function(){var e=this.linkService,t=this.registerPage,r=this.unregisterPage,n=this.props,a=n.imageResourcesPath,i=n.renderMode,n=n.rotate;return{imageResourcesPath:a,linkService:e,pdf:this.state.pdf,registerPage:t,renderMode:i,rotate:n,unregisterPage:r}}},{key:"eventProps",get:function(){var e=this;return(0,v.default)(this.props,function(){return e.state.pdf})}}]),a}(b.PureComponent);(r.default=e).defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF…",noData:"No PDF file specified.",onPassword:function(e,t){switch(t){case P.default.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case P.default.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."))}}};r=y.default.oneOfType([y.default.func,y.default.node]);e.propTypes=E(E({},a.eventProps),{},{children:y.default.node,className:a.isClassName,error:r,file:a.isFile,imageResourcesPath:y.default.string,inputRef:a.isRef,loading:r,noData:r,onItemClick:y.default.func,onLoadError:y.default.func,onLoadProgress:y.default.func,onLoadSuccess:y.default.func,onPassword:y.default.func,onSourceError:y.default.func,onSourceSuccess:y.default.func,rotate:y.default.number})},{"./DocumentContext":42,"./LinkService":43,"./Message":44,"./PasswordResponses":55,"./shared/propTypes":58,"./shared/utils":59,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/objectWithoutProperties":22,"@babel/runtime/helpers/possibleConstructorReturn":24,"@babel/runtime/helpers/typeof":28,"@babel/runtime/regenerator":30,"make-cancellable-promise":35,"make-event-props":36,"merge-class-names":37,"pdfjs-dist":39,"prop-types":"prop-types",react:"react"}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=e("react");r.default=(0,e.createContext)(null)},{react:"react"}],43:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),s=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),e=function(){function e(){(0,s.default)(this,e),this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0}var t;return(0,o.default)(e,[{key:"setDocument",value:function(e){this.pdfDocument=e}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setHistory",value:function(){}},{key:"goToDestination",value:(t=(0,i.default)(a.default.mark(function e(t){var r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t[0])instanceof Object)return e.prev=2,e.next=5,this.pdfDocument.getPageIndex(r);e.next=14;break;case 5:n=e.sent,n=n+1,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),new Error('"'.concat(r,'" is not a valid destination reference.'));case 12:e.next=19;break;case 14:if("number"!=typeof r){e.next=18;break}n=r+1,e.next=19;break;case 18:throw new Error('"'.concat(r,'" is not a valid destination reference.'));case 19:if(!n||n<1||n>this.pagesCount)throw new Error('"'.concat(n,'" is not a valid page number.'));e.next=21;break;case 21:this.pdfViewer.scrollPageIntoView({pageNumber:n});case 22:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return t.apply(this,arguments)})},{key:"navigateTo",value:function(e){this.goToDestination(e)}},{key:"goToPage",value:function(){}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return 0},set:function(e){}}]),e}();r.default=e},{"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/regenerator":30}],44:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var a=n(e("react")),e=n(e("prop-types"));function i(e){var t=e.children,e=e.type;return a.default.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(e)},t)}i.propTypes={children:e.default.node,type:e.default.oneOf(["error","loading","no-data"]).isRequired}},{"@babel/runtime/helpers/interopRequireDefault":16,"prop-types":"prop-types",react:"react"}],45:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.OutlineInternal=void 0;var s=a(e("@babel/runtime/helpers/extends")),o=a(e("@babel/runtime/regenerator")),l=a(e("@babel/runtime/helpers/asyncToGenerator")),u=a(e("@babel/runtime/helpers/classCallCheck")),c=a(e("@babel/runtime/helpers/createClass")),h=a(e("@babel/runtime/helpers/assertThisInitialized")),d=a(e("@babel/runtime/helpers/inherits")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),p=a(e("@babel/runtime/helpers/getPrototypeOf")),f=a(e("@babel/runtime/helpers/defineProperty")),g=n(e("react")),n=a(e("prop-types")),m=a(e("make-cancellable-promise")),b=a(e("make-event-props")),y=a(e("merge-class-names")),v=a(e("./DocumentContext")),_=a(e("./OutlineContext")),A=a(e("./OutlineItem")),x=e("./shared/utils"),e=e("./shared/propTypes");function w(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function S(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(r);return t=n?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,t)}}var C=function(e){(0,d.default)(i,e);var a=S(i);function i(){var n;(0,u.default)(this,i);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=a.call.apply(a,[this].concat(t)),(0,f.default)((0,h.default)(n),"state",{outline:null}),(0,f.default)((0,h.default)(n),"loadOutline",(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.pdf,n.setState(function(e){return e.outline?{outline:null}:null}),e.prev=2,t=(0,m.default)(t.getOutline()),n.runningTask=t,e.next=7,t.promise;case 7:t=e.sent,n.setState({outline:t},n.onLoadSuccess),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.onLoadError(e.t0);case 14:case"end":return e.stop()}},e,null,[[2,11]])}))),(0,f.default)((0,h.default)(n),"onLoadSuccess",function(){var e=n.props.onLoadSuccess,t=n.state.outline;e&&e(t)}),(0,f.default)((0,h.default)(n),"onLoadError",function(e){n.setState({outline:!1}),(0,x.errorOnDev)(e);var t=n.props.onLoadError;t&&t(e)}),(0,f.default)((0,h.default)(n),"onItemClick",function(e){var t=e.pageIndex,r=e.pageNumber,e=n.props.onItemClick;e&&e({pageIndex:t,pageNumber:r})}),n}return(0,c.default)(i,[{key:"componentDidMount",value:function(){if(!this.props.pdf)throw new Error("Attempted to load an outline, but no document was specified.");this.loadOutline()}},{key:"componentDidUpdate",value:function(e){var t=this.props.pdf;e.pdf&&t!==e.pdf&&this.loadOutline()}},{key:"componentWillUnmount",value:function(){(0,x.cancelRunningTask)(this.runningTask)}},{key:"renderOutline",value:function(){var e=this.state.outline;return g.default.createElement("ul",null,e.map(function(e,t){return g.default.createElement(A.default,{key:"string"==typeof e.destination?e.destination:t,item:e})}))}},{key:"render",value:function(){var e=this.props.pdf,t=this.state.outline;if(!e||!t)return null;e=this.props,t=e.className,e=e.inputRef;return g.default.createElement("div",(0,s.default)({className:(0,y.default)("react-pdf__Outline",t),ref:e},this.eventProps),g.default.createElement(_.default.Provider,{value:this.childContext},this.renderOutline()))}},{key:"childContext",get:function(){return{onClick:this.onItemClick}}},{key:"eventProps",get:function(){var e=this;return(0,b.default)(this.props,function(){return e.state.outline})}}]),i}(g.PureComponent);function P(t,r){return g.default.createElement(v.default.Consumer,null,function(e){return g.default.createElement(C,(0,s.default)({ref:r},e,t))})}(r.OutlineInternal=C).propTypes=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach(function(e){(0,f.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({className:e.isClassName,inputRef:e.isRef,onItemClick:n.default.func,onLoadError:n.default.func,onLoadSuccess:n.default.func,pdf:e.isPdf},e.eventProps),r.default=g.default.forwardRef(P)},{"./DocumentContext":42,"./OutlineContext":46,"./OutlineItem":47,"./shared/propTypes":58,"./shared/utils":59,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/possibleConstructorReturn":24,"@babel/runtime/regenerator":30,"make-cancellable-promise":35,"make-event-props":36,"merge-class-names":37,"prop-types":"prop-types",react:"react"}],46:[function(e,t,r){arguments[4][42][0].apply(r,arguments)},{dup:42,react:"react"}],47:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.OutlineItemInternal=void 0;var i=a(e("@babel/runtime/helpers/extends")),s=a(e("@babel/runtime/helpers/objectWithoutProperties")),o=a(e("@babel/runtime/helpers/slicedToArray")),l=a(e("@babel/runtime/regenerator")),u=a(e("@babel/runtime/helpers/asyncToGenerator")),c=a(e("@babel/runtime/helpers/classCallCheck")),h=a(e("@babel/runtime/helpers/createClass")),d=a(e("@babel/runtime/helpers/assertThisInitialized")),p=a(e("@babel/runtime/helpers/inherits")),f=a(e("@babel/runtime/helpers/possibleConstructorReturn")),g=a(e("@babel/runtime/helpers/getPrototypeOf")),m=a(e("@babel/runtime/helpers/defineProperty")),b=n(e("react")),n=a(e("prop-types")),y=a(e("./DocumentContext")),v=a(e("./OutlineContext")),_=a(e("./Ref")),A=e("./shared/utils"),a=e("./shared/propTypes");function x(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,g.default)(r);return t=n?(e=(0,g.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,f.default)(this,t)}}var w=function(e){(0,p.default)(a,e);var n=x(a);function a(){var i;(0,c.default)(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i=n.call.apply(n,[this].concat(t)),(0,m.default)((0,d.default)(i),"getDestination",(0,u.default)(l.default.mark(function e(){var t,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.props,t=r.item,r=r.pdf,(0,A.isDefined)(i.destination)){e.next=9;break}if("string"==typeof t.dest)return e.next=5,r.getDestination(t.dest);e.next=8;break;case 5:i.destination=e.sent,e.next=9;break;case 8:i.destination=t.dest;case 9:return e.abrupt("return",i.destination);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(i),"getPageIndex",(0,u.default)(l.default.mark(function e(){var t,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.props.pdf,(0,A.isDefined)(i.pageIndex)){e.next=10;break}return e.next=4,i.getDestination();case 4:if(r=e.sent)return r=(0,o.default)(r,1),r=r[0],e.next=9,t.getPageIndex(new _.default(r));e.next=10;break;case 9:i.pageIndex=e.sent;case 10:return e.abrupt("return",i.pageIndex);case 11:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(i),"getPageNumber",(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,A.isDefined)(i.pageNumber)){e.next=5;break}return e.next=3,i.getPageIndex();case 3:e.t0=e.sent,i.pageNumber=e.t0+1;case 5:return e.abrupt("return",i.pageNumber);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(i),"onClick",function(){var t=(0,u.default)(l.default.mark(function e(t){var r,n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.props.onClick,t.preventDefault(),e.next=4,i.getPageIndex();case 4:return n=e.sent,e.next=7,i.getPageNumber();case 7:a=e.sent,r&&r({pageIndex:n,pageNumber:a});case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),i}return(0,h.default)(a,[{key:"renderSubitems",value:function(){var e=this.props,t=e.item,r=(0,s.default)(e,["item"]);if(!t.items||!t.items.length)return null;t=t.items;return b.default.createElement("ul",null,t.map(function(e,t){return b.default.createElement(a,(0,i.default)({key:"string"==typeof e.destination?e.destination:t,item:e},r))}))}},{key:"render",value:function(){var e=this.props.item;return b.default.createElement("li",null,b.default.createElement("a",{href:"#",onClick:this.onClick},e.title),this.renderSubitems())}}]),a}(b.PureComponent);r.OutlineItemInternal=w;e=n.default.oneOfType([n.default.string,n.default.arrayOf(n.default.any)]);w.propTypes={item:n.default.shape({dest:e,items:n.default.arrayOf(n.default.shape({dest:e,title:n.default.string})),title:n.default.string}).isRequired,onClick:n.default.func,pdf:a.isPdf.isRequired};r.default=function(r){return b.default.createElement(y.default.Consumer,null,function(t){return b.default.createElement(v.default.Consumer,null,function(e){return b.default.createElement(w,(0,i.default)({},t,e,r))})})}},{"./DocumentContext":42,"./OutlineContext":46,"./Ref":56,"./shared/propTypes":58,"./shared/utils":59,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/objectWithoutProperties":22,"@babel/runtime/helpers/possibleConstructorReturn":24,"@babel/runtime/helpers/slicedToArray":26,"@babel/runtime/regenerator":30,"prop-types":"prop-types",react:"react"}],48:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PageInternal=void 0;var s=a(e("@babel/runtime/helpers/extends")),o=a(e("@babel/runtime/regenerator")),l=a(e("@babel/runtime/helpers/asyncToGenerator")),u=a(e("@babel/runtime/helpers/classCallCheck")),c=a(e("@babel/runtime/helpers/createClass")),h=a(e("@babel/runtime/helpers/assertThisInitialized")),d=a(e("@babel/runtime/helpers/inherits")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),p=a(e("@babel/runtime/helpers/getPrototypeOf")),f=a(e("@babel/runtime/helpers/defineProperty")),g=n(e("react")),n=a(e("prop-types")),m=a(e("make-cancellable-promise")),b=a(e("make-event-props")),y=a(e("merge-class-names")),v=a(e("merge-refs")),_=a(e("./DocumentContext")),A=a(e("./PageContext")),x=a(e("./Message")),w=a(e("./Page/PageCanvas")),S=a(e("./Page/PageSVG")),C=a(e("./Page/TextLayer")),P=a(e("./Page/AnnotationLayer")),k=e("./shared/utils"),a=e("./shared/propTypes");function R(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach(function(e){(0,f.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function T(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(r);return t=n?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,t)}}var O=function(e){(0,d.default)(i,e);var n=T(i);function i(){var a;(0,u.default)(this,i);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=n.call.apply(n,[this].concat(t)),(0,f.default)((0,h.default)(a),"state",{page:null}),(0,f.default)((0,h.default)(a),"onLoadSuccess",function(){var e=a.props,t=e.onLoadSuccess,r=e.registerPage,e=a.state.page;t&&t((0,k.makePageCallback)(e,a.scale)),r&&r(a.pageIndex,a.ref)}),(0,f.default)((0,h.default)(a),"onLoadError",function(e){(0,k.errorOnDev)(e);var t=a.props.onLoadError;t&&t(e)}),(0,f.default)((0,h.default)(a),"loadPage",(0,l.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.pdf,r=a.getPageNumber()){e.next=4;break}return e.abrupt("return");case 4:return a.setState(function(e){return e.page?{page:null}:null}),e.prev=5,n=(0,m.default)(t.getPage(r)),a.runningTask=n,e.next=10,n.promise;case 10:n=e.sent,a.setState({page:n},a.onLoadSuccess),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),a.setState({page:!1}),a.onLoadError(e.t0);case 18:case"end":return e.stop()}},e,null,[[5,14]])}))),a}return(0,c.default)(i,[{key:"componentDidMount",value:function(){if(!this.props.pdf)throw new Error("Attempted to load a page, but no document was specified.");this.loadPage()}},{key:"componentDidUpdate",value:function(e){var t=this.props.pdf;(e.pdf&&t!==e.pdf||this.getPageNumber()!==this.getPageNumber(e))&&((t=this.props.unregisterPage)&&t(this.getPageIndex(e)),this.loadPage())}},{key:"componentWillUnmount",value:function(){var e=this.props.unregisterPage;e&&e(this.pageIndex),(0,k.cancelRunningTask)(this.runningTask)}},{key:"getPageIndex",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props;return(0,k.isProvided)(e.pageNumber)?e.pageNumber-1:(0,k.isProvided)(e.pageIndex)?e.pageIndex:null}},{key:"getPageNumber",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props;return(0,k.isProvided)(e.pageNumber)?e.pageNumber:(0,k.isProvided)(e.pageIndex)?e.pageIndex+1:null}},{key:"renderMainLayer",value:function(){var e=this.props,t=e.canvasRef;switch(e.renderMode){case"none":return null;case"svg":return g.default.createElement(S.default,{key:"".concat(this.pageKeyNoScale,"_svg")});default:return g.default.createElement(w.default,{key:"".concat(this.pageKey,"_canvas"),canvasRef:t})}}},{key:"renderTextLayer",value:function(){return this.props.renderTextLayer?g.default.createElement(C.default,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){return this.props.renderAnnotationLayer?g.default.createElement(P.default,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var e=this.props.children;return g.default.createElement(A.default.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),e)}},{key:"renderContent",value:function(){var e=this.pageNumber,t=this.props.pdf,r=this.state.page;if(!e){var n=this.props.noData;return g.default.createElement(x.default,{type:"no-data"},"function"==typeof n?n():n)}if(null===t||null===r){n=this.props.loading;return g.default.createElement(x.default,{type:"loading"},"function"==typeof n?n():n)}if(!1!==t&&!1!==r)return this.renderChildren();r=this.props.error;return g.default.createElement(x.default,{type:"error"},"function"==typeof r?r():r)}},{key:"render",value:function(){var e=this.pageNumber,t=this.props,r=t.className,t=t.inputRef;return g.default.createElement("div",(0,s.default)({className:(0,y.default)("react-pdf__Page",r),"data-page-number":e,ref:(0,v.default)(t,this.ref),style:{position:"relative"}},this.eventProps),this.renderContent())}},{key:"childContext",get:function(){var e=this.state.page;if(!e)return{};var t=this.props;return{customTextRenderer:t.customTextRenderer,onGetAnnotationsError:t.onGetAnnotationsError,onGetAnnotationsSuccess:t.onGetAnnotationsSuccess,onGetTextError:t.onGetTextError,onGetTextSuccess:t.onGetTextSuccess,onRenderAnnotationLayerError:t.onRenderAnnotationLayerError,onRenderAnnotationLayerSuccess:t.onRenderAnnotationLayerSuccess,onRenderError:t.onRenderError,onRenderSuccess:t.onRenderSuccess,page:e,renderInteractiveForms:t.renderInteractiveForms,rotate:this.rotate,scale:this.scale}}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var e=this.props.rotate;if((0,k.isProvided)(e))return e;e=this.state.page;return e?e.rotate:null}},{key:"scale",get:function(){var e=this.state.page;if(!e)return null;var t=this.props,r=t.scale,n=t.width,a=t.height,i=this.rotate,t=1,r=null===r?1:r;return(n||a)&&(i=e.getViewport({scale:1,rotation:i}),t=n?n/i.width:a/i.height),r*t}},{key:"eventProps",get:function(){var t=this;return(0,b.default)(this.props,function(){var e=t.state.page;return e&&(0,k.makePageCallback)(e,t.scale)})}},{key:"pageKey",get:function(){var e=this.state.page;return"".concat(e.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){var e=this.state.page;return"".concat(e.pageIndex,"/").concat(this.rotate)}}]),i}(g.PureComponent);(r.PageInternal=O).defaultProps={error:"Failed to load the page.",loading:"Loading page…",noData:"No page specified.",renderAnnotationLayer:!0,renderInteractiveForms:!1,renderMode:"canvas",renderTextLayer:!0,scale:1};e=n.default.oneOfType([n.default.func,n.default.node]);function L(t,r){return g.default.createElement(_.default.Consumer,null,function(e){return g.default.createElement(O,(0,s.default)({ref:r},e,t))})}O.propTypes=E(E({},a.eventProps),{},{children:n.default.node,className:a.isClassName,customTextRenderer:n.default.func,error:e,height:n.default.number,imageResourcesPath:n.default.string,inputRef:a.isRef,loading:e,noData:e,onGetTextError:n.default.func,onGetTextSuccess:n.default.func,onLoadError:n.default.func,onLoadSuccess:n.default.func,onRenderError:n.default.func,onRenderSuccess:n.default.func,pageIndex:a.isPageIndex,pageNumber:a.isPageNumber,pdf:a.isPdf,registerPage:n.default.func,renderAnnotationLayer:n.default.bool,renderInteractiveForms:n.default.bool,renderMode:a.isRenderMode,renderTextLayer:n.default.bool,rotate:a.isRotate,scale:n.default.number,unregisterPage:n.default.func,width:n.default.number}),r.default=g.default.forwardRef(L)},{"./DocumentContext":42,"./Message":44,"./Page/AnnotationLayer":49,"./Page/PageCanvas":50,"./Page/PageSVG":51,"./Page/TextLayer":52,"./PageContext":54,"./shared/propTypes":58,"./shared/utils":59,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/possibleConstructorReturn":24,"@babel/runtime/regenerator":30,"make-cancellable-promise":35,"make-event-props":36,"merge-class-names":37,"merge-refs":38,"prop-types":"prop-types",react:"react"}],49:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.AnnotationLayerInternal=void 0;var i=a(e("@babel/runtime/helpers/extends")),s=a(e("@babel/runtime/regenerator")),o=a(e("@babel/runtime/helpers/asyncToGenerator")),l=a(e("@babel/runtime/helpers/classCallCheck")),u=a(e("@babel/runtime/helpers/createClass")),c=a(e("@babel/runtime/helpers/assertThisInitialized")),h=a(e("@babel/runtime/helpers/inherits")),d=a(e("@babel/runtime/helpers/possibleConstructorReturn")),p=a(e("@babel/runtime/helpers/getPrototypeOf")),f=a(e("@babel/runtime/helpers/defineProperty")),g=n(e("react")),m=a(e("prop-types")),b=n(e("pdfjs-dist")),y=a(e("make-cancellable-promise")),v=a(e("../DocumentContext")),_=a(e("../PageContext")),A=e("../shared/utils"),e=e("../shared/propTypes");function x(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(r);return t=n?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,t)}}var w=function(e){(0,h.default)(i,e);var a=x(i);function i(){var r;(0,l.default)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=a.call.apply(a,[this].concat(t)),(0,f.default)((0,c.default)(r),"state",{annotations:null}),(0,f.default)((0,c.default)(r),"loadAnnotations",(0,o.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.page,e.prev=1,t=(0,y.default)(t.getAnnotations()),r.runningTask=t,e.next=6,t.promise;case 6:t=e.sent,r.setState({annotations:t},r.onLoadSuccess),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r.onLoadError(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))),(0,f.default)((0,c.default)(r),"onLoadSuccess",function(){var e=r.props.onGetAnnotationsSuccess,t=r.state.annotations;e&&e(t)}),(0,f.default)((0,c.default)(r),"onLoadError",function(e){r.setState({annotations:!1}),(0,A.errorOnDev)(e);var t=r.props.onGetAnnotationsError;t&&t(e)}),(0,f.default)((0,c.default)(r),"onRenderSuccess",function(){var e=r.props.onRenderAnnotationLayerSuccess;e&&e()}),(0,f.default)((0,c.default)(r),"onRenderError",function(e){(0,A.errorOnDev)(e);var t=r.props.onRenderAnnotationLayerError;t&&t(e)}),r}return(0,u.default)(i,[{key:"componentDidMount",value:function(){if(!this.props.page)throw new Error("Attempted to load page annotations, but no page was specified.");this.loadAnnotations()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.page,t=t.renderInteractiveForms;(e.page&&r!==e.page||t!==e.renderInteractiveForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){(0,A.cancelRunningTask)(this.runningTask)}},{key:"renderAnnotationLayer",value:function(){var e=this.state.annotations;if(e){var t=this.props,r=t.imageResourcesPath,n=t.linkService,a=t.page,i=t.renderInteractiveForms,t=this.viewport.clone({dontFlip:!0}),t={annotations:e,div:this.annotationLayer,imageResourcesPath:r,linkService:n,page:a,renderInteractiveForms:i,viewport:t};this.annotationLayer.innerHTML="";try{b.AnnotationLayer.render(t),this.onRenderSuccess()}catch(e){this.onRenderError(e)}}}},{key:"render",value:function(){var t=this;return g.default.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:function(e){t.annotationLayer=e}},this.renderAnnotationLayer())}},{key:"viewport",get:function(){var e=this.props,t=e.page,r=e.rotate,e=e.scale;return t.getViewport({scale:e,rotation:r})}}]),i}(g.PureComponent);(r.AnnotationLayerInternal=w).propTypes={imageResourcesPath:m.default.string,linkService:e.isLinkService.isRequired,onGetAnnotationsError:m.default.func,onGetAnnotationsSuccess:m.default.func,onRenderAnnotationLayerError:m.default.func,onRenderAnnotationLayerSuccess:m.default.func,page:e.isPage,renderInteractiveForms:m.default.bool,rotate:e.isRotate,scale:m.default.number};r.default=function(r){return g.default.createElement(v.default.Consumer,null,function(t){return g.default.createElement(_.default.Consumer,null,function(e){return g.default.createElement(w,(0,i.default)({},t,e,r))})})}},{"../DocumentContext":42,"../PageContext":54,"../shared/propTypes":58,"../shared/utils":59,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/possibleConstructorReturn":24,"@babel/runtime/regenerator":30,"make-cancellable-promise":35,"pdfjs-dist":39,"prop-types":"prop-types",react:"react"}],50:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return p.default.createElement(g.default.Consumer,null,function(e){return p.default.createElement(y,(0,i.default)({},e,t))})},r.PageCanvasInternal=void 0;var i=a(e("@babel/runtime/helpers/extends")),s=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),l=a(e("@babel/runtime/helpers/assertThisInitialized")),u=a(e("@babel/runtime/helpers/inherits")),c=a(e("@babel/runtime/helpers/possibleConstructorReturn")),h=a(e("@babel/runtime/helpers/getPrototypeOf")),d=a(e("@babel/runtime/helpers/defineProperty")),p=n(e("react")),n=a(e("prop-types")),f=a(e("merge-refs")),g=a(e("../PageContext")),m=e("../shared/utils"),e=e("../shared/propTypes");function b(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,h.default)(r);return t=n?(e=(0,h.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,t)}}var y=function(e){(0,u.default)(a,e);var n=b(a);function a(){var i;(0,s.default)(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i=n.call.apply(n,[this].concat(t)),(0,d.default)((0,l.default)(i),"onRenderSuccess",function(){i.renderer=null;var e=i.props,t=e.onRenderSuccess,r=e.page,e=e.scale;t&&t((0,m.makePageCallback)(r,e))}),(0,d.default)((0,l.default)(i),"onRenderError",function(e){var t;(0,m.isCancelException)(e)||((0,m.errorOnDev)(e),(t=i.props.onRenderError)&&t(e))}),(0,d.default)((0,l.default)(i),"drawPageOnCanvas",function(){var e=(0,l.default)(i).canvasLayer;if(!e)return null;var t=(0,l.default)(i),r=t.renderViewport,n=t.viewport,a=i.props,t=a.page,a=a.renderInteractiveForms;e.width=r.width,e.height=r.height,e.style.width="".concat(Math.floor(n.width),"px"),e.style.height="".concat(Math.floor(n.height),"px");a={get canvasContext(){return e.getContext("2d")},viewport:r,renderInteractiveForms:a};return i.cancelRenderingTask(),i.renderer=t.render(a),i.renderer.promise.then(i.onRenderSuccess).catch(i.onRenderError)}),i}return(0,o.default)(a,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.page;t.renderInteractiveForms!==e.renderInteractiveForms&&(r.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask(),this.canvasLayer&&(this.canvasLayer.width=0,this.canvasLayer.height=0,this.canvasLayer=null)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"render",value:function(){var t=this,e=this.props.canvasRef;return p.default.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:(0,f.default)(e,function(e){t.canvasLayer=e}),style:{display:"block",userSelect:"none"}})}},{key:"renderViewport",get:function(){var e=this.props,t=e.page,r=e.rotate,n=e.scale,e=(0,m.getPixelRatio)();return t.getViewport({scale:n*e,rotation:r})}},{key:"viewport",get:function(){var e=this.props,t=e.page,r=e.rotate,e=e.scale;return t.getViewport({scale:e,rotation:r})}}]),a}(p.PureComponent);(r.PageCanvasInternal=y).propTypes={canvasRef:e.isRef,onRenderError:n.default.func,onRenderSuccess:n.default.func,page:e.isPage.isRequired,renderInteractiveForms:n.default.bool,rotate:e.isRotate,scale:n.default.number}},{"../PageContext":54,"../shared/propTypes":58,"../shared/utils":59,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/possibleConstructorReturn":24,"merge-refs":38,"prop-types":"prop-types",react:"react"}],51:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return p.default.createElement(m.default.Consumer,null,function(e){return p.default.createElement(v,(0,i.default)({},e,t))})},r.PageSVGInternal=void 0;var i=a(e("@babel/runtime/helpers/extends")),s=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),l=a(e("@babel/runtime/helpers/assertThisInitialized")),u=a(e("@babel/runtime/helpers/inherits")),c=a(e("@babel/runtime/helpers/possibleConstructorReturn")),h=a(e("@babel/runtime/helpers/getPrototypeOf")),d=a(e("@babel/runtime/helpers/defineProperty")),p=n(e("react")),f=a(e("prop-types")),g=n(e("pdfjs-dist")),m=a(e("../PageContext")),b=e("../shared/utils"),e=e("../shared/propTypes");function y(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,h.default)(r);return t=n?(e=(0,h.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,t)}}var v=function(e){(0,u.default)(i,e);var a=y(i);function i(){var n;(0,s.default)(this,i);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=a.call.apply(a,[this].concat(t)),(0,d.default)((0,l.default)(n),"state",{svg:null}),(0,d.default)((0,l.default)(n),"onRenderSuccess",function(){n.renderer=null;var e=n.props,t=e.onRenderSuccess,r=e.page,e=e.scale;t&&t((0,b.makePageCallback)(r,e))}),(0,d.default)((0,l.default)(n),"onRenderError",function(e){var t;(0,b.isCancelException)(e)||((0,b.errorOnDev)(e),(t=n.props.onRenderError)&&t(e))}),(0,d.default)((0,l.default)(n),"renderSVG",function(){var r=n.props.page;return n.renderer=r.getOperatorList(),n.renderer.then(function(e){var t=new g.SVGGraphics(r.commonObjs,r.objs);n.renderer=t.getSVG(e,n.viewport).then(function(e){n.setState({svg:e},n.onRenderSuccess)}).catch(n.onRenderError)}).catch(n.onRenderError)}),(0,d.default)((0,l.default)(n),"drawPageOnContainer",function(e){var t,r=n.state.svg;e&&r&&(e.firstElementChild||e.appendChild(r),e=(t=n.viewport).width,t=t.height,r.setAttribute("width",e),r.setAttribute("height",t))}),n}return(0,o.default)(i,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"render",value:function(){var t=this,e=this.viewport,r=e.width,e=e.height;return p.default.createElement("div",{className:"react-pdf__Page__svg",ref:function(e){return t.drawPageOnContainer(e)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:r,height:e,userSelect:"none"}})}},{key:"viewport",get:function(){var e=this.props,t=e.page,r=e.rotate,e=e.scale;return t.getViewport({scale:e,rotation:r})}}]),i}(p.PureComponent);(r.PageSVGInternal=v).propTypes={onRenderError:f.default.func,onRenderSuccess:f.default.func,page:e.isPage.isRequired,rotate:e.isRotate,scale:f.default.number}},{"../PageContext":54,"../shared/propTypes":58,"../shared/utils":59,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/possibleConstructorReturn":24,"pdfjs-dist":39,"prop-types":"prop-types",react:"react"}],52:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return g.default.createElement(b.default.Consumer,null,function(e){return g.default.createElement(A,(0,s.default)({},e,t))})},r.TextLayerInternal=void 0;var s=a(e("@babel/runtime/helpers/extends")),o=a(e("@babel/runtime/regenerator")),l=a(e("@babel/runtime/helpers/asyncToGenerator")),u=a(e("@babel/runtime/helpers/classCallCheck")),c=a(e("@babel/runtime/helpers/createClass")),h=a(e("@babel/runtime/helpers/assertThisInitialized")),d=a(e("@babel/runtime/helpers/inherits")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),p=a(e("@babel/runtime/helpers/getPrototypeOf")),f=a(e("@babel/runtime/helpers/defineProperty")),g=n(e("react")),n=a(e("prop-types")),m=a(e("make-cancellable-promise")),b=a(e("../PageContext")),y=a(e("./TextLayerItem")),v=e("../shared/utils"),e=e("../shared/propTypes");function _(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(r);return t=n?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,t)}}var A=function(e){(0,d.default)(i,e);var a=_(i);function i(){var r;(0,u.default)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=a.call.apply(a,[this].concat(t)),(0,f.default)((0,h.default)(r),"state",{textItems:null}),(0,f.default)((0,h.default)(r),"loadTextItems",(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.page,e.prev=1,t=(0,m.default)(t.getTextContent()),r.runningTask=t,e.next=6,t.promise;case 6:t=e.sent,t=t.items,r.setState({textItems:t},r.onLoadSuccess),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.onLoadError(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}))),(0,f.default)((0,h.default)(r),"onLoadSuccess",function(){var e=r.props.onGetTextSuccess,t=r.state.textItems;e&&e(t)}),(0,f.default)((0,h.default)(r),"onLoadError",function(e){r.setState({textItems:!1}),(0,v.errorOnDev)(e);var t=r.props.onGetTextError;t&&t(e)}),r}return(0,c.default)(i,[{key:"componentDidMount",value:function(){if(!this.props.page)throw new Error("Attempted to load page text content, but no page was specified.");this.loadTextItems()}},{key:"componentDidUpdate",value:function(e){var t=this.props.page;e.page&&t!==e.page&&this.loadTextItems()}},{key:"componentWillUnmount",value:function(){(0,v.cancelRunningTask)(this.runningTask)}},{key:"renderTextItems",value:function(){var e=this.state.textItems;return e?e.map(function(e,t){return g.default.createElement(y.default,(0,s.default)({key:t,itemIndex:t},e))}):null}},{key:"render",value:function(){var e=this.unrotatedViewport,t=this.rotate;return g.default.createElement("div",{className:"react-pdf__Page__textContent",style:{position:"absolute",top:"50%",left:"50%",width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),color:"transparent",transform:"translate(-50%, -50%) rotate(".concat(t,"deg)"),WebkitTransform:"translate(-50%, -50%) rotate(".concat(t,"deg)"),pointerEvents:"none"}},this.renderTextItems())}},{key:"unrotatedViewport",get:function(){var e=this.props,t=e.page,e=e.scale;return t.getViewport({scale:e})}},{key:"rotate",get:function(){var e=this.props,t=e.page;return e.rotate-t.rotate}}]),i}(g.PureComponent);(r.TextLayerInternal=A).propTypes={onGetTextError:n.default.func,onGetTextSuccess:n.default.func,page:e.isPage.isRequired,rotate:e.isRotate,scale:n.default.number}},{"../PageContext":54,"../shared/propTypes":58,"../shared/utils":59,"./TextLayerItem":53,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/possibleConstructorReturn":24,"@babel/runtime/regenerator":30,"make-cancellable-promise":35,"prop-types":"prop-types",react:"react"}],53:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return m.default.createElement(b.default.Consumer,null,function(e){return m.default.createElement(v,(0,i.default)({},e,t))})},r.TextLayerItemInternal=void 0;var i=a(e("@babel/runtime/helpers/extends")),o=a(e("@babel/runtime/helpers/slicedToArray")),l=a(e("@babel/runtime/regenerator")),s=a(e("@babel/runtime/helpers/asyncToGenerator")),u=a(e("@babel/runtime/helpers/classCallCheck")),c=a(e("@babel/runtime/helpers/createClass")),h=a(e("@babel/runtime/helpers/assertThisInitialized")),d=a(e("@babel/runtime/helpers/inherits")),p=a(e("@babel/runtime/helpers/possibleConstructorReturn")),f=a(e("@babel/runtime/helpers/getPrototypeOf")),g=a(e("@babel/runtime/helpers/defineProperty")),m=n(e("react")),n=a(e("prop-types")),b=a(e("../PageContext")),e=e("../shared/propTypes");function y(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,f.default)(r);return t=n?(e=(0,f.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,p.default)(this,t)}}var v=function(e){(0,d.default)(i,e);var t,r,a=y(i);function i(){var r;(0,u.default)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=a.call.apply(a,[this].concat(t)),(0,g.default)((0,h.default)(r),"getElementWidth",function(e){var t=(0,h.default)(r).sideways;return e.getBoundingClientRect()[t?"height":"width"]}),r}return(0,c.default)(i,[{key:"componentDidMount",value:function(){this.alignTextItem()}},{key:"componentDidUpdate",value:function(){this.alignTextItem()}},{key:"getFontData",value:(r=(0,s.default)(l.default.mark(function e(t){var r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.page,e.next=3,new Promise(function(e){r.commonObjs.get(t,e)});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"alignTextItem",value:(t=(0,s.default)(l.default.mark(function e(){var t,r,n,a,i,s,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.item){e.next=3;break}return e.abrupt("return");case 3:return t.style.transform="",i=this.props,r=i.fontName,n=i.scale,a=i.width,t.style.fontFamily="".concat(r,", sans-serif"),e.next=8,this.getFontData(r);case 8:o=e.sent,s=o?o.fallbackName:"sans-serif",t.style.fontFamily="".concat(r,", ").concat(s),i=a*n,s=this.getElementWidth(t),s="scaleX(".concat(i/s,")"),(o=o?o.ascent:0)&&(s+=" translateY(".concat(100*(1-o),"%)")),t.style.transform=s,t.style.WebkitTransform=s;case 18:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.fontSize,r=this.top,n=this.left,a=this.props,i=a.customTextRenderer,s=a.scale,a=a.str;return m.default.createElement("span",{ref:function(e){t.item=e},style:{height:"1em",fontFamily:"sans-serif",fontSize:"".concat(e*s,"px"),position:"absolute",top:"".concat(r*s,"px"),left:"".concat(n*s,"px"),transformOrigin:"left bottom",whiteSpace:"pre",pointerEvents:"all"}},i?i(this.props):a)}},{key:"unrotatedViewport",get:function(){var e=this.props,t=e.page,e=e.scale;return t.getViewport({scale:e})}},{key:"rotate",get:function(){var e=this.props,t=e.page;return e.rotate-t.rotate}},{key:"sideways",get:function(){return this.rotate%180!=0}},{key:"defaultSideways",get:function(){return this.unrotatedViewport.rotation%180!=0}},{key:"fontSize",get:function(){var e=this.props.transform,t=this.defaultSideways,r=(0,o.default)(e,2),e=r[0],r=r[1];return t?r:e}},{key:"top",get:function(){var e=this.props.transform,t=this.unrotatedViewport,r=this.defaultSideways,n=(0,o.default)(e,6),a=n[2],i=n[3],s=n[4],e=n[5],n=(0,o.default)(t.viewBox,4),t=n[1],n=n[3];return r?s+a+t:n-(e+i)}},{key:"left",get:function(){var e=this.props.transform,t=this.unrotatedViewport,r=this.defaultSideways,n=(0,o.default)(e,6),e=n[4],n=n[5],t=(0,o.default)(t.viewBox,1)[0];return r?n-t:e-t}}]),i}(m.PureComponent);(r.TextLayerItemInternal=v).propTypes={customTextRenderer:n.default.func,fontName:n.default.string.isRequired,itemIndex:n.default.number.isRequired,page:e.isPage.isRequired,rotate:e.isRotate,scale:n.default.number,str:n.default.string.isRequired,transform:n.default.arrayOf(n.default.number).isRequired,width:n.default.number.isRequired}},{"../PageContext":54,"../shared/propTypes":58,"@babel/runtime/helpers/assertThisInitialized":8,"@babel/runtime/helpers/asyncToGenerator":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/defineProperty":12,"@babel/runtime/helpers/extends":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/helpers/possibleConstructorReturn":24,"@babel/runtime/helpers/slicedToArray":26,"@babel/runtime/regenerator":30,"prop-types":"prop-types",react:"react"}],54:[function(e,t,r){arguments[4][42][0].apply(r,arguments)},{dup:42,react:"react"}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={NEED_PASSWORD:1,INCORRECT_PASSWORD:2}},{}],56:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass"));r.default=function(){function r(e){var t=e.num,e=e.gen;(0,a.default)(this,r),this.num=t,this.gen=e}return(0,i.default)(r,[{key:"toString",value:function(){var e="".concat(this.num,"R");return 0!==this.gen&&(e+=this.gen),e}}]),r}()},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":11,"@babel/runtime/helpers/interopRequireDefault":16}],57:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),a=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Document",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Outline",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Page",{enumerable:!0,get:function(){return o.default}}),r.pdfjs=void 0;a=a(e("pdfjs-dist"));r.pdfjs=a;var i=n(e("./Document")),s=n(e("./Outline")),o=n(e("./Page")),e=e("./shared/utils");e.isLocalFileSystem&&(0,e.warnOnDev)("You are running React-PDF from your local file system. PDF.js Worker may fail to load due to browser's security policies. If you're on Google Chrome, you can use --allow-file-access-from-files flag for debugging purposes."),a.GlobalWorkerOptions.workerSrc="pdf.worker.js"},{"./Document":41,"./Outline":45,"./Page":48,"./shared/utils":59,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"pdfjs-dist":39}],58:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isRotate=r.isRenderMode=r.isRef=r.isPdf=r.isPageNumber=r.isPageIndex=r.isPage=r.isLinkTarget=r.isLinkService=r.isFile=r.isClassName=r.eventProps=void 0;var a,i=n(e("@babel/runtime/helpers/typeof")),s=n(e("@babel/runtime/helpers/toConsumableArray")),o=n(e("prop-types")),l=e("make-event-props"),u=e("./utils"),e=n(e("../LinkService")),s=(a={},[].concat((0,s.default)(l.mouseEvents),(0,s.default)(l.touchEvents),(0,s.default)(l.keyboardEvents)).forEach(function(e){a[e]=o.default.func}),a);r.eventProps=s;l=[o.default.string,o.default.instanceOf(ArrayBuffer),o.default.shape({data:o.default.object,httpHeaders:o.default.object,range:o.default.object,url:o.default.string,withCredentials:o.default.bool})];"undefined"!=typeof File&&l.push(o.default.instanceOf(File)),"undefined"!=typeof Blob&&l.push(o.default.instanceOf(Blob));s=o.default.oneOfType([o.default.string,o.default.arrayOf(o.default.string)]);r.isClassName=s;l=o.default.oneOfType(l);r.isFile=l;e=o.default.instanceOf(e.default);r.isLinkService=e;e=o.default.oneOf(["_self","_blank","_parent","_top"]);r.isLinkTarget=e;e=o.default.shape({_transport:o.default.shape({fontLoader:o.default.object.isRequired}).isRequired,commonObjs:o.default.shape({_objs:o.default.object.isRequired}).isRequired,getAnnotations:o.default.func.isRequired,getTextContent:o.default.func.isRequired,getViewport:o.default.func.isRequired,render:o.default.func.isRequired});r.isPage=e;r.isPageIndex=function(e,t,r){var n=e[t],a=e.pageNumber,e=e.pdf;if(!(0,u.isDefined)(e))return null;if((0,u.isDefined)(n)){if("number"!=typeof n)return new Error("`".concat(t,"` of type `").concat((0,i.default)(n),"` supplied to `").concat(r,"`, expected `number`."));if(n<0)return new Error("Expected `".concat(t,"` to be greater or equal to 0."));e=e.numPages;if(e<n+1)return new Error("Expected `".concat(t,"` to be less or equal to ").concat(e-1,"."))}else if(!(0,u.isDefined)(a))return new Error("`".concat(t,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null};r.isPageNumber=function(e,t,r){var n=e[t],a=e.pageIndex,e=e.pdf;if(!(0,u.isDefined)(e))return null;if((0,u.isDefined)(n)){if("number"!=typeof n)return new Error("`".concat(t,"` of type `").concat((0,i.default)(n),"` supplied to `").concat(r,"`, expected `number`."));if(n<1)return new Error("Expected `".concat(t,"` to be greater or equal to 1."));e=e.numPages;if(e<n)return new Error("Expected `".concat(t,"` to be less or equal to ").concat(e,"."))}else if(!(0,u.isDefined)(a))return new Error("`".concat(t,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null};e=o.default.oneOfType([o.default.shape({getDestination:o.default.func.isRequired,getOutline:o.default.func.isRequired,getPage:o.default.func.isRequired,numPages:o.default.number.isRequired}),o.default.bool]);r.isPdf=e;e=o.default.oneOfType([o.default.func,o.default.shape({current:o.default.any})]);r.isRef=e;e=o.default.oneOf(["canvas","none","svg"]);r.isRenderMode=e;e=o.default.oneOf([0,90,180,270]);r.isRotate=e},{"../LinkService":43,"./utils":59,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/toConsumableArray":27,"@babel/runtime/helpers/typeof":28,"make-event-props":36,"prop-types":"prop-types"}],59:[function(h,e,d){!function(c){!function(){"use strict";var e=h("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0}),d.loadFromFile=d.isCancelException=d.makePageCallback=d.cancelRunningTask=d.displayCORSWarning=d.errorOnDev=d.warnOnDev=d.getPixelRatio=d.dataURItoByteString=d.isDataURI=d.isFile=d.isBlob=d.isArrayBuffer=d.isString=d.isProvided=d.isDefined=d.isProduction=d.isLocalFileSystem=d.isBrowser=void 0;var t=e(h("@babel/runtime/helpers/slicedToArray")),r="undefined"!=typeof window,n=(d.isBrowser=r)&&"file:"===window.location.protocol;d.isLocalFileSystem=n;var i="production"===c.env.NODE_ENV;d.isProduction=i;function a(e){return void 0!==e}d.isDefined=a;d.isProvided=function(e){return a(e)&&null!==e};function s(e){return"string"==typeof e}d.isString=s;d.isArrayBuffer=function(e){return e instanceof ArrayBuffer};d.isBlob=function(e){if(!r)throw new Error("Attempted to check if a variable is a Blob on a non-browser environment.");return e instanceof Blob};d.isFile=function(e){if(!r)throw new Error("Attempted to check if a variable is a File on a non-browser environment.");return e instanceof File};function o(e){return s(e)&&/^data:/.test(e)}d.isDataURI=o;d.dataURItoByteString=function(e){if(!o(e))throw new Error("Invalid data URI.");e=e.split(";"),e=(0,t.default)(e,2)[1];return 0===e.indexOf("base64")?atob(e.slice(7)):unescape(e)};d.getPixelRatio=function(){return r&&window.devicePixelRatio||1};function l(e){if(!i){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];(t=console)[e].apply(t,n)}}function u(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.apply(void 0,["warn"].concat(t))}d.warnOnDev=u;d.errorOnDev=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.apply(void 0,["error"].concat(t))};d.displayCORSWarning=function(){n&&u("Loading PDF as base64 strings/URLs might not work on protocols other than HTTP/HTTPS. On Google Chrome, you can use --allow-file-access-from-files flag for debugging purposes.")};d.cancelRunningTask=function(e){e&&e.cancel&&e.cancel()};d.makePageCallback=function(e,t){return Object.defineProperty(e,"width",{get:function(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get:function(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),e};d.isCancelException=function(e){return"RenderingCancelledException"===e.name};d.loadFromFile=function(n){return new Promise(function(e,t){var r=new FileReader;return r.onload=function(){return e(new Uint8Array(r.result))},r.onerror=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case e.target.error.NOT_READABLE_ERR:return t(new Error("Error while reading a file: File not readable."));case e.target.error.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case e.target.error.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n),null})}}.call(this)}.call(this,h("_process"))},{"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/slicedToArray":26,_process:40}],60:[function(e,t,r){t=function(s){"use strict";var l,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",a=t.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function o(e,t,r,n){var a,i,s,o,t=t&&t.prototype instanceof m?t:m,t=Object.create(t.prototype),n=new C(n||[]);return t._invoke=(a=e,i=r,s=n,o=h,function(e,t){if(o===p)throw new Error("Generator is already running");if(o===f){if("throw"===e)throw t;return k()}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r){var n=function e(t,r){var n=t.iterator[r.method];if(n===l){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var n=c(n,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,g;n=n.arg;if(!n)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g;{if(!n.done)return n;r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l)}r.delegate=null;return g}(r,s);if(n){if(n===g)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(o===h)throw o=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o=p;n=c(a,i,s);if("normal"===n.type){if(o=s.done?f:d,n.arg!==g)return{value:n.arg,done:s.done}}else"throw"===n.type&&(o=f,s.method="throw",s.arg=n.arg)}}),t}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}s.wrap=o;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",g={};function m(){}function b(){}function y(){}var v={};v[n]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(P([])));t&&t!==e&&u.call(t,n)&&(v=t);var _=y.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(s,o){var t;this._invoke=function(r,n){function e(){return new o(function(e,t){!function t(e,r,n,a){e=c(s[e],s,r);if("throw"!==e.type){var i=e.arg;return(r=i.value)&&"object"==typeof r&&u.call(r,"__await")?o.resolve(r.__await).then(function(e){t("next",e,n,a)},function(e){t("throw",e,n,a)}):o.resolve(r).then(function(e){i.value=e,n(i)},function(e){return t("throw",e,n,a)})}a(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function P(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function e(){for(;++r<t.length;)if(u.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e};return e.next=e}}return{next:k}}function k(){return{value:l,done:!0}}return((b.prototype=_.constructor=y).constructor=b).displayName=i(y,a,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,i(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},s.awrap=function(e){return{__await:e}},A(x.prototype),x.prototype[r]=function(){return this},s.AsyncIterator=x,s.async=function(e,t,r,n,a){void 0===a&&(a=Promise);var i=new x(o(e,t,r,n),a);return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},A(_),i(_,a,"Generator"),_[n]=function(){return this},_.toString=function(){return"[object Generator]"},s.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t],i=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var s=u.call(a,"catchLoc"),o=u.call(a,"finallyLoc");if(s&&o){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}var i=(a=a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc?null:a)?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,a=r.completion;return"throw"===a.type&&(n=a.arg,S(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),g}},s}("object"==typeof t?t.exports:{});try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},{}]},{},[4])(4)});