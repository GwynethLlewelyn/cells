!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioMaps=e()}(function(){return function r(o,a,i){function u(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,a,i)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<i.length;e++)u(i[e]);return u}({1:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=c(e("pydio")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("react")),o=(e("redux"),e("react-redux")),u=(e("material-ui"),c(e("./map")));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(n);return e=r?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=r.default.requireLib("hoc").EditorActions,r=(0,o.connect)(null,r)(r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,a["default"].Component);var e,t,n,r=s(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).state={},e}return e=o,(t=[{key:"componentDidMount",value:function(){var e=this.props.editorModify;this.props.isActive&&e({fixedToolbar:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.editorModify;e.isActive&&t({fixedToolbar:!1})}},{key:"onMapLoaded",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;t?this.setState({error:t}):(e.addControl(new OpenLayers.Control.PanZoomBar({position:new OpenLayers.Pixel(5,5)})),e.addControl(new OpenLayers.Control.Navigation),e.addControl(new OpenLayers.Control.ScaleLine),e.addControl(new OpenLayers.Control.MousePosition({element:this.input,numDigits:4,prefix:"".concat(MessageHash["openlayer.3"],": ")})))}},{key:"render",value:function(){var n=this,e=this.state.error,t=this.props,r=t.style,t=t.node;if(e)return a.default.createElement("div",{style:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1}},a.default.createElement("div",{style:{margin:"auto",color:"white"}},e));return a.default.createElement(u.default,{ref:"mapObject",style:r,centerNode:t,onMapLoaded:function(e,t){return n.onMapLoaded(e,t)}})}}])&&f(e.prototype,t),n&&f(e,n),o}())||r;n.default=r,t.exports=n.default},{"./map":3,"material-ui":"material-ui",pydio:"pydio",react:"react","react-redux":"react-redux",redux:"redux"}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"OLMap",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"Editor",{enumerable:!0,get:function(){return o.default}});var r=a(e("./map")),o=a(e("./editor"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./editor":1,"./map":3}],3:[function(r,d,b){!function(y){!function(){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(r("react")),u=(e=r("prop-types"))&&e.__esModule?e:{default:e};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function t(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function c(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(n);return e=r?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}OpenLayers.ImgPath="plug/editor.openlayer/openlayer/img/";var n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,a["default"].Component);var e,t,n,r=s(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,n=[{key:"propTypes",get:function(){return{centerPoint:u.default.object,centerNode:u.default.instanceOf(AjxpNode),centerSRS:u.default.string,defaultControls:u.default.bool,onMapLoaded:u.default.func}}},{key:"defaultProps",get:function(){return{centerSRS:"EPSG:4326",defaultControls:!0}}}],(t=[{key:"attachMap",value:function(){this.state&&this.state.map&&this.state.map.destroy();var e=this.props,t=e.centerPoint,n=e.centerNode,r=e.centerSRS,o=e.onMapLoaded,a=e.useDefaultControls,e=[{type:"OSM"}];if(t?(u=t.latitude,i=t.longitude):!n||(n=n.getMetadata()).has("GeoLocation")&&(u=parseFloat(n.get("GeoLocation").lat),i=parseFloat(n.get("GeoLocation").lon)),!u||!i)return"function"==typeof o&&o(null,"Could not find latitude / longitude");var i=new OpenLayers.LonLat(i,u),u=r,r=e.filter(function(e){return"Google"===e.type&&!(window.google&&window.google.maps)});r!==e&&(u=0<r?"EPSG:900913":"EPSG:4326");var l=new OpenLayers.Map(this.refs.target,{projection:u,controls:a?[]:null}),c=[];e.map(function(e){var t,n=e.type,r=e.name,o=e.style,a=e.tile,i=e.wms_url,e=e.google_type;if("WMS"==n)t=new OpenLayers.Layer.WMS(a?"Tiled":"Single Tile",i,{layers:r,styles:o,tiled:a,tilesOrigin:a?l.maxExtent.left+","+l.maxExtent.bottom:null},null);else if("OSM"==n)t=new OpenLayers.Layer.OSM;else if("Google"==n)switch(e){case"physical":t=new OpenLayers.Layer.Google("Google Physical",{type:window.google.maps.MapTypeId.TERRAIN});break;case"streets":t=new OpenLayers.Layer.Google("Google Streets",{numZoomLevels:20});break;case"hybrid":t=new OpenLayers.Layer.Google("Google Hybrid",{type:y.google.maps.MapTypeId.HYBRID,numZoomLevels:20});break;default:t=new OpenLayers.Layer.Google("Google Satellite",{type:y.google.maps.MapTypeId.SATELLITE,numZoomLevels:22})}t&&(l.addLayer(t),c.push(t))});u=i.transform(new OpenLayers.Projection("EPSG:4326"),l.getProjectionObject()),a=new OpenLayers.Layer.Markers("Markers");l.addLayer(a);e=new OpenLayers.Size(22,22),i=new OpenLayers.Pixel(0,-e.h),i=new OpenLayers.Icon("plug/editor.openlayer/res/services.png",e,i);a.addMarker(new OpenLayers.Marker(u,i));try{l.setCenter(u,10)}catch(e){console&&console.error(e)}this.setState({map:l,layers:c}),setTimeout(function(){return l.updateSize()},300),"function"==typeof o&&o(l)}},{key:"componentDidMount",value:function(){this.attachMap()}},{key:"componentWillReceiveProps",value:function(e){e.centerNode!==this.props.centerNode&&this.attachMap()}},{key:"componentWillUnmount",value:function(){this.state&&this.state.map&&this.state.map.destroy()}},{key:"render",value:function(){var e=c({width:"100%",height:"100%"},this.props.style);return a.default.createElement("div",{style:e,ref:"target"})}}])&&f(e.prototype,t),n&&f(e,n),o}();b.default=n,d.exports=b.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"prop-types":"prop-types",react:"react"}]},{},[2])(2)});